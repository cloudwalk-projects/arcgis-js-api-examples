// -*- ecoding=utf-8 -*-
// Name		:x-lib 
// Version	:0.0.6 
// Author	:ruanyu@live.com 
// Date		:2017-05-09

define("src/base/lang",["require","exports"],function(a,b){"use strict";for(var c={type:function(a){try{return void 0===a?"undefined":null===a?"null":/\[object ([A-Za-z]+)\]/.exec(Object.prototype.toString.call(a))[1].toLowerCase()}catch(a){if(a instanceof RangeError)return"...";throw a}},isArray:function(a){},isFunction:function(a){},isString:function(a){},isNumber:function(a){},isUndefined:function(a){},extend:function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=arguments[0]||{};if(arguments.length>1)for(var e=1,f=arguments.length;e<f;e++)for(var g in arguments[e])d[g]=arguments[e][g];return d},clone:function(a){return c.extend({},a)}},d=["Array","Function","String","Number","Undefined"],e=0;e<d.length;e++)!function(a){c["is"+d[a]]=function(b){return c.type(b)===d[a].toLowerCase()}}(e);return c}),define("src/base/kernel",["require","exports","src/base/lang"],function(require,exports,lang){"use strict";var locales={"en-us":"en-us","zh-cn":"zh-cn"},defaultLocaleName="zh-cn",self={global:function(){return"undefined"!=typeof window?window:global},isBrower:function(){return"window"===lang.type(self.global())},isNode:function(){return"global"===lang.type(self.global())},error:function(a){throw new Error(a)},scriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",jsonFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,quickExpr:/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,isSimple:/^.[^:#\[\.,]*$/,noop:function(){},register:function(a){for(var b=a.split("."),c=self.global(),d=0;d<b.length;d++)lang.isUndefined(c[b[d]])&&(c[b[d]]={}),c=c[b[d]];return c},invoke:function(a,b){var c=Array.prototype.slice.call(arguments).slice(2);return b.apply(a,c)},call:function(anything){if(!lang.isUndefined(anything))try{if(lang.isFunction(anything)){var args=Array.prototype.slice.call(arguments).slice(1);return anything.apply(this,args)}if("string"===lang.type(anything)&&""!==anything)return eval(anything)}catch(a){console.error(a)}},guid:{create:function(a,b){void 0===a&&(a="-");var c="";a=a.toLowerCase();for(var d=0;d<8;d++)c+=(65536*(1+Math.random())|0).toString(16).substring(1),d>0&&d<5&&"-"===a&&(c+="-");return c=b?c.toUpperCase():c.toLowerCase()}},randomText:{create:function(a,b){void 0===a&&(a=8),void 0===b&&(b="0123456789abcdefghijklmnopqrstuvwyzx");for(var c="",d=0;d<a;d++)c+=b.charAt(Math.ceil(1e8*Math.random())%b.length);return c}},nonce:function(a){return void 0===a&&(a=6),Number(self.randomText.create(1,"123456789")+self.randomText.create(a-1,"0123456789"))},serialize:function(a){var b=[],c=a.length;if(lang.isArray(a))for(var d=0;d<c;d++)b.push(a[d].name+"="+encodeURIComponent(a[d].value));else for(var e in a)b.push(e+"="+encodeURIComponent(a[e]));return b.join("&")},each:function(a,b){var c,d=0,e=a.length;if(lang.isArray(a))for(var f=a[0];d<e&&0!=b.call(f,d,f);f=a[++d]);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a},toXML:function(a,b){if(void 0===b&&(b=!1),"xmldocument"===lang.type(a))return a;if(!lang.isUndefined(a)&&""!==a){var c,d=self.global();try{if(d.DOMParser){var e=new DOMParser;c=e.parseFromString(a,"text/xml")}else d.ActiveXObject&&(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(d){c=void 0,b||self.debug.error('{"method":"x.toXML(text)", "arguments":{"text":"'+a+'"}')}return c&&!c.getElementsByTagName("parsererror").length||(c=void 0,b||self.debug.error('{"method":"x.toXML(text)", "arguments":{"text":"'+a+'"}')),c}},toJSON:function(a){if("object"===lang.type(a))return a;if(!lang.isUndefined(a)&&""!==a){var b=arguments[1];try{return JSON?JSON.parse(a):Function("return "+a)()}catch(c){try{return Function("return "+a)()}catch(c){return void(b||self.debug.error('{"method":"x.toJSON(text)", "arguments":{"text":"'+a+'"}'))}}}},toSafeJSON:function(a){for(var b="",c=0;c<a.length;c++){var d=a.substr(c,1);'"'===d||"'"===d||"\\"===d||"/"===d?(b+="\\",b+=d):b+="\b"===d?"\\b":"\f"===d?"\\f":"\n"===d?"\\n":"\r"===d?"\\r":"\t"===d?"\\t":d}return b},toSafeLike:function(a){return a.replace(/\[/g,"[[]").replace(/%/g,"[%]").replace(/_/g,"[_]")},cdata:function(a){return"<![CDATA["+a+"]]>"},camelCase:function(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})},paddingZero:function(a,b){return(Array(b).join("0")+a).slice(-b)},formatLocale:function(a){var b=locales[a.toLowerCase()];return b||"zh-cn"},getFriendlyName:function(a){return self.camelCase(("x_"+a).replace(/[\#\$\.\/\\\:\?\=]/g,"_").replace(/[-]+/g,"_"))},newStringBuilder:function(){return{innerArray:[],append:function(a){this.innerArray[this.innerArray.length]=a},toString:function(){return this.innerArray.join("")}}},timers:{},newTimer:function(a,b){return{name:"timer$"+Math.ceil(9e8*Math.random()+1e8),interval:1e3*a,callback:b,run:function(){this.callback(this)},start:function(){var a=self.timers[this.name]=this;this.timerId=setInterval(function(){self.timers[a.name].run()},this.interval)},stop:function(){clearInterval(this.timerId)}}},debug:{log:function(a){lang.isUndefined(console)||console.log(a)},warn:function(a){lang.isUndefined(console)||console.warn(a)},error:function(a){lang.isUndefined(console)||console.error(a)},assert:function(a){lang.isUndefined(console)||console.assert(a)},time:function(a){lang.isUndefined(console)||console.time(a)},timeEnd:function(a){lang.isUndefined(console)||console.timeEnd(a)},timestamp:function(){var a=new Date;return"{yyyy-MM-dd HH:mm:ss.fff}".replace(/yyyy/,a.getFullYear().toString()).replace(/MM/,a.getMonth()+1>9?(a.getMonth()+1).toString():"0"+(a.getMonth()+1)).replace(/dd|DD/,a.getDate()>9?a.getDate().toString():"0"+a.getDate()).replace(/hh|HH/,a.getHours()>9?a.getHours().toString():"0"+a.getHours()).replace(/mm/,a.getMinutes()>9?a.getMinutes().toString():"0"+a.getMinutes()).replace(/ss|SS/,a.getSeconds()>9?a.getSeconds().toString():"0"+a.getSeconds()).replace(/fff/g,a.getMilliseconds()>99?a.getMilliseconds().toString():a.getMilliseconds()>9?"0"+a.getMilliseconds():"00"+a.getMilliseconds())}}};return self}),define("src/base/declare",["require","exports","src/base/lang","src/base/kernel"],function(a,b,c,d){"use strict";function e(a,b){return function(){var c,d=arguments,e=d,f=d[0];b&&(f&&(c=f.preamble)&&(e=c.apply(this,e)||e),(c=this.preamble)&&c.apply(this,e)),a&&a.apply(this,d),(c=this.postscript)&&c.apply(this,d)}}var f=Object.prototype;f.toString;return function(a,b,g){var a,b,g;1==arguments.length?(a=null,b=null,g=arguments[0]||{}):2==arguments.length?c.isString(arguments[0])?(a=arguments[0]||{},b=null,g=arguments[1]||{}):(a=null,b=arguments[0]||{},g=arguments[1]||{}):3==arguments.length&&(a=arguments[0],b=arguments[1]||{},g=arguments[2]||{});var h,i,j;if(j=function(){},h={},c.isArray(b))for(var k=0;k<b.length;k++)c.extend(h,b[k]);else null!=b&&c.extend(h,b);for(var l in g)j.prototype[l]=g[l],c.extend(h,g);if(i=g.constructor,i!==f.constructor&&(i.nom="constructor",h.constructor=i),j=e(g.constructor,i),j._meta={hidden:g,ctor:g.constructor},j.superclass=b&&b.prototype,j.prototype=h,h.constructor=j,a){j.prototype.declaredClass=a;var m=a.split("."),n=m.pop();(0==m.length?d.global():d.register(m.join(".")))[n]=j}return j}}),define("src/collections/Hashtable",["require","exports","src/base/declare"],function(a,b,c){"use strict";return c({constructor:function(){this.innerArray=[]},clear:function(){this.innerArray=[]},exist:function(a){for(var b=0;b<this.innerArray.length;b++)if(this.innerArray[b].key===a)return!0;return!1},index:function(a){for(var b=0;b<this.innerArray.length;b++)if(this.innerArray[b].key===a)return b;return-1},add:function(a,b){if(1===arguments.length)for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");this.innerArray.push({key:e[0],value:e[1]})}else{if(this.exist(a))throw"aleardy exist same key["+a+"]";this.innerArray.push({key:a,value:b})}},remove:function(a){var b=this.index(a);b>-1&&this.innerArray.splice(b,1)},get:function(a){for(var b=0;b<this.innerArray.length;b++)if(this.innerArray[b].key===a)return this.innerArray[b].value;return null},set:function(a,b){for(var c=0;c<this.innerArray.length;c++)this.innerArray[c].key===a&&(this.innerArray[c].value=b)},size:function(){return this.innerArray.length}})}),define("src/collections/Queue",["require","exports"],function(a,b){"use strict";var c={create:function(){return c.constructor()},constructor:function(){return{innerArray:[],push:function(a){this.innerArray.push(a)},pop:function(){if(0===this.innerArray.length)return null;for(var a=this.innerArray[0],b=0;b<this.innerArray.length-1;b++)this.innerArray[b]=this.innerArray[b+1];return this.innerArray.length=this.innerArray.length-1,a},peek:function(){return 0===this.innerArray.length?null:this.innerArray[0]},clear:function(){this.innerArray.length=0},size:function(){return this.innerArray.length},isEmpty:function(){return 0===this.innerArray.length}}}};return c}),define("src/collections/Stack",["require","exports"],function(a,b){"use strict";var c={create:function(){return c.constructor()},constructor:function(){return{innerArray:[],push:function(a){this.innerArray[this.innerArray.length]=a},pop:function(){if(0===this.innerArray.length)return null;var a=this.innerArray[this.innerArray.length-1];return this.innerArray.length--,a},peek:function(){return 0===this.innerArray.length?null:this.innerArray[this.innerArray.length-1]},clear:function(){this.innerArray.length=0},size:function(){return this.innerArray.length},isEmpty:function(){return 0===this.innerArray.length}}}};return c}),define("src/base",["require","exports","src/base/lang","src/base/kernel","src/base/declare","src/collections/Hashtable","src/collections/Queue","src/collections/Stack"],function(a,b,c,d,e,f,g,h){"use strict";var i=c.extend({},c,d,{declare:e,query:function(a){return 0==c.type(a).indexOf("html")?a:"string"==c.type(a)?document.querySelector(a):void 0},queryAll:function(a){if(0==c.type(a).indexOf("html")){var b=[];return b.push(a),b}if("string"==c.type(a))return document.querySelectorAll(a)},collections:{}}),j={Hashtable:f,Queue:g,Stack:h};return c.extend(i.collections,j),i}),define("src/event",["require","exports"],function(a,b){"use strict";return{getEvent:function(a){return window.event?window.event:a},getTarget:function(a){return window.event?window.event.srcElement:a?a.target:null},getPosition:function(a){var b=document.documentElement,c=document.body||{scrollLeft:0,scrollTop:0};return{x:a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0),y:a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}},preventDefault:function(a){a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1},stopPropagation:function(a){return a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0,!1},add:function(a,b,c,d){null!=a&&(a.addEventListener?a.addEventListener(b,c,d):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)},remove:function(a,b,c,d){null!=a&&(a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null)}}}),define("src/color",["require","exports"],function(a,b){"use strict";return{hex:function(a){if(/^(rgb|RGB)/.test(a)){for(var b=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),c="#",d=0;d<b.length;d++){var e=Number(b[d]).toString(16);"0"===e&&(e+=e),c+=e}return 7!==c.length&&(c=a),c}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a))return a;var b=a.replace(/#/,"").split("");if(6===b.length)return a;if(3===b.length){for(var f="#",d=0;d<b.length;d+=1)f+=b[d]+b[d];return f}},rgb:function(a){var b=a.toLowerCase();if(b&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(b)){if(4===b.length){for(var c="#",d=1;d<4;d+=1)c+=b.slice(d,d+1).concat(b.slice(d,d+1));b=c}for(var e=[],d=1;d<7;d+=2)e.push(parseInt("0x"+b.slice(d,d+2)));return"rgb("+e.join(", ")+")"}return b}}}),define("src/string",["require","exports","src/base"],function(a,b,c){"use strict";var d={stringify:function(a){var b=c.type(a);return"string"!==b&&("number"===b||"boolean"===b||"date"===b?a+="":a="function"===b?d.stringify(a.call(a)):""),a},trim:function(a,b){return void 0===b&&(b=void 0),c.isUndefined(b)?a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):d.rtrim(d.ltrim(a,b),b)},ltrim:function(a,b){return void 0===b&&(b=void 0),c.isUndefined(b)?a.replace(/(^[\s\uFEFF\xA0]+)/g,""):a.replace(RegExp("(^"+b.replace(/\\/g,"\\\\")+")","gi"),"")},rtrim:function(a,b){return void 0===b&&(b=void 0),c.isUndefined(b)?a.replace(/([\s\uFEFF\xA0]+$)/g,""):a.replace(RegExp("("+b.replace(/\\/g,"\\\\")+"$)","gi"),"")},format:function(a){if(0==arguments.length)return null;for(var a=arguments[0],b=1;b<arguments.length;b++){var c=new RegExp("\\{"+(b-1)+"\\}","gm");a=a.replace(c,arguments[b])}return a},left:function(a,b,c){return void 0===c&&(c=!0),0===a.length?a:a.length>b?a.substr(0,b)+(c?"...":""):a}};return d}),define("src/encoding",["require","exports","src/base","src/string"],function(a,b,c,d){"use strict";var e={html:{dict:{"&":"&#32;"," ":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;"},encode:function(a){return 0===a.length?"":(a=d.stringify(a),a.replace(/&(?![\w#]+;)|[<>"']/g,function(a){return e.html.dict[a]}))},decode:function(a){if(0===a.length)return"";a=d.stringify(a);var b="";return b=a.replace(/&amp;/g,"&"),b=b.replace(/&lt;/g,"<"),b=b.replace(/&gt;/g,">"),b=b.replace(/&nbsp;/g," "),b=b.replace(/&#39;/g,"'"),b=b.replace(/&quot;/g,'"')}},unicode:{encode:function(a,b){if(0===a.length)return"";b=b||"\\u",a=d.stringify(a);for(var c="",e=0;e<a.length;e++){var f="&#"===b?a.charCodeAt(e).toString(10):a.charCodeAt(e).toString(16);if(f.length<4)for(;f.length<4;)f="0".concat(f);c=c.concat(b+f),0==b.indexOf("&#")&&(c+=";")}return c.toLowerCase()},decode:function(a,b){if(0===a.length)return"";b=b||"\\u",a=d.stringify(a);var e="",f=a.match(/([\w]+)|(\\u([\w]{4}))/g);return null!=f&&c.each(f,function(a,c){0==c.indexOf(b)?e+=String.fromCharCode(parseInt(c.slice(2,6),16)):e+=c}),e}}};return e}),define("src/regexp",["require","exports","src/base","src/string"],function(a,b,c,d){"use strict";var e={rules:{trim:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,date:/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/g,url:"^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",telephone:/(^\d+$)|((^\d+)([\d|\-]+)((\d+)$))|((^\+)([\d|\-]+)((\d+)$))/g,"non-telephone":/[^\d\-\+]/g,email:/^\w+((-\w+)|(\_\w+)|(\'\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/g,qq:/^\w+((-\w+)|(\_\w+)|(\'\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/g,number:/(^-?\d+$)|(^-?\d+[\.?]\d+$)/g,"non-number":/[^\d\.\-]/g,integer:/^-?\d+$/g,"positive-integer":/^\d+$/g,"non-integer":/[^\d\-]/g,safeText:/A-Za-z0-9_\-/g,"non-safeText":/[^A-Za-z0-9_\-]/g,fileExt:"jpg,gif,jpeg,png,bmp,psd,sit,tif,tiff,eps,png,ai,qxd,pdf,cdr,zip,rar","en-us":{zipcode:/^\d{5}-\d{4}$|^\d{5}$/g},"zh-cn":{identityCard:/(^\d{15}$)|(^\d{18}$)|(^\d{17}[X|x]$)/g,zipcode:/^\d{6}$/g}},match:function(a){var b=String(a.text),c=a.ignoreCase,d=a.regexpName,f=void 0===a.regexp?void 0:new RegExp(a.regexp);return 1===c&&(b=b.toLowerCase()),void 0===f&&void 0!==d&&(f=e.rules[d]),b.match(f)},exists:function(a){var b=String(a.text),c=a.ignoreCase,d=a.regexpName,f=void 0===a.regexp?void 0:new RegExp(a.regexp);return c&&(b=b.toLowerCase()),void 0===f&&void 0!==d&&(f=e.rules[d]),null!==b.match(f)},isFileExt:function(a,b){var c=!1,d=a.substr(a.lastIndexOf("."),a.length-a.lastIndexOf(".")),f=b||e.rules.fileExt;if(d=d.replace(".",""),-1!=f.indexOf(",")){for(var g=f.split(","),h=0;h<g.length;h++)if(d.toLowerCase()==g[h]){c=!0;break}}else d.toLowerCase()==f&&(c=!0);return c},isUrl:function(a){return a.toLowerCase().exists(e.rules.url)},isEmail:function(a){return a.toLowerCase().exists(e.rules.email)},isZipcode:function(a,b){return b=c.formatLocale(b),a.exists(e.rules[b].zipcode)},isSafeText:function(a){return a.exists(e.rules.safeText)},formatTelephone:function(a){return a.replace(e.rules["non-telephone"],"")},formatInteger:function(a,b){return a=String(a).replace(e.rules["non-integer"],""),""===d.trim(a)&&(a="0"),b&&(a=String(parseInt(a,10))),a},formatNumber:function(a,b){return void 0===b&&(b=!0),a=String(a).replace(e.rules["non-number"],""),a=""===a.trim()?"0":a,b&&(a=String(parseFloat(a))),a},formatNumberRound2:function(a,b){void 0===b&&(b=!0);var c=""+Math.round(100*Number(e.formatNumber(a)))/100,d=c.indexOf(".");if(d<0)return c+".00";var c=c.substring(0,d+1)+c.substring(d+1,d+3);return d+2==c.length&&(c+="0"),b&&(a=parseFloat(c)),a},formatNumberRound:function(a,b,c){void 0===b&&(b=2),void 0===c&&(c=!0);for(var d=10,f=0;f<b;)d*=10,f++;var g=""+Math.round(Number(e.formatNumber(a))*d)/d,h=g.indexOf(".");if(h<0)return g+".00";for(var g=g.substring(0,h+1)+g.substring(h+1,h+b+1);h+b>g.length;)g+="0";return c&&(g=parseFloat(g).toString()),g},formatSafeText:function(a){return a.replace(e.rules["non-safeText"],"")}};return e}),define("src/date",["require","exports","src/base"],function(a,b,c){"use strict";var d=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],e={now:function(){return e.create()},create:function(a){return e.newDateTime(a)},shortIntervals:{y:"year",q:"quarter",M:"month",w:"week",d:"day",h:"hour",m:"minute",s:"second",ms:"msecond"},formatInterval:function(a){return e.shortIntervals[a]||a},diff:function(a,b,c){var d=e.newDateTime(a),f=e.newDateTime(b);return d.diff(e.formatInterval(c),f)},add:function(a,b,c){return e.newDateTime(a).add(e.formatInterval(b),c)},format:function(a,b){return e.create(a).toString(b)},ago:function(a,b){b=c.ext({minute:"分钟前",hour:"小时前",day:"天前"},b);var d=e.create(a),f=e.create();return d.diff("m",f)<1?"1"+b.minute:d.diff("m",f)<60?d.diff("m",f)+b.minute:d.diff("h",f)<24?d.diff("h",f)+b.hour:d.diff("d",f)<4?d.diff("d",f)+b.day:d.toString()},newDateTime:function(a){var b=new Date;if(!c.isUndefined(a))if("date"===c.type(a))b=a;else if(c.isNumber(a))b=new Date(a);else if(c.isArray(a)){for(var f=a,g=0;g<6;g++)f[g]=isNaN(f[g])?g<3?1:0:Number(f[g]);b=new Date(f[0],Number(f[1])-1,f[2],f[3],f[4],f[5])}else if(/\/Date\((-?\d+)\)\//.test(a))b=new Date(Math.floor(a.replace(/\/Date\((-?\d+)\)\//,"$1")));else{for(var f=a.replace(/[-|:|\/| |年|月|日]/g,",").replace(/,,/g,",").split(","),g=0;g<6;g++)f[g]=isNaN(f[g])?g<3?1:0:Number(f[g]);b=new Date(f[0],Number(f[1])-1,f[2],f[3],f[4],f[5])}return{year:b.getFullYear(),month:b.getMonth(),day:b.getDate(),hour:b.getHours(),minute:b.getMinutes(),second:b.getSeconds(),msecond:b.getMilliseconds(),weekDay:b.getDay(),diff:function(a,b){var c=Number(this.toNativeDate()),d=Number(b.toNativeDate());switch(a=e.formatInterval(a)){case"year":return b.year-this.year;case"quarter":return Math.ceil((12*(b.year-this.year)+(b.month-this.month))/3);case"month":return 12*(b.year-this.year)+(b.month-this.month);case"week":return Math.floor((d-c)/6048e5);case"day":return Math.floor((d-c)/864e5);case"hour":return Math.floor((d-c)/36e5);case"minute":return Math.floor((d-c)/6e4);case"second":return Math.floor((d-c)/1e3);case"msecond":return Math.floor(d-c)}},add:function(a,b){var c=Number(this.toNativeDate()),d=0,f=[31,28,31,30,31,30,31,31,30,31,30,31];switch(a=e.formatInterval(a),b=Number(b),a){case"year":d=this.year%4!=0||this.year%100==0&&this.year%400!=0||1!=this.month||29!=this.day||(this.year+b)%4==0&&((this.year+b)%100!=0||(this.year+b)%400==0)?Number(new Date(this.year+b,this.month,this.day,this.hour,this.minute,this.second)):Number(new Date(this.year+b,this.month,28,this.hour,this.minute,this.second));break;case"quarter":d=this.year%4!=0||this.year%100==0&&this.year%400!=0||1!=this.month||29!=this.day||(this.year+Math.floor((this.month+3*b)/12))%4==0&&((this.year+Math.floor((this.month+3*b)/12))%100!=0||(this.year+Math.floor((this.month+3*b)/12))%400==0)?this.day==f[this.month]?Number(new Date(this.year,this.month+3*b,f[(this.month+3*b)%12],this.hour,this.minute,this.second)):Number(new Date(this.year,this.month+3*b,this.day,this.hour,this.minute,this.second)):Number(new Date(this.year,this.month+3*b,28,this.hour,this.minute,this.second));break;case"month":d=this.year%4!=0||this.year%100==0&&this.year%400!=0||1!=this.month||29!=this.day||(this.year+Math.floor((this.month+b)/12))%4==0&&((this.year+Math.floor((this.month+b)/12))%100!=0||(this.year+Math.floor((this.month+b)/12))%400==0)?this.day==f[this.month]?Number(new Date(this.year,this.month+b,f[(this.month+b)%12],this.hour,this.minute,this.second)):Number(new Date(this.year,this.month+b,this.day,this.hour,this.minute,this.second)):Number(new Date(this.year,this.month+b,28,this.hour,this.minute,this.second));break;case"week":d=c+6048e5*b;break;case"day":d=c+864e5*b;break;case"hour":d=c+36e5*b;break;case"minute":d=c+6e4*b;break;case"second":d=c+1e3*b;break;case"msecond":d=c+b}return e.create(new Date(d))},getDatePart:function(a){switch(a=e.formatInterval(a)){case"year":return this.year;case"quarter":return this.getQuarterOfYear();case"month":return this.month;case"day":return this.day;case"week":return d[this.weekDay];case"W":case"weekOfYear":return this.getWeekOfYear();case"hour":return this.hour;case"minute":return this.minute;case"second":return this.second;default:return"Unkown Interval"}},getMaxDayOfMonth:function(){var a=e.create(this.toString("yyyy-MM-01")),b=e.create(this.add("month",1).toString("yyyy-MM-01"));return a.diff("day",b)},getQuarterOfYear:function(){return Math.ceil(this.month/3)},getWeekOfYear:function(){var a=0,b=this.getDayOfYear();return e.create(this.toString("yyyy-01-01")).weekDay>0&&(b-=7-e.create(this.toString("yyyy-01-01")).weekDay),b>0&&(a=Math.ceil(b/7)),a},getDayOfYear:function(){var a=this.toNativeDate(),b=new Date(a.getFullYear(),0,1);return Math.ceil(Number(Number(a)-Number(b))/864e5)+1},isLeapYear:function(){return this.year%4==0&&(this.year%100!=0||this.year%400==0)},toArray:function(){return[this.year,this.month,this.day,this.hour,this.minute,this.second,this.msecond]},toNativeDate:function(){return new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},toString:function(a){return void 0===a&&(a="yyyy-MM-dd HH:mm:ss"),a.replace(/yyyy|YYYY/g,this.year).replace(/yy|YY/g,c.paddingZero(this.year2%100,2)).replace(/MM/g,c.paddingZero(this.month+1,2)).replace(/M/g,this.month+1).replace(/w|W/g,d[this.weekDay]).replace(/dd|DD/g,c.paddingZero(this.day,2)).replace(/d|D/g,this.day).replace(/hh|HH/g,c.paddingZero(this.hour,2)).replace(/h|H/g,this.hour).replace(/mm/g,c.paddingZero(this.minute,2)).replace(/m/g,this.minute).replace(/ss|SS/g,c.paddingZero(this.second,2)).replace(/s|S/g,this.second).replace(/fff/g,c.paddingZero(this.msecond,3))}}},timespan:function(a,b){return void 0===b&&(b="second"),"day"!=b&&"d"!=b||(a=24*a*60*60),"hour"!=b&&"h"!=b||(a=60*a*60),"minute"!=b&&"m"!=b||(a*=60),"second"!=b&&"s"!=b||(a*=1e3),{timespanValue:a,day:a/864e5,hour:a/36e5,minute:a/6e4,second:a/1e3,millisecond:a%1e3,toString:function(a){var b="";switch(a){case"MM天dd小时mm分钟ss秒fff毫秒":b=c.paddingZero(this.day,2)+"天"+c.paddingZero(this.hour,2)+"小时"+c.paddingZero(this.minute,2)+"分钟"+c.paddingZero(this.second,2)+"秒"+c.paddingZero(this.millisecond,3)+"毫秒";break;case"MM天dd小时mm分钟ss秒":default:b=c.paddingZero(this.day,2)+"天"+c.paddingZero(this.hour,2)+"小时"+c.paddingZero(this.minute,2)+"分钟"+c.paddingZero(this.second,2)+"秒"}return b}}}};return e}),define("src/net",["require","exports","src/base","src/event"],function(a,b,c,d){"use strict";for(var e={returnType:"json",xhrDataKey:"xhr-xml",getAccessToken:function(){},getClientId:function(){},getClientSignature:function(){},getTimestamp:function(){},getNonce:function(){},getWaitingWindow:function(a){a=c.extend({type:"default",text:i18n.net.waiting.commitTipText},a||{}),c.isUndefined(a.name)&&(a.name=c.getFriendlyName(location.pathname+"$"+a.type+"$waiting$window"));var b=a.name;return c.isUndefined(window[b])?"mini"==a.type?window[b]={name:b,options:a,container:null,message:null,create:function(a){null==document.getElementById(this.name+"-text")?$(document.body).append('<div id="'+this.name+'-container" class="x-ui-dialog-waiting-mini-window-container" ><div id="'+this.name+'-text" class="x-ui-dialog-waiting-mini-window-text" >'+a+"</div></div>"):c.query('[id="'+this.name+'-text"]').innerHTML=a,null===this.container&&(this.container=document.getElementById(this.name+"-container"))},show:function(){c.isUndefined(arguments[0])||(this.options.text=arguments[0]),this.create(this.options.text),c.css.style(this.container,{display:"",position:"fixed",left:"4px",bottom:"4px"})},hide:function(){null!=this.container&&c.css.style(this.container,{display:"none"})}}:"plus"==a.type?window[b]={name:b,options:a,container:null,create:function(a){this.options.text=a},show:function(){c.isUndefined(arguments[0])||(this.options.text=arguments[0]),this.create(this.options.text),this.container=plus.nativeUI.showWaiting(this.options.text)},hide:function(){null!=this.container&&this.container.close()}}:window[b]={name:b,options:a,maskWrapper:null,container:null,message:null,lock:0,maxOpacity:a.maxOpacity?a.maxOpacity:.4,maxDuration:a.maxDuration?a.maxDuration:.2,height:a.height?a.height:50,width:a.width?a.width:200,setPosition:function(){var a=c.page.getRange(),b=(a.width-this.width)/2,d=(a.height-this.height)/3;c.dom.fixed(this.container,b,d)},createMaskWrapper:function(){var a=document.getElementById(this.name+"-maskWrapper");null===a&&($(document.body).append('<div id="'+this.name+'-maskWrapper" style="display:none;" ></div>'),a=document.getElementById(this.name+"-maskWrapper")),a.className="x-ui-dialog-mask-wrapper",a.style.height=c.page.getRange().height+"px",a.style.width=c.page.getRange().width+"px","none"===a.style.display&&($("#"+this.name+"-maskWrapper").css({display:"",opacity:.1}),$("#"+this.name+"-maskWrapper").fadeTo(1e3*this.maxDuration,this.maxOpacity,function(){}))},create:function(a){null==document.getElementById(this.name+"-text")?($(document.body).append('<div id="'+this.name+'-container" class="x-ui-dialog-waiting-window-container" ><div id="'+this.name+'-text" class="x-ui-dialog-waiting-window-text" >'+a+"</div></div>"),this.createMaskWrapper()):document.getElementById(this.name+"-text").innerHTML=a,null===this.container&&(this.container=document.getElementById(this.name+"-container"),this.maskWrapper=document.getElementById(this.name+"-maskWrapper"))},show:function(a){this.lock++;var b=this;if(b.lock>0){null===b.maskWrapper&&(b.maskWrapper=c.ui.mask.newMaskWrapper(b.name+"-maskWrapper")),void 0!==a&&(b.options.text=a),b.create(b.options.text);var d=c.page.getRange(),e=(d.width-b.width)/2;c.dom.fixed(b.container,e,120),b.container.style.display="",b.maskWrapper.style.display=""}},hide:function(){if(0===--this.lock&&(null!=this.container&&(this.container.style.display="none"),null!=this.maskWrapper&&"none"!==c.dom("#"+this.name+"-maskWrapper").css("display"))){var a=this;c.dom("#"+a.name+"-maskWrapper").css({display:"none"})}}}:window[b].options=a,window[b]},catchException:function(a,b){try{var d=c.toJSON(a);c.isUndefined(d)||c.isUndefined(d.success)||0!=d.success||("console"==b?c.debug.error(d.msg):c.msg(d.msg))}catch(a){c.debug.error(a)}}},f=["access-token","client-id","client-signature","timestamp","nonce"],g=0;g<f.length;g++){var h=f[g],i=c.camelCase(h);i=i[0].toUpperCase()+i.substr(1),e["get"+i]=function(){return localStorage["session-"+h]||(null==c.query("session-"+h)?null:c.query("session-"+h).value)||""}}var j={getWaitingWindow:function(a){return e.getWaitingWindow(a)},xhr:function(){var a,b,d;2==arguments.length&&"object"===c.type(arguments[1])?(a=arguments[0],d=arguments[1],b=""):2==arguments.length&&"string"===c.type(arguments[1])?(a=arguments[0],d={},b=arguments[1]):3==arguments.length&&"string"===c.type(arguments[1])&&c.isFunction(arguments[2])?(a=arguments[0],d={callback:arguments[2]},b=arguments[1]):(a=arguments[0],b=arguments[1],d=arguments[2]),d=c.extend({},e,d);var f=c.isFunction(d.getWaitingWindow)&&!c.isUndefined(d.waitingMessage)&&""!==d.waitingMessage;f&&d.getWaitingWindow({text:d.waitingMessage,type:c.isUndefined(d.waitingType,"default")}).show();var g=d.type||"POST",h=d.contentType||"text/html",i=d.async||!0,k=c.extend({},d.data||{});if("object"===c.type(b))k=c.extend(k,b);else{var l=c.toXML(b,1);if(""!=b&&l)k[d.xhrDataKey]=b;else if(!l&&b.indexOf("=")>0){var m=b.split("&");c.each(m,function(a,b){var c=b.split("=");2==c.length&&(k[c[0]]=decodeURIComponent(c[1]))})}}c.isFunction(d.getAccessToken)&&""!=d.getAccessToken()?k.accessToken=d.getAccessToken():c.isFunction(d.getClientId)&&""!=d.getClientId()&&(k.clientId=d.getClientId(),c.isFunction(d.getClientId)&&""!=d.getClientSignature()&&(k.clientSignature=d.getClientSignature(),k.timestamp=d.getTimestamp(),k.nonce=d.getNonce())),j.ajax({type:g,url:a,contentType:h,data:k,async:i,success:function(a){if(f&&d.getWaitingWindow({type:c.isUndefined(d.waitingType,"default")}).hide(),"json"==d.returnType){d.catchException(a,d.outputException);var b=c.toJSON(a);if(c.isUndefined(b)||c.isUndefined(b.message))c.call(d.callback,c.toJSON(a));else{var e=b.message;switch(Number(e.returnCode)){case-1:c.msg(e.value);break;case 0:d.popCorrectValue&&c.msg(e.value),c.call(d.callback,c.toJSON(a));break;default:d.popIncorrectValue&&c.msg(e.value),c.call(d.callback,c.toJSON(a))}}}else c.call(d.callback,a)},error:function(a,b,e){c.debug.log(a.responseText),c.isFunction(d.error)?d.error(a,b,e):401==a.status?c.msg(i18n.net.errors[401]):404==a.status?c.msg(i18n.net.errors[404]):500==a.status?c.msg(i18n.net.errors[500]):0!=a.status&&c.debug.error(i18n.net.errors.unkown.format(a.status+(""!=a.statusText?" "+a.statusText:"")))}})},requireLoaded:{},require:function(a){if(a=c.extend({fileType:"script",id:"",path:"",type:"GET",async:!0},a||{}),""!=a.id&&j.requireLoaded[a.id])return c.debug.log(c.string.format('require file {"id":"{0}", path:"{1}"} exist. [ajax]',a.id,a.path)),c.call(a.callback),!0;c.debug.log(c.string.format('require file {"id":"{0}", path:"{1}"} loading. [ajax]',a.id,a.path)),j.ajax({type:a.type,url:a.path,async:a.async,success:function(b){c.debug.log(c.string.format('require file {"id":"{0}", path:"{1}"} finished. [ajax]',a.id,a.path));var d,e=document.getElementsByTagName("HEAD").item(0);"template"==a.fileType?(d=document.createElement("script"),d.type="text/template",d.src=a.path):"css"==a.fileType?(d=document.createElement("style"),d.type="text/css",d.href=a.path):(d=document.createElement("script"),d.language="javascript",d.type="text/javascript",d.src=a.path);try{d.appendChild(document.createTextNode(b))}catch(a){d.text=b}""!=a.id&&(d.id=a.id,j.requireLoaded[a.id]=!0),e.appendChild(d),c.call(a.callback)}})},ajax:function(a){j.newHttpRequest(a).send()},newHttpRequest:function(a){var b={xhr:null,data:null,timeout:90,done:!1,send:function(){if(null==this.xhr&&(this.xhr=j.newXmlHttpRequest(),!this.xhr))return c.debug.error("create xhr failed"),!1;this.xhr.open(this.type,this.url,this.async);var a=this;d.add(this.xhr,"readystatechange",function(){var b=a.xhr;4!=b.readyState||a.done||(0==b.status||b.status>=200&&b.status<300||304==b.status?c.call(a.success,b.responseText):c.call(a.error,b,b.status),b=null)}),setTimeout(function(){a.done=!0},1e3*a.timeout),"POST"==this.type?(this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xhr.send(c.serialize(this.data))):this.xhr.send(null)},create:function(a){
a=c.extend({type:"GET",url:"",data:{},async:!0,timeout:90},a||{}),this.type=a.type.toUpperCase(),this.url=a.url,this.data=a.data,this.async=a.async,this.timeout=a.timeout,this.success=a.success,this.error=a.error}};return b.create(a),b},newXmlHttpRequest:function(){var a=null,b=c.global();if(b.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}else b.XMLHttpRequest&&(a=new XMLHttpRequest);return a},request:{find:function(a){for(var b="",c=location.search.substr(1).split("&"),d=0;d<c.length;d++)if(0===c[d].indexOf(a)){b=decodeURIComponent(c[d].replace(a+"=",""));break}return b},findAll:function(){var a="",b=location.search.substr(1).split("&");if(b.length=0)return{};var d;a="{";for(var e=0;e<b.length;e++)d=b[e].split("="),a+='"'+d[0]+'":"'+decodeURIComponent(d[1])+'"',e<b.length-1&&(a+=",");return a+="}",c.evalJSON(a)},getRawUrl:function(){return location.href.replace(location.origin,"")},hash:function(a){return location.hash==="#"+a}}};return j}),define("x",["require","exports","src/base","src/event","src/collections/Queue","src/collections/Stack","src/color","src/encoding","src/regexp","src/string","src/date","src/net"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=c.extend({},c,{event:d,queue:e,stack:f,color:g,encoding:h,regexp:i,string:j,date:k,on:d.add,net:l});c.extend(m,{on:d.add,xhr:l.xhr});var n=m.global();return n.x&&(n._x_=n.x),n.x=m,m});