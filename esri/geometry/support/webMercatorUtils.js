// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","../SpatialReference"],function(z,f,n){function q(a,b,d,c,e){if("point"===a.type)b=b(a.x,a.y,c,s),e.x=b[0],e.y=b[1];else if("extent"===a.type)k=b(a.xmin,a.ymin,c,s),e.xmin=k[0],e.ymin=k[1],b=b(a.xmax,a.ymax,c,s),e.xmax=b[0],e.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var g="polyline"===a.type,l=g?a.paths:a.rings,f=[],p=void 0;a=0;for(k=l.length;a<k;a++){var m=l[a],p=[];f.push(p);for(var h=0,n=m.length;h<n;h++)p.push(b(m[h][0],m[h][1],c)),2<m[h].length&&
p[h].push(m[h][2]),3<m[h].length&&p[h].push(m[h][3])}g?e.paths=f:e.rings=f}else if("multipoint"===a.type){g=a.points;l=[];a=0;for(k=g.length;a<k;a++)l[a]=b(g[a][0],g[a][1],c),2<g[a].length&&l[a].push(g[a][2]),3<g[a].length&&l[a].push(g[a][3]);e.points=l}e.spatialReference=d;return e;var k}function v(a,b){var d=a&&(null!=a.wkid?a:a.spatialReference),c=b&&(null!=b.wkid?b:b.spatialReference);return!d||!c?!1:c.equals(d)?!0:c.isWebMercator&&4326===d.wkid||d.isWebMercator&&4326===c.wkid}function t(a,b,
d,c){void 0===c&&(c=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=w;c[0]=a*w*r;c[1]=0.5*r*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function u(a,b,d,c){void 0===d&&(d=!1);void 0===c&&(c=[0,0]);a=a/r*x;c[0]=d?a:a-360*Math.floor((a+180)/360);d=c;b=y/2-2*Math.atan(Math.exp(-1*b/r));d[1]=b*x;return c}var r=6378137,y=3.141592653589793,x=57.29577951308232,w=0.017453292519943,s=[0,0];f.canProject=v;f.project=function(a,b){var d=a&&a.spatialReference,c=b&&(null!=b.wkid?b:b.spatialReference);
return!v(d,c)?null:d.equals(c)?a.clone():c.isWebMercator?q(a,t,n.WebMercator,!1,a.clone()):4326===c.wkid?q(a,u,n.WGS84,!1,a.clone()):null};f.lngLatToXY=t;f.xyToLngLat=u;f.geographicToWebMercator=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=a.clone());return q(a,t,n.WebMercator,b,d)};f.webMercatorToGeographic=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=a.clone());return q(a,u,n.WGS84,b,d)}});