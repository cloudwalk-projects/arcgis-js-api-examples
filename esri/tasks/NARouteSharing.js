// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
define("esri/tasks/NARouteSharing","dojo/_base/declare dojo/_base/array dojo/json dojo/Deferred dojo/promise/all dojo/_base/lang dojo/i18n!../nls/jsapi dojo/number ../request ../graphic ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../arcgis/Portal ../tasks/RouteParameters ../tasks/RouteResult ../SpatialReference ../tasks/FeatureSet ../tasks/GeometryService ../tasks/ProjectParameters ../geometry/webMercatorUtils".split(" "),
function(O,E,r,s,F,k,p,P,v,K,z,x,w,L,M,Q,R,S,B,G,T,U,N){return O(null,{declaredClass:"esri.tasks.NARouteSharing",portal:null,outSR:null,firstStopSymbol:{angle:0,xoffset:0,yoffset:9,type:"esriPMS",width:17,height:24,imageData:"PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJzdmdfMyIgc3ByZWFkTWV0aG9kPSJwYWQiIGN4PSIwLjM4MTUzIiBjeT0iMC4yOTY4OCIgcj0iMC41Ij48c3RvcCBzdG9wLWNvbG9yPSIjNmJjMjc4IiBzdG9wLW9wYWNpdHk9IjAuOTg4MjgxIiBvZmZzZXQ9IjAiLz48c3RvcCBzdG9wLWNvbG9yPSIjMmU5ZjNkIiBzdG9wLW9wYWNpdHk9IjAuOTkyMTg4IiBvZmZzZXQ9IjEiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48Zz48ZyBzdHJva2U9Im51bGwiIGlkPSJzdmdfMSI+PHBhdGggc3Ryb2tlPSIjMWM1ZTI0IiBzdHJva2Utb3BhY2l0eT0iMC43IiBmaWxsPSJ1cmwoI3N2Z18zKSIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtbGluZWNhcD0ibnVsbCIgZD0ibTAuNTYyMTIsMTAuNjM0NTIxYzAsLTUuNTY0OSA0LjQ1NjcxMSwtMTAuMDcyNDYgOS45NTg4MjgsLTEwLjA3MjQ2YzUuNTAyMTA2LDAgOS45NTg4MjgsNC41MDc1NyA5Ljk1ODgyOCwxMC4wNzI0NmMwLDIuNzgyNDUgLTEuMTE0MTgsNS4zMDA1NyAtMi45MTYxMTYsNy4xMjMwNzNjLTAuOTAwOTY4LDAuOTExMjQ2IC0yLjk0MDQwOCwyLjI2NjE2MSAtNC43NDEzNDgsNC43MTI0NWMtMS44MDA5MjksMi40NDYyODkgLTIuMTkxMDQzLDYuMDM2ODc1IC0yLjI0NTYxNSw2LjAzNDUxNWMtMC4wNTQ1NjIsLTAuMDAyMzYgLTAuOTg1NzY3LC0zLjc3MjU1NCAtMi41OTczMzEsLTYuMTkzMzY1Yy0xLjYxMTU4NCwtMi40MjA4MSAtMy42MDAxNDEsLTMuNjQyMzU0IC00LjUwMTEwOSwtNC41NTM2Yy0xLjgwMTk0NiwtMS44MjI1MDIgLTIuOTE2MTE2LC00LjM0MDYyMyAtMi45MTYxMTYsLTcuMTIzMDczbDAsMGwtMC4wMDAwMjEsMHoiIGlkPSJzdmdfMiIvPjwvZz48ZWxsaXBzZSByeT0iNCIgcng9IjQiIGlkPSJzdmdfODciIGN5PSIxMC4zNDM3NSIgY3g9IjEwLjUiIHN0cm9rZS1vcGFjaXR5PSJudWxsIiBzdHJva2Utd2lkdGg9Im51bGwiIHN0cm9rZT0iIzFjNWUyNCIgZmlsbD0iI2ZmZmZmZiIvPjwvZz48L3N2Zz4\x3d",
contentType:"image/svg+xml"},interimStopSymbol:{angle:0,xoffset:0,yoffset:9,type:"esriPMS",width:17,height:24,imageData:"PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogPGRlZnM+DQogIDxyYWRpYWxHcmFkaWVudCBpZD0ic3ZnXzMiIHNwcmVhZE1ldGhvZD0icGFkIiBjeD0iMC4zODE1MyIgY3k9IjAuMjk2ODgiIHI9IjAuNSI+DQogICA8c3RvcCBzdG9wLWNvbG9yPSIjNjdBN0U0IiBzdG9wLW9wYWNpdHk9IjAuOTg4MjgxIiBvZmZzZXQ9IjAiLz4NCiAgIDxzdG9wIHN0b3AtY29sb3I9IiMxQjgxRDIiIHN0b3Atb3BhY2l0eT0iMC45OTIxODgiIG9mZnNldD0iMSIvPg0KICA8L3JhZGlhbEdyYWRpZW50Pg0KIDwvZGVmcz4NCiA8Zz4NCiAgPHRpdGxlPjE8L3RpdGxlPg0KICA8ZyBzdHJva2U9Im51bGwiIGlkPSJzdmdfMSI+DQogICA8cGF0aCBzdHJva2U9IiMxYzVlMjQiIHN0cm9rZS1vcGFjaXR5PSIwLjciIGZpbGw9InVybCgjc3ZnXzMpIiBzdHJva2UtbGluZWpvaW49Im51bGwiIHN0cm9rZS1saW5lY2FwPSJudWxsIiBkPSJtMC41NjIxMiwxMC42MzQ1MjFjMCwtNS41NjQ5IDQuNDU2NzExLC0xMC4wNzI0NiA5Ljk1ODgyOCwtMTAuMDcyNDZjNS41MDIxMDYsMCA5Ljk1ODgyOCw0LjUwNzU3IDkuOTU4ODI4LDEwLjA3MjQ2YzAsMi43ODI0NSAtMS4xMTQxOCw1LjMwMDU3IC0yLjkxNjExNiw3LjEyMzA3M2MtMC45MDA5NjgsMC45MTEyNDYgLTIuOTQwNDA4LDIuMjY2MTYxIC00Ljc0MTM0OCw0LjcxMjQ1Yy0xLjgwMDkyOSwyLjQ0NjI4OSAtMi4xOTEwNDMsNi4wMzY4NzUgLTIuMjQ1NjE1LDYuMDM0NTE1Yy0wLjA1NDU2MiwtMC4wMDIzNiAtMC45ODU3NjcsLTMuNzcyNTU0IC0yLjU5NzMzMSwtNi4xOTMzNjVjLTEuNjExNTg0LC0yLjQyMDgxIC0zLjYwMDE0MSwtMy42NDIzNTQgLTQuNTAxMTA5LC00LjU1MzZjLTEuODAxOTQ2LC0xLjgyMjUwMiAtMi45MTYxMTYsLTQuMzQwNjIzIC0yLjkxNjExNiwtNy4xMjMwNzNsMCwwbC0wLjAwMDAyMSwweiIgaWQ9InN2Z18yIi8+DQogIDwvZz4NCiA8L2c+DQo8L3N2Zz4NCg\x3d\x3d",
contentType:"image/svg+xml"},lastStopSymbol:{angle:0,xoffset:0,yoffset:9,type:"esriPMS",width:17,height:24,imageData:"PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IHI9IjAuNSIgY3k9IjAuMzU1NDciIGN4PSIwLjMzMjAzIiBzcHJlYWRNZXRob2Q9InBhZCIgaWQ9InN2Z182Ij48c3RvcCBvZmZzZXQ9IjAiIHN0b3Atb3BhY2l0eT0iMC45OTYwOSIgc3RvcC1jb2xvcj0iI2U0ODY2NyIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIwLjk5NjA5IiBzdG9wLWNvbG9yPSIjYzkzYTE2Ii8+PC9yYWRpYWxHcmFkaWVudD48L2RlZnM+PGc+PGcgc3Ryb2tlPSJudWxsIiBpZD0ic3ZnXzEiPjxwYXRoIHN0cm9rZT0iIzg0MjMwYSIgc3Ryb2tlLW9wYWNpdHk9IjAuNyIgZmlsbD0idXJsKCNzdmdfNikiIHN0cm9rZS1saW5lam9pbj0ibnVsbCIgc3Ryb2tlLWxpbmVjYXA9Im51bGwiIGQ9Im0wLjU2MjEyLDEwLjYzNDUyYzAsLTUuNTY0OSA0LjQ1NjcxLC0xMC4wNzI0NiA5Ljk1ODgzLC0xMC4wNzI0NmM1LjUwMjEsMCA5Ljk1ODgzLDQuNTA3NTcgOS45NTg4MywxMC4wNzI0NmMwLDIuNzgyNDUgLTEuMTE0MTgsNS4zMDA1NyAtMi45MTYxMiw3LjEyMzA3Yy0wLjkwMDk3LDAuOTExMjUgLTIuOTQwNDEsMi4yNjYxNiAtNC43NDEzNSw0LjcxMjQ1Yy0xLjgwMDkzLDIuNDQ2MjkgLTIuMTkxMDQsNi4wMzY4OCAtMi4yNDU2MSw2LjAzNDUyYy0wLjA1NDU2LC0wLjAwMjM2IC0wLjk4NTc3LC0zLjc3MjU2IC0yLjU5NzMzLC02LjE5MzM3Yy0xLjYxMTU5LC0yLjQyMDgxIC0zLjYwMDE0LC0zLjY0MjM1IC00LjUwMTExLC00LjU1MzZjLTEuODAxOTUsLTEuODIyNSAtMi45MTYxMiwtNC4zNDA2MiAtMi45MTYxMiwtNy4xMjMwN2wwLDBsLTAuMDAwMDIsMHoiIGlkPSJzdmdfMiIvPjwvZz48cmVjdCBpZD0ic3ZnXzkiIGhlaWdodD0iOCIgd2lkdGg9IjgiIHk9IjYuNSIgeD0iNi40OSIgc3Ryb2tlLW9wYWNpdHk9Im51bGwiIHN0cm9rZS13aWR0aD0ibnVsbCIgc3Ryb2tlPSIjODQyMzBhIiBmaWxsPSIjZmZmZmZmIi8+PC9nPjwvc3ZnPg\x3d\x3d",
contentType:"image/svg+xml"},unlocatedStopSymbol:{angle:0,xoffset:0,yoffset:9,type:"esriPMS",width:17,height:24,imageData:"PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IHI9IjAuNSIgY3k9IjAuMzU1NDciIGN4PSIwLjMzMjAzIiBzcHJlYWRNZXRob2Q9InBhZCIgaWQ9InN2Z18xMCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLW9wYWNpdHk9IjAuOTkyMTkiIHN0b3AtY29sb3I9IiNlMmUyZTIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iMC45ODQzOCIgc3RvcC1jb2xvcj0iIzllOWU5ZSIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxnPjxnIHN0cm9rZT0ibnVsbCIgaWQ9InN2Z18xIj48cGF0aCBzdHJva2U9IiM2NjY2NjYiIHN0cm9rZS1vcGFjaXR5PSIwLjciIGZpbGw9InVybCgjc3ZnXzEwKSIgc3Ryb2tlLWxpbmVqb2luPSJudWxsIiBzdHJva2UtbGluZWNhcD0ibnVsbCIgZD0ibTAuNTYyMTIsMTAuNjM0NTJjMCwtNS41NjQ5IDQuNDU2NzEsLTEwLjA3MjQ2IDkuOTU4ODMsLTEwLjA3MjQ2YzUuNTAyMSwwIDkuOTU4ODMsNC41MDc1NyA5Ljk1ODgzLDEwLjA3MjQ2YzAsMi43ODI0NSAtMS4xMTQxOCw1LjMwMDU3IC0yLjkxNjEyLDcuMTIzMDdjLTAuOTAwOTcsMC45MTEyNSAtMi45NDA0MSwyLjI2NjE2IC00Ljc0MTM1LDQuNzEyNDVjLTEuODAwOTMsMi40NDYyOSAtMi4xOTEwNCw2LjAzNjg4IC0yLjI0NTYxLDYuMDM0NTJjLTAuMDU0NTYsLTAuMDAyMzYgLTAuOTg1NzcsLTMuNzcyNTYgLTIuNTk3MzMsLTYuMTkzMzdjLTEuNjExNTksLTIuNDIwODEgLTMuNjAwMTQsLTMuNjQyMzUgLTQuNTAxMTEsLTQuNTUzNmMtMS44MDE5NSwtMS44MjI1IC0yLjkxNjEyLC00LjM0MDYyIC0yLjkxNjEyLC03LjEyMzA3bDAsMGwtMC4wMDAwMiwweiIgaWQ9InN2Z18yIi8+PC9nPjxyZWN0IHRyYW5zZm9ybT0icm90YXRlKC00NSAxMC41LDEwLjUpICIgc3Ryb2tlPSIjZTJlMmUyIiBpZD0ic3ZnXzExIiBoZWlnaHQ9IjEwIiB3aWR0aD0iMiIgeT0iNS42IiB4PSI5LjUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iIzY2NjY2NiIvPjxyZWN0IHRyYW5zZm9ybT0icm90YXRlKDQ1IDEwLjUsMTAuNSkgIiBzdHJva2U9IiNlMmUyZTIiIGlkPSJzdmdfMTIiIGhlaWdodD0iMTAiIHdpZHRoPSIyIiB5PSI1LjYiIHg9IjkuNSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjNjY2NjY2Ii8+PC9nPjwvc3ZnPg\x3d\x3d",
contentType:"image/svg+xml"},waypointSymbol:{color:[255,255,255,255],size:10,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[20,89,127,255],width:2.5,type:"esriSLS",style:"esriSLSSolid"}},directionSymbol:{color:[0,122,194,255],width:6,type:"esriSLS",style:"esriSLSSolid"},directionEventSymbol:{color:[100,255,100,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,69,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},routeSymbol:{color:[20,89,127,255],
width:8,type:"esriSLS",style:"esriSLSSolid"},barrierRenderer:new x({type:"uniqueValue",field1:"BarrierType",defaultSymbol:{type:"esriPMS",imageData:"PHN2ZyB3aWR0aD0iMjIyIiBoZWlnaHQ9IjIyMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxlbGxpcHNlIGZpbGw9IiNmZjAwMDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyMCIgY3g9IjExMiIgY3k9IjExMSIgaWQ9InN2Z181IiByeD0iMTAwIiByeT0iMTAwIi8+CjxlbGxpcHNlIGZpbGw9IiNmZjAwMDAiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIyMCIgY3g9IjExMiIgY3k9IjExMSIgaWQ9InN2Z182IiByeD0iOTUiIHJ5PSI5NSIvPgo8cmVjdCBmaWxsPSIjZmYwMDAwIiBzdHJva2Utd2lkdGg9IjIwIiB4PSI2NC41IiB5PSIxMDIiIHdpZHRoPSI5NSIgaGVpZ2h0PSIxOCIgaWQ9InN2Z183IiBzdHJva2U9IiNmZmZmZmYiLz4KPC9nPgo8L3N2Zz4\x3d",
contentType:"image/svg+xml",width:18,height:18},uniqueValueInfos:[{value:"2",symbol:{type:"esriPMS",imageData:"PHN2ZyB3aWR0aD0iMjg2IiBoZWlnaHQ9IjI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZS13aWR0aD0iMTAiIGQ9Im04Ljc0OTk5MiwyNTEuNzQ5OTk3bDEzNC45OTk5OTgsLTI0MS45OTk5OThsMTM0Ljk5OTk5OCwyNDEuOTk5OTk4bC0yNjkuOTk5OTk1LDBsLTAuMDAwMDAxLDB6IiBpZD0ic3ZnXzEiIHN0cm9rZT0iIzAwMCIvPgo8cGF0aCBzdHJva2U9IiNmZmYiIGZpbGw9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iMTUiIGQ9Im0yMy41MDAwMDQsMjQyLjUwMDAwNWwxMTkuOTk5OTkyLC0yMTUuOTk5OTk5bDExOS45OTk5OTIsMjE1Ljk5OTk5OWwtMjM5Ljk5OTk4MywwbC0wLjAwMDAwMSwweiIgaWQ9InN2Z18yIi8+Cjx0ZXh0IGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iMCIgeD0iMTA5IiB5PSIyMjIuNzUiIGlkPSJzdmdfNSIgZm9udC1zaXplPSIxODAiIGZvbnQtZmFtaWx5PSJHZW9yZ2lhLCBUaW1lcywgJ1RpbWVzIE5ldyBSb21hbicsIHNlcmlmIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHhtbDpzcGFjZT0icHJlc2VydmUiPiE8L3RleHQ+CjwvZz4KPC9zdmc+",
contentType:"image/svg+xml",width:19,height:18}}]}),polylineBarrierRenderer:new x({type:"uniqueValue",field1:"BarrierType",defaultSymbol:{color:[255,0,0,184],width:7.5,type:"esriSLS",style:"esriSLSSolid"},uniqueValueInfos:[{value:"1",symbol:{color:[255,85,0,184],width:7.5,type:"esriSLS",style:"esriSLSSolid"}}]}),polygonBarrierRenderer:new x({type:"uniqueValue",field1:"BarrierType",defaultSymbol:{color:[255,0,0,156],outline:{color:[255,0,0,153],width:2.4,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",
style:"esriSFSSolid"},uniqueValueInfos:[{value:"1",symbol:{color:[255,170,0,156],outline:{color:[255,0,0,153],width:7.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}}]}),_geometryService:null,_jsonStringFieldSize:1048576,constructor:function(b,a){b&&(this.portal=new Q.Portal(b),this._outSR=a)},getFolders:function(){return this.portal?this.portal.signIn().then(k.hitch(this,function(){return this.portal.getPortalUser().getFolders()},!1)).then(k.hitch(this,function(b){var a=
this.portal.getPortalUser();b=b||[];b.splice(0,0,{created:a.created,portal:this.portal,title:a.username+" ("+p.networkAnalysis.sharing.rootFolder+")",url:a.userContentUrl});return b})):[]},canCreateItem:function(){var b=new s;this.portal?this.portal.signIn().then(k.hitch(this,function(){b.resolve(-1<(this.portal.getPortalUser().privileges||[]).indexOf("portal:user:createItem"))}),b.reject):b.reject(Error("No URL to a Portal instance or ArcGIS Online was specified at construction time."));return b.promise},
toMinutes:function(b,a,c){b=b||0;switch(a){case "esriNAUSeconds":b/=Math.pow(60,c?-1:1);break;case "esriNAUHours":b*=Math.pow(60,c?-1:1);break;case "esriNAUDays":b*=Math.pow(1440,c?-1:1)}return b},fromMinutes:function(b,a){return this.toMinutes(b,a,!0)},toMeters:function(b,a,c){b=b||0;switch((a||"").replace("esriNAU","esri")){case "esriInches":b*=Math.pow(0.0254,c?-1:1);break;case "esriFeet":b*=Math.pow(0.3048,c?-1:1);break;case "esriYards":b*=Math.pow(0.9144,c?-1:1);break;case "esriMiles":b*=Math.pow(1609.344,
c?-1:1);break;case "esriNauticalMiles":b*=Math.pow(1851.995396854,c?-1:1);break;case "esriMillimeters":b/=Math.pow(1E3,c?-1:1);break;case "esriCentimeters":b/=Math.pow(100,c?-1:1);break;case "esriKilometers":b*=Math.pow(1E3,c?-1:1);break;case "esriDecimeters":b/=Math.pow(10,c?-1:1)}return b},fromMeters:function(b,a){return this.toMeters(b,a,!0)},toGeolocalTime:function(b,a){return void 0===b||null===b?void 0:b+6E4*(a||0)},toUTCTime:function(b,a){-22091616E5===b&&(b=void 0);return null!==a&&void 0!==
a?b-6E4*a:b},getUTCOffset:function(b,a){return null!==a&&void 0!==a&&0<a?(b-a)/60/1E3:void 0},getAttributeUnits:function(b,a){for(var c=a.networkDataset.networkAttributes,g,d=0;d<c.length;d++)if(c[d].name===b&&"esriNAUTCost"===c[d].usageType){g=c[d].units;break}return g},addAttributePrefix:function(b,a){var c={},g;for(g in b)b.hasOwnProperty(g)&&(c[a+g]=b[g]);return c},project:function(b,a,c){var g=new s;if(b&&b.length&&a&&c&&a.wkid!==c.wkid){var d=a instanceof B?a:new B(a),f=c instanceof B?c:new B(c);
if(N.canProject(d,f))E.forEach(b,function(a,c){a.geometry&&(a.geometry.spatialReference||(a.geometry.spatialReference=d.toJson()),a=new K(a),a.setGeometry(N.project(a.geometry,f)),b[c]=a.toJson())}),g.resolve(b);else if(!this._geometryService&&(this.portal&&this.portal.helperServices.geometry)&&(this._geometryService=new T(this.portal.helperServices.geometry.url)),this._geometryService){var e=k.hitch(this,function(a,c){var d=new U,e=new s;d.outSR=f;d.geometries=[a.geometry];this._geometryService.project(d).then(k.hitch(this,
function(d){a.setGeometry(d[0]);b[c]=a.toJson();e.resolve()}),e.reject);return e.promise}),h=[];E.forEach(b,k.hitch(this,function(a,b){a.geometry&&(a.geometry.spatialReference||(a.geometry.spatialReference=d.toJson()),h.push(e(new K(a),b)))}));F(h).then(g.resolve,g.reject)}else g.resolve(b)}else g.resolve(b);return g.promise},load:function(b,a){var c=new s,g=k.hitch(this,this.fromMeters),d=k.hitch(this,this.fromMinutes),f=k.hitch(this,this.addAttributePrefix);this.portal?this.portal.signIn().then(k.hitch(this,
function(){var e=this.portal.getPortalUser(),h=e.userContentUrl.replace(/\/users\/.+\/?$/,"/items/");v({url:h+b,content:{f:"json"},callbackParamName:"callback"}).then(k.hitch(this,function(l){v({url:h+b+"/data",content:{f:"json"},callbackParamName:"callback"}).then(k.hitch(this,function(b){var h=function(a){for(var d=0;d<b.layers.length;d++)if(b.layers[d].layerDefinition.name===a)return b.layers[d]},s=h("Directions"),q=s&&s.featureSet.features||[],n=h("DirectionEvents"),u=n&&n.featureSet.features||
[],H=h("Stops"),t=H&&H.featureSet.features||[],I=(n=h("PolygonBarriers"))&&n.featureSet.features||[],w=(n=h("PolylineBarriers"))&&n.featureSet.features||[],x=(n=h("Barriers"))&&n.featureSet.features||[],C=(h=h("RouteInfo"))&&h.featureSet.features,n=t&&t.length?H.featureSet.spatialReference||t[0].geometry.spatialReference:null,y=this._outSR?this._outSR:n,v=[this.project(q,n,this._outSR),this.project(u,n,this._outSR),this.project(t,n,this._outSR),this.project(I,n,this._outSR),this.project(w,n,this._outSR),
this.project(x,n,this._outSR),this.project(C,n,this._outSR)],D=h&&h.layerDefinition&&[{geometry:h.layerDefinition.extent}];D&&v.push(this.project(D,n,this._outSR));F(v).then(k.hitch(this,function(){C=C&&C[0];D=D&&D[0].geometry;var b=C&&C.attributes,h=b?r.parse(b.AnalysisSettings):void 0,n=h?h.travelMode.timeAttributeName:void 0,m=h?h.travelMode.distanceAttributeName:void 0,A=this.getAttributeUnits(n,a),v=this.getAttributeUnits(m,a),z=a.directionsLengthUnits,V=b?b.Messages:void 0,E=[],F=s&&b?{directions:{routeId:1,
routeName:b.RouteName,summary:{totalLength:this.fromMeters(b.TotalMeters,z),totalTime:this.fromMinutes(b.TotalMinutes,A),totalDriveTime:this.fromMinutes(b.TotalMinutes-b.TotalWaitMinutes,A),envelope:D},spatialReference:y,geometryType:"esriGeometryPolyline",features:k.hitch(this,function(){for(var a=[],b=function(a){var b=a,c=q[b].geometry;a=function(a){for(;!c&&(0>a&&0<b||0<a&&b<q.length-1);){b+=a;var d=q[b].geometry;if(d&&d.paths&&d.paths[0]){c={paths:[[d.paths[0][0<a?0:d.paths[0].length-1],d.paths[0][0<
a?0:d.paths[0].length-1]]],spatialReference:y};break}}return c};return a(1)||a(-1)},d=k.hitch(this,function(a){for(var b=[],c=0;c<u.length;c++)u[c].attributes.DirectionSequence===a&&(b.push({ETA:this.toGeolocalTime(u[c].attributes.ArrivalTime,u[c].attributes.UTCOffset),arriveTimeUTC:null===u[c].attributes.UTCOffset?void 0:u[c].attributes.ArrivalTime,strings:r.parse(u[c].attributes.EventMessages)||[],point:{x:u[c].geometry.x,y:u[c].geometry.y}}),u[c].attributes.EventText&&b[b.length-1].strings.splice(0,
0,{string:u[c].attributes.EventText,stringType:"esriDSTGeneral"}));return b}),c=0;c<q.length;c++){var f={attributes:{length:this.fromMeters(q[c].attributes.Meters,z),time:this.fromMinutes(q[c].attributes.Minutes,A),text:q[c].attributes.DirectionText,ETA:this.toGeolocalTime(q[c].attributes.ArrivalTime,q[c].attributes.UTCOffset),arriveTimeUTC:null===q[c].attributes.UTCOffset?void 0:q[c].attributes.ArrivalTime,maneuverType:q[c].attributes.ManeuverType,_stopSequence:q[c].attributes.StopSequence},geometry:b(c)||
t[0]&&t[0].geometry&&{paths:[[[t[0].geometry.x,t[0].geometry.y]]],spatialReference:y},strings:r.parse(q[c].attributes.ManeuverMessages||"[]"),events:d(c)};0===f.strings.length&&delete f.strings;a.push(f)}return a})()},stops:k.hitch(this,function(){for(var a=[],b=0;b<t.length;b++){var c=t[b].attributes,d={geometry:t[b].geometry,attributes:{ObjectID:c.__OBJECTID,Name:c.Name,RouteName:null,Sequence:c.Sequence,TimeWindowStart:c.TimeWindowStart,TimeWindowEnd:c.TimeWindowEnd,ArriveCurbApproach:c.ArrivalCurbApproach,
DepartCurbApproach:c.DepartureCurbApproach,CurbApproach:c.CurbApproach,Status:c.Status,ArriveTime:this.toGeolocalTime(c.ArrivalTime,c.ArrivalUTCOffset),DepartTime:this.toGeolocalTime(c.DepartureTime,c.DepartureUTCOffset),ArriveTimeUTC:c.ArrivalTime,DepartTimeUTC:c.DepartureTime,isWaypoint:1===c.LocationType}},e=d.attributes;e["Attr_"+n]=this.fromMinutes(c.ServiceMinutes,A);e["Attr_"+m]=this.fromMeters(c.ServiceMeters,v);k.mixin(e,f(r.parse(c.ServiceCosts||"{}"),"Attr_"));e["Cumul_"+n]=this.fromMinutes(c.CumulativeMinutes,
A);e["Cumul_"+m]=this.fromMeters(c.CumulativeMeters,v);k.mixin(e,f(r.parse(c.CumulativeCosts||"{}"),"Cumul_"));a.push(d)}return a})(),routeName:b.RouteName,spatialReference:y}:void 0,J=!1,b=H?k.mixin({returnStops:!0,returnDirections:!0,returnRoutes:!1,ignoreInvalidLocations:!0,outputLines:"esriNAOutputLineTrueShape",directionsOutputType:"complete",directionsLengthUnits:z,doNotLocateOnRestrictedElements:!0,outSpatialReference:new B(y),startTime:b?b.StartTime:null,stops:new G(function(){for(var a=[],
b=0;b<t.length;b++){var c=t[b].attributes,e={geometry:t[b].geometry,attributes:{CurbApproach:c.CurbApproach,Name:c.Name,Sequence:c.Sequence,isWaypoint:1===c.LocationType,TimeWindowStart:c.TimeWindowStart,TimeWindowEnd:c.TimeWindowEnd}};e.attributes["Attr_"+n]=d(c.ServiceMinutes,A);e.attributes["Attr_"+m]=g(c.ServiceMeters,v);k.mixin(e.attributes,f(r.parse(c.ServiceCosts||"{}"),"Attr_"));a.push(e);J=J||0<c.TimeWindowStart}return{spatialReference:y,geometryType:"esriGeometryPoint",features:a}}()),barriers:new G(function(){for(var a=
[],b=0;b<x.length;b++){var c=x[b].attributes,d={geometry:x[b].geometry,attributes:{CurbApproach:c.CurbApproach,Name:c.Name,FullEdge:c.FullEdge,BarrierType:c.BarrierType}};k.mixin(d.attributes,f(r.parse(c.Costs||c.OtherCosts||"{}"),"Attr_"));a.push(d)}return{spatialReference:y,geometryType:"esriGeometryPoint",features:a}}()),polylineBarriers:new G(function(){for(var a=[],b=0;b<w.length;b++){var c=w[b].attributes,d={geometry:w[b].geometry,attributes:{Name:c.Name,ScaleFactor:c.ScaleFactor,BarrierType:c.BarrierType}};
k.mixin(d.attributes,f(r.parse(c.Costs||c.OtherCosts||"{}"),"Attr_"));a.push(d)}return{spatialReference:y,geometryType:"esriGeometryPolyline",features:a}}()),polygonBarriers:new G(function(){for(var a=[],b=0;b<I.length;b++){var c=I[b].attributes,d={geometry:I[b].geometry,attributes:{Name:c.Name,ScaleFactor:c.ScaleFactor,BarrierType:c.BarrierType}};k.mixin(d.attributes,f(r.parse(c.Costs||c.OtherCosts||"{}"),"Attr_"));a.push(d)}return{spatialReference:y,geometryType:"esriGeometryPolygon",features:a}}())},
h):void 0;k.mixin(b||{},{useTimeWindows:J});(!A||!v)&&E.push({message:p.networkAnalysis.sharing.costAttributeMissing,messageType:"Warning"});c.resolve({routeParameters:k.mixin(new R,b),solveResult:{barriers:b&&b.barriers&&b.barriers.features||[],polygonBarriers:b&&b.polygonBarriers&&b.polygonBarriers.features||[],polylineBarriers:b&&b.polylineBarriers&&b.polylineBarriers.features||[],messages:r.parse(V||"[]"),routeResults:F?[new S(F)]:void 0},loadMessages:E,isItemOwner:e.username===l.owner,title:l.title,
ownerFolder:l.ownerFolder})}),c.reject)}),c.reject)}),c.reject)}),c.reject):c.reject(Error("No URL to a Portal instance or ArcGIS Online was specified at construction time."));return c.promise},store:function(b,a){var c=new s;b?!b.directions||!b.directions||!b.directions.length?c.reject(Error("Directions are required.")):!b.stops||!b.stops.length?c.reject(Error("Stops are required.")):b.extent?b.routeInfo?b.folder?b.name?this.portal?this.portal.signIn().then(k.hitch(this,function(){var g=this._getRouteId();
this._addOrUpdateItem(this._populateLayerInfo(g,b),b,g,a).then(c.resolve,c.reject)}),c.reject):c.reject(Error("No URL to a Portal instance or ArcGIS Online was specified at construction time.")):c.reject(Error("Layer name is required.")):c.reject(Error("Folder Url is required.")):c.reject(Error("RouteInfo are required.")):c.reject(Error("Extent is required.")):c.reject(Error("Missing required parameters."));return c.promise},createFeatureCollection:function(b){var a=new s;if(b)if(!b.directions||!b.directions||
!b.directions.length)a.reject(Error("Directions are required."));else if(!b.stops||!b.stops.length)a.reject(Error("Stops are required."));else if(b.extent)if(b.routeInfo)if(b.name){var c=this._getRouteId();a.resolve({title:b.name,layerInfo:this._populateLayerInfo(c,b)})}else a.reject(Error("Layer name is required."));else a.reject(Error("RouteInfo are required."));else a.reject(Error("Extent is required."));else a.reject(Error("Missing required parameters."));return a.promise},_addOrUpdateItem:function(b,
a,c,g){return k.hitch(this,function(){var b=new s;a.extent?this.project([{geometry:a.extent}],a.extent.spatialReference,new B(4326)).then(k.hitch(this,function(a){var c;a&&a[0]&&(a=a[0].geometry,c=a.xmin+","+a.ymin+","+a.xmax+","+a.ymax);b.resolve(c)}),b.resolve):b.resolve();return b.promise})().then(k.hitch(this,function(c){return v({url:g?a.folder+"/items/"+g+"/update":a.folder+"/addItem",content:{text:r.stringify(b),extent:c,title:a.name,type:"Feature Collection",typeKeywords:"Data, Feature Collection, Multilayer, Route Layer",
description:p.networkAnalysis.sharing.itemSnippet+" "+a.name+k.hitch(this,function(){var a=function(a){for(var c=0;c<b.layers.length;c++)if(b.layers[c].layerDefinition.name===a)return b.layers[c].featureSet.features;return[]},c=a("Directions"),d=a("Stops"),g=a("RouteInfo")[0].attributes,m="english"===this.portal.getPortalUser().units?"esriMiles":"esriMeters",r=function(a){return P.format(a,{places:2,locale:"root"})},s=k.hitch(this,function(a){return r(this.fromMeters(a,m))+" "+("esriMiles"===m?p.networkAnalysis.sharing.Miles:
p.networkAnalysis.sharing.Meters)}),a=k.hitch(this,function(a){for(var b="\x3col\x3e",f=0;f<c.length;f++){var g;a:{g=c[f].attributes.StopSequence;if(void 0!==g)for(var k=0;k<d.length;k++)if(d[k].attributes.Sequence===g){g=d[k].attributes;break a}g={}}k=c[f].attributes.ManeuverType;if(a||!f&&"esriDMTDepart"===k||f&&"esriDMTStop"===k)b+='\x3cli\x3e\x3cimg style\x3d"display:inline-block;margin:-3px 15px;" src\x3d"js/jsapi/esri/dijit/images/Directions/maneuvers/'+(null===g.ArrivalCurbApproach&&null!==
g.DepartureCurbApproach?"esriDMTStopOrigin":null!==g.ArrivalCurbApproach&&null===g.DepartureCurbApproach?"esriDMTStopDestination":c[f].attributes.ManeuverType)+'.png"\x3e\x3cspan\x3e'+c[f].attributes.DirectionText+"\x3c/span\x3e\x3cbr\x3e",a&&(b+="\x3cspan\x3e"+r(c[f].attributes.Minutes)+" "+p.networkAnalysis.sharing.Minutes+"\x26nbsp;\x26middot;\x26nbsp;"+s(c[f].attributes.Meters)+"\x3c/span\x3e"),b+="\x3c/li\x3e"}return b+"\x3c/ol\x3e"}),g="\x3cbr\x3e\x3cbr\x3e\x3cb\x3e"+p.networkAnalysis.sharing.routeInfoLayer+
"\x3c/b\x3e\x3cul\x3e\x3cli\x3e"+r(g.TotalMinutes)+" "+p.networkAnalysis.sharing.Minutes+"\x3c/li\x3e\x3cli\x3e"+s(g.TotalMeters)+"\x3c/li\x3e"+(void 0!==g.StartTime?"\x3cli\x3e"+p.networkAnalysis.sharing.StartTime+" "+(new Date(g.StartTime)).toString()+"\x3c/li\x3e":"")+"\x3c/ul\x3e\x3cb\x3e"+p.networkAnalysis.sharing.directionsLayer+"\x3c/b\x3e",q=a(!0);65536<=(g+q).length&&(q=a(!1));return g+q})(),tags:p.networkAnalysis.sharing.itemTags,snippet:p.networkAnalysis.sharing.itemSnippet+" "+a.name,
thumbnailUrl:a.thumbnail,licenseInfo:p.widgets.directions.printDisclaimer,f:"json"},callbackParamName:"callback"},{usePost:!0})}))},_getRouteId:function(){for(var b="",a=0;32>a;a++)b+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[Math.floor(62*Math.random())];return b},_populateLayerInfo:function(b,a){var c={visibility:!0,layers:[],visibleLayers:[0,3,4,5,6],opacity:1};this._addRouteInfoToLayerInfo(c,b,a.routeInfo,a.extent);this._addDirectionsToLayerInfo(c,b,a.directions,a.extent);
this._addDirectionEventsToLayerInfo(c,b,a.directionEvents,a.extent);this._addBarriersToLayerInfo(c,b,a.barriers,a.extent);this._addPolylineBarriersToLayerInfo(c,b,a.polylineBarriers,a.extent);this._addPolygonBarriersToLayerInfo(c,b,a.polygonBarriers,a.extent);this._addStopsToLayerInfo(c,b,a.stops,a.extent);return c},_addStopsToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d={type:"codedValue",name:"esriNACurbApproachType",codedValues:[{name:a.enums.esriNACurbApproachType.esriNAEitherSideOfVehicle,
code:0},{name:a.enums.esriNACurbApproachType.esriNARightSideOfVehicle,code:1},{name:a.enums.esriNACurbApproachType.esriNALeftSideOfVehicle,code:2},{name:a.enums.esriNACurbApproachType.esriNANoUTurn,code:3}]},f=this._generateFeatureCollectionTemplate("Stops",a.sharing.stopsLayer,"esriGeometryPoint"),e=f.layerDefinition.fields,h=0<c[0].attributes.ArrivalTime;e.push(this._createField("CurbApproach",a.fields.stops.CurbApproach,"integer",!1,d));e.push(this._createField("ArrivalCurbApproach",a.fields.stops.ArrivalCurbApproach,
"integer",!0,d));e.push(this._createField("DepartureCurbApproach",a.fields.stops.DepartureCurbApproach,"integer",!0,d));e.push(this._createField("Name",a.fields.stops.Name,"string",!0));e.push(this._createField("Sequence",a.fields.stops.Sequence,"integer",!0));e.push(this._createField("Status",a.fields.stops.Status,"integer",!0,{type:"codedValue",name:"esriNAObjectStatus",codedValues:[{name:a.enums.esriNAObjectStatus.esriNAObjectStatusOK,code:0},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusNotLocated,
code:1},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusElementNotLocated,code:2},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusElementNotTraversable,code:3},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusInvalidFieldValues,code:4},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusNotReached,code:5},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusTimeWindowViolation,code:6}]}));e.push(this._createField("LocationType",a.fields.stops.LocationType,"integer",!0,{type:"codedValue",name:"esriNALocationType",
codedValues:[{name:a.enums.esriNALocationType.stop,code:0},{name:a.enums.esriNALocationType.waypoint,code:1}]}));e.push(this._createField("TimeWindowStart",a.fields.stops.TimeWindowStart,"date",!1));e.push(this._createField("TimeWindowEnd",a.fields.stops.TimeWindowEnd,"date",!1));e.push(this._createField("ServiceMinutes",a.fields.stops.ServiceMinutes,"double",!1));e.push(this._createField("ServiceMeters",a.fields.stops.ServiceMeters,"double",!1));e.push(this._createField("ServiceCosts",a.fields.stops.ServiceCosts,
"string",!1,null,this._jsonStringFieldSize));e.push(this._createField("CumulativeMinutes",a.fields.stops.CumulativeMinutes,"double",!0));e.push(this._createField("CumulativeMeters",a.fields.stops.CumulativeMeters,"double",!0));e.push(this._createField("CumulativeCosts",a.fields.stops.CumulativeCosts,"string",!1,null,this._jsonStringFieldSize));e.push(this._createField("LateMinutes",a.fields.stops.LateMinutes,"double",!1));e.push(this._createField("WaitMinutes",a.fields.stops.WaitMinutes,"double",
!1));e.push(this._createField("ArrivalTime",a.fields.stops.ArrivalTime,"date",h));e.push(this._createField("DepartureTime",a.fields.stops.DepartureTime,"date",h));e.push(this._createField("ArrivalUTCOffset",a.fields.stops.ArrivalUTCOffset,"integer",h));e.push(this._createField("DepartureUTCOffset",a.fields.stops.DepartureUTCOffset,"integer",h));for(d=e=0;d<c.length;d++){var l=c[d],m=l.geometry;f.featureSet.features.push({geometry:m.toJson?m.toJson():m,attributes:k.mixin(l.attributes,{__OBJECTID:e++})})}f.layerDefinition.extent=
g.toJson?g.toJson():g;g=new x(2>=c.length?new w(this.firstStopSymbol):new w(this.interimStopSymbol),"Sequence");for(d=0;d<c.length;d++)e=c[d].attributes,l=null,m=a.enums.esriNALocationType.stop,1===e.LocationType?(l=new L(this.waypointSymbol),m=a.enums.esriNALocationType.waypoint):null===e.ArrivalCurbApproach&&null===e.DepartureCurbApproach?(l=new w(this.unlocatedStopSymbol),m=a.enums.esriNALocationType.stop+" : "+a.enums.esriNAObjectStatus.esriNAObjectStatusNotReached):null===e.ArrivalCurbApproach&&
null!==e.DepartureCurbApproach?l=new w(this.firstStopSymbol):null!==e.ArrivalCurbApproach&&null===e.DepartureCurbApproach&&(l=new w(this.lastStopSymbol)),l&&g.addValue({value:e.Sequence,symbol:l,label:m});f.layerDefinition.drawingInfo.renderer=g.toJson();f.popupInfo={title:"{Name}",fieldInfos:[{fieldName:"Name",label:a.fields.stops.Name,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"Sequence",label:a.fields.stops.Sequence,isEditable:!1,tooltip:"",
visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ArrivalTime",label:a.fields.stops.ArrivalTime,isEditable:!0,tooltip:"",visible:h,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ArrivalUTCOffset",label:a.fields.stops.ArrivalUTCOffset,isEditable:!1,tooltip:"",visible:h,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"DepartureTime",label:a.fields.stops.DepartureTime,
isEditable:!0,tooltip:"",visible:h,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"DepartureUTCOffset",label:a.fields.stops.DepartureUTCOffset,isEditable:!1,tooltip:"",visible:h,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"CurbApproach",label:a.fields.stops.CurbApproach,isEditable:!0,tooltip:"",visible:!1,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},
{fieldName:"ArrivalCurbApproach",label:a.fields.stops.ArrivalCurbApproach,isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"DepartureCurbApproach",label:a.fields.stops.DepartureCurbApproach,isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Status",label:a.fields.stops.Status,isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},
stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"LocationType",label:a.fields.stops.LocationType,isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TimeWindowStart",label:a.fields.stops.TimeWindowStart,isEditable:!0,tooltip:"",visible:!1,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"TimeWindowEnd",label:a.fields.stops.TimeWindowEnd,isEditable:!0,
tooltip:"",visible:!1,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"ServiceMinutes",label:a.fields.stops.ServiceMinutes,isEditable:!0,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"ServiceMeters",label:a.fields.stops.ServiceMeters,isEditable:!0,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"ServiceCosts",
label:a.fields.stops.ServiceCosts,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"CumulativeMinutes",label:a.fields.stops.CumulativeMinutes,isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"CumulativeMeters",label:a.fields.stops.CumulativeMeters,isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},
{fieldName:"CumulativeCosts",label:a.fields.stops.CumulativeCosts,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"LateMinutes",label:a.fields.stops.LateMinutes,isEditable:!1,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"WaitMinutes",label:a.fields.stops.WaitMinutes,isEditable:!1,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1}],
description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(f)},_addDirectionsToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d=a.enums.esriDirectionsManeuverType,f=this._generateFeatureCollectionTemplate("Directions",a.sharing.directionsLayer,"esriGeometryPolyline"),e=f.layerDefinition.fields,h=c[0]&&c[0].attributes&&0<c[0].attributes.ArrivalTime;e.push(this._createField("Sequence",a.fields.directions.Sequence,"integer"));e.push(this._createField("StopSequence",a.fields.directions.StopSequence,
"integer"));e.push(this._createField("ArrivalTime",a.fields.directions.ArrivalTime,"date",h));e.push(this._createField("UTCOffset",a.fields.directions.UTCOffset,"integer",h));e.push(this._createField("ManeuverType",a.fields.directions.ManeuverType,"string",!0,{type:"codedValue",name:"esriDirectionsManeuverType",codedValues:[{name:d.esriDMTBearLeft,code:"esriDMTBearLeft"},{name:d.esriDMTBearRight,code:"esriDMTBearRight"},{name:d.esriDMTDepart,code:"esriDMTDepart"},{name:d.esriDMTDoorPassage,code:"esriDMTDoorPassage"},
{name:d.esriDMTElevator,code:"esriDMTElevator"},{name:d.esriDMTEndOfFerry,code:"esriDMTEndOfFerry"},{name:d.esriDMTEscalator,code:"esriDMTEscalator"},{name:d.esriDMTFerry,code:"esriDMTFerry"},{name:d.esriDMTForkCenter,code:"esriDMTForkCenter"},{name:d.esriDMTForkLeft,code:"esriDMTForkLeft"},{name:d.esriDMTForkRight,code:"esriDMTForkRight"},{name:d.esriDMTHighwayChange,code:"esriDMTHighwayChange"},{name:d.esriDMTHighwayExit,code:"esriDMTHighwayExit"},{name:d.esriDMTHighwayMerge,code:"esriDMTHighwayMerge"},
{name:d.esriDMTPedestrianRamp,code:"esriDMTPedestrianRamp"},{name:d.esriDMTRampLeft,code:"esriDMTRampLeft"},{name:d.esriDMTRampRight,code:"esriDMTRampRight"},{name:d.esriDMTRoundabout,code:"esriDMTRoundabout"},{name:d.esriDMTSharpLeft,code:"esriDMTSharpLeft"},{name:d.esriDMTSharpRight,code:"esriDMTSharpRight"},{name:d.esriDMTStairs,code:"esriDMTStairs"},{name:d.esriDMTStop,code:"esriDMTStop"},{name:d.esriDMTStraight,code:"esriDMTStraight"},{name:d.esriDMTTripItem,code:"esriDMTTripItem"},{name:d.esriDMTTurnLeft,
code:"esriDMTTurnLeft"},{name:d.esriDMTTurnLeftLeft,code:"esriDMTTurnLeftLeft"},{name:d.esriDMTTurnLeftRight,code:"esriDMTTurnLeftRight"},{name:d.esriDMTTurnRight,code:"esriDMTTurnRight"},{name:d.esriDMTTurnRightLeft,code:"esriDMTTurnRightLeft"},{name:d.esriDMTTurnRightRight,code:"esriDMTTurnRightRight"},{name:d.esriDMTUnknown,code:"esriDMTUnknown"},{name:d.esriDMTUTurn,code:"esriDMTUTurn"}]}));e.push(this._createField("Meters",a.fields.directions.Meters,"double",!0));e.push(this._createField("Minutes",
a.fields.directions.Minutes,"double",!0));e.push(this._createField("DirectionText",a.fields.directions.DirectionText,"string",!0,null,2048));e.push(this._createField("ManeuverMessages",a.fields.directions.ManeuverMessages,"string",!1,null,this._jsonStringFieldSize));for(e=d=0;e<c.length;e++){var l=c[e],m=l.geometry;f.featureSet.features.push({geometry:m&&m.toJson?m.toJson():m,attributes:k.mixin(l.attributes,{__OBJECTID:d++})})}f.layerDefinition.extent=g.toJson?g.toJson():g;c=new z(new M(this.directionSymbol));
f.layerDefinition.drawingInfo.renderer=c.toJson();f.popupInfo={title:"{Text}",fieldInfos:[{fieldName:"ManeuverType",label:a.fields.directions.ManeuverType,isEditable:!1,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"DirectionText",label:a.fields.directions.DirectionText,isEditable:!1,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Sequence",label:a.fields.directions.Sequence,isEditable:!1,tooltip:"",visible:!1,format:{places:0,
digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"StopSequence",label:a.fields.directions.StopSequence,isEditable:!1,tooltip:"",visible:!1,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ArrivalTime",label:a.fields.directions.ArrivalTime,isEditable:!0,tooltip:"",visible:h,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"UTCOffset",label:a.fields.directions.UTCOffset,
isEditable:!1,tooltip:"",visible:h,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Meters",label:a.fields.directions.Meters,isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Minutes",label:a.fields.directions.Minutes,isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ManeuverMessages",
label:a.fields.directions.ManeuverMessages,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1}],description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(f)},_addDirectionEventsToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d=this._generateFeatureCollectionTemplate("DirectionEvents",a.sharing.directionEventsLayer,"esriGeometryPoint"),f=d.layerDefinition.fields,e=c[0]&&c[0].attributes&&0<c[0].attributes.ArrivalTime;f.push(this._createField("ArrivalTime",
a.fields.directionEvents.ArrivalTime,"date",e));f.push(this._createField("UTCOffset",a.fields.directionEvents.UTCOffset,"integer",e));f.push(this._createField("DirectionSequence",a.fields.directionEvents.DirectionSequence,"integer"));f.push(this._createField("Sequence",a.fields.directionEvents.Sequence,"integer"));f.push(this._createField("EventText",a.fields.directionEvents.EventText,"string",!0,null,2048));f.push(this._createField("EventMessages",a.fields.directionEvents.EventMessages,"string",
!1,null,this._jsonStringFieldSize));for(var h=f=0;h<c.length;h++){var l=c[h],m=l.geometry;d.featureSet.features.push({geometry:m&&m.toJson?m.toJson():m,attributes:k.mixin(l.attributes,{__OBJECTID:f++})})}d.layerDefinition.extent=g.toJson?g.toJson():g;c=new z(new L(this.directionEventSymbol));d.layerDefinition.drawingInfo.renderer=c.toJson();d.popupInfo={title:a.sharing.directionEventsLayer,fieldInfos:[{fieldName:"EventText",label:a.fields.directionEvents.EventText,isEditable:!1,tooltip:"",visible:!0,
stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ArrivalTime",label:a.fields.directionEvents.ArrivalTime,isEditable:!0,tooltip:"",visible:e,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"UTCOffset",label:a.fields.directionEvents.UTCOffset,isEditable:!1,tooltip:"",visible:e,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"DirectionSequence",label:a.fields.directionEvents.DirectionSequence,
isEditable:!1,tooltip:"",visible:!1,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Sequence",label:a.fields.directionEvents.Sequence,isEditable:!1,tooltip:"",visible:!1,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"EventMessages",label:a.fields.directionEvents.EventMessages,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1}],description:null,showAttachments:!1,
mediaInfos:[]};b.layers.push(d)},_addBarriersToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d=this._generateFeatureCollectionTemplate("Barriers",a.sharing.barriersLayer,"esriGeometryPoint"),f=d.layerDefinition.fields;f.push(this._createField("Name",a.fields.barriers.Name,"string",!0));f.push(this._createField("BarrierType",a.fields.barriers.BarrierType,"integer",!0,{type:"codedValue",name:"esriNABarrierType",codedValues:[{name:a.enums.esriNABarrierType.esriNABTRestriction,code:0},{name:a.enums.esriNABarrierType.esriNABTScaledCost,
code:1},{name:a.enums.esriNABarrierType.esriNABTAddedCost,code:2}]}));f.push(this._createField("FullEdge",a.fields.barriers.FullEdge,"integer",!0,{type:"codedValue",name:"esriNAIntYesNo",codedValues:[{name:a.enums.esriNAIntYesNo.No,code:0},{name:a.enums.esriNAIntYesNo.Yes,code:1}]}));f.push(this._createField("AddedCost",a.fields.barriers.AddedCost,"double",!0));f.push(this._createField("Costs",a.fields.barriers.Costs,"string",!1,null,this._jsonStringFieldSize));f.push(this._createField("Status",a.fields.barriers.Status,
"integer",!0,{type:"codedValue",name:"esriNAObjectStatus",codedValues:[{name:a.enums.esriNAObjectStatus.esriNAObjectStatusOK,code:0},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusNotLocated,code:1},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusElementNotLocated,code:2},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusElementNotTraversable,code:3},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusInvalidFieldValues,code:4},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusNotReached,
code:5},{name:a.enums.esriNAObjectStatus.esriNAObjectStatusTimeWindowViolation,code:6}]}));f.push(this._createField("CurbApproach",a.fields.barriers.CurbApproach,"integer",!1,{type:"codedValue",name:"esriNACurbApproachType",codedValues:[{name:a.enums.esriNACurbApproachType.esriNAEitherSideOfVehicle,code:0},{name:a.enums.esriNACurbApproachType.esriNARightSideOfVehicle,code:1},{name:a.enums.esriNACurbApproachType.esriNALeftSideOfVehicle,code:2},{name:a.enums.esriNACurbApproachType.esriNANoUTurn,code:3}]}));
for(var e=f=0;e<c.length;e++){var h=c[e],l=h.geometry,m=h.attributes;d.featureSet.features.push({geometry:l&&l.toJson?l.toJson():l,attributes:k.mixin(h.attributes,{__OBJECTID:f++,FullEdge:m.FullEdge||0,Status:m.Status||0,CurbApproach:m.CurbApproach||0})})}d.layerDefinition.extent=g.toJson?g.toJson():g;d.layerDefinition.drawingInfo.renderer=this.barrierRenderer.toJson();d.popupInfo={title:a.sharing.barriersLayer,fieldInfos:[{fieldName:"Name",label:a.fields.barriers.Name,isEditable:!0,tooltip:"",visible:!0,
stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"BarrierType",label:a.fields.barriers.BarrierType,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"CurbApproach",label:a.fields.barriers.CurbApproach,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"FullEdge",label:a.fields.barriers.FullEdge,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"AddedCost",
label:a.fields.barriers.AddedCost,isEditable:!0,tooltip:"",visible:!0,format:{places:3,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Costs",label:a.fields.barriers.Costs,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Status",label:a.fields.barriers.Status,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1}],description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(d)},_addPolylineBarriersToLayerInfo:function(b,
a,c,g){a=p.networkAnalysis;var d=this._generateFeatureCollectionTemplate("PolylineBarriers",a.sharing.polylineBarriersLayer,"esriGeometryPolyline"),f=d.layerDefinition.fields;f.push(this._createField("Name",a.fields.polylineBarriers.Name,"string",!0));f.push(this._createField("BarrierType",a.fields.polylineBarriers.BarrierType,"integer",!0,{type:"codedValue",name:"esriNABarrierType",codedValues:[{name:a.enums.esriNABarrierType.esriNABTRestriction,code:0},{name:a.enums.esriNABarrierType.esriNABTScaledCost,
code:1},{name:a.enums.esriNABarrierType.esriNABTAddedCost,code:2}]}));f.push(this._createField("ScaleFactor",a.fields.polylineBarriers.ScaleFactor,"double",!0));f.push(this._createField("Costs",a.fields.polylineBarriers.Costs,"string",!1,null,this._jsonStringFieldSize));for(var e=f=0;e<c.length;e++){var h=c[e],l=h.geometry;d.featureSet.features.push({geometry:l&&l.toJson?l.toJson():l,attributes:k.mixin(h.attributes,{__OBJECTID:f++})})}d.layerDefinition.extent=g.toJson?g.toJson():g;d.layerDefinition.drawingInfo.renderer=
this.polylineBarrierRenderer.toJson();d.popupInfo={title:a.sharing.polylineBarriersLayer,fieldInfos:[{fieldName:"Name",label:a.fields.polylineBarriers.Name,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"BarrierType",label:a.fields.polylineBarriers.BarrierType,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ScaleFactor",label:a.fields.polylineBarriers.ScaleFactor,isEditable:!0,tooltip:"",visible:!0,
format:{places:3,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Costs",label:a.fields.polylineBarriers.Costs,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1}],description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(d)},_addPolygonBarriersToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d=this._generateFeatureCollectionTemplate("PolygonBarriers",a.sharing.polygonBarriersLayer,"esriGeometryPolygon"),f=d.layerDefinition.fields;
f.push(this._createField("Name",a.fields.polygonBarriers.Name,"string",!0));f.push(this._createField("BarrierType",a.fields.polygonBarriers.BarrierType,"integer",!0,{type:"codedValue",name:"esriNABarrierType",codedValues:[{name:a.enums.esriNABarrierType.esriNABTRestriction,code:0},{name:a.enums.esriNABarrierType.esriNABTScaledCost,code:1},{name:a.enums.esriNABarrierType.esriNABTAddedCost,code:2}]}));f.push(this._createField("ScaleFactor",a.fields.polygonBarriers.ScaleFactor,"double",!0));f.push(this._createField("Costs",
a.fields.polygonBarriers.Costs,"string",!1,null,this._jsonStringFieldSize));for(var e=f=0;e<c.length;e++){var h=c[e],l=h.geometry;d.featureSet.features.push({geometry:l&&l.toJson?l.toJson():l,attributes:k.mixin(h.attributes,{__OBJECTID:f++})})}d.layerDefinition.extent=g.toJson?g.toJson():g;d.layerDefinition.drawingInfo.renderer=this.polygonBarrierRenderer.toJson();d.popupInfo={title:a.sharing.polygonBarriersLayer,fieldInfos:[{fieldName:"Name",label:a.fields.polygonBarriers.Name,isEditable:!0,tooltip:"",
visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"BarrierType",label:a.fields.polygonBarriers.BarrierType,isEditable:!0,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"ScaleFactor",label:a.fields.polygonBarriers.ScaleFactor,isEditable:!0,tooltip:"",visible:!0,format:{places:3,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Costs",label:a.fields.polygonBarriers.Costs,isEditable:!0,tooltip:"",visible:!1,stringFieldOption:"textbox",
isEditableOnLayer:!1}],description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(d)},_addRouteInfoToLayerInfo:function(b,a,c,g){a=p.networkAnalysis;var d=this._generateFeatureCollectionTemplate("RouteInfo",a.sharing.routeInfoLayer,"esriGeometryPolyline"),f=d.layerDefinition.fields,e=void 0!==c.attributes.StartTime&&null!==c.attributes.StartTime;f.push(this._createField("RouteName",a.fields.routeInfo.RouteName,"string",!0,null,1024));f.push(this._createField("TotalMinutes",a.fields.routeInfo.TotalMinutes,
"double",!0));f.push(this._createField("TotalMeters",a.fields.routeInfo.TotalMeters,"double",!0));f.push(this._createField("TotalLateMinutes",a.fields.routeInfo.TotalLateMinutes,"double"));f.push(this._createField("TotalWaitMinutes",a.fields.routeInfo.TotalWaitMinutes,"double"));f.push(this._createField("TotalCosts",a.fields.routeInfo.TotalCosts,"string",!1,null,this._jsonStringFieldSize));f.push(this._createField("StartTime",a.fields.routeInfo.StartTime,"date",e));f.push(this._createField("StartUTCOffset",
a.fields.routeInfo.StartUTCOffset,"integer",e));f.push(this._createField("EndTime",a.fields.routeInfo.EndTime,"date",e));f.push(this._createField("EndUTCOffset",a.fields.routeInfo.EndUTCOffset,"integer",e));f.push(this._createField("Messages",a.fields.routeInfo.Messages,"string",!1,null,this._jsonStringFieldSize));f.push(this._createField("AnalysisSettings",a.fields.routeInfo.AnalysisSettings,"string",!1,null,this._jsonStringFieldSize));f=c.geometry;d.featureSet.features.push({geometry:f&&f.toJson?
f.toJson():f,attributes:k.mixin(c.attributes,{__OBJECTID:0})});d.layerDefinition.extent=g.toJson?g.toJson():g;c=new z(new M(this.routeSymbol));d.layerDefinition.drawingInfo.renderer=c.toJson();d.popupInfo={title:a.sharing.routeInfoLayer,fieldInfos:[{fieldName:"RouteName",label:a.fields.routeInfo.RouteName,isEditable:!1,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TotalMinutes",label:a.fields.routeInfo.TotalMinutes,isEditable:!1,tooltip:"",visible:!0,format:{places:2,
digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TotalMeters",label:a.fields.routeInfo.TotalMeters,isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TotalLateMinutes",label:a.fields.routeInfo.TotalLateMinutes,isEditable:!1,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TotalWaitMinutes",label:a.fields.routeInfo.TotalWaitMinutes,
isEditable:!1,tooltip:"",visible:!1,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"TotalCosts",label:a.fields.routeInfo.TotalCosts,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"StartTime",label:a.fields.routeInfo.StartTime,isEditable:!1,tooltip:"",visible:e,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"StartUTCOffset",label:a.fields.routeInfo.StartUTCOffset,
isEditable:!1,tooltip:"",visible:e,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"EndTime",label:a.fields.routeInfo.EndTime,isEditable:!1,tooltip:"",visible:e,format:{dateFormat:"shortDateShortTime24"},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"EndUTCOffset",label:a.fields.routeInfo.EndUTCOffset,isEditable:!1,tooltip:"",visible:e,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"Messages",
label:a.fields.routeInfo.Messages,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1},{fieldName:"SolverSettings",label:a.fields.routeInfo.SolverSettings,isEditable:!1,tooltip:"",visible:!1,stringFieldOption:"textbox",isEditableOnLayer:!1}],description:null,showAttachments:!1,mediaInfos:[]};b.layers.push(d)},_generateFeatureCollectionTemplate:function(b,a,c){return{layerDefinition:{name:b,title:a,geometryType:c,objectIdField:"__OBJECTID",type:"Feature Layer",typeIdField:"",
drawingInfo:{fixedSymbols:!0},fields:[{name:"__OBJECTID",alias:"OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1,domain:null}],types:[],capabilities:"Query,Update"},featureSet:{features:[],geometryType:c}}},_createField:function(b,a,c,g,d,f){return"integer"===c?{name:b,alias:a,type:"esriFieldTypeInteger",editable:!0,nullable:!0,visible:!!g,domain:d}:"double"===c?{name:b,alias:a,type:"esriFieldTypeDouble",editable:!0,nullable:!0,visible:!!g,domain:d}:"date"===c?{name:b,alias:a,type:"esriFieldTypeDate",
length:36,editable:!0,nullable:!0,visible:!!g,domain:d}:{name:b,alias:a,type:"esriFieldTypeString",length:f||255,editable:!0,nullable:!0,visible:!!g,domain:d}}})});