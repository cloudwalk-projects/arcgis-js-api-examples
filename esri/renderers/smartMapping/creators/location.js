// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports dojo/_base/lang ../../../views/SceneView ../../SimpleRenderer ../../../core/promiseUtils ../symbology/location ./support/utils ../support/utils".split(" "),function(q,h,k,l,m,e,f,d,g){function n(b){if(!b||!b.layer)return e.reject(d.createError("location-renderer:missing-parameters","'layer' parameter is required"));var a=k.mixin({},b);a.basemap=d.getBasemapId(a.basemap);a.symbolType=a.symbolType||"2d";a.layer=g.createLayerAdapter(a.layer);return!a.layer?e.reject(d.createError("location-renderer:invalid-parameters",
"'layer' must be one of these types: "+p)):"3d-volumetric"===a.symbolType&&!(a.view instanceof l)?e.reject(d.createError("location-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric'")):a.layer.load().then(function(){var b=a.layer.geometryType;return-1<a.symbolType.indexOf("3d")&&!("point"===b||"multipoint"===b)?e.reject(d.createError("location-renderer:not-supported","3d symbols are not supported for polyline and polygon layers")):
a})}var p=g.supportedLayerTypes.join(", ");h.createRenderer=function(b){return n(b).then(function(a){var b=a.layer.geometryType,c;c=(c=a.locationScheme)?f.cloneScheme(c):(c=f.getSchemes({basemap:a.basemap,geometryType:b,worldScale:"3d-volumetric"===a.symbolType,view:a.view}))&&c.primaryScheme;return!c?e.reject(d.createError("location-renderer:insufficient-info","Unable to find location scheme")):{renderer:new m({symbol:d.createSymbol(c,c.color,b,a.symbolType)}),locationScheme:f.cloneScheme(c),basemapId:a.basemap}})}});