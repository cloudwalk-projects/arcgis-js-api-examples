// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../core/Logger ../Basemap".split(" "),function(w,d,e,s,t,u,g){function k(a,b){var c;if("string"===typeof a){if(!(a in e))return c=Object.keys(e).map(function(a){return'"'+a+'"'}).join(", "),v.warn("Unable to find basemap definition for: "+a+". Try one of these: "+c),null;b&&(c=b[a]);c||(c=g.fromId(a),b&&(b[a]=c))}else c=s.default(g,a);return c}function l(a,b){return a.map(function(a){return b.find(function(b){var d=
f(a);b=f(b);return d.type===b.type&&d.url===b.url})||a})}function h(a){return!a?null:!a.loaded&&a.resourceInfo?m(a.resourceInfo):{baseLayers:(Array.isArray(a.baseLayers)?a.baseLayers:a.baseLayers.toArray()).map(f),referenceLayers:(Array.isArray(a.referenceLayers)?a.referenceLayers:a.referenceLayers.toArray()).map(f)}}function f(a){return{type:a.type,url:n(a.urlTemplate||a.url||a.styleUrl)}}function m(a){return!a?null:{baseLayers:p(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:p(a.baseMapLayers.filter(function(a){return a.isReference}))}}
function p(a){return a.map(function(a){var c;switch(a.layerType){case "VectorTileLayer":c="vector-tile";break;case "ArcGISTiledMapServiceLayer":c="tile";break;default:c="unknown"}return{type:c,url:n(a.templateUrl||a.urlTemplate||a.styleUrl||a.url)}})}function q(a,b,c){return null!=a!==(null!=b)?"not-equal":!a?"equal":!r(a.baseLayers,b.baseLayers)?"not-equal":r(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal"}function r(a,b){return a.length!==b.length?
!1:!a.some(function(a){return!b.some(function(b){return a.type===b.type&&a.url===b.url})})}function n(a){return a?t.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}var v=u.getLogger("esri.Basemap");d.createCache=function(){return{}};d.ensureType=k;d.clonePreservingTiledLayers=function(a,b){void 0===b&&(b=null);var c=k(a);if(!c)return null;c=new g({id:c.id,title:c.title,baseLayers:c.baseLayers.slice(),referenceLayers:c.referenceLayers.slice()});b&&(c.baseLayers=l(c.baseLayers,b.baseLayers),
c.referenceLayers=l(c.referenceLayers,b.referenceLayers));return c};d.wellKnownBasemapId=function(a){var b=null;a=h(a);for(var c in e){var d=m(e[c]),d=q(a,d,{mustMatchReferences:!1});if("equal"===d){b=c;break}else"base-layers-equal"===d&&(b=c)}return b};d.contentEquals=function(a,b){if(a===b)return!0;var c=h(a),d=h(b);return"equal"===q(c,d,{mustMatchReferences:!0})}});