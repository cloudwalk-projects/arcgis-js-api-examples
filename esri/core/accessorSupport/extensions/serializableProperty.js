// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","dojo/_base/lang"],function(v,e,k){function l(a,b,d){var c=a&&a.json;if(a&&(a.json&&a.json.origins)&&(a=a.json.origins[d.origin]))switch(b){case "read":if("read"in a||"readable"in a||"readFrom"in a)c=a;break;case "write":if("write"in a||"writable"in a||"writeTo"in a||"writeNull"in a||"writeAlways"in a||"writeWith"in a)c=a}return c}function f(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}function g(a){return!!a&&
(!!a.prototype.read||!!a.fromJSON||f(a)&&g(a.prototype.itemType))}function m(a){return a.prototype.read?function(b,d,c){return null==b?b:(new a).read(b,c)}:a.fromJSON}function n(a){var b=m(a);return function(a,c,p){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,p)}):[b(a,null,p)]}}function r(a,b,d){if(g(a)&&(d.json||(d.json={}),!d.json.read))if(b)d.json.read=n(a);else if(f(a)&&g(a.prototype.itemType)){var c=n(a.prototype.itemType);d.json.read=function(b,d){var e=c(b,d);return e?
new a(e):e}}else d.json.read=m(a)}function h(a,b){return a&&"function"===typeof a.toJSON&&!a.toJSON.isDefaultToJSON?a.toJSON():a&&"function"===typeof a.write?a.write({},b):a}function s(a){return function(b,d,c){null===b?b=null:b&&"function"===typeof b.map?(b=b.map(function(a){return h(a,c)}),"function"===typeof b.toArray&&(b=b.toArray())):b=[h(b,c)];k.setObject(a,b,d)}}function t(a){return function(b,d,c){k.setObject(a,h(b,c),d)}}function q(a,b,d,c){if(!1!==c.writable&&(null!=c.write||c.writeTo||
c.writeWith||c.writeAlways))c.writable=!0;null==c.write&&c.writable&&(null!=c.writeTo&&(d=c.writeTo),b||f(a)?c.write=s(d):c.write=t(d))}function u(a){if(a.json&&a.json.origins){var b=a.json.origins,d={portalItem:["portal-item"],webScene:["web-scene"],webMap:["web-map"],webDocument:["web-scene","web-map"],"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var c=b[a];d[a].forEach(function(a){b[a]=c});delete b[a]}};for(var c in d)a(c)}}e.originSpecificReadPropertyDefinition=function(a,b){return l(a,
"read",b)};e.originSpecificWritePropertyDefinition=function(a,b){return l(a,"write",b)};e.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,b,d,c){c=(d=Array.isArray(b.type))?b.type[0]:b.type;u(b);r(c,d,b);if(b.json){if(b.json.origins)for(var e in b.json.origins)q(c,d,a,b.json.origins[e]);q(c,d,a,b.json)}}};Object.defineProperty(e,"__esModule",{value:!0});e.default=e.SerializablePropertyExtension});