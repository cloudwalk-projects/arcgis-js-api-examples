// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),function(w,n,p,f,m,q,r){var s=Object.prototype.hasOwnProperty,t=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Caster)$/,u={Getter:"get",Setter:"set",Reader:"read",Caster:"cast"},v=/^_(set|get)([a-zA-Z0-9]+)Attr$/;n.processPrototype=function(c){for(var k=c.declaredClass,d=c.properties,d=d||{},e=0,g=Object.getOwnPropertyNames(d);e<g.length;e++){var a=g[e],b=d[a],h=typeof b;null==b?f.setPropertyMetadata(c,a,{value:b}):
Array.isArray(b)?f.setPropertyMetadata(c,a,{type:[b[0]],value:null}):"object"===h?p.getProperties(b)||b instanceof Date?f.setPropertyMetadata(c,a,{type:b.constructor,value:b}):f.setPropertyMetadata(c,a,b):"boolean"===h?f.setPropertyMetadata(c,a,{type:Boolean,value:b}):"string"===h?f.setPropertyMetadata(c,a,{type:String,value:b}):"number"===h?f.setPropertyMetadata(c,a,{type:Number,value:b}):"function"===h&&f.setPropertyMetadata(c,a,{type:b,value:null})}e=0;for(g=Object.getOwnPropertyNames(c);e<g.length;e++){var b=
g[e],h=c[b],l=void 0,d=a=void 0;if(l=t.exec(b))a=l[1],d=u[l[2]];else if(l=v.exec(b))a=l[2][0].toLowerCase()+l[2].substr(1),d=l[1].toLowerCase();a&&d&&("read"===d?f.getPropertyMetadata(c,a).json?f.getPropertyMetadata(c,a).json.read=h:f.getPropertyMetadata(c,a).json={read:h}:f.getPropertyMetadata(c,a)[d]=h)}e=0;for(g=Object.getOwnPropertyNames(f.getPropertiesMetadata(c));e<g.length;e++)if(a=g[e],b=f.getPropertyMetadata(c,a),d=b.type,void 0===b.value&&s.call(c,a)&&(b.value=c[a]),!b.cast&&d)switch(d){case Number:b.cast=
m.ensureNumber;break;case Boolean:b.cast=m.ensureBoolean;break;case String:b.cast=m.ensureString;break;case Date:b.cast=m.ensureDate;break;default:Array.isArray(d)?b.cast=m.ensureArray(d[0]):b.cast=m.ensureType(d)}q.processPrototypeMetadatas(f.getPropertiesMetadata(c),k);return f.getPropertiesMetadata(c)};n.processClass=function(c){for(var k=c.prototype,d=k.declaredClass,e=c._meta.bases,g={},a=e.length-1;0<=a;a--)p.merge(g,f.getMetadata(e[a].prototype));var b=g.properties;q.processClassMetadatas(b,
d);Object.defineProperty(c,"__accessorMetadata__",{value:b});for(var h={},d=function(a){var c=b[a];h[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):c.value},set:function(b){var d=this.__accessor__;if(d){if(!Object.isFrozen(this)){if(d.initialized&&c.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);d.set(a,b)}}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,
value:b})}}},e=0,a=Object.getOwnPropertyNames(b);e<a.length;e++)d(a[e]);Object.defineProperties(c.prototype,h);if(g.parameters){c=0;for(d=Object.getOwnPropertyNames(g.parameters);c<d.length;c++)e=d[c],a=Object.getOwnPropertyDescriptor(k,e)||{value:k[e]},(a=r.autocastMethod(k,e,a))&&Object.defineProperty(k,e,a)}return g}});