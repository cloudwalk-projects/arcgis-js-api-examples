// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(t,u){function w(c,b){return c-b}var x=/^-?(\d+)(\.(\d+))?$/i,y=RegExp("\\"+u.decimal+"0+$","g"),z=/(\d)0*$/g,q={numDigits:function(c){var b=String(c),a=b.match(x);c={integer:0,fractional:0};a&&a[1]?(c.integer=a[1].split("").length,c.fractional=a[3]?a[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(a=b.split("e"),b=a[0],a=a[1],b&&a&&(b=Number(b),a=Number(a),(c=0<a)||(a=Math.abs(a)),b=q.numDigits(b),c?(b.integer+=a,b.fractional=
a>b.fractional?0:b.fractional-a):(b.fractional+=a,b.integer=a>b.integer?1:b.integer-a),c=b));return c},percentChange:function(c,b,a,l){var n={previous:null,next:null},g;null!=a&&(g=c-a,a=b-a-g,n.previous=Math.floor(Math.abs(100*a/g)));null!=l&&(g=l-c,a=l-b-g,n.next=Math.floor(Math.abs(100*a/g)));return n},round:function(c,b){var a=c.slice(0),l,n,g,r,h,k,s,e,m,t=!b||null==b.tolerance?2:b.tolerance,p=b&&b.indexes,u=!b||null==b.strictBounds?!1:b.strictBounds;if(p)p.sort(w);else{p=[];for(k=0;k<a.length;k++)p.push(k)}for(k=
0;k<p.length;k++)if(m=p[k],l=a[m],n=0===m?null:a[m-1],g=m===a.length-1?null:a[m+1],r=q.numDigits(l),r=r.fractional){s=0;for(e=!1;s<=r&&!e;){h=l;e=s;var d=void 0,f=void 0,d=Number(h.toFixed(e));d<h?f=d+1/Math.pow(10,e):(f=d,d-=1/Math.pow(10,e));d=Number(d.toFixed(e));f=Number(f.toFixed(e));h=[d,f];h=u&&0===k?h[1]:h[0];e=t;var d=q.percentChange(l,h,n,g),v=f=void 0,f=void 0,f=null==d.previous||d.previous<=e,v=null==d.next||d.next<=e;e=f=f&&v||d.previous+d.next<=2*e;s++}e&&(a[m]=h)}return a},format:function(c,
b){b=b||{places:20,round:-1};var a=t.format(c,b);a&&(a=a.replace(z,"$1").replace(y,""));return a}};return q});