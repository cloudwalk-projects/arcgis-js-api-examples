// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(x,e,v,w){function k(a,b,d,c,e){e=a.watch(b,function(b,e,h,g){(!c||c(b))&&d.call(a,b,e,h,g)},e);var m=a.get(b);c&&c(m)&&d.call(a,m,m,b,a);return e}function f(a,b,d,c,e){function m(){l&&(l.remove(),l=null)}var f=!1,l,h=new v(m),g=new w;g.cancel=h.cancel;g.isCanceled=h.isCanceled;g.isFulfilled=h.isFulfilled;g.isRejected=h.isRejected;g.isResolved=h.isResolved;g.then=h.then;g.remove=m;Object.freeze(g);l=k(a,b,function(b,c,e,g){f=
!0;m();d&&d.call(a,b,c,e,g);h.resolve({value:b,oldValue:c,propertyName:e,target:g})},c,e);f&&l.remove();return g}function n(a){return!!a}function p(a){return!a}function q(a){return!0===a}function r(a){return!1===a}function s(a){return void 0!==a}function t(a){return void 0===a}function u(a,b,d,c){(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b]).forEach(function(b){b=b.trim();var c=a.get(b);d.call(a,c,c,b,a)});return a.watch(b,d,c)}e.init=u;e.watch=function(a,b,d,c){return a.watch(b,d,c)};e.once=
function(a,b,d,c){return f(a,b,d,null,c)};e.when=function(a,b,d,c){return k(a,b,d,n,c)};e.whenOnce=function(a,b,d,c){return f(a,b,d,n,c)};e.whenNot=function(a,b,d,c){return k(a,b,d,p,c)};e.whenNotOnce=function(a,b,d,c){return f(a,b,d,p,c)};e.whenTrue=function(a,b,d,c){return k(a,b,d,q,c)};e.whenTrueOnce=function(a,b,d,c){return f(a,b,d,q,c)};e.whenFalse=function(a,b,d,c){return k(a,b,d,r,c)};e.whenFalseOnce=function(a,b,d,c){return f(a,b,d,r,c)};e.whenDefined=function(a,b,d,c){return k(a,b,d,s,c)};
e.whenDefinedOnce=function(a,b,d,c){return f(a,b,d,s,c)};e.whenUndefined=function(a,b,d,c){return k(a,b,d,t,c)};e.whenUndefinedOnce=function(a,b,d,c){return f(a,b,d,t,c)};e.pausable=function(a,b,d,c){var e=!1;return{remove:a.watch(b,function(b,c,f,h){e||d.call(a,b,c,f,h)},c).remove,pause:function(){e=!0},resume:function(){e=!1}}};e.on=function(a,b,d,c,e,f,k){function l(){g&&(f&&f(h,b,a,d),g.remove(),h=g=null)}var h=null,g=null,n=u(a,b,function(f){l();f&&f.on&&(h=f,g=f.on(d,c),e&&e(h,b,a,d))},k);return{remove:function(){n.remove();
l()}}}});