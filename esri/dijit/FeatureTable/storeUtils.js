// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
define("esri/dijit/FeatureTable/storeUtils","./dataUtils dojo/_base/array dojo/_base/lang dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/store/util/QueryResults ../FeatureLayerQueryStore".split(" "),function(m,p,w,q,n,r,s,t){return{generateMemoryStore:function(a){var c=a.idProperty;a=p.map(a.features,function(a){return a.attributes});return new r(new n({data:a,idProperty:c}))},generateCacheStore:function(a){var c=a.grid,h=a.layer,b=a.ids||null,c=b&&b.length?b.length:c.featureCount,
l=a.orderByFields,k=a.where||null,u=a.batchCount||25,v=a.getAttachments||!1,g=a.getRelatedRecords||!1;a=new n;h=new t({layer:h,objectIds:b,totalCount:c,batchCount:u,where:k||"1\x3d1",orderByFields:l,getAttachments:v,getRelatedRecords:g});return new q(h,a)},generateSort:function(a,c,h,b){var l=function(){return function(b,c){var g=k[0],d=parseInt(g.columnId,10),e=g.attribute,f;("esriAttachments"===e||"esriRelatedRecords"===g.fieldType)&&"undefined"!==typeof d?(f=a.columns[d].get(b),d=a.columns[d].get(c)):
(f=b[e]&&b[e].toLowerCase?b[e].toLowerCase():b[e],d=c[e]&&c[e].toLowerCase?c[e].toLowerCase():c[e]);f=!m.isValueEmpty(f)?f.valueOf():null;d=!m.isValueEmpty(d)?d.valueOf():null;return null===f&&null!==d?g.descending?-1:1:null!==f&&null===d?g.descending?1:-1:f===d?0:(f>d?1:-1)*(g.descending?-1:1)}},k=b&&b.sort;k&&"function"!==typeof k&&(b.sort=l());return new s(c.queryEngine(h,b)(c.data))}}});