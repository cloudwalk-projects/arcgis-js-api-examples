// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
define("esri/dijit/editing/tools/Reshape","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has ../../../graphic ../../../layers/FeatureLayer ../../../tasks/query ../../../toolbars/draw ./ToggleToolBase ../../../kernel".split(" "),function(a,d,f,b,l,m,n,p,q,r,s){a=a([r],{declaredClass:"esri.dijit.editing.tools.Reshape",id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:q.POLYLINE,_enabled:!0,_label:"NLS_reshapeLbl",
activate:function(){b.disconnect(this._rConnect);this._rConnect=b.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments)},deactivate:function(){this.inherited(arguments);b.disconnect(this._rConnect);delete this._rConnect},_onDrawEnd:function(g){var a=this._settings.layers,c=new p;c.geometry=g;g=this._reshapeLayers=f.filter(a,function(a){return"esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"});this._settings.editor._selectionHelper.selectFeatures(g,c,n.SELECTION_NEW,
d.hitch(this,"_reshape",c))},_reshape:function(a,b){if(1===b.length){var c=[],h=[],k=[],e=b[0],f=e.getLayer();this._settings.geometryService.reshape(e.geometry,a.geometry,d.hitch(this,function(a){"polyline"===a.type&&a.paths&&0===a.paths.length?(this._settings.editor._selectionHelper.clearSelection(!1),this.onFinished()):"polygon"===a.type&&a.rings&&0===a.rings.length?(this._settings.editor._selectionHelper.clearSelection(!1),this.onFinished()):(k.push(new m(e.toJson())),h.push(e.setGeometry(a)),
c.push({layer:f,updates:h,preUpdates:k}),this.onApplyEdits(c,d.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(!1);this.onFinished()})))}))}}});l("extend-esri")&&d.setObject("dijit.editing.tools.Reshape",a,s);return a});