// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
require({cache:{"esri/portal/support/geometryServiceUtils":function(){define("require exports ../Portal ../PortalItem ../../config ../../tasks/GeometryService ../../core/promiseUtils ../../core/Error".split(" "),function(q,r,p,f,l,g,e,k){r.create=function(c){void 0===c&&(c=null);if(l.geometryServiceUrl)return e.resolve(new g({url:l.geometryServiceUrl}));if(!c)return e.reject(new k("internal:geometry-service-url-not-configured"));var m;c.isInstanceOf(f)?m=c.portal||p.getDefault():c.isInstanceOf(p)&&
(m=c);return m.load().then(function(a){if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return e.resolve(new g({url:a.helperServices.geometry.url}));throw new k("internal:geometry-service-url-not-configured");})}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task dojo/_base/lang".split(" "),function(q,r,p,f,l,g,e,k,
c){var m=q({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});q=k.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,d){var b={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/areasAndLengths",b).then(function(a){return a.data})},autoComplete:function(a,d,b){var h=a[0].spatialReference;
a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(d).geometries)}),callbackParamName:"callback"};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:h,rings:a.rings})})})},buffer:function(a,d){var b=c.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.outSpatialReference||a.geometries[0].spatialReference,b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/buffer",b).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:h,rings:a.rings})})})},cut:function(a,d,b){var h=a[0].spatialReference,k=a.map(function(a){return a.toJSON()});a={query:c.mixin({},this.parsedUrl.query,{f:"json",
sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a[0]),geometries:k}),cutter:JSON.stringify(d.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})}})},convexHull:function(a,d){var b=a[0].spatialReference,h={query:c.mixin({},this.parsedUrl.query,
{f:"json",sr:JSON.stringify(b.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||d)h=c.mixin({},this.requestOptions,d,h);return e(this.parsedUrl.path+"/convexHull",h).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",b)})},densify:function(a,d){var b=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=
c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/densify",b).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})})},difference:function(a,d,b){var h=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:g.getJsonType(d),geometry:d.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||
b)a=c.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})})},distance:function(a,d){var b={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/distance",b).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,
d){var b={};c.isObject(a.sr)?b.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):b.sr=a.sr;b.strings=JSON.stringify(a.strings);b.conversionType=m.toJSON(a.conversionType||"mgrs");b.conversionMode=a.conversionMode;b={query:c.mixin({},this.parsedUrl.query,{f:"json"},b),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,d){var b=c.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/generalize",b).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})})},intersect:function(a,d,b){var h=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:g.getJsonType(d),geometry:d.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})})},lengths:function(a,d){var b={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,
d,b);return e(this.parsedUrl.path+"/lengths",b).then(function(a){return a.data})},labelPoints:function(a,d){var b=a.map(function(a){return a.toJSON()}),h=a[0].spatialReference,b={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h.toJSON()),polygons:JSON.stringify(b)}),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/labelPoints",b).then(function(a){return(a.data.labelPoints||[]).map(function(a){return g.fromJSON(a).set("spatialReference",
h)})})},offset:function(a,d){var b=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/offset",b).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",h)})})},project:function(a,d){var b=c.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),h=a.outSR,k=g.getJsonType(a.geometries[0]),
f=this._decodeGeometries,b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/project",b).then(function(a){return f(a.data,k,h)})},relation:function(a,d){var b={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/relation",b).then(this._handleRelationResponse)},reshape:function(a,d,b){var h=
a.spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(d.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/reshape",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",h)})},simplify:function(a,d){var b=a[0].spatialReference,h=c.mixin({},this.parsedUrl.query,
{f:"json",sr:b.wkid?b.wkid:JSON.stringify(b.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),k=g.getJsonType(a[0]),f=this._decodeGeometries,h={query:h,callbackParamName:"callback"};if(this.requestOptions||d)h=c.mixin({},this.requestOptions,d,h);return e(this.parsedUrl.path+"/simplify",h).then(function(a){return f(a.data,k,b)})},toGeoCoordinateString:function(a,d){var b={};c.isObject(a.sr)?b.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):b.sr=a.sr;b.coordinates=JSON.stringify(a.coordinates);
b.conversionType=m.toJSON(a.conversionType||"mgrs");b.conversionMode=a.conversionMode;b.numOfDigits=a.numOfDigits;b.rounding=a.rounding;b.addSpaces=a.addSpaces;b={query:c.mixin({},this.parsedUrl.query,{f:"json"},b),callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/toGeoCoordinateString",b).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,d){var b=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.sr,
b={query:b,callbackParamName:"callback"};if(this.requestOptions||d)b=c.mixin({},this.requestOptions,d,b);return e(this.parsedUrl.path+"/trimExtend",b).then(function(a){return(a.data.geometries||[]).map(function(a){return new f({spatialReference:h,paths:a.paths})})})},union:function(a,d){var b=a[0].spatialReference,h={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(b.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||
d)h=c.mixin({},this.requestOptions,d,h);return e(this.parsedUrl.path+"/union",h).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",b)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var d=[],b,c=a.length;for(b=0;b<c;b++)d.push(a[b].toJSON());
return{geometryType:g.getJsonType(a[0]),geometries:d}},_decodeGeometries:function(a,d,b){var e=g.getGeometryType(d);a=a.geometries;var k=[],f={spatialReference:b.toJSON()},m=c.mixin;a.forEach(function(a,b){k[b]=new e(m(a,f))});return k},_toProjectGeometry:function(a){var d=a.spatialReference.toJSON();return a instanceof r?new l({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:d}):new f({paths:[[].concat(a.points)],spatialReference:d})},_fromProjectedGeometry:function(a,
d,b){return"extent"===d?(a=a.rings[0],new r(a[0][0],a[0][1],a[2][0],a[2][1],b)):new p({points:a.paths[0],spatialReference:b.toJSON()})}});c.mixin(q,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,
UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,
UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,
UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",
UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return q})},"esri/tasks/support/ProjectParameters":function(){define(["../../core/declare","dojo/_base/array","../../core/Accessoire","../../core/lang","../../geometry/support/jsonUtils"],function(q,r,p,f,l){return q(p,{declaredClass:"esri.tasks.support.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJSON:function(){var g=r.map(this.geometries,function(e){return e.toJSON()}),e={};
e.outSR=this.outSR.wkid||JSON.stringify(this.outSR.toJSON());e.inSR=this.geometries[0].spatialReference.wkid||JSON.stringify(this.geometries[0].spatialReference.toJSON());e.geometries=JSON.stringify({geometryType:l.getJsonType(this.geometries[0]),geometries:g});this.transformation&&(e.transformation=this.transformation.wkid||JSON.stringify(this.transformation));f.isDefined(this.transformForward)&&(e.transformForward=this.transformForward);return e}})})},"esri/webmap/InitialViewProperties":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../Viewpoint ../core/Accessoire ../geometry/SpatialReference ../core/accessoireSupport/typescript".split(" "),
function(q,r,p,f,l,g,e,k){return function(c){function g(a){c.call(this,a);this.viewpoint=this.spatialReference=null}p(g,c);g.prototype.clone=function(){return new g({spatialReference:this.spatialReference?this.spatialReference.clone():null,viewpoint:this.viewpoint?this.viewpoint.clone():null})};f([k.shared("esri.webmap.InitialViewProperties")],g.prototype,"declaredClass",void 0);f([k.property({value:null,type:e})],g.prototype,"spatialReference",void 0);f([k.property({value:null,type:l})],g.prototype,
"viewpoint",void 0);return g=f([k.subclass()],g)}(g)})},"esri/core/accessoireSupport/typescript":function(){define(["../declare","../typescript","../JSONSupporter","dojo/_base/lang"],function(q,r,p,f){function l(g,e){if(!g)return e;if(!e)return g;for(var k in e){var c=g[k],f=e[k];Array.isArray(f)&&Array.isArray(c)?g[k]=c.concat(f):g[k]="object"===typeof f&&"object"===typeof c?l(c,f):f}return g}return{subclass:function(g,e){return function(k){k=r.declareDefinition(k,g);e&&(k.instanceMembers.classMetadata=
l(e,k.instanceMembers.classMetadata));var c=k.instanceMembers.classMetadata;if(c&&c.properties)for(var m in c.properties){var a=c.properties[m];a&&(!a.reader&&a.type)&&(a.type===Date?a.reader=function(a){return null!=a?new Date(a):null}:-1!==a.type._meta.bases.indexOf(p)&&(a.reader=function(a){return function(b){return a.fromJSON(b)}}(a.type)))}return f.mixin(q(k.bases,k.instanceMembers),k.classMembers)}},shared:r.shared,property:function(g){return function(e,f){var c=Object.getPrototypeOf(e),c=c&&
c.classMetadata;if(!e.classMetadata||e.classMetadata===c)e.classMetadata={};e.classMetadata.properties=e.classMetadata.properties||{};e.classMetadata.properties[f]=g||{}}}}})},"esri/core/typescript":function(){define(["./declare","dojo/_base/lang"],function(q,r){var p={declareDefinition:function(f,l){var g=[],e=Object.getPrototypeOf(f.prototype),k;if(e!==Object.prototype){var c=e.constructor;k=c.prototype;g.push(c)}l&&(g=g.concat(l));for(var c={},m=Object.getOwnPropertyNames(f.prototype),a=0;a<m.length;a++){var d=
m[a];if("constructor"!==d){var b=d;"dojoConstructor"===d&&(b="constructor");if(!k||f.prototype[d]!==k[d])c[b]=f.prototype[d]}}m=Object.getOwnPropertyNames(f);e=Object.getOwnPropertyNames(e.constructor);k={};for(a=0;a<m.length;a++)d=m[a],-1===e.indexOf(d)&&(k[d]=f[d]);return{bases:g,instanceMembers:c,classMembers:k}},subclass:function(f){return function(l){l=p.declareDefinition(l,f);return r.mixin(q(l.bases,l.instanceMembers),l.classMembers)}},shared:function(f){return function(l,g){l[g]=f}}};return p})},
"*noref":1}});
define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Map ./Viewpoint ./core/Error ./core/JSONSupport ./core/Loadable ./core/promiseUtils ./core/requireUtils ./core/Logger ./geometry/SpatialReference ./geometry/support/webMercatorUtils ./portal/Portal ./portal/PortalItem ./portal/support/geometryServiceUtils ./tasks/support/ProjectParameters ./webmap/InitialViewProperties ./core/accessorSupport/decorators".split(" "),function(q,r,p,f,l,g,e,k,c,m,
a,d,b,h,t,u,v,w,x,s,n){var y=b.getLogger("esri.WebMap");return function(b){function c(a){b.call(this);this.widgets=this.tables=this.sourceVersion=this.presentation=this.portalItem=this.initialViewProperties=this.bookmarks=this.authoringAppVersion=this.authoringApp=this.applicationProperties=null}p(c,b);c.prototype.initialize=function(){this.otherwise(function(a){y.error("#load()","Failed to load web map",a)});if(this.resourceInfo){var b=void 0;try{b=this._validateJSON(this.resourceInfo)}catch(c){this.addResolvingPromise(a.reject(c));
return}this.read(b)}};c.prototype.readBasemap=function(a,b){return!b.baseMap||!Array.isArray(b.baseMap.baseMapLayers)||!b.baseMap.baseMapLayers.length?null:l.fromJSON(b.baseMap)};c.prototype.readInitialViewProperties=function(a,b){var c={};b.spatialReference&&(c.spatialReference=h.fromJSON(b.spatialReference));return new s(c)};c.prototype.readSourceVersion=function(a,b){var c=b.version.split("."),d=c[1];return{major:parseInt(c[0],10),minor:parseInt(d,10)}};c.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());
return this};c.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","WebMap.toJSON is not yet implemented");};c.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new c({resourceInfo:a})};c.prototype._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):a.resolve(null)};c.prototype._loadFromItem=function(a){var b=
this;return a.load().otherwise(function(a){throw new k("webmap:load-portal-item","Failed to load portal item",{error:a});}).then(function(){if("Web Map"!==a.type)throw new k("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:a.type});}).then(function(){return a.fetchData()}).then(function(a){b.resourceInfo=a;return b._readAndLoadFromJSON(a)}).then(function(){return b._getInitialExtent()}).then(function(a){if(a){var c=b.initialViewProperties?b.initialViewProperties.clone():
new s;c.viewpoint=new e;c.viewpoint.targetGeometry=a;b.initialViewProperties=c}})};c.prototype._readAndLoadFromJSON=function(a){a=this._validateJSON(a);this.read(a);return this._loadFromJSON(a)};c.prototype._validateJSON=function(a){a=this._sanitizeJSON(a);var b=this._validateVersion(a.version);a.version=b.major+"."+b.minor;return a};c.prototype._sanitizeJSON=function(a){return{authoringApp:a.authoringApp||"",authoringAppVersion:a.authoringAppVersion||"",applicationProperties:a.applicationProperties,
baseMap:a.baseMap,bookmarks:a.bookmarks,operationalLayers:a.operationalLayers,presentation:a.presentation,spatialReference:a.spatialReference,tables:a.tables,version:a.version||"0.0",widgets:a.widgets}};c.prototype._validateVersion=function(a){var b=a.split("."),c=b[0],b=b[1],d=/^\s*\d+\s*$/;if(!d.test(c))throw new k("webmap:invalid-version","Expected major version to be a number, but got '"+a+"'",{version:a});if(!d.test(b))throw new k("webmap:invalid-version","Expected minor version to be a number, but got '"+
a+"'",{version:a});c=parseInt(c,10);b=parseInt(b,10);if(2!==c)throw new k("webmap:unsupported-version","Required major version is '2', but got '"+c+"'",{version:a});return{major:c,minor:b}};c.prototype._loadFromJSON=function(b){var c=this,e={context:{origin:"web-map"}};this.portalItem&&(e.context.portal=this.portalItem.portal||u.getDefault());return d.when(q,"./portal/support/layersCreator").then(function(d){var f=[],g=b.operationalLayers;g&&g.length&&f.push.apply(f,d.populateOperationalLayers(c.layers,
g,e));return a.eachAlways(f).then(function(){})})};c.prototype._getInitialExtent=function(){var b=null,c=this.initialViewProperties&&this.initialViewProperties.spatialReference,d=this.portalItem&&this.portalItem.extent;if(c&&d)if(c.isWGS84)b=d.clone();else if(c.isWebMercator)b=t.geographicToWebMercator(d);else return w.create(this.portalItem).then(function(a){var b=new x;b.geometries=[d];b.outSR=c;return a.project(b)}).then(function(a){return a[0]}).otherwise(function(a){console.log("Error projecting item's extent:",
a);return null});return a.resolve(b)};f([n.property()],c.prototype,"applicationProperties",void 0);f([n.property()],c.prototype,"authoringApp",void 0);f([n.property()],c.prototype,"authoringAppVersion",void 0);f([n.read("basemap",["baseMap"])],c.prototype,"readBasemap",null);f([n.property()],c.prototype,"bookmarks",void 0);f([n.property({type:s})],c.prototype,"initialViewProperties",void 0);f([n.read("initialViewProperties",["spatialReference"])],c.prototype,"readInitialViewProperties",null);f([n.property({type:v})],
c.prototype,"portalItem",void 0);f([n.property()],c.prototype,"presentation",void 0);f([n.property()],c.prototype,"resourceInfo",void 0);f([n.property({readOnly:!0})],c.prototype,"sourceVersion",void 0);f([n.read("sourceVersion",["version"])],c.prototype,"readSourceVersion",null);f([n.property()],c.prototype,"tables",void 0);f([n.property()],c.prototype,"widgets",void 0);return c=f([n.subclass("esri.WebMap")],c)}(n.declared(g,m,c))});