// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["../../../Color","../../../core/numberUtils","../../../symbols/support/gfxUtils"],function(q,r,s){var t=[64,64,64],u=[255,255,255];return{getRampStops:function(a,b,f){var e=!1,d,g,l;b.colors||b.opacityValues?(g=b.maxDataValue-b.minDataValue,d=[0,0.25,0.5,0.75,1].map(function(a){return Number((b.minDataValue+a*g).toFixed(6))}),this._checkPrecision(0,4,d)):b.stops&&(d=b.stops.map(function(a){return a.value}),(e=b.stops.some(function(a){return!!a.label}))&&(l=b.stops.map(function(a){return a.label})));
var k=d[0],c=d[d.length-1],h,n,m;if(null==k&&null==c)return null;g=c-k;return d.map(function(c,p){"opacity"===b.type?(h=new q(f||t),n=a.getOpacity(c,{opacityInfo:b}),null!=n&&(h.a=n)):h=a.getColor(c,{colorInfo:b});m="";0===p?m="\x3c ":p===d.length-1&&(m="\x3e ");return{value:c,color:h,offset:g?1-(c-k)/g:1,label:e?l[p]:m+r.format(c)}},this).reverse()},_checkPrecision:function(a,b,f){var e=a+(b-a)/2,d=f[a],g=f[e],l=f[b],k=Math.floor(d),c=Math.floor(g),h=Math.floor(l);k===d&&(h===l&&c!==g&&k!==c&&h!==
c)&&(f[e]=c);a+1!==e&&this._checkPrecision(a,e,f);e+1!==b&&this._checkPrecision(e,b,f)},getRampBorderColor:function(a){var b;if("simple"===a.type)b=a.symbol;else if("uniqueValue"===a.type||"classBreaks"===a.type)b=(a=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&a.symbol;return(a=(a=b&&-1===b.type.indexOf("line-symbol")?s.getStroke(b):null)&&a.color)&&0<a.a&&!(240<=a.r&&240<=a.g&&240<=a.b)?a:null},getRampOverlayColor:function(a){var b=new q(u);b.a=1-a;return b}}});