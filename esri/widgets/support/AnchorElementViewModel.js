// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(c,d,e){return c.createSubclass({properties:{point:{},screenPoint:{},state:{},view:{}},declaredClass:"esri.widgets.support.AnchorElementViewModel",constructor:function(){this._handles=new d},destroy:function(){this._viewReady&&this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null},point:null,_pointSetter:function(a){this._viewControl(a);this._createScreenPoint(a,
this.view);this._set("point",a)},screenPoint:null,state:"disabled",view:null,_viewSetter:function(a){this._handles&&(this._handles.remove("viewHandles"),this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this.state="disabled";a&&(this._viewReady=a.then(function(){this.state="ready";var b="viewpoint";"3d"===a.type&&(b="camera");this._viewWatch=e.pausable(a,b,function(){this._createScreenPoint(this.point,this.view)}.bind(this));this._handles.add(this._viewWatch,"viewHandles");this._viewControl(this.point)}.bind(this)));
this._set("view",a)},_viewControl:function(a){this._viewWatch&&(a?this._viewWatch.resume():this._viewWatch.pause())},_createScreenPoint:function(a,b){this.screenPoint=a&&b?b.toScreen(a.x,a.y,a.z):null}})});