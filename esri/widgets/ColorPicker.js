// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/widgets/ColorPicker/templates/ColorPicker.html":'\x3cdiv class\x3d"${css.container}"\x3e\r\n  \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_header"\x3e\r\n    \x3cspan class\x3d"${css.swatchPreview} ${css.container}"\x3e\r\n      \x3cspan class\x3d"${css.swatch} ${css.swatchTransparencyBackground}"\x3e\x3c/span\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"dap_previewSwatch" class\x3d"${css.swatch}"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.middle}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dap_paletteContainer" class\x3d"${css.palette} ${css.container}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_primaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\x3c!--\r\n      --\x3e\x3cdiv data-dojo-attach-point\x3d"dap_secondaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.paletteOptions}"\x3e\r\n      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"dap_hexInput" class\x3d"${css.hexInput}"/\x3e\r\n      \x3cinput class\x3d"${css.paletteToggle}" type\x3d"button" data-dojo-attach-point\x3d"dap_paletteToggle" value\x3d"${labels.more}" aria-pressed\x3d"false"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.footer}" data-dojo-attach-point\x3d"dap_footer"\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_suggestedColorSection"\x3e\r\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.suggested}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_suggestedColorPalette" class\x3d"${css.suggested} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recentColorSection"\x3e\r\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.recent}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_recentColorPalette" class\x3d"${css.recent} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_transparencySection"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_transparencyLabel" class\x3d"${css.label}"\x3e${labels.transparency}\x3c/div\x3e\r\n      \x3cinput class\x3d"${css.transparencySlider}" type\x3d"range"\r\n             data-dojo-attach-point\x3d"dap_transparencySlider"\r\n             min\x3d"0" max\x3d"1"\r\n             step\x3d"0.01"/\x3e\r\n      \x3cdiv class\x3d"${css.ticks}"\x3e\r\n        \x3cspan\x3e0%\x3c/span\x3e\r\n        \x3cspan\x3e50%\x3c/span\x3e\r\n        \x3cspan\x3e100%\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("../Color ./ColorPicker/colorUtils ./ColorPicker/HexPalette ./Widgette dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/i18n!./ColorPicker/nls/ColorPicker dojo/text!./ColorPicker/templates/ColorPicker.html dojo/NodeList-dom".split(" "),function(m,d,p,q,r,s,t,f,k,l,h,n,u,v){var c={root:"esri-color-picker",container:"esri-container",header:"esri-header",footer:"esri-footer",middle:"esri-middle",swatch:"esri-swatch",
swatchRow:"esri-swatch-row",swatchEmpty:"esri-swatch-empty",swatchPreview:"esri-swatch-preview",swatchTransparencyBackground:"esri-swatch-transparency-background",palette:"esri-palette",paletteOptions:"esri-palette-options",paletteToggle:"esri-palette-toggle",label:"esri-label",hexInput:"esri-hex-input",recent:"esri-recent",suggested:"esri-suggested",selected:"esri-selected",disabled:"esri-disabled",section:"esri-section",transparencySlider:"esri-transparency-slider",ticks:"esri-color-picker-ticks",
alt:"esri-alt",hidden:"esri-hidden"};return q.createSubclass([r,s],{declaredClass:"esri.widgets.ColorPicker",templateString:v,labels:u,baseClass:c.root,css:c,constructor:function(a){a=a||{};this._brightsPalette=new p({colors:a.palette});this._pastelsPalette=new p({colors:this._toPastels(this._brightsPalette.colors)});this._activePalette=this._brightsPalette;this._swatches={}},buildRendering:function(){this.inherited(arguments);this._createPalettes();this.required||(this._noColorSwatchNode=k.create("div",
{className:c.swatch+" "+c.swatchEmpty},this.dap_hexInput,"after"));f.toggle(this.dap_transparencySection,c.hidden,!this.showTransparencySlider);f.toggle(this.dap_recentColorSection,c.hidden,!this.showRecentColors);f.toggle(this.dap_suggestedColorSection,c.hidden,!this.showSuggestedColors)},postCreate:function(){this.inherited(arguments);this._addListeners();this._selectColor()},_activePalette:null,_brightsPalette:null,_pastelsPalette:null,_swatches:null,_noColorSwatchNode:null,_previousColor:null,
color:null,_getColorAttr:function(){var a=this._get("color");return null===a?null:new m(a)},_setColorAttr:function(a,b){a=a||null;b=b||void 0===b;if(!this.required){if(null===a){this._set("color",null);this._previousColor=null;this._disableTransparencySlider();this._clearSelection();this._updateHexInput(null);this._updatePreviewSwatch(a);f.add(this._noColorSwatchNode,c.selected);b&&this.emit("color-change",{color:null});return}this._enableTransparencySlider();f.remove(this._noColorSwatchNode,c.selected)}var g=
d.normalizeColor(a),e=this._previousColor;if(e){if(d.equal(e,g))return;if(e=this._findColorSwatch(e))f.remove(e,c.selected),l.set(e,"borderColor","")}e=new m(g);this._set("color",e);this._previousColor=g;this.dap_transparencySlider.value=1-e.a;this._updatePreviewSwatch(e);this._checkSelection();this._updateHexInput(e);this.trackColors&&this._addRecentColor(e.toHex());b&&this.emit("color-change",{color:new m(e)})},colorsPerRow:13,_setColorsPerRowAttr:function(a){this._set("colorsPerRow",0<a?a:13)},
_setPaletteAttr:function(a){var b=this._activePalette===this._brightsPalette;this._brightsPalette.colors=a;this._pastelsPalette.colors=this._toPastels(this._brightsPalette.colors);this._activePalette=b?this._brightsPalette:this._pastelsPalette;this._createPalettes();this._togglePalette(!b)},recentColors:[],_getRecentColorsAttr:function(){return this._get("recentColors").map(function(a){return d.normalizeColor(a)})},_setRecentColorsAttr:function(a){a=a||[];this.showRecentColors&&(a=a.map(function(a){return d.normalizeColor(a).toHex()}));
this._set("recentColors",a);0===a.length?this._clearRecentSwatches():this._renderRecentSwatches()},required:!1,showRecentColors:!0,showSuggestedColors:!1,showTransparencySlider:!0,suggestedColors:null,_getSuggestedColorsAttr:function(){return this._get("suggestedColors").map(function(a){return d.normalizeColor(a)})},_setSuggestedColorsAttr:function(a){this.showSuggestedColors&&(this._clearSuggestedSwatches(),a=a||[],a=a.map(function(a){return d.normalizeColor(a).toHex()}),this._set("suggestedColors",
a),0<a.length&&this._renderSuggestedSwatches())},trackColors:!0,addRecentColor:function(a){a&&null!==a&&this._addRecentColor(d.normalizeColor(a).toHex())},saveRecentColors:function(a){localStorage.setItem(a,JSON.stringify(this.get("recentColors")))},loadRecentColors:function(a){this.set("recentColors",JSON.parse(localStorage.getItem(a)))},_toPastels:function(a){var b=new m([238,238,238]);return a.map(function(a){return m.blendColors(new m(a),b,0.2)})},_createSwatch:function(a){return k.create("span",
{className:a.className,style:{backgroundColor:a.hexColor||"transparent"}},a.paletteNode)},_createSwatches:function(a,b){var g;b.colors.forEach(function(b,d){var f;0===d%this.colorsPerRow&&(g=k.create("div",{className:c.swatchRow},a));f=this._createSwatch({className:c.swatch,hexColor:b,paletteNode:g});this._swatches[b]=f},this)},_selectColor:function(){this.set("color",this.required?this.color||this._activePalette.colors[0]:this.color)},_setColorWithCurrentAlpha:function(a){null!==a&&null!==this.color&&
(a=d.normalizeColor(a),a.a=this.color.a);this.set("color",a)},_updatePreviewSwatch:function(a){var b=this.dap_previewSwatch,g;null===a?(f.add(b,c.swatchEmpty),l.set(b,{backgroundColor:"",borderColor:""})):(g=d.getContrastingColor(a),f.remove(b,c.swatchEmpty),l.set(b,{backgroundColor:a.toCss(!0),borderColor:g.toCss(!0)}))},_showBrights:function(){f.remove(this.dap_paletteContainer,c.alt);this._activePalette=this._brightsPalette},_showPastels:function(){f.add(this.dap_paletteContainer,c.alt);this._activePalette=
this._pastelsPalette},_setColorFromSwatch:function(a){a=l.get(a,"backgroundColor");this._setColorWithCurrentAlpha(a)},_checkSelection:function(){var a=this.get("color");this._activePalette.contains(a)?this._highlightColor(a):this._clearSelection()},_addListeners:function(){var a="."+c.swatch;this.own(h(this.dap_paletteContainer,h.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)),h(this.dap_recentColorPalette,h.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)),
h(this.dap_suggestedColorPalette,h.selector(a,"click"),function(a){this._setColorFromSwatch(a.target)}.bind(this)));this.required||this.own(h(this._noColorSwatchNode,"click",function(){this.set("color",null)}.bind(this)));var b=this.dap_hexInput;h(b,"blur",function(){var a=d.normalizeHex(b.value);d.isShorthandHex(a)?this._setColorWithCurrentAlpha(a):this._updateHexInput(this.color)}.bind(this));h(b,"change",function(){var a=d.normalizeHex(b.value);d.isLonghandHex(a)&&this.color.toHex()!==a&&this._setColorWithCurrentAlpha(a)}.bind(this));
h(this.dap_transparencySlider,"change, input",function(a){var b=this.get("color");null!==b&&(b=d.normalizeColor(b),b.a=1-a.target.value,this._updatePreviewSwatch(b),this._updateHexInput(b),this.set("color",b))}.bind(this));h(this.dap_paletteToggle,t,function(a){a="true"===a.target.getAttribute("aria-pressed");this._togglePalette(!a)}.bind(this))},_togglePalette:function(a){this.dap_paletteToggle.setAttribute("aria-pressed",a);a?this._showPastels():this._showBrights();this._checkSelection()},_createPalettes:function(){this._swatches=
{};k.empty(this.dap_primaryPalette);k.empty(this.dap_secondaryPalette);this._createSwatches(this.dap_primaryPalette,this._brightsPalette);this._createSwatches(this.dap_secondaryPalette,this._pastelsPalette)},_updateHexInput:function(a){this.dap_hexInput.value=null===a?"":a.toHex()},_addRecentColor:function(a){if(a){var b=this.recentColors,c=b.indexOf(a);-1<c&&b.splice(c,1);b.unshift(a);b.length>this.colorsPerRow&&b.pop();this._renderRecentSwatches()}},_renderRecentSwatches:function(){if(this.recentColors){var a=
n("."+c.recent+"."+c.swatch,this.dap_recentColorPalette);this.recentColors.forEach(function(b,g){if(g<this.colorsPerRow){if(g+1>a.length){var d=this._createSwatch({hexColor:b,className:c.swatch+" "+c.recent,paletteNode:this.dap_recentColorPalette});a.push(d)}l.set(a[g],"backgroundColor",b)}},this)}},_renderSuggestedSwatches:function(){if(this.suggestedColors){var a=n("."+c.suggested+"."+c.swatch,this.dap_recentColorPalette);this.suggestedColors.forEach(function(b,d){if(d<this.colorsPerRow){if(d+1>
a.length){var e=this._createSwatch({hexColor:b,className:c.swatch+" "+c.suggested,paletteNode:this.dap_suggestedColorPalette});a.push(e)}l.set(a[d],"backgroundColor",b)}},this)}},_clearRecentSwatches:function(){k.empty(this.dap_recentColorPalette)},_clearSuggestedSwatches:function(){k.empty(this.dap_suggestedColorPalette)},_clearSelection:function(){n("."+c.selected,this.dap_paletteContainer).removeClass(c.selected)},_highlightColor:function(a){var b=this._findColorSwatch(a);b&&(a=d.normalizeColor(a),
a=d.getContrastingColor(a),f.add(b,c.selected),l.set(b,"borderColor",a.toHex()))},_findColorSwatch:function(a){var b=this._activePalette.colors;a=d.toHex(a);var c;-1<b.indexOf(a)&&(c=this._swatches[a]);return c},_enableTransparencySlider:function(){this.dap_transparencySlider.disabled=!1},_disableTransparencySlider:function(){this.dap_transparencySlider.disabled=!0}})});