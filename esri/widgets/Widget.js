// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Logger ../core/watchUtils dojo/_base/lang dojo/dom ./libs/maquette/maquette ../core/Collection".split(" "),function(u,v,h,c,b,k,l,m,n,e,p,q,r,f){var s=n.getLogger("esri.widgets.Widget"),t=0;return function(g){function a(d,a){g.call(this);this.destroyed=!1;this.className="";this.visible=!0;this._projector=
r.createProjector({});this._handles=new m;this.render=this.render.bind(this)}h(a,g);a.prototype.normalizeCtorArgs=function(d,a){var b=p.mixin({},d);a&&(b.container=a);return b};a.prototype.initialize=function(){var d=this;this._handles.add(this._renderableProps.map(function(a){return e.init(d,a,function(d,b){var c=this;f.isCollection(b)&&this._handles.remove(this.declaredClass+":"+a+"-collection-change-event-listener");if(f.isCollection(d)){var e=d.on("change",function(){return c.scheduleRender()});
this._handles.add(e,this.declaredClass+":"+a+"-collection-change-event-listener")}this.scheduleRender()})}));this._delegatedEventNames.length&&this._handles.add(e.init(this,"viewModel",function(){d._get("viewModel")&&d._handles.remove("delegated-events");d._delegatedEventNames.map(function(a){return d.viewModel.on(a,function(b){d.emit(a,b)})})}),"delegated-events");this.postInitialize();this._handles.add(e.whenOnce(this,"container",function(a){return d._attach(a)}))};a.prototype.postInitialize=function(){};
a.prototype.destroy=function(){this.destroyed||(this._detach(this.container),this._handles.destroy(),this._set("destroyed",!0))};a.prototype.startup=function(){s.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(a.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+
t++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});a.prototype.scheduleRender=function(){this._projector.scheduleRender()};a.prototype.on=function(a,b){var c=this.inherited(arguments);this._handles.add(c);return c};a.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._handles.add(a)};a.prototype._attach=function(a){a&&this._projector.merge(a,this.render)};a.prototype._detach=function(a){a&&(this._projector.detach(this.render),a.parentNode&&
a.parentNode.removeChild(a))};c([b.shared([])],a.prototype,"_renderableProps",void 0);c([b.shared([])],a.prototype,"_delegatedEventNames",void 0);c([b.property({readOnly:!0})],a.prototype,"destroyed",void 0);c([b.property({aliasOf:"container"})],a.prototype,"domNode",void 0);c([b.property({cast:function(a){return q.byId(a)}})],a.prototype,"container",null);c([b.property({dependsOn:["container"]})],a.prototype,"id",null);c([b.property()],a.prototype,"viewModel",void 0);c([b.property()],a.prototype,
"visible",void 0);return a=c([b.subclass("esri.widgets.Widget")],a)}(b.declared(k,l))});