// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
(function(f,m){var n,q=function(){},p=function(a){for(var l in a)return 0;return 1},u={}.toString,r=function(a){return"[object Function]"==u.call(a)},v=function(a){return"[object String]"==u.call(a)},c=function(a){return"[object Array]"==u.call(a)},b=function(a,l){if(a)for(var b=0;b<a.length;)l(a[b++])},d=function(a,l){for(var b in l)a[b]=l[b];return a},h=function(a,l){return d(Error(a),{src:"dojoLoader",info:l})},s=1,E=function(){return"_"+s++},k=function(a,l,b){return ma(a,l,b,0,k)},F=this,M=F.document,
Fa=M&&M.createElement("DiV"),t=k.has=function(a){return r(C[a])?C[a]=C[a](F,M,Fa):C[a]},C=t.cache=m.hasCache;t.add=function(a,l,b,e){(void 0===C[a]||e)&&(C[a]=l);return b&&t(a)};d(m.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0});m.loaderPatch={injectUrl:function(a,l){try{importScripts(a),l()}catch(b){console.info("failed to load resource ("+a+")"),console.error(b)}}};for(var z in f.has)t.add(z,f.has[z],0,1);
k.async=1;var Ga=t("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");k.eval=function(a,l){return Ga(a+"\r\n//# sourceURL\x3d"+l)};var Z={},B=k.signal=function(a,l){var g=Z[a];b(g&&g.slice(0),function(a){a.apply(null,c(l)?l:[l])})},N=k.on=function(a,l){var b=Z[a]||(Z[a]=[]);b.push(l);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===l){b.splice(a,1);break}}}},na=[],Ha={},oa=[],G={},pa=k.map={},O=[],x={},$="",H={},P={};z={};var ba=function(a){var l,b,e,d;for(l in P)b=
P[l],(e=l.match(/^url\:(.+)/))?H["url:"+qa(e[1],a)]=b:"*now"==l?d=b:"*noref"!=l&&(e=Q(l,a,!0),H[e.mid]=H["url:"+e.url]=b);d&&d(aa(a));P={}},ra=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ca=function(a,b){b.splice(0,b.length);for(var g in a)b.push([g,a[g],RegExp("^"+ra(g)+"(/|$)"),g.length]);b.sort(function(a,b){return b[3]-a[3]});return b},Ja=function(a,l){b(a,function(a){l.push([v(a[0])?RegExp("^"+ra(a[0])+"$"):a[0],a[1]])})},sa=function(a){var b=a.name;
b||(b=a,a={name:b});a=d({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(pa[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));G[b]=a},ta=[],J=function(a,l,g){for(var e in a){"waitSeconds"==e&&(k.waitms=1E3*(a[e]||0));"cacheBust"==e&&($=a[e]?v(a[e])?a[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)k[e]=a[e];a[e]!==C&&(k.rawConfig[e]=a[e],"has"!=e&&t.add("config-"+e,a[e],0,l))}k.baseUrl||(k.baseUrl="./");/\/$/.test(k.baseUrl)||(k.baseUrl+="/");for(e in a.has)t.add(e,
a.has[e],0,l);b(a.packages,sa);for(var h in a.packagePaths)b(a.packagePaths[h],function(a){var b=h+"/"+a;v(a)&&(a={name:a});a.location=b;sa(a)});ca(d(pa,a.map),O);b(O,function(a){a[1]=ca(a[1],[]);"*"==a[0]&&(O.star=a)});ca(d(Ha,a.paths),oa);Ja(a.aliases,na);if(l)ta.push({config:a.config});else for(e in a.config)l=D(e,g),l.config=d(l.config||{},a.config[e]);a.cache&&(ba(),P=a.cache,a.cache["*noref"]&&ba());B("config",[a,k.rawConfig])};if(t("dojo-cdn")){var ua=M.getElementsByTagName("script");n=0;for(var R,
w,S,K;n<ua.length;){R=ua[n++];if((S=R.getAttribute("src"))&&(K=S.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))w=K[3]||"",m.baseUrl=m.baseUrl||w;if(S=R.getAttribute("data-dojo-config")||R.getAttribute("djConfig"))z=k.eval("({ "+S+" })","data-dojo-config")}}k.rawConfig={};J(m,1);t("dojo-cdn")&&((G.dojo.location=w)&&(w+="/"),G.dijit.location=w+"../dijit/",G.dojox.location=w+"../dojox/");J(f,1);J(z,1);var ea=function(a){da(function(){b(a.deps,va)})},ma=function(a,b,g,e,Ia){var s;if(v(a)){if((s=D(a,e,!0))&&s.executed)return s.result;
throw h("undefinedModule",a);}c(a)||(J(a,0,e),a=b,b=g);if(c(a))if(a.length){g="require*"+E();for(var f,n=[],m=0;m<a.length;)f=a[m++],n.push(D(f,e));s=d(T("",g,0,""),{injected:2,deps:n,def:b||q,require:e?e.require:k,gc:1});x[s.mid]=s;ea(s);var p=L&&0!="sync";da(function(){fa(s,p)});s.executed||A.push(s);ga()}else b&&b();return Ia},aa=function(a){if(!a)return k;var b=a.require;b||(b=function(g,e,d){return ma(g,e,d,a,b)},a.require=d(b,k),b.module=a,b.toUrl=function(b){return qa(b,a)},b.toAbsMid=function(b){return ha(b,
a)});return b},A=[],U=[],y={},Ka=function(a){a.injected=1;y[a.mid]=1;a.url&&(y[a.url]=a.pack||1);wa()},W=function(a){a.injected=2;delete y[a.mid];a.url&&delete y[a.url];p(y)&&V()},La=k.idle=function(){return!U.length&&p(y)&&!A.length&&!L},ia=function(a,b){if(b)for(var g=0;g<b.length;g++)if(b[g][2].test(a))return b[g];return 0},xa=function(a){var b=[],g,e;for(a=a.replace(/\\/g,"/").split("/");a.length;)g=a.shift(),".."==g&&b.length&&".."!=e?(b.pop(),e=b[b.length-1]):"."!=g&&b.push(e=g);return b.join("/")},
T=function(a,b,g,e){return{pid:a,mid:b,pack:g,url:e,executed:0,def:0}},ya=function(a,l,g,e,d,c,k,s,f){var n,q,m,p;p=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||p&&!l)return T(0,a,0,a);a=xa(p?l.mid+"/../"+a:a);if(/^\./.test(a))throw h("irrationalPath",a);l&&(m=ia(l.mid,c));(m=(m=m||c.star)&&ia(a,m[1]))&&(a=m[1]+a.substring(m[3]));l=(K=a.match(/^([^\/]+)(\/(.+))?$/))?K[1]:"";(n=g[l])?a=l+"/"+(q=K[3]||n.main):l="";var E=0;b(s,function(b){var l=a.match(b[0]);l&&0<l.length&&(E=r(b[1])?a.replace(b[0],
b[1]):b[1])});if(E)return ya(E,0,g,e,d,c,k,s,f);if(g=e[a])return f?T(g.pid,g.mid,g.pack,g.url):e[a];e=(m=ia(a,k))?m[1]+a.substring(m[3]):l?n.location+"/"+q:t("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=d+e);return T(l,a,n,xa(e+".js"))},Q=function(a,b,g){return ya(a,b,G,x,k.baseUrl,g?[]:O,g?[]:oa,g?[]:na)},za=function(a,b,g){return a.normalize?a.normalize(b,function(a){return ha(a,g)}):ha(b,g)},Aa=0,D=function(a,b,g){var e,d;(e=a.match(/^(.+?)\!(.*)$/))?(d=D(e[1],b,g),5===d.executed&&
!d.load&&ja(d),d.load?(e=za(d,e[2],b),a=d.mid+"!"+(d.dynamic?++Aa+"!":"")+e):(e=e[2],a=d.mid+"!"+ ++Aa+"!waitingForPlugin"),a={plugin:d,mid:a,req:aa(b),prid:e}):a=Q(a,b);return x[a.mid]||!g&&(x[a.mid]=a)},ha=k.toAbsMid=function(a,b){return Q(a,b).mid},qa=k.toUrl=function(a,b){var d=Q(a+"/x",b),e=d.url;return Ba(0===d.pid?a:e.substring(0,e.length-5))},Ca={injected:2,executed:5,def:3,result:3};w=function(a){return x[a]=d({mid:a},Ca)};var Ma=w("require"),Na=w("exports"),Oa=w("module"),X={},ka=0,ja=function(a){var b=
a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Pa=function(a){var l={};b(a.loadQ,function(b){var e=za(a,b.prid,b.req.module),g=a.dynamic?b.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=d(d({},b),{mid:g,prid:e,injected:0});if(!x[g]||!x[g].injected)Da(x[g]=e);l[b.mid]=x[g];W(b);delete x[b.mid]});a.loadQ=0;var g=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=l[b[e].mid])&&(b[e]=a)},e;for(e in x)g(x[e]);b(A,g)},la=function(a){k.trace("loader-finish-exec",[a.mid]);
a.executed=5;a.defOrder=ka++;a.loadQ&&(ja(a),Pa(a));for(n=0;n<A.length;)A[n]===a?A.splice(n,1):n++;/^require\*/.test(a.mid)&&delete x[a.mid]},Qa=[],fa=function(a,b){if(4===a.executed)return k.trace("loader-circular-dependency",[Qa.concat(a.mid).join("-\x3e")]),!a.def||b?X:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return X;var d=a.mid,e=a.deps||[],c,s=[],f=0;for(a.executed=4;c=e[f++];){c=c===Ma?aa(a):c===Na?a.cjs.exports:c===Oa?a.cjs:fa(c,b);if(c===X)return a.executed=0,k.trace("loader-exec-module",
["abort",d]),X;s.push(c)}k.trace("loader-run-factory",[a.mid]);var d=a.def,m;if(t("config-dojo-loader-catches"))try{m=r(d)?d.apply(null,s):d}catch(n){B("error",a.result=h("factoryThrew",[a,n]))}else m=r(d)?d.apply(null,s):d;a.result=void 0===m&&a.cjs?a.cjs.exports:m;la(a)}return a.result},L=0,da=function(a){try{L++,a()}catch(b){throw b;}finally{L--}La()&&B("idle",[])},ga=function(){L||da(function(){for(var a,b,d=0;d<A.length;)a=ka,b=A[d],fa(b),a!=ka?d=0:d++})};void 0===t("dojo-loader-eval-hint-url")&&
t.add("dojo-loader-eval-hint-url",1);var Ba="function"==typeof f.fixupUrl?f.fixupUrl:function(a){a+="";return a+($?(/\?/.test(a)?"\x26":"?")+$:"")},Da=function(a){var b=a.plugin;5===b.executed&&!b.load&&ja(b);var d=function(b){a.result=b;W(a);la(a);ga()};b.load?b.load(a.prid,a.req,d):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],A.unshift(b),va(b))},I=0,Ra=function(a,b){t("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));if(t("config-dojo-loader-catches"))try{a===I?I.call(null):k.eval(a,t("dojo-loader-eval-hint-url")?
b.url:b.mid)}catch(d){B("error",h("evalModuleThrew",b))}else a===I?I.call(null):k.eval(a,t("dojo-loader-eval-hint-url")?b.url:b.mid)},va=function(a){var b=a.mid,g=a.url;if(!a.executed&&!a.injected&&!(y[b]||a.url&&(a.pack&&y[a.url]===a.pack||1==y[a.url])))if(Ka(a),a.plugin)Da(a);else{var e=function(){Sa(a);if(2!==a.injected){if(t("dojo-enforceDefine")){B("error",h("noDefine",a));return}W(a);d(a,Ca);k.trace("loader-define-nonmodule",[a.url])}ga()};(I=H[b]||H["url:"+a.url])?(k.trace("loader-inject",
["cache",a.mid,g]),Ra(I,a),e()):(k.trace("loader-inject",["script",a.mid,g]),k.injectUrl(Ba(g),e,a))}},Ea=function(a,b,g){k.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return B("error",h("multipleDefine",a)),a;d(a,{deps:b,def:g,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var e=0;b[e];e++)b[e]=D(b[e],a);W(a);!r(g)&&!b.length&&(a.result=g,la(a));return a},Sa=function(a,d){for(var h=[],e,c;U.length;)c=U.shift(),
d&&(c[0]=d.shift()),e=c[0]&&D(c[0])||a,h.push([e,c[1],c[2]]);ba(a);b(h,function(a){ea(Ea.apply(null,a))})},Y=0,V=q,wa=q,V=function(){Y&&clearTimeout(Y);Y=0},wa=function(){V();k.waitms&&(Y=F.setTimeout(function(){V();B("error",h("timeout",y))},k.waitms))};k.log=function(){try{for(var a=0;a<arguments.length;a++)console.log(arguments[a])}catch(b){}};k.trace=q;w=function(a,b,d){var e=arguments.length,c=["require","exports","module"],h=[0,a,b];1==e?h=[0,r(a)?c:[],a]:2==e&&v(a)?h=[a,r(b)?c:[],b]:3==e&&
(h=[a,b,d]);k.trace("loader-define",h.slice(0,2));(e=h[0]&&D(h[0]))&&!y[e.mid]?ea(Ea(e,h[1],h[2])):(t("ie-event-behavior"),U.push(h))};w.amd={vendor:"dojotoolkit.org"};d(d(k,m.loaderPatch),f.loaderPatch);N("error",function(a){try{if(console.error(a),a instanceof Error){for(var b in a)console.log(b+":",a[b]);console.log(".")}}catch(d){}});d(k,{uid:E,cache:H,packs:G});F.define?B("error",h("defineAlreadyDefined",0)):(F.define=w,F.require=k,b(ta,function(a){J(a)}),N=z.deps||f.deps||m.deps,z=z.callback||
f.callback||m.callback,k.boot=N||z?[N||[],z]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},
{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]});
require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(f,m){m.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var n=m("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],q=n.length,p=function(b,d,h){h||(h=b[0]&&f.scopeMap[b[0]]?f.scopeMap[b.shift()][1]:f.global);try{for(var c=0;c<b.length;c++){var m=b[c];if(!(m in h))if(d)h[m]={};else return;
h=h[m]}return h}catch(k){}},u=Object.prototype.toString,r=function(b,d,h){return(h||[]).concat(Array.prototype.slice.call(b,d||0))},v=/\{([^\}]+)\}/g,c={_extraNames:n,_mixin:function(b,d,h){var c,f,k,p={};for(c in d)if(f=d[c],!(c in b)||b[c]!==f&&(!(c in p)||p[c]!==f))b[c]=h?h(f):f;if(m("bug-for-in-skips-shadowed")&&d)for(k=0;k<q;++k)if(c=n[k],f=d[c],!(c in b)||b[c]!==f&&(!(c in p)||p[c]!==f))b[c]=h?h(f):f;return b},mixin:function(b,d){b||(b={});for(var h=1,f=arguments.length;h<f;h++)c._mixin(b,arguments[h]);
return b},setObject:function(b,d,c){var f=b.split(".");b=f.pop();return(c=p(f,!0,c))&&b?c[b]=d:void 0},getObject:function(b,d,c){return!b?c:p(b.split("."),d,c)},exists:function(b,d){return void 0!==c.getObject(b,!1,d)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:Array.isArray||function(b){return"[object Array]"==u.call(b)},isFunction:function(b){return"[object Function]"===u.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||c.isArray(b)||
c.isFunction(b))},isArrayLike:function(b){return!!b&&!c.isString(b)&&!c.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(c.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!c.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,d){for(var h=1,f=arguments.length;h<f;h++)c._mixin(b.prototype,arguments[h]);return b},_hitchArgs:function(b,d){var h=c._toArray(arguments,2),m=c.isString(d);return function(){var n=c._toArray(arguments),k=m?(b||f.global)[d]:
d;return k&&k.apply(b||this,h.concat(n))}},hitch:function(b,d){if(2<arguments.length)return c._hitchArgs.apply(f,arguments);d||(d=b,b=null);if(c.isString(d)){b=b||f.global;if(!b[d])throw['lang.hitch: scope["',d,'"] is null (scope\x3d"',b,'")'].join("");return function(){return b[d].apply(b,arguments||[])}}return!b?d:function(){return d.apply(b,arguments||[])}},delegate:function(){function b(){}return function(d,h){b.prototype=d;var f=new b;b.prototype=null;h&&c._mixin(f,h);return f}}(),_toArray:m("ie")?
function(){function b(b,c,f){f=f||[];for(c=c||0;c<b.length;c++)f.push(b[c]);return f}return function(d){return(d.item?b:r).apply(this,arguments)}}():r,partial:function(b){return c.hitch.apply(f,[null].concat(c._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||c.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var d,h,f;if(c.isArray(b)){d=[];h=0;for(f=b.length;h<f;++h)h in
b&&(d[h]=c.clone(b[h]))}else d=b.constructor?new b.constructor:{};return c._mixin(d,b,c.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,d,f){return b.replace(f||v,c.isFunction(d)?d:function(b,f){return c.getObject(f,!1,d)})}};c.mixin(f,c);return c})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(f,m,n,q){var p,u=function(){return this}(),r={},v={},c={config:m,
global:u,dijit:r,dojox:v},r={dojo:["dojo",c],dijit:["dijit",r],dojox:["dojox",v]};q=n.map&&n.map[q.id.match(/[^\/]+/)[0]];for(p in q)r[p]?r[p][0]=q[p]:r[p]=[q[p],{}];for(p in r)q=r[p],q[1]._scopeName=q[0],m.noGlobals||(u[q[0]]=q[1]);c.scopeMap=r;c.baseUrl=c.config.baseUrl=n.baseUrl;c.isAsync=n.async;c.locale=m.locale;u="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);c.version={major:1,minor:11,patch:2,flag:"",revision:u?u[0]:NaN,toString:function(){var b=c.version;return b.major+"."+b.minor+"."+b.patch+b.flag+
" ("+b.revision+")"}};f("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};f.add("dojo-debug-messages",!!m.isDebug);c.deprecated=c.experimental=function(){};f("dojo-debug-messages")&&(c.deprecated=function(b,d,c){b="DEPRECATED: "+b;d&&(b+=" "+d);c&&(b+=" -- will be removed in version: "+c);console.warn(b)},c.experimental=function(b,d){var c="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";
d&&(c+=" "+d);console.warn(c)});if(m.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");f={};for(p in m.modulePaths)f[p.replace(/\./g,"/")]=m.modulePaths[p];n({paths:f})}c.moduleUrl=function(b,d){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var f=null;b&&(f=n.toUrl(b.replace(/\./g,"/")+(d?"/"+d:"")+"/*.*").replace(/\/\*\.\*/,"")+(d?"":"/"));return f};c._hasResource={};return c})},"dojo/has":function(){define(["require","module"],function(f,m){var n=f.has||function(){};
n.clearElement=function(f){f.innerHTML="";return f};n.normalize=function(f,m){var u=f.match(/[\?:]|[^:\?]*/g),r=0,v=function(c){var b=u[r++];if(":"==b)return 0;if("?"==u[r++]){if(!c&&n(b))return v();v(!0);return v(c)}return b||0};return(f=v())&&m(f)};n.load=function(f,m,n){f?m([f],n):n()};return n})},"dojo/_base/config":function(){define(["../has","require"],function(f,m){var n={},q=m.rawConfig,p;for(p in q)n[p]=q[p];if(!n.locale&&"undefined"!=typeof navigator&&(q=navigator.languages&&navigator.languages.length?
navigator.languages[0]:navigator.language||navigator.userLanguage))n.locale=q.toLowerCase();return n})},"dojo/sniff":function(){define(["./has"],function(f){return f})}}});(function(){var f=this.require;f({cache:{}});!f.async&&f(["dojo"]);f.boot&&f.apply(null,f.boot)})();
//>>built
require({cache:{"esri/layers/vectorTiles/core/workers/WorkerConnection":function(){define(["require","exports","./WorkerProxy"],function(l,a,g){return function(){function a(f,b,d){this.id=d;"function"===typeof f&&(this._target=new f(this));this.proxy=new g(this._target,b,this)}a.prototype.invoke=function(a,b,d){return this.proxy.invoke(a,b,d,this.id)};return a}()})},"esri/layers/vectorTiles/core/workers/WorkerProxy":function(){define(["require","exports","dojo/Deferred"],function(l,a,g){return function(){function a(f,
b,d){this.parentModule=f;this.worker=b;this.connection=d;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.msgCount=0;this.outgoingJobs={};this.incomingJobs={}}a.prototype.invoke=function(a,b,d,e){var c=this,n=++this.msgCount,q=new g(function(a){c.worker.postMessage({type:"\x3ccancel\x3e",id:n,connection:e,data:{reason:a}});c.outgoingJobs[n]&&delete c.outgoingJobs[n]});this.outgoingJobs[n]=q;this.worker.postMessage({type:a,id:n,connection:e,data:b},d);return q.promise};a.prototype.message=
function(a){var b=this;if(a&&a.data){var d=a.data.type;if(d){var e=a.data,c=a.data.id,n=a.data.connection;if("\x3cresponse\x3e"===d&&c){if(a=this.outgoingJobs[c])delete this.outgoingJobs[c],e.error?a.reject(e.error):a.resolve(e.data)}else"\x3ccancel\x3e"===d&&c?(a=this.incomingJobs[c])&&a.cancel(e.data.reason||"cancel"):(a=this.parentModule[d],"function"===typeof a&&(e=a.call(this.parentModule,e.data,this.connection),this.incomingJobs[c]=e,e.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",
id:c,connection:n,data:a?a.data:null},a?a.buffers:[])}).otherwise(function(a){a||(a="Error encountered at method "+d);b.worker.postMessage({type:"\x3cresponse\x3e",id:c,connection:n,data:null,error:a})}).always(function(){delete b.incomingJobs[c]})))}}};return a}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(l,a,g,m,f){var b=Object.freeze||function(){},d=function(a,c,d,b,n){2===c&&(q.instrumentRejected&&
0===a.length)&&q.instrumentRejected(d,!1,b,n);for(n=0;n<a.length;n++)e(a[n],c,d,b)},e=function(a,e,d,b){var f=a[e],g=a.deferred;if(f)try{var m=f(d);if(0===e)"undefined"!==typeof m&&n(g,e,m);else{if(m&&"function"===typeof m.then){a.cancel=m.cancel;m.then(c(g,1),c(g,2),c(g,0));return}n(g,1,m)}}catch(A){n(g,2,A)}else n(g,e,d);2===e&&q.instrumentRejected&&q.instrumentRejected(d,!!f,b,g.promise)},c=function(a,e){return function(c){n(a,e,c)}},n=function(a,e,c){if(!a.isCanceled())switch(e){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},q=function(a){var c=this.promise=new m,n=this,f,s,r,w=!1,A=[];Error.captureStackTrace&&(Error.captureStackTrace(n,q),Error.captureStackTrace(c,q));this.isResolved=c.isResolved=function(){return 1===f};this.isRejected=c.isRejected=function(){return 2===f};this.isFulfilled=c.isFulfilled=function(){return!!f};this.isCanceled=c.isCanceled=function(){return w};this.progress=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");
return c}d(A,0,a,null,n);return c};this.resolve=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");return c}d(A,f=1,s=a,null,n);A=null;return c};var x=this.reject=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");return c}Error.captureStackTrace&&Error.captureStackTrace(r={},x);d(A,f=2,s=a,r,n);A=null;return c};this.then=c.then=function(a,d,b){var n=[b,a,d];n.cancel=c.cancel;n.deferred=new q(function(a){return n.cancel&&n.cancel(a)});
f&&!A?e(n,f,s,r):A.push(n);return n.deferred.promise};this.cancel=c.cancel=function(e,c){if(f){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a){var d=a(e);e="undefined"===typeof d?e:d}w=!0;if(f){if(2===f&&s===e)return e}else return"undefined"===typeof e&&(e=new g),x(e),e}};b(c)};q.prototype.toString=function(){return"[object Deferred]"};f&&f(q);return q})},"dojo/errors/CancelError":function(){define(["./create"],function(l){return l("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(l){return function(a,g,m,f){m=m||Error;var b=function(a){if(m===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var e=Error.call(this,a),c;for(c in e)e.hasOwnProperty(c)&&(this[c]=e[c]);this.message=a;this.stack=e.stack}else m.apply(this,arguments);g&&g.apply(this,arguments)};b.prototype=l.delegate(m.prototype,f);b.prototype.name=a;return b.prototype.constructor=b}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(l){function a(){throw new TypeError("abstract");}return l.extend(function(){},{then:function(g,m,f){a()},cancel:function(g,m){a()},isResolved:function(){a()},isRejected:function(){a()},isFulfilled:function(){a()},isCanceled:function(){a()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(l,a,g,m){function f(a,e,c){var d="";a&&a.stack&&(d+=a.stack);e&&e.stack&&(d+="\n    ----------------------------------------\n    rejected"+e.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(d+="\n    ----------------------------------------\n"+c.stack);console.error(a,d)}function b(a,e,c,d){e||f(a,c,d)}function d(a,d,b,f){m.some(c,function(e){if(e.error===a)return d&&(e.handled=!0),!0})||c.push({error:a,rejection:b,handled:d,
deferred:f,timestamp:(new Date).getTime()});n||(n=setTimeout(e,q))}function e(){var a=(new Date).getTime(),d=a-q;c=m.filter(c,function(a){return a.timestamp<d?(a.handled||f(a.error,a.rejection,a.deferred),!1):!0});n=c.length?setTimeout(e,c[0].timestamp+q-a):!1}a.add("config-useDeferredInstrumentation","report-unhandled-rejections");var c=[],n=!1,q=1E3;return function(e){var c=a("config-useDeferredInstrumentation");if(c){l.on("resolved",g.hitch(console,"log","resolved"));l.on("rejected",g.hitch(console,
"log","rejected"));l.on("progress",g.hitch(console,"log","progress"));var n=[];"string"===typeof c&&(n=c.split(","),c=n.shift());if("report-rejections"===c)e.instrumentRejected=b;else if("report-unhandled-rejections"===c||!0===c||1===c)e.instrumentRejected=d,q=parseInt(n[0],10)||q;else throw Error("Unsupported instrumentation usage \x3c"+c+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(l,a,g){function m(a){setTimeout(function(){b.apply(f,
a)},0)}var f=new g,b=f.emit;f.emit=null;a.prototype.trace=function(){var a=l._toArray(arguments);this.then(function(e){m(["resolved",e].concat(a))},function(e){m(["rejected",e].concat(a))},function(e){m(["progress",e].concat(a))});return this};a.prototype.traceRejected=function(){var a=l._toArray(arguments);this.otherwise(function(e){m(["rejected",e].concat(a))});return this};return f})},"dojo/Evented":function(){define(["./aspect","./on"],function(l,a){function g(){}var m=l.after;g.prototype={on:function(f,
b){return a.parse(this,f,b,function(a,e){return m(a,"on"+e,b,!0)})},emit:function(f,b){var d=[this];d.push.apply(d,arguments);return a.emit.apply(a,d)}};return g})},"dojo/aspect":function(){define([],function(){function l(a,e,c,b){var f=a[e],g="around"==e,m;if(g){var t=c(function(){return f.advice(this,arguments)});m={remove:function(){t&&(t=a=c=null)},advice:function(a,e){return t?t.apply(a,e):f.advice(a,e)}}}else m={remove:function(){if(m.advice){var b=m.previous,f=m.next;!f&&!b?delete a[e]:(b?
b.next=f:a[e]=f,f&&(f.previous=b));a=c=m.advice=null}},id:a.nextId++,advice:c,receiveArguments:b};if(f&&!g)if("after"==e){for(;f.next&&(f=f.next););f.next=m;m.previous=f}else"before"==e&&(a[e]=m,m.next=f,f.previous=m);else a[e]=m;return m}function a(a){return function(e,c,b,f){var m=e[c],D;if(!m||m.target!=e)e[c]=D=function(){for(var a=D.nextId,e=arguments,c=D.before;c;)c.advice&&(e=c.advice.apply(this,e)||e),c=c.next;if(D.around)var d=D.around.advice(this,e);for(c=D.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var b=
c.advice.apply(this,e),d=b===g?d:b;else d=c.advice.call(this,d,e);c=c.next}return d},m&&(D.around={advice:function(a,e){return m.apply(a,e)}}),D.target=e,D.nextId=D.nextId||0;e=l(D||m,a,b,f);b=null;return e}}var g,m=a("after"),f=a("before"),b=a("around");return{before:f,around:b,after:m}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(l,a,g){function m(a,c,b,f,n){if(f=c.match(/(.*):(.*)/))return c=f[2],f=f[1],d.selector(f,c).call(n,a,b);
g("touch")&&(e.test(c)&&(b=H(b)),!g("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,b=H(b)));D&&(b=D(b));if(a.addEventListener){var m=c in q,C=m?q[c]:c;a.addEventListener(C,b,m);return{remove:function(){a.removeEventListener(C,b,m)}}}if(r&&a.attachEvent)return r(a,"on"+c,b);throw Error("Target must be an event emitter");}function f(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var d=function(a,e,c,b){return"function"==typeof a.on&&"function"!=
typeof e&&!a.nodeType?a.on(e,c):d.parse(a,e,c,m,b,this)};d.pausable=function(a,e,c,b){var f;a=d(a,e,function(){if(!f)return c.apply(this,arguments)},b);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};d.once=function(a,e,c,b){var f=d(a,e,function(){f.remove();return c.apply(this,arguments)});return f};d.parse=function(a,e,c,b,f,n){var q;if(e.call)return e.call(n,a,c);e instanceof Array?q=e:-1<e.indexOf(",")&&(q=e.split(/\s*,\s*/));if(q){var g=[];e=0;for(var m;m=q[e++];)g.push(d.parse(a,
m,c,b,f,n));g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g}return b(a,e,c,f,n)};var e=/^touch/;d.matches=function(e,c,d,b,f){f=f&&"function"==typeof f.matches?f:a.query;b=!1!==b;1!=e.nodeType&&(e=e.parentNode);for(;!f.matches(e,c,d);)if(e==d||!1===b||!(e=e.parentNode)||1!=e.nodeType)return!1;return e};d.selector=function(a,e,c){return function(b,f){function n(e){return d.matches(e,a,b,c,q)}var q="function"==typeof a?{matches:a}:this,g=e.bubble;return g?d(b,g(n),f):d(b,e,function(a){var e=
n(a.target);if(e)return a.selectorTarget=e,f.call(e,a)})}};var c=[].slice,n=d.emit=function(a,e,d){var n=c.call(arguments,2),q="on"+e;if("parentNode"in a){var g=n[0]={},m;for(m in d)g[m]=d[m];g.preventDefault=f;g.stopPropagation=b;g.target=a;g.type=e;d=g}do a[q]&&a[q].apply(a,n);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},q=g("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!g("event-stopimmediatepropagation"))var C=function(){this.modified=this.immediatelyStopped=!0},
D=function(a){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=C,a.apply(this,arguments)}};if(g("dom-addeventlistener"))d.emit=function(a,e,c){if(a.dispatchEvent&&document.createEvent){var b=(a.ownerDocument||document).createEvent("HTMLEvents");b.initEvent(e,!!c.bubbles,!!c.cancelable);for(var f in c)f in b||(b[f]=c[f]);return a.dispatchEvent(b)&&b}return n.apply(d,arguments)};else{d._fixEvent=function(a,e){a||(a=(e&&(e.ownerDocument||e.document||e).parentWindow||window).event);
if(!a)return a;try{t&&(a.type==t.type&&a.srcElement==t.target)&&(a=t)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=e||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=w,a.preventDefault=A),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):
"";d.charOrCode=d.keyChar||d.keyCode}return a};var t,v=function(a){this.handle=a};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var s=function(a){return function(e){e=d._fixEvent(e,this);var c=a.call(this,e);e.modified&&(t||setTimeout(function(){t=null}),t=e);return c}},r=function(a,e,c){c=s(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>g("jscript"))&&!g("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=
[]);var d=a[e];if(!d||!d.listeners){var b=d,d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");d.listeners=[];a[e]=d;d.global=this;b&&d.listeners.push(_dojoIEListeners_.push(b)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new v(a)}return l.after(a,e,c,!0)},w=function(){this.cancelBubble=!0},A=d._preventDefault=function(){this.bubbledKeyCode=
this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(g("touch"))var x=function(){},J=window.orientation,H=function(a){return function(e){var c=e.corrected;if(!c){var d=e.type;try{delete e.type}catch(b){}if(e.type){if(g("touch-can-modify-event-delegate"))x.prototype=e,c=new x;else{var c={},f;for(f in e)c[f]=e[f]}c.preventDefault=function(){e.preventDefault()};c.stopPropagation=function(){e.stopPropagation()}}else c=e,c.type=d;e.corrected=
c;if("resize"==d){if(J==window.orientation)return null;J=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var d=c.changedTouches[0],n;for(n in d)delete c[n],c[n]=d[n]}return a.call(this,c)}};return d})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(l,a,g){function m(a){return d[a]=new Function("item","index","array",a)}function f(a){var e=!a;return function(c,b,f){var g=0,s=c&&c.length||0,r;s&&"string"==typeof c&&
(c=c.split(""));"string"==typeof b&&(b=d[b]||m(b));if(f)for(;g<s;++g){if(r=!b.call(f,c[g],g,c),a^r)return!r}else for(;g<s;++g)if(r=!b(c[g],g,c),a^r)return!r;return e}}function b(a){var d=1,b=0,f=0;a||(d=b=f=-1);return function(g,m,s,r){if(r&&0<d)return c.lastIndexOf(g,m,s);r=g&&g.length||0;var w=a?r+f:b;s===e?s=a?b:r+f:0>s?(s=r+s,0>s&&(s=b)):s=s>=r?r+f:s;for(r&&"string"==typeof g&&(g=g.split(""));s!=w;s+=d)if(g[s]==m)return s;return-1}}var d={},e,c={every:f(!1),some:f(!0),indexOf:b(!0),lastIndexOf:b(!1),
forEach:function(a,e,c){var b=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof e&&(e=d[e]||m(e));if(c)for(;b<f;++b)e.call(c,a[b],b,a);else for(;b<f;++b)e(a[b],b,a)},map:function(a,e,c,b){var f=0,g=a&&a.length||0;b=new (b||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof e&&(e=d[e]||m(e));if(c)for(;f<g;++f)b[f]=e.call(c,a[f],f,a);else for(;f<g;++f)b[f]=e(a[f],f,a);return b},filter:function(a,e,c){var b=0,f=a&&a.length||0,g=[],s;f&&"string"==typeof a&&(a=a.split(""));
"string"==typeof e&&(e=d[e]||m(e));if(c)for(;b<f;++b)s=a[b],e.call(c,s,b,a)&&g.push(s);else for(;b<f;++b)s=a[b],e(s,b,a)&&g.push(s);return g},clearCache:function(){d={}}};g.mixin(l,c);return c})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(l,a,g,m,f,b){return function(){function a(){this._tiles={};this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=
function(){var a=new g;this._spriteInfo={};this._glyphInfo={};var c=this._tiles,d;for(d in c){var b=c[d];b&&b.setObsolete()}this._tiles={};a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=(new b(a)).layers;return m.resolve({data:""})};a.prototype.getTile=function(a,c){var d=this,b=a.key,g=new f(a.key,a.refKey,this,a.rotation),D=a.cacheTile;return c.invoke("fetchTileData",a.refKey).then(function(a){return g.setDataAndParse(a.protobuff,
c).then(function(a){D&&6!==g.status&&(d._tiles[b]=g);return a}).otherwise(function(a){g.setObsolete();return m.reject(a)})}).otherwise(function(a){g.setObsolete();d._tiles[g.tileKey]&&delete d._tiles[g.tileKey];return m.reject(a)}).always(function(a){return a})};a.prototype.update=function(a){var c=this._tiles[a.key];return!c?m.reject():c.updateSymbols(a.rotation)};a.prototype.destructTileData=function(a){this._tiles[a.key]&&delete this._tiles[a.key];return m.resolve()};a.prototype.fetchSprites=function(a,
c){var d=[],b=this._spriteInfo;a.forEach(function(a){void 0===b[a]&&d.push(a)});return 0===d.length?m.resolve():c.invoke("getSprites",{sprites:d}).then(function(a){a=a.spriteItems;for(var e in a)b[e]=a[e]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,c,d,b){var f=[],g=this._glyphInfo[c];g?d.forEach(function(a){g[a]||f.push(a)}):(g=this._glyphInfo[c]=[],d.forEach(function(a){return f.push(a)}));return 0===f.length?m.resolve():b.invoke("getGlyphs",
{tileID:a,font:c,codePoints:f}).then(function(a){a=a.glyphItems;for(var e in a)g[e]=a[e]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(l,a,g,m){a.eachAlways=function(a){var b=new g,d=[],e=a.length;0===e&&b.resolve(d);a.forEach(function(a){var f={promise:a};d.push(f);a.then(function(a){f.value=a}).otherwise(function(a){f.error=a}).then(function(){--e;
0===e&&b.resolve(d)})});return b.promise};a.create=function(a){var b=new g;a(function(a){void 0===a&&(a=null);return b.resolve(a)},b.reject);return b.promise};a.reject=function(a){var b=new g;b.reject(a);return b.promise};a.resolve=function(a){void 0===a&&(a=null);var b=new g;b.resolve(a);return b.promise};a.after=function(a,b){void 0===b&&(b=null);var d=0,e=new g(function(){d&&(clearTimeout(d),d=0)}),d=setTimeout(function(){e.resolve(b)},a);return e.promise};a.timeout=function(a,b,d){var e=0,c=new g(a.cancel);
a.then(function(a){c.isFulfilled()||(c.resolve(a),e&&(clearTimeout(e),e=0))});a.otherwise(function(a){c.isFulfilled()||(c.reject(a),e&&(clearTimeout(e),e=0))});e=setTimeout(function(){var a=d||new m("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");c.reject(a)},b);return c.promise};a.wrapCallback=function(a){var b=!1,d=new g(function(){return b=!0});a(function(a){b||d.resolve(a)});return d.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports",
"./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(l,a,g,m,f){l=function(a){function d(){a.apply(this,arguments)}g(d,a);return d}(f);l.prototype.type="error";return l})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(l,a){function g(){this.constructor=l}for(var m in a)a.hasOwnProperty(m)&&(l[m]=a[m]);l.prototype=null===a?Object.create(a):(g.prototype=a.prototype,new g)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],
function(){return function(l,a,g,m){var f=arguments.length,b=3>f?a:null===m?m=Object.getOwnPropertyDescriptor(a,g):m,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(l,a,g,m);else for(var e=l.length-1;0<=e;e--)if(d=l[e])b=(3>f?d(b):3<f?d(a,g,b):d(a,g))||b;return 3<f&&b&&Object.defineProperty(a,g,b),b}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(l,
a,g,m,f){return function(){function a(d,e,c){this.name=d;this.message=e&&f.substitute(e,c,function(a){return null==a?"":a})||"";this.details=c}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(l,a){var g=/[&<>'"\/]/g,m={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},f={};a.setObject("dojo.string",f);f.escape=function(a){return!a?"":a.replace(g,
function(a){return m[a]})};f.rep=function(a,d){if(0>=d||!a)return"";for(var e=[];;){d&1&&e.push(a);if(!(d>>=1))break;a+=a}return e.join("")};f.pad=function(a,d,e,c){e||(e="0");a=String(a);d=f.rep(e,Math.ceil((d-a.length)/e.length));return c?a+d:d+a};f.substitute=function(b,d,e,c){c=c||l.global;e=e?a.hitch(c,e):function(a){return a};return b.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,f,g){if(""==f)return"$";b=a.getObject(f,!1,d);g&&(b=a.getObject(g,!1,c).call(c,b,f));return e(b,f).toString()})};
f.trim=String.prototype.trim?a.trim:function(a){a=a.replace(/^\s+/,"");for(var d=a.length-1;0<=d;d--)if(/\S/.test(a.charAt(d))){a=a.substring(0,d+1);break}return a};return f})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(l,a,g,m,f,
b,d,e,c,n,q,C,D,t){return function(){function a(e,c,d,b){void 0===b&&(b=0);this.rotation=0;this._symbolBuckets=[];this.tileKey=e;this.refKey=c;this._workerTileHandler=d;this.status=0;this.rotation=b;this.placementEngine=new D.PlacementEngine(t.C_DEG_TO_RAD*b)}a.prototype.setDataAndParse=function(a,e){var f=this;this.polygonVertexBuffer=new b.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new b.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new d.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=
new d.TriangleElementMemoryBuffer;this.lineVertexBuffer=new b.LineMemoryBuffer;this.lineIndexBuffer=new d.TriangleElementMemoryBuffer;this.lineJoinVertexBuffer=new b.LineJoinMemoryBuffer;this.markerVertexBuffer=new b.SymbolMemoryBuffer;this.markerIndexBuffer=new d.TriangleElementMemoryBuffer;this.textVertexBuffer=new b.SymbolMemoryBuffer;this.textIndexBuffer=new d.TriangleElementMemoryBuffer;var m=new g(function(a){f.status=6});this._parse(a,e).then(function(a){f.placementEngine=null;for(var e=new Uint32Array([2,
f.polygonVertexBuffer.sizeInBytes,3,f.polygonOutlineVertexBuffer.sizeInBytes,6,f.polygonIndexBuffer.sizeInBytes,7,f.polygonOutlineIndexBuffer.sizeInBytes,0,f.lineVertexBuffer.sizeInBytes,8,f.lineIndexBuffer.sizeInBytes,1,f.lineJoinVertexBuffer.sizeInBytes,4,f.markerVertexBuffer.sizeInBytes,9,f.markerIndexBuffer.sizeInBytes,5,f.textVertexBuffer.sizeInBytes,10,f.textIndexBuffer.sizeInBytes]),d=[],b=a.length,g=0;g<b;g++){var s=a[g];s instanceof n?(d.push(s.layerIndex),d.push(1),d.push(s.polygonIndexStart),
d.push(s.polygonIndexCount),d.push(s.polygonOutlineIndexStart),d.push(s.polygonOutlineIndexCount)):s instanceof q?(d.push(s.layerIndex),d.push(2),d.push(s.triangleIndexStart),d.push(s.triangleIndexCount),d.push(s.connectorStart),d.push(s.connectorCount)):s instanceof C?(d.push(s.layerIndex),d.push(3),d.push(0===s.markerIndexCount?0:s.markerIndexStart),d.push(s.markerIndexCount),d.push(0===s.textIndexCount?0:s.textIndexStart),d.push(s.textIndexCount),d.push(s.sdfMarker?1:0)):s instanceof c&&(d.push(s.layerIndex),
d.push(0))}a=new Uint32Array(d);var d=f.polygonVertexBuffer.toBuffer(),b=f.polygonOutlineVertexBuffer.toBuffer(),g=f.polygonIndexBuffer.toBuffer(),s=f.polygonOutlineIndexBuffer.toBuffer(),t=f.lineVertexBuffer.toBuffer(),D=f.lineIndexBuffer.toBuffer(),v=f.lineJoinVertexBuffer.toBuffer(),y=f.markerVertexBuffer.toBuffer(),u=f.markerIndexBuffer.toBuffer(),r=f.textVertexBuffer.toBuffer(),F=f.textIndexBuffer.toBuffer();f.placementEngine=null;f.polygonVertexBuffer=null;f.polygonIndexBuffer=null;f.polygonOutlineVertexBuffer=
null;f.polygonOutlineIndexBuffer=null;f.lineVertexBuffer=null;f.lineIndexBuffer=null;f.lineJoinVertexBuffer=null;m.resolve({data:{bufferDataInfo:e.buffer,bucketDataInfo:a.buffer,bufferData:[d,b,g,s,t,D,v,y,u,r,F]},buffers:[d,g,b,s,t,D,v,y,u,r,F,e.buffer,a.buffer]})});return m.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var e=this,c=this._symbolBuckets;if(!c)return m.resolve({data:null});this.rotation=a;var g=new D.PlacementEngine(360*
(a/256)*t.C_DEG_TO_RAD),q=new b.SymbolMemoryBuffer,n=new d.TriangleElementMemoryBuffer,C=new b.SymbolMemoryBuffer,v=new d.TriangleElementMemoryBuffer,I=[],E=c.length,K=0;return f(function(){if(6===e.status)return!0;if(K<E){var a=c[K++].copy(q,n,C,v,g);a&&(I.push(a),a.updateSymbols())}return K>=E},5).then(function(){if(6===e.status||0===q.sizeInBytes&&0===n.sizeInBytes&&0===C.sizeInBytes&&0===v.sizeInBytes)return{data:null};var a=new Uint32Array([4,q.sizeInBytes,9,n.sizeInBytes,5,C.sizeInBytes,10,
v.sizeInBytes]),c=[];E=I.length;for(var d=0;d<E;d++){var f=I[d];c.push(f.layerIndex);c.push(3);c.push(0===f.markerIndexCount?0:f.markerIndexStart);c.push(f.markerIndexCount);c.push(0===f.textIndexCount?0:f.textIndexStart);c.push(f.textIndexCount);c.push(f.sdfMarker?1:0)}var c=new Uint32Array(c),d=q.toBuffer(),f=n.toBuffer(),b=C.toBuffer(),g=v.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:c.buffer,bufferData:[d,f,b,g]},buffers:[d,f,b,g,a.buffer,c.buffer]}}).otherwise(function(a){return m.resolve({data:null})})};
a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(a,c){return!a||0===a.byteLength?m.resolve([]):(new e(a,this,c)).parse()};return a}()})},"esri/layers/vectorTiles/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(l,a,g,m){return function(a,b){var d;if(!b||0>=b)b=500;var e=new g(function(){d&&
clearTimeout(d)}),c=function(){if(!e.isFulfilled()){for(var g=m(),q=!1;!q&&m()-g<b;)q=!0===a();q?e.resolve():d=setTimeout(c,0)}};d=setTimeout(c,0);return e.promise}})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(l,a,g){return function(){var a=g.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};
if(a.oNow)return function(){return a.oNow()};var f;f=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-f}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(l,a){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{}})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(l,a,g,m,f,b){l=function(a){function e(){a.call(this,12)}g(e,a);e.prototype.add=function(a,e,d,b,g,m,v){var s=this.array,r=this.index;a=f.i1616to32(2*a|g,2*e|m);s.push(a);a=f.i1616to32(Math.round(31*d),Math.round(31*b));s.push(a);a=f.i1616to32(v,0);s.push(a);return r};return e}(f);a.LineMemoryBuffer=l;l=function(a){function e(){a.call(this,4)}g(e,a);e.prototype.add=function(a,e){var d=this.index;this.array.push(f.i1616to32(a,e));return d};return e}(f);a.LineJoinMemoryBuffer=l;l=function(a){function e(){a.call(this,
4)}g(e,a);e.prototype.add=function(a,e){this.array.push(f.i1616to32(a,e))};return e}(f);a.PolygonMemoryBuffer=l;l=function(a){function e(){a.call(this,8)}g(e,a);e.prototype.add=function(a,e,d,b,g,m){var v=this.array,s=this.index;a=f.i1616to32(a,e);v.push(a);a=f.i8888to32(Math.round(15*d),Math.round(15*b),g,m);v.push(a);return s};return e}(f);a.PolygonOutlineMemoryBuffer=l;l=function(a){function e(){a.call(this,16)}g(e,a);e.prototype.add=function(a,e,d,g,m,t,v,s,r,w){var A=this.array,x=this.index;
a=f.i1616to32(a,e);A.push(a);a=f.i1616to32(Math.round(32*d),Math.round(32*g));A.push(a);a=f.i8888to32(m/4,t/4,0,0);A.push(a);a=f.i8888to32(Math.ceil(10*w),b.radToByte(v),10*s,10*Math.min(r,25));A.push(a);return x};return e}(f);a.SymbolMemoryBuffer=l})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(l,a){return function(){function a(g){this._array=[];0>=g&&console.error("strideInBytes must be positive!");this._stride=g}Object.defineProperty(a.prototype,
"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};
a.i1616to32=function(a,f){return 65535&a|f<<16};a.i8888to32=function(a,f,b,d){return a&255|(f&255)<<8|(b&255)<<16|d<<24};a.i8816to32=function(a,f,b){return a&255|(f&255)<<8|b<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(l,a){function g(a,b){a%=b;return 0<=a?a:a+b}a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=
256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var m=1/Math.LN2;a.positiveMod=g;a.radToByte=function(f){return g(f*a.C_RAD_TO_256,256)};a.degToByte=function(f){return g(f*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*m};a.sqr=function(a){return a*a};a.clamp=function(a,b,d){return Math.min(Math.max(a,b),d)};a.interpolate=function(a,b,d){return a*(1-d)+b*d};a.between=function(a,b,d){return a>=b&&a<=d||a>=d&&a<=b}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(l,a,g,m,f){l=function(a){function d(){a.call(this,12)}g(d,a);d.prototype.add=function(a,c,d){var b=this.array;b.push(a);b.push(c);b.push(d)};return d}(f);a.TriangleElementMemoryBuffer=l;f=function(a){function d(){a.call(this,4)}g(d,a);d.prototype.add=function(a){this.array.push(a)};return d}(f);a.PointElementMemoryBuffer=f})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(l,a,g,m,f,b,d,e,c,n,q,C,D){return function(){function a(e,c,d){this._pbfTile=new b(new Uint8Array(e),new DataView(e));this._tile=c;this._connection=d;this._layers=c.getLayers();d=c.tileKey.split("/").map(parseFloat);var f=d[0];e=d[1];d=d[2];this._level=f;c.refKey&&(c=c.refKey.split("/").map(parseFloat)[0],c=f-c,0<c&&(f=(1<<c)-1,this._tileClipper=new D.TileClipper(c,e&f,d&f)));this._tileClipper||(this._tileClipper=new D.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,c=this._parseTileData(this._pbfTile),
d=this._layers,b=d.length,q=this._level,n,C=[],H={},D=new Set,b=b-1;0<=b;b--)if(n=d[b],!(n.minzoom&&q<n.minzoom)&&!(n.maxzoom&&q>=n.maxzoom)&&!(n.layout&&"none"===n.layout.visibility))if(0===n.type)n=this._createBucket(n),C.push(n);else{var t=n.sourceLayer,E=c[t];if(E&&(D.add(t),n=this._createBucket(n)))n.layerIndex=b,n.layerExtent=E.extent,(E=H[t])||(E=H[t]=[]),E.push(n)}var K=10*(this._level+1),P=[],B=[],y=[],u=[],G=this._tileClipper,F=new Set,z={},l=[];D.forEach(function(a){return l.push(a)});
var M=0,Q=0,L=l.length;return f(function(){if(6===a._tile.status)return!0;switch(M){case 0:if(Q<L)for(var d=l[Q++],b=c[d],f=H[d],d=b.getData();d.next(2);){var g=new e(d.getMessage(),b),n=g.values;if(n&&(n=n._minzoom)&&n>=K)continue;for(var q=0,m=f;q<m.length;q++)n=m[q],n.pushFeature(g)}else{b=a._tile;for(d in H){f=H[d];for(g=0;g<f.length;g++)n=f[g],n.hasFeatures()&&(3===n.layer.type?(P.push(n),b.addBucket(n)):n.layer.refLayerId?y.push(n):(B.push(n),u[n.layer.id]=n))}M=1;Q=0;L=P.length}break;case 1:Q<
L?P[Q++].getResources(G,F,z):M=2}return 2===M},50).then(function(){if(6===a._tile.status)return[];var e=[],c=a._tile.getWorkerTileHandler(),d;0<F.size&&(d=c.fetchSprites(F,a._connection),e.push(d));for(var b in z)d=z[b],0<d.size&&(d=c.fetchGlyphs(a._tile.tileKey,b,d,a._connection),e.push(d));return g(e).then(function(e){if(6===a._tile.status)return[];var c=0,d=0,b=B.length;return f(function(){if(6===a._tile.status)return!0;switch(c){case 0:if(d<b){var e=B[d++];e.processFeatures(G,a._tile);C.push(e)}else c=
1,d=0,b=y.length;break;case 1:for(var f=0;f<y.length;f++){var e=y[f],g=u[e.layer.refLayerId];g&&(g.assignBufferInfo(e),C.push(e))}c=2;d=0;b=P.length;break;case 2:d<b?(e=P[d++],e.processFeatures(G,a._tile),C.push(e)):c=3}return 3===c},50).then(function(){C.sort(function(a,e){return a.layerIndex-e.layerIndex});return C})}).otherwise(function(a){return m.reject(Error(a))})}).otherwise(function(a){return m.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var e={};a.next();)switch(a.tag()){case 3:var c=
new d(a.getMessage());e[c.name]=c;break;default:a.skip()}return e};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new c(a,this._level)};a.prototype._createFillBucket=function(a){var e=this._tile;return new n(a,this._level,e.polygonVertexBuffer,e.polygonIndexBuffer,e.polygonOutlineVertexBuffer,
e.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var e=this._tile;return new q(a,this._level,e.lineVertexBuffer,e.lineIndexBuffer,e.lineJoinVertexBuffer)};a.prototype._createSymbolBucket=function(a){var e=this._tile;return new C(a,this._level,e.markerVertexBuffer,e.markerIndexBuffer,e.textVertexBuffer,e.textIndexBuffer,e.placementEngine,e.getWorkerTileHandler())};return a}()})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(l,a,g){var m=
l.some;return function(f){var b,d;f instanceof Array?d=f:f&&"object"===typeof f&&(b=f);var e,c=[];if(b){d=[];for(var n in b)Object.hasOwnProperty.call(b,n)&&(c.push(n),d.push(b[n]));e={}}else d&&(e=[]);if(!d||!d.length)return(new a).resolve(e);var q=new a;q.promise.always(function(){e=c=null});var C=d.length;m(d,function(a,d){b||c.push(d);g(a,function(a){q.isFulfilled()||(e[c[d]]=a,0===--C&&q.resolve(e))},q.reject);return q.isFulfilled()});return q.promise}})},"dojo/when":function(){define(["./Deferred",
"./promise/Promise"],function(l,a){return function(g,m,f,b){var d=g&&"function"===typeof g.then,e=d&&g instanceof a;if(d)e||(d=new l(g.cancel),g.then(d.resolve,d.reject,d.progress),g=d.promise);else return 1<arguments.length?m?m(g):g:(new l).resolve(g);return m||f||b?g.then(m,f,b):g}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(l,a){return function(){function a(g,f,b,d){this._tag=0;this._dataType=99;this._data=g;this._dataView=f;this._pos=b||0;this._end=d||
g.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var f=this._decodeVarint();this._tag=f>>3;this._dataType=f&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};
a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,f=this._pos,a=a.getUint32(f,!0)+4294967296*a.getUint32(f+
4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,f=this._pos,a=a.getUint32(f,!0)+4294967296*a.getInt32(f+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=
function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),f=this._pos,f=this._toString(this._data,f,f+a);this._skip(a);return f};a.prototype.getBytes=function(){var a=this._getLength(),f=this._pos,f=this._toBytes(this._data,f,f+a);this._skip(a);return f};a.prototype.getMessage=function(){var m=this._getLength(),f=this._pos,f=new a(this._data,this._dataView,f,f+m);this._skip(m);return f};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,f=this._pos,b=0,d;if(10<=this._end-f){if(d=a[f++],b|=d&127,0!==(d&128)&&(d=a[f++],b|=(d&127)<<7,0!==(d&128)&&(d=a[f++],b|=(d&127)<<14,0!==(d&128)&&(d=a[f++],b|=(d&127)<<21,0!==
(d&128)&&(d=a[f++],b+=268435456*(d&127),0!==(d&128)&&(d=a[f++],b+=34359738368*(d&127),0!==(d&128)&&(d=a[f++],b+=4398046511104*(d&127),0!==(d&128)&&(d=a[f++],b+=562949953421312*(d&127),0!==(d&128)&&(d=a[f++],b+=72057594037927936*(d&127),0!==(d&128)&&(d=a[f++],b+=9223372036854775E3*(d&127),0!==(d&128)))))))))))throw Error("Varint too long!");}else{for(var e=1;f!==this._end;){d=a[f];if(0===(d&128))break;++f;b+=(d&127)*e;e*=128}if(f===this._end)throw Error("Varint overrun!");++f;b+=d*e}this._pos=f;return b};
a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,f,b){var d="",e="";for(b=Math.min(this._end,b);f<b;++f){var c=a[f];c&128?e+="%"+c.toString(16):(d+=decodeURIComponent(e)+String.fromCharCode(c),e="")}e.length&&(d+=decodeURIComponent(e));return d};a.prototype._toBytes=function(a,f,b){b=Math.min(this._end,
b);return new Uint8Array(a.buffer,f,b-f)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(l,a){return function(){function a(m){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=m.clone();m.next();)switch(m.tag()){case 1:this.name=m.getString();break;case 3:this.keys.push(m.getString());break;case 4:this.values.push(a._parseValue(m.getMessage()));break;case 5:this.extent=m.getUInt32();break;default:m.skip()}}
a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(l,a,g){return function(){function a(f,b){this.values=
{};for(var d=b.keys,e=b.values;f.next();)switch(f.tag()){case 1:this.id=f.getUInt64();break;case 2:for(var c=f.getMessage(),g=this.values;!c.empty();){var q=c.getUInt32(),m=c.getUInt32();g[d[q]]=e[m]}break;case 3:this.type=f.getUInt32();break;case 4:this._pbfGeometry=f.getMessage();break;default:f.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var b=this._pbfGeometry,d,e;a?a.reset(this.type):d=[];for(var c=1,n=0,q=0,m=0;!b.empty();)switch(0===n&&(n=b.getUInt32(),
c=n&7,n>>=3),n--,c){case 1:q+=b.getSInt32();m+=b.getSInt32();a?a.moveTo(q,m):(e&&d.push(e),e=[],e.push(new g.Point(q,m)));break;case 2:q+=b.getSInt32();m+=b.getSInt32();a?a.lineTo(q,m):e.push(new g.Point(q,m));break;case 7:a?a.close():e&&!e[0].equals(q,m)&&e.push(e[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(e&&d.push(e),a=d);return this._geometry=a};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Geometry":function(){define(["require","exports"],function(l,
a){var g=function(){function a(f,b){this.x=f;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,
b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var d=this.x,e=this.y;this.x=d*a-e*b;this.y=d*b+e*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,b){var d=b.x-a.x,e=b.y-a.y;return Math.sqrt(d*d+e*e)};
a.add=function(f,b){return new a(f.x+b.x,f.y+b.y)};a.sub=function(f,b){return new a(f.x-b.x,f.y-b.y)};return a}();a.Point=g})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(l,a,g,m,f){return function(a){function d(e,c){a.call(this,e,c)}g(d,a);return d}(f)})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(l,
a){return function(){function a(g,f){this.layerExtent=4096;this._features=[];this.layer=g;this.zoom=f;this._filter=g.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,f){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(l,a,g,m,f,b,d){return function(a){function c(c,d,b,f,g,m){a.call(this,c,d);this.polygonVertexBuffer=b;this.polygonIndexBuffer=f;this.polygonOutlineVertexBuffer=g;this.polygonOutlineIndexBuffer=m}g(c,a);Object.defineProperty(c.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};c.prototype.processFeatures=function(a,e){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);for(var c=this.layer.getPaintValue("fill-pattern",this.zoom),c=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===c,d=0,b=this._features;d<b.length;d++){var f=
b[d].getGeometry(a);this._processFeature(f,c)}};c.prototype._processFeature=function(a,e){if(a){var d=a.length;if(e)for(var b=0;b<d;b++)this._processOutline(a[b]);for(var f,b=0;b<d;b++){var g=c._area(a[b]);0<g?(void 0!==f&&this._processFill(a,f),f=[b]):0>g&&void 0!==f&&f.push(b)}void 0!==f&&this._processFill(a,f)}};c.prototype._processOutline=function(a){var e=this.polygonOutlineVertexBuffer,c=this.polygonOutlineIndexBuffer,d=c.index,f,g,m,r=new b.Point(0,0),w=new b.Point(0,0),A=new b.Point(0,0),
x=-1,J=-1,H=f=-1,N=-1,I=a.length;if(!(2>I)){g=a[0];for(var E=a[I-1];I&&E.isEqual(g);)--I,E=a[I-1];if(!(2>I-0)){for(E=0;E<I;++E){0===E?(f=a[I-1],g=a[0],m=a[1],r.assignSub(g,f),r.normalize(),r.rightPerpendicular()):(g=m,m=E!==I-1?a[E+1]:a[0],r.assign(w));w.assignSub(m,g);w.normalize();w.rightPerpendicular();f=r.x*w.y-r.y*w.x;A.assignAdd(r,w);A.normalize();var K=-A.x*-r.x+-A.y*-r.y,K=Math.abs(0!==K?1/K:1);8<K&&(K=8);0<=f?(f=e.add(g.x,g.y,r.x,r.y,0,1),-1===H&&(H=f),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),J=
e.add(g.x,g.y,K*-A.x,K*-A.y,0,-1),-1===N&&(N=J),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),x=J,J=f,f=e.add(g.x,g.y,A.x,A.y,0,1),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),J=e.add(g.x,g.y,w.x,w.y,0,1)):(f=e.add(g.x,g.y,K*A.x,K*A.y,0,1),-1===H&&(H=f),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),J=e.add(g.x,g.y,-r.x,-r.y,0,-1),-1===N&&(N=J),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),x=J,J=f,f=e.add(g.x,g.y,-A.x,-A.y,0,-1),0<=x&&(0<=J&&0<=f)&&c.add(x,J,f),x=e.add(g.x,g.y,-w.x,-w.y,0,-1));0<=x&&(0<=J&&0<=f)&&c.add(x,J,f)}0<=x&&(0<=J&&0<=H)&&c.add(x,
J,H);0<=x&&(0<=H&&0<=N)&&c.add(x,N,H);this._outlineElementsNum+=3*(c.index-d)}}};c.prototype._processFill=function(a,e){var c;1<e.length&&(c=[]);for(var b=0,f=0;f<e.length;f++){var g=e[f];0!==b&&c.push(b);b+=a[g].length}for(var b=2*b,f=new Float64Array(b),m=0,r=0;r<e.length;r++)for(var g=e[r],g=a[g],w=g.length,A=0;A<w;++A)f[m++]=g[A].x,f[m++]=g[A].y;c=d(f,c,2);m=c.length;if(0<m){r=this.polygonVertexBuffer.index;for(g=0;g<b;)this.polygonVertexBuffer.add(f[g++],f[g++]);for(b=0;b<m;)this.polygonIndexBuffer.add(r+
c[b++],r+c[b++],r+c[b++]);this._triangleElementsNum+=m}};c._area=function(a){for(var e=0,c=a.length-1,d=0;d<c;d++)e+=a[d].x*a[d+1].y-a[d+1].x*a[d].y;return e};return c}(f)})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function l(e,f,n){n=n||2;x=e.length/n+(f?2*f.length:0);J=!1;var q=f&&f.length,C=q?f[0]*n:e.length,s=a(e,0,C,n,!0),B=[];if(!s)return B;var y,u,D,r;if(q)a:{var t=n,q=[],w,A,l;r=0;for(w=f.length;r<w;r++)A=f[r]*t,l=r<w-1?f[r+1]*t:e.length,A=a(e,A,l,
t,!1),A===A.next&&(A.steiner=!0),q.push(c(A));q.sort(b);for(r=0;r<q.length;r++){if(!s){s=null;break a}f=q[r];t=s;if(t=d(f,t))f=v(t,f),g(f,f.next);s=g(s,s.next)}}if(J)return B;if(e.length>80*n){y=D=e[0];u=q=e[1];for(t=n;t<C;t+=n)r=e[t],f=e[t+1],r<y&&(y=r),f<u&&(u=f),r>D&&(D=r),f>q&&(q=f);D=Math.max(D-y,q-u)}m(s,B,n,y,u,D);return B}function a(a,e,c,d,b){var f;if(b===0<A(a,e,c,d))for(b=e;b<c;b+=d)f=s(b,a[b],a[b+1],f);else for(b=c-d;b>=e;b-=d)f=s(b,a[b],a[b+1],f);f&&C(f,f.next)&&(r(f),f=f.next);return f}
function g(a,e){if(!a)return a;e||(e=a);var c=a,d,b=0,f=x*x/2;do{d=!1;if(!c.steiner&&(C(c,c.next)||0===q(c.prev,c,c.next))){r(c);c=e=c.prev;if(c===c.next)return null;d=!0}else c=c.next;if(b++>f)return J=!0,null}while(d||c!==e);return e}function m(a,c,d,b,s,w,B){if(a){if(!B&&w){var y=a,u=y;do null===u.z&&(u.z=e(u.x,u.y,b,s,w)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==y);u.prevZ.nextZ=null;u.prevZ=null;var y=u,A,x,z,l,M,Q,L=1;do{u=y;z=y=null;for(l=0;u;){l++;x=u;for(A=M=0;A<L&&!(M++,x=x.nextZ,!x);A++);
for(Q=L;0<M||0<Q&&x;)0===M?(A=x,x=x.nextZ,Q--):0===Q||!x?(A=u,u=u.nextZ,M--):u.z<=x.z?(A=u,u=u.nextZ,M--):(A=x,x=x.nextZ,Q--),z?z.nextZ=A:y=A,A.prevZ=z,z=A;u=x}z.nextZ=null;L*=2}while(1<l)}for(y=a;a.prev!==a.next;){u=a.prev;x=a.next;if(w)a:{z=a;Q=b;var O=s,T=w;l=z.prev;M=z;L=z.next;if(0<=q(l,M,L))z=!1;else{var Z=l.x>M.x?l.x>L.x?l.x:L.x:M.x>L.x?M.x:L.x,ba=l.y>M.y?l.y>L.y?l.y:L.y:M.y>L.y?M.y:L.y;A=e(l.x<M.x?l.x<L.x?l.x:L.x:M.x<L.x?M.x:L.x,l.y<M.y?l.y<L.y?l.y:L.y:M.y<L.y?M.y:L.y,Q,O,T);Q=e(Z,ba,Q,O,
T);for(O=z.nextZ;O&&O.z<=Q;){if(O!==z.prev&&O!==z.next&&n(l.x,l.y,M.x,M.y,L.x,L.y,O.x,O.y)&&0<=q(O.prev,O,O.next)){z=!1;break a}O=O.nextZ}for(O=z.prevZ;O&&O.z>=A;){if(O!==z.prev&&O!==z.next&&n(l.x,l.y,M.x,M.y,L.x,L.y,O.x,O.y)&&0<=q(O.prev,O,O.next)){z=!1;break a}O=O.prevZ}z=!0}}else z=f(a);if(z)c.push(u.i/d),c.push(a.i/d),c.push(x.i/d),r(a),y=a=x.next;else{if(J)break;a=x;if(a===y){if(B)if(1===B){B=c;y=d;u=a;do x=u.prev,z=u.next.next,!C(x,z)&&(D(x,u,u.next,z)&&t(x,z)&&t(z,x))&&(B.push(x.i/y),B.push(u.i/
y),B.push(z.i/y),r(u),r(u.next),u=a=z),u=u.next;while(u!==a);a=u;m(a,c,d,b,s,w,2)}else{if(2===B)a:{B=a;do{for(y=B.next.next;y!==B.prev;){if(u=B.i!==y.i){u=B;x=y;z=void 0;if(z=u.next.i!==x.i)if(z=void 0,z=u.prev.i!==x.i){z=z=void 0;b:{z=u;do{if(z.i!==u.i&&z.next.i!==u.i&&z.i!==x.i&&z.next.i!==x.i&&D(z,z.next,u,x)){z=!0;break b}z=z.next}while(z!==u);z=!1}if(z=!z)if(z=void 0,z=t(u,x))if(z=void 0,z=t(x,u)){z=u;l=!1;M=(u.x+x.x)/2;x=(u.y+x.y)/2;do z.y>x!==z.next.y>x&&M<(z.next.x-z.x)*(x-z.y)/(z.next.y-
z.y)+z.x&&(l=!l),z=z.next;while(z!==u);z=l}}u=z}if(u){a=v(B,y);B=g(B,B.next);a=g(a,a.next);m(B,c,d,b,s,w);m(a,c,d,b,s,w);break a}y=y.next}B=B.next}while(B!==a)}}else m(g(a),c,d,b,s,w,1);break}}}}}function f(a){var e=a.prev,c=a.next;if(0<=q(e,a,c))return!1;for(var d=a.next.next,b=0;d!==a.prev;){if(n(e.x,e.y,a.x,a.y,c.x,c.y,d.x,d.y)&&0<=q(d.prev,d,d.next))return!1;d=d.next;if(b++>x)return J=!0,!1}return!0}function b(a,e){return a.x-e.x}function d(a,e){var c=e,d=a.x,b=a.y,f=-Infinity,g;do{if(!c)return null;
if(b<=c.y&&b>=c.next.y){var q=c.x+(b-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(q<=d&&q>f){f=q;if(q===d){if(b===c.y)return c;if(b===c.next.y)return c.next}g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==e);if(!g)return null;if(d===f)return g.prev;for(var q=g,m=g.x,C=g.y,s=Infinity,r,c=g.next;c!==q;){if(d>=c.x&&c.x>=m&&n(b<C?d:f,b,m,C,b<C?f:d,b,c.x,c.y))if(r=Math.abs(b-c.y)/(d-c.x),(r<s||r===s&&c.x>g.x)&&t(c,a))g=c,s=r;c=c.next}return g}function e(a,e,c,d,b){a=32767*(a-c)/b;e=32767*(e-d)/b;a=(a|a<<8)&16711935;
a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1}function c(a){var e=a,c=a;do e.x<c.x&&(c=e),e=e.next;while(e!==a);return c}function n(a,e,c,d,b,f,g,q){return 0<=(b-g)*(e-q)-(a-g)*(f-q)&&0<=(a-g)*(d-q)-(c-g)*(e-q)&&0<=(c-g)*(f-q)-(b-g)*(d-q)}function q(a,e,c){return(e.y-a.y)*(c.x-e.x)-(e.x-a.x)*(c.y-e.y)}function C(a,e){return a.x===e.x&&a.y===e.y}function D(a,e,c,d){return C(a,e)&&C(c,d)||C(a,
d)&&C(c,e)?!0:0<q(a,e,c)!==0<q(a,e,d)&&0<q(c,d,a)!==0<q(c,d,e)}function t(a,e){return 0>q(a.prev,a,a.next)?0<=q(a,e,a.next)&&0<=q(a,a.prev,e):0>q(a,e,a.prev)||0>q(a,a.next,e)}function v(a,e){var c=new w(a.i,a.x,a.y),d=new w(e.i,e.x,e.y),b=a.next,f=e.prev;a.next=e;e.prev=a;c.next=b;b.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function s(a,e,c,d){a=new w(a,e,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function r(a){a.next.prev=a.prev;a.prev.next=a.next;
a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function w(a,e,c){this.i=a;this.x=e;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(a,e,c,d){for(var b=0,f=c-d;e<c;e+=d)b+=(a[f]-a[e])*(a[e+1]+a[f+1]),f=e;return b}var x,J;l.deviation=function(a,e,c,d){var b=e&&e.length,f=Math.abs(A(a,0,b?e[0]*c:a.length,c));if(b)for(var b=0,g=e.length;b<g;b++)f-=Math.abs(A(a,e[b]*c,b<g-1?e[b+1]*c:a.length,c));for(b=e=0;b<d.length;b+=3){var g=d[b]*c,q=d[b+1]*
c,n=d[b+2]*c;e+=Math.abs((a[g]-a[n])*(a[q+1]-a[g+1])-(a[g]-a[q])*(a[n+1]-a[g+1]))}return 0===f&&0===e?0:Math.abs((e-f)/f)};l.flatten=function(a){for(var e=a[0][0].length,c={vertices:[],holes:[],dimensions:e},d=0,b=0;b<a.length;b++){for(var f=0;f<a[b].length;f++)for(var g=0;g<e;g++)c.vertices.push(a[b][f][g]);0<b&&(d+=a[b-1].length,c.holes.push(d))}return c};return l})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer".split(" "),
function(l,a,g,m,f,b){return function(a){function e(e,b,f,g,m){a.call(this,e,b);this.lineVertexBuffer=f;this.lineIndexBuffer=g;this.joinsVertexBuffer=m}g(e,a);Object.defineProperty(e.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"connectorStart",{get:function(){return this.pointConnectorStart},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"connectorCount",{get:function(){return this.pointConnectorCount},enumerable:!0,configurable:!0});e.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount;a.pointConnectorStart=this.pointConnectorStart;a.pointConnectorCount=this.pointConnectorCount};e.prototype.processFeatures=function(a,e){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=
0;this.pointConnectorStart=this.joinsVertexBuffer.index;this.pointConnectorCount=0;a&&a.setExtent(this.layerExtent);for(var d=new b.LineLayout(this.layer,this.zoom),f=0,g=this._features;f<g.length;f++){var m=g[f].getGeometry(a);this._processFeature(d,m)}};e.prototype._processFeature=function(a,e){if(e)for(var d=e.length,b=0;b<d;b++)this._processGeometry(e[b],a)};e.prototype._processGeometry=function(a,e){for(var d=a.length;2<=d&&a[d-1].isEqual(a[d-2]);)d--;if(!(2>d)){var b=a[d-1],f=a[0].isEqual(b);
if(!(f&&2===d)){var g=e.cap,m=e.join,s=Math.min(e.miterLimit,4),r=Math.min(e.roundLimit,1.4142),r=2/r*Math.sqrt(1-1/r/r),w,A,x,l,H,N,I,E,K,P=-1,B=-1,y=-1,u=1,G=0;f&&(w=a[d-2],E=b.x-w.x,K=b.y-w.y,H=Math.sqrt(E*E+K*K),E/=H,K/=H);for(var F=this.lineVertexBuffer,z=this.lineIndexBuffer,U=this.joinsVertexBuffer,M=z.index,Q=U.index,L=0;L<d;L++)if(void 0!==E&&(N=-E,I=-K),w&&(A=w,l=H),w=a[L],b=m,A&&(G+=l),x=L+1<d?a[L+1]:void 0,f&&!x&&(x=a[1]),!x||!w.isEqual(x)){x?(E=x.x-w.x,K=x.y-w.y,H=Math.sqrt(E*E+K*K),
E/=H,K/=H):(E=-N,K=-I);void 0===N&&(N=-E,I=-K);var O=N+E,T=I+K,y=E*T-K*O,O=O/y,T=T/y,Z=Math.sqrt(O*O+T*T);2!==b&&Math.abs(y)<r&&Z<s&&(b=2);if(!A&&2===g)B=y=F.add(w.x,w.y,N+u*I,I-N*u,0,0,G),y=F.add(w.x,w.y,N-I*u,I+N*u,0,1,G),P=B,B=y;else if(!x&&2===g)y=F.add(w.x,w.y,E-K*u,K+E*u,0,0,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y,y=F.add(w.x,w.y,E+K*u,K-E*u,0,1,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y;else if(2===b)0.01>Math.abs(y)?(O=-K,T=E):Z>s&&(O=(N-E)/y,T=(I-K)/y),Z>s&&(u=-u),y=F.add(w.x,w.y,O*
u,T*u,0,0,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y,y=F.add(w.x,w.y,-O*u,-T*u,0,1,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y,(!A||!x)&&1===g&&U.add(w.x,w.y);else{A&&(y=F.add(w.x,w.y,I*u,-N*u,0,0,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y,y=F.add(w.x,w.y,-I*u,N*u,0,1,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y);if((!A||!x)&&1===g)P=F.add(w.x,w.y,I*u,-N*u,0,0,G),U.add(w.x,w.y);u=1;1===b&&(A&&(x&&(!f||0<L))&&U.add(w.x,w.y),B=P=-1);x&&(y=F.add(w.x,w.y,-K*u,E*u,0,0,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,
y),P=B,B=y,y=F.add(w.x,w.y,K*u,-E*u,0,1,G),0<=P&&(0<=B&&0<=y)&&z.add(P,B,y),P=B,B=y)}}this.triangleElementsCount+=3*(z.index-M);this.pointConnectorCount+=U.index-Q}}};return e}(f)})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(l,a,g,m,f){l=function(){function a(d,e,c){this.type=d;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=
e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=c;switch(d){case 0:this._layoutDefinition=g.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=g.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=g.StyleDefinition.fillLayoutDefinition;this._paintDefinition=g.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=g.StyleDefinition.lineLayoutDefinition;this._paintDefinition=g.StyleDefinition.linePaintDefinition;
break;case 3:this._layoutDefinition=g.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=g.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=f.createFilter(this.filter)};a.prototype.hasLayoutProperty=function(a){var e=this._layoutProperties;return e&&e[a]?!0:!1};a.prototype.hasPaintProperty=
function(a){var e=this._paintProperties;return e?void 0!==e[a]:!1};a.prototype.getLayoutValue=function(a,e){var c,b=this._layoutProperties;b&&(b=b[a])&&(c=b.getValue(e));b=this._layoutDefinition[a];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};a.prototype.getPaintValue=function(a,e){var c,b=this._paintProperties;b&&(b=b[a])&&(c=b.getValue(e));b=this._paintDefinition[a];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};a.prototype._parseLayout=
function(a){var e={},c;for(c in a)e[c]=new m(this._layoutDefinition[c],a[c]);return e};a.prototype._parsePaint=function(a){var e={},c;for(c in a)e[c]=new m(this._paintDefinition[c],a[c]);return e};return a}();a.StyleLayer=l;l=function(){return function(a,d){this.cap=a.getLayoutValue("line-cap",d);this.join=a.getLayoutValue("line-join",d);this.miterLimit=a.getLayoutValue("line-miter-limit",d);this.roundLimit=a.getLayoutValue("line-round-limit",d)}}();a.LineLayout=l;l=function(){return function(a,d,
e){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",d);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",d);this.optional=a.getLayoutValue("icon-optional",d);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",d);this.size=a.getLayoutValue("icon-size",d);this.rotate=a.getLayoutValue("icon-rotate",d);this.padding=a.getLayoutValue("icon-padding",d);this.keepUpright=a.getLayoutValue("icon-keep-upright",d);this.offset=a.getLayoutValue("icon-offset",d);e&&(1===this.rotationAlignment&&
!a.hasLayoutProperty("icon-rotation-alignment"))&&(this.rotationAlignment=0)}}();a.IconLayout=l;l=function(){return function(a,d,e){this.allowOverlap=a.getLayoutValue("text-allow-overlap",d);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",d);this.optional=a.getLayoutValue("text-optional",d);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",d);this.font=a.getLayoutValue("text-font",d);this.maxWidth=a.getLayoutValue("text-max-width",d);this.lineHeight=a.getLayoutValue("text-line-height",
d);this.letterSpacing=a.getLayoutValue("text-letter-spacing",d);this.justify=a.getLayoutValue("text-justify",d);this.anchor=a.getLayoutValue("text-anchor",d);this.maxAngle=a.getLayoutValue("text-max-angle",d);this.size=a.getLayoutValue("text-size",d);this.rotate=a.getLayoutValue("text-rotate",d);this.padding=a.getLayoutValue("text-padding",d);this.keepUpright=a.getLayoutValue("text-keep-upright",d);this.transform=a.getLayoutValue("text-transform",d);this.offset=a.getLayoutValue("text-offset",d);e&&
(1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment"))&&(this.rotationAlignment=0)}}();a.TextLayout=l})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(l,a){var g=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",
minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean",
"default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},
"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},
"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean",
"default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,
0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,
0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",
minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},
"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,
"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();a.StyleDefinition=g})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(l,a,g,m){return function(){function a(b,d){var e;switch(b.type){case "number":e=!0;break;case "color":e=!0;d=a._parseColor(d);break;case "array":e="number"===b.value;break;default:e=!1}this.getValue=e?this._interpolate(d):
this._piecewise(d)}a.prototype._piecewise=function(a){var d=a.stops;return d?function(a){var c=d.length;if(0!==c){for(var b=0,f=0;f<c;f++)if(d[f][0]<=a)b=f;else break;return d[b][1]}}:function(){return a}};a.prototype._interpolate=function(a){var d=a.stops;if(d){var e=a.base||1;return function(a){for(var b,f,g=d.length,D=0;D<g;D++){var t=d[D];if(t[0]<=a)b=t;else{f=t;break}}if(b&&f){D=f[0]-b[0];a-=b[0];a=1===e?a/D:(Math.pow(e,a)-1)/(Math.pow(e,D)-1);if(Array.isArray(b[1])){b=b[1];f=f[1];g=[];for(D=
0;D<b.length;D++)g.push(m.interpolate(b[D],f[D],a));return g}return m.interpolate(b[1],f[1],a)}if(b)return b[1];if(f)return f[1]}}return function(){return a}};a._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){var d=new g(b);if(d)return[d.r/255,d.g/255,d.b/255,d.a||1]}if(b&&b.stops)return b.stops=b.stops.map(function(e){return[e[0],a._parseColor(e[1])]}),b;throw Error("Incorrect color definition "+b);};return a}()})},"esri/layers/vectorTiles/Color":function(){define(["require",
"exports","esri/Color"],function(l,a,g){return function(){return function(a){return new g(a)}}()})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(l,a,g,m){l=l([a],{declaredClass:"esri.Color"});l.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};l.toDojoColor=function(d){return d&&new a([d[0],d[1],d[2],d[3]/255])};var f,b="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(f=0;f<b.length;f++)l[b[f]]=
a[b[f]];g("extend-esri")&&(m.Color=l);return l})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(l,a,g){function m(a,e){throw Error("declare"+(e?" "+e:"")+": "+a);}function f(a,e){for(var c=[],d=[{cls:0,refs:[]}],b={},f=1,g=a.length,q=0,n,s,r,C,D;q<g;++q){(n=a[q])?"[object Function]"!=H.call(n)&&m("mixin #"+q+" is not a callable constructor.",e):m("mixin #"+q+" is unknown. Did you use dojo.require to pull it in?",e);s=n._meta?n._meta.bases:[n];r=0;for(n=s.length-1;0<=
n;--n)C=s[n].prototype,C.hasOwnProperty("declaredClass")||(C.declaredClass="uniqName_"+I++),C=C.declaredClass,b.hasOwnProperty(C)||(b[C]={count:0,refs:[],cls:s[n]},++f),C=b[C],r&&r!==C&&(C.refs.push(r),++r.count),r=C;++r.count;d[0].refs.push(r)}for(;d.length;){r=d.pop();c.push(r.cls);for(--f;D=r.refs,1==D.length;){r=D[0];if(!r||--r.count){r=0;break}c.push(r.cls);--f}if(r){q=0;for(g=D.length;q<g;++q)r=D[q],--r.count||d.push(r)}}f&&m("can't build consistent linearization",e);n=a[0];c[0]=n?n._meta&&
n===c[c.length-n._meta.bases.length]?n._meta.bases.length:1:0;return c}function b(a,e,c){var d,b,f,g,q,n,s,r=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=e,e=c);c=0;g=a.callee;(d=d||g.nom)||m("can't deduce a name to call inherited()",this.declaredClass);q=this.constructor._meta;f=q.bases;s=r.p;if(d!=E){if(r.c!==g&&(s=0,n=f[0],q=n._meta,q.hidden[d]!==g)){(b=q.chains)&&"string"==typeof b[d]&&m("calling chained method with inherited: "+d,this.declaredClass);do if(q=n._meta,b=n.prototype,
q&&(b[d]===g&&b.hasOwnProperty(d)||q.hidden[d]===g))break;while(n=f[++s]);s=n?s:-1}if(n=f[++s])if(b=n.prototype,n._meta&&b.hasOwnProperty(d))c=b[d];else{g=J[d];do if(b=n.prototype,(c=b[d])&&(n._meta?b.hasOwnProperty(d):c!==g))break;while(n=f[++s])}c=n&&c||J[d]}else{if(r.c!==g&&(s=0,(q=f[0]._meta)&&q.ctor!==g)){b=q.chains;for((!b||"manual"!==b.constructor)&&m("calling chained constructor with inherited",this.declaredClass);(n=f[++s])&&!((q=n._meta)&&q.ctor===g););s=n?s:-1}for(;(n=f[++s])&&!(c=(q=n._meta)?
q.ctor:n););c=n&&c}r.c=c;r.p=s;if(c)return!0===e?c:c.apply(this,e||a)}function d(a,e){return"string"==typeof a?this.__inherited(a,e,!0):this.__inherited(a,!0)}function e(a,e,c){var d=this.getInherited(a,e);if(d)return d.apply(this,c||e||a)}function c(a){for(var e=this.constructor._meta.bases,c=0,d=e.length;c<d;++c)if(e[c]===a)return!0;return this instanceof a}function n(e,c){for(var d in c)d!=E&&c.hasOwnProperty(d)&&(e[d]=c[d]);if(a("bug-for-in-skips-shadowed"))for(var b=g._extraNames,f=b.length;f;)d=
b[--f],d!=E&&c.hasOwnProperty(d)&&(e[d]=c[d])}function q(a){A.safeMixin(this.prototype,a);return this}function C(a,e){a instanceof Array||"function"==typeof a||(e=a,a=void 0);e=e||{};a=a||[];return A([this].concat(a),e)}function D(a,e){return function(){var c=arguments,d=c,b=c[0],f,g;g=a.length;var q;if(!(this instanceof c.callee))return w(c);if(e&&(b&&b.preamble||this.preamble)){q=Array(a.length);q[0]=c;for(f=0;;){if(b=c[0])(b=b.preamble)&&(c=b.apply(this,c)||c);b=a[f].prototype;(b=b.hasOwnProperty("preamble")&&
b.preamble)&&(c=b.apply(this,c)||c);if(++f==g)break;q[f]=c}}for(f=g-1;0<=f;--f)b=a[f],(b=(g=b._meta)?g.ctor:b)&&b.apply(this,q?q[f]:c);(b=this.postscript)&&b.apply(this,d)}}function t(a,e){return function(){var c=arguments,d=c,b=c[0];if(!(this instanceof c.callee))return w(c);e&&(b&&(b=b.preamble)&&(d=b.apply(this,d)||d),(b=this.preamble)&&b.apply(this,d));a&&a.apply(this,c);(b=this.postscript)&&b.apply(this,c)}}function v(a){return function(){var e=arguments,c=0,d,b;if(!(this instanceof e.callee))return w(e);
for(;d=a[c];++c)if(d=(b=d._meta)?b.ctor:d){d.apply(this,e);break}(d=this.postscript)&&d.apply(this,e)}}function s(a,e,c){return function(){var d,b,f=0,g=1;c&&(f=e.length-1,g=-1);for(;d=e[f];f+=g)b=d._meta,(d=(b?b.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function r(a){N.prototype=a.prototype;a=new N;N.prototype=null;return a}function w(a){var e=a.callee,c=r(e);e.apply(c,a);return c}function A(e,w,l){"string"!=typeof e&&(l=w,w=e,e="");l=l||{};var u,G,F,z,N,I,Q,L=1,O=w;"[object Array]"==H.call(w)?
(I=f(w,e),F=I[0],L=I.length-F,w=I[L]):(I=[0],w?"[object Function]"==H.call(w)?(F=w._meta,I=I.concat(F?F.bases:w)):m("base class is not a callable constructor.",e):null!==w&&m("unknown base class. Did you use dojo.require to pull it in?",e));if(w)for(G=L-1;;--G){u=r(w);if(!G)break;F=I[G];(F._meta?n:x)(u,F.prototype);z=a("csp-restrictions")?function(){}:new Function;z.superclass=w;z.prototype=u;w=u.constructor=z}else u={};A.safeMixin(u,l);F=l.constructor;F!==J.constructor&&(F.nom=E,u.constructor=F);
for(G=L-1;G;--G)(F=I[G]._meta)&&F.chains&&(Q=x(Q||{},F.chains));u["-chains-"]&&(Q=x(Q||{},u["-chains-"]));F=!Q||!Q.hasOwnProperty(E);I[0]=z=Q&&"manual"===Q.constructor?v(I):1==I.length?t(l.constructor,F):D(I,F);z._meta={bases:I,hidden:l,chains:Q,parents:O,ctor:l.constructor};z.superclass=w&&w.prototype;z.extend=q;z.createSubclass=C;z.prototype=u;u.constructor=z;u.getInherited=d;u.isInstanceOf=c;u.inherited=K;u.__inherited=b;e&&(u.declaredClass=e,g.setObject(e,z));if(Q)for(N in Q)u[N]&&("string"==
typeof Q[N]&&N!=E)&&(F=u[N]=s(N,I,"after"===Q[N]),F.nom=N);return z}var x=g.mixin,J=Object.prototype,H=J.toString,N,I=0,E="constructor";N=a("csp-restrictions")?function(){}:new Function;var K=l.config.isDebug?e:b;l.safeMixin=A.safeMixin=function(e,c){var d,b;for(d in c)if(b=c[d],(b!==J[d]||!(d in J))&&d!=E)"[object Function]"==H.call(b)&&(b.nom=d),e[d]=b;if(a("bug-for-in-skips-shadowed")&&c)for(var f=g._extraNames,q=f.length;q;)if(d=f[--q],b=c[d],(b!==J[d]||!(d in J))&&d!=E)"[object Function]"==H.call(b)&&
(b.nom=d),e[d]=b;return e};return l.declare=A})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(l,a,g,m){var f=l.Color=function(a){a&&this.setColor(a)};f.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:m.transparentColor||
[0,0,0,0]};a.extend(f,{r:255,g:255,b:255,a:1,_set:function(a,d,e,c){this.r=a;this.g=d;this.b=e;this.a=c},setColor:function(b){a.isString(b)?f.fromString(b,this):a.isArray(b)?f.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof f||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+g.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?
"0"+a:a},this).join("")},toCss:function(a){var d=this.r+", "+this.g+", "+this.b;return(a?"rgba("+d+", "+this.a:"rgb("+d)+")"},toString:function(){return this.toCss(!0)}});f.blendColors=l.blendColors=function(a,d,e,c){var n=c||new f;g.forEach(["r","g","b","a"],function(c){n[c]=a[c]+(d[c]-a[c])*e;"a"!=c&&(n[c]=Math.round(n[c]))});return n.sanitize()};f.fromRgb=l.colorFromRgb=function(a,d){var e=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return e&&f.fromArray(e[1].split(/\s*,\s*/),d)};f.fromHex=
l.colorFromHex=function(a,d){var e=d||new f,c=4==a.length?4:8,n=(1<<c)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;g.forEach(["b","g","r"],function(d){var f=a&n;a>>=c;e[d]=4==c?17*f:f});e.a=1;return e};f.fromArray=l.colorFromArray=function(a,d){var e=d||new f;e._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(e.a)&&(e.a=1);return e.sanitize()};f.fromString=l.colorFromString=function(a,d){var e=f.named[a];return e&&f.fromArray(e,d)||f.fromRgb(a,d)||f.fromHex(a,d)};return f})},
"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(l,a,g){var m=function(){return this}(),f=m.location,b=f.pathname,d=f.protocol,f={version:"3.19",_appBaseUrl:d+"//"+f.host+b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]))};a.noGlobals||(m.esri=f);l.isAsync||g.add("extend-esri",1);(f.dijit=f.dijit||{})._arcgisUrl=("http:"===d||"https:"===d?d:"http:")+"//www.arcgis.com/sharing/rest";return f})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(l,a){return function(){function a(m,f,b){this._op=m;"$type"===f?(this._val=b instanceof Array?b.map(function(d){return a._types.indexOf(d)}):a._types.indexOf(b),this._op+=11):(this._key=f,this._val=b)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var f=0,b=this._val;f<b.length;f++){var d=b[f];if(d.filter(a))return!0}return!1;case 10:f=0;for(b=this._val;f<b.length;f++)if(d=b[f],!d.filter(a))return!1;return!0;case 11:f=0;for(b=this._val;f<b.length;f++)if(d=b[f],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(m){if(!m)return new a(0,void 0,!0);var f=m[0];if(1>=m.length)return new a(0,void 0,"any"!==f);switch(f){case "\x3d\x3d":return new a(1,m[1],m[2]);case "!\x3d":return new a(2,m[1],m[2]);case "\x3e":return new a(4,m[1],m[2]);case "\x3c":return new a(3,m[1],m[2]);case "\x3e\x3d":return new a(6,
m[1],m[2]);case "\x3c\x3d":return new a(5,m[1],m[2]);case "in":return new a(7,m[1],m.slice(2));case "!in":return new a(8,m[1],m.slice(2));case "any":return new a(9,void 0,m.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,m.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,m.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+f);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(l,a,g,m,f,b,d,e,c,n,q){var C=function(){return function(){}}(),D=function(){return function(a,e,c,d){this.line=e;this.shaping=a;this.iconMosaicItem=c;this.anchor=d}}();(function(){return function(){}})();return function(a){function f(e,c,d,b,g,q,n,m){a.call(this,e,c);this._markerRatio=1;this._markerVertexBuffer=d;this._markerIndexBuffer=b;this._textVertexBuffer=g;this._textIndexBuffer=q;this._placementEngine=n;this._workerTileHandler=m}g(f,a);Object.defineProperty(f.prototype,"markerIndexStart",
{get:function(){return this._markerTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"markerIndexCount",{get:function(){return this._markerTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0});f.prototype.copy=function(a,e,c,d,b){b=new f(this.layer,this.zoom,a,e,c,d,b,this._workerTileHandler);b.layerIndex=this.layerIndex;b.layerExtent=this.layerExtent;b._markerVertexStart=a.index;b._markerTriangleElementsStart=e.index;b._textVertexStart=c.index;b._textTriangleElementsStart=d.index;b._markerTriangleElementsNum=0;b._textTriangleElementsNum=0;b._symbolInstances=this._symbolInstances;b._glyphItems=
this._glyphItems;b._textLayout=this._textLayout;b._markerLayout=this._markerLayout;b._isLinePlacement=this._isLinePlacement;b._avoidEdges=this._avoidEdges;return b};f.prototype.getResources=function(a,e,c){var d=this.layer,b=this.zoom;a&&a.setExtent(this.layerExtent);for(var g=d.getLayoutValue("icon-image",b),q=d.getLayoutValue("text-field",b),n=d.getLayoutValue("text-font",b),d=d.getLayoutValue("text-transform",b),b=[],m=0,D=this._features;m<D.length;m++){var t=D[m],l=t.getGeometry(a);if(l&&0!==
l.length){var B=void 0;g&&(B=this._replaceKeys(g,t.values))&&e.add(B);var y=void 0,u=!1;if(q){y=this._replaceKeys(q,t.values);switch(d){case 2:y=y.toLowerCase();break;case 1:y=y.toUpperCase()}f._bidiEngine.hasBidiChar(y)&&(u=void 0,u="rtl"===f._bidiEngine.checkContextual(y)?"IDNNN":"ICNNN",y=f._bidiEngine.bidiTransform(y,u,"VLYSN"),u=!0);t=y.length;if(0<t){var G=c[n];G||(G=c[n]=new Set);for(var F=0;F<t;F++){var z=y.charCodeAt(F);G.add(z)}}}if(B||y)t=new C,t.sprite=B,t.label=y,t.rtl=u,t.geometry=l,
b.push(t)}}this._symbolFeatures=b};f.prototype.processFeatures=function(a,b){a&&a.setExtent(this.layerExtent);var g=this.layer,q=this.zoom,m=this._isLinePlacement=1===g.getLayoutValue("symbol-placement",q),C=this._avoidEdges=g.getLayoutValue("symbol-avoid-edges",q)&&!m,t=8*g.getLayoutValue("symbol-spacing",q),l=g.getLayoutValue("icon-image",q),I=g.getLayoutValue("text-field",q),E=this._workerTileHandler,K;l&&(this._markerLayout=new d.IconLayout(g,q,m),K=E.getSpriteItems());var P,B;if(I){var y=this._textLayout=
new d.TextLayout(g,q,m);P=void 0;y.font&&y.font.length&&(P=y.font[0]);B=0.5;switch(y.anchor){case 5:case 1:case 7:B=0;break;case 6:case 2:case 8:B=1}g=0.5;switch(y.anchor){case 5:case 3:case 6:g=0;break;case 7:case 4:case 8:g=1}q=0.5;switch(y.justify){case 0:q=0;break;case 2:q=1}var l=24*y.letterSpacing,I=m?0:24*y.maxWidth,u=24*y.lineHeight,y=[24*y.offset[0],24*y.offset[1]];P=E.getGlyphItems(P);B=new n(P,I,u,l,y,B,g,q)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=
this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._symbolInstances=E=[];this._glyphItems=P;g=this._textLayout;q=1;g&&g.size&&(q=g.size/24);l=g?g.maxAngle*c.C_DEG_TO_RAD:0;I=g?8*g.size:0;u=0;for(y=this._symbolFeatures;u<y.length;u++){var G=y[u],F=void 0;G.sprite&&(F=K[G.sprite]);var z=void 0,U=G.label,M=0;if(U&&(z=B.getShaping(U,G.rtl))&&0<
z.length){for(var M=1E30,U=-1E30,Q=0,L=z;Q<L.length;Q++)var O=L[Q],M=Math.min(M,O.x),U=Math.max(U,O.x);M=8*(U-M+48)*q}U=0;for(G=G.geometry;U<G.length;U++){Q=G[U];O=void 0;m?(z&&(0<z.length&&g&&g.size)&&(L=8*g.size*(2+Math.min(2,4*Math.abs(g.offset[1]))),f._smoothVertices(Q,L)),O=f._findAnchors(Q,t,M)):O=[new e.Anchor(Q[0].x,Q[0].y)];for(L=0;L<O.length;L++){var T=O[L];!(0>T.x||4096<T.x||0>T.y||4096<T.y)&&(!m||!(0<M&&0===g.rotationAlignment)||f._honorsTextMaxAngle(Q,T,M,l,I))&&E.push(new D(z,Q,F,T))}}}for(m=
0;m<E.length;m++)this._processFeature(E[m],P,C)};f.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;for(var a=this._glyphItems,e=this._avoidEdges,c=0,d=this._symbolInstances;c<d.length;c++)this._processFeature(d[c],a,e)};
f.prototype._replaceKeys=function(a,e){return a.replace(/{([^{}]+)}/g,function(a,c){return c in e?e[c]:""})};f.prototype._processFeature=function(a,e,d){var f=a.line,g=a.iconMosaicItem,q=a.shaping,n=a.anchor,m=(a=this._markerLayout)&&!!g,C=!0,D=1;m&&(D=8*(a.size/(1/this._markerRatio)),C=a.optional||!g);var t=this._textLayout,l=t&&q&&0<q.length,v;v=1;var y=!0;l&&(v=t.size/24,v*=8,y=t.optional||!q||0===q.length);var u=new b.Point(0,-17),G;if(m){G=this._placementEngine.getIconPlacement(n,g,D,f,a,d);
if(G.footprint.minzoom===c.C_INFINITY&&!C)return;n.minzoom>G.footprint.minzoom&&(G.footprint.minzoom=n.minzoom)}var F;if(l&&(F=this._placementEngine.getTextPlacement(n,u,q,e,v,f,t,d))){if(F.footprint.minzoom===c.C_INFINITY&&!y)return;n.minzoom>F.footprint.minzoom&&(F.footprint.minzoom=n.minzoom)}if(!y&&!C||!C&&F&&F.footprint.minzoom!==c.C_INFINITY||!y&&G&&G.footprint.minzoom!==c.C_INFINITY)e=Math.max(G.footprint.minzoom,F.footprint.minzoom),G.footprint.minzoom=e,F.footprint.minzoom=e;F&&F.footprint.minzoom!==
c.C_INFINITY&&(t.ignorePlacement||this._placementEngine.add(F),this._addPlacedSymbols(F.shapes,F.footprint.minzoom,this.zoom,!1));G&&G.footprint.minzoom!==c.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(G),this._addPlacedSymbols(G.shapes,G.footprint.minzoom,this.zoom,!0))};f.prototype._addPlacedSymbols=function(a,e,d,b){e=Math.max(d+c.log2(e),0);for(var f=0;f<a.length;f++){var g=a[f],q=Math.max(d+c.log2(g.minzoom),e),n=Math.min(d+c.log2(g.maxzoom),25);if(!(n<=q)){var m=g.tl,C=g.tr,t=g.bl,
D=g.br,l=g.mosaicRect,v=-g.labelAngle,g=g.anchor,u=b?this._markerVertexBuffer:this._textVertexBuffer,G=b?this._markerIndexBuffer:this._textIndexBuffer,F=u.index,z=l.x,U=l.y,M=z+l.width,l=U+l.height;u.add(g.x,g.y,m.x,m.y,z,U,v,q,n,e);u.add(g.x,g.y,C.x,C.y,M,U,v,q,n,e);u.add(g.x,g.y,t.x,t.y,z,l,v,q,n,e);u.add(g.x,g.y,D.x,D.y,M,l,v,q,n,e);G.add(F+0,F+1,F+2);G.add(F+1,F+2,F+3);b?this._markerTriangleElementsNum+=6:this._textTriangleElementsNum+=6}}};f._findAnchors=function(a,d,f){d+=f;for(var g=0,q=a.length-
1,n=0;n<q;n++)g+=b.Point.distance(a[n],a[n+1]);n=0.5*(f||d);if(g<=n)return[];f=n/g;d=g/Math.max(Math.round(g/d),1);for(var g=0,q=-d/2,m=[],C=a.length-1,n=0;n<C;n++){for(var t=a[n],D=a[n+1],l=D.x-t.x,v=D.y-t.y,B=Math.sqrt(l*l+v*v),y=void 0;q+d<g+B;){var q=q+d,u=(q-g)/B,G=c.interpolate(t.x,D.x,u),u=c.interpolate(t.y,D.y,u);void 0===y&&(y=Math.atan2(v,l));m.push(new e.Anchor(G,u,y,n,f))}g+=B}return m};f.deviation=function(a,e,c){return Math.atan2((e.x-a.x)*(c.y-e.y)-(e.y-a.y)*(c.x-e.x),(e.x-a.x)*(c.x-
e.x)+(e.y-a.y)*(c.y-e.y))};f._honorsTextMaxAngle=function(a,e,c,d,f){var g=0;c/=2;for(var q=new b.Point(e.x,e.y),n=e.segment+1;g>-c;){--n;if(0>n)return!1;g-=b.Point.distance(a[n],q);q=a[n]}g+=b.Point.distance(a[n],a[n+1]);e=[];for(var q=0,m=a.length;g<c;){var C=a[n],t=void 0;do{++n;if(n===m)return!1;t=a[n]}while(t.isEqual(C));var D=n,l=void 0;do{++D;if(D===m)return!1;l=a[D]}while(l.isEqual(t));C=this.deviation(C,t,l);e.push({deviation:C,distToAnchor:g});for(q+=C;g-e[0].distToAnchor>f;)q-=e.shift().deviation;
if(Math.abs(q)>d)return!1;g+=b.Point.distance(t,l)}return!0};f._smoothVertices=function(a,e){if(!(0>=e)){var c=a.length;if(!(3>c)){var d=[],f=0;d.push(0);for(var g=1;g<c;g++)f+=b.Point.distance(a[g],a[g-1]),d.push(f);e=Math.min(e,0.2*f);f=[];f.push(a[0].x);f.push(a[0].y);var q=a[c-1].x,n=a[c-1].y,g=b.Point.sub(a[0],a[1]);g.normalize();a[0].x+=e*g.x;a[0].y+=e*g.y;g.assignSub(a[c-1],a[c-2]);g.normalize();a[c-1].x+=e*g.x;a[c-1].y+=e*g.y;for(g=1;g<c;g++)d[g]+=e;d[c-1]+=e;for(var m=0.5*e,g=1;g<c-1;g++){for(var C=
0,t=0,D=0,l=g-1;0<=l&&!(d[l+1]<d[g]-m);l--){var v=m+d[l+1]-d[g],u=d[l+1]-d[l],G=d[g]-d[l]<m?1:v/u;if(1E-6>Math.abs(G))break;var F=G*G,z=G*v-0.5*F*u,U=G*u/e,M=a[l+1],Q=a[l].x-M.x,L=a[l].y-M.y,C=C+U/z*(M.x*G*v+0.5*F*(v*Q-u*M.x)-F*G*u*Q/3),t=t+U/z*(M.y*G*v+0.5*F*(v*L-u*M.y)-F*G*u*L/3),D=D+U}for(l=g+1;l<c&&!(d[l-1]>d[g]+m);l++){v=m-d[l-1]+d[g];u=d[l]-d[l-1];G=d[l]-d[g]<m?1:v/u;if(1E-6>Math.abs(G))break;F=G*G;z=G*v-0.5*F*u;U=G*u/e;M=a[l-1];Q=a[l].x-M.x;L=a[l].y-M.y;C+=U/z*(M.x*G*v+0.5*F*(v*Q-u*M.x)-F*
G*u*Q/3);t+=U/z*(M.y*G*v+0.5*F*(v*L-u*M.y)-F*G*u*L/3);D+=U}f.push(C/D);f.push(t/D)}f.push(q);f.push(n);for(l=g=0;g<c;g++)a[g].x=f[l++],a[g].y=f[l++]}}};f._bidiEngine=new q;return f}(f)})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(l,a,g,m,f){l=function(){return function(a,e,d,b,f){void 0===d&&(d=0);void 0===b&&(b=-1);void 0===f&&(f=c);this.x=a;this.y=e;this.angle=d;this.segment=b;this.minzoom=f}}();
a.Anchor=l;l=function(){return function(a,e,c){this.glyph=a;this.x=e;this.y=c}}();a.ShapedGlyph=l;var b=function(){return function(a,e,d,b,f,g){void 0===b&&(b=!1);void 0===f&&(f=c);void 0===g&&(g=m.C_INFINITY);this.anchor=a;this.labelAngle=e;this.glyphAngle=d;this.upsideDown=b;this.minzoom=f;this.maxzoom=g}}(),d=function(){return function(a,e,c,d,b,f,g,m,l){this.tl=a;this.tr=e;this.bl=c;this.br=d;this.mosaicRect=b;this.labelAngle=f;this.anchor=g;this.minzoom=m;this.maxzoom=l}}();a.PlacedSymbol=d;
var e=function(){return function(a,e){this.footprint=a;this.shapes=e}}();a.Placement=e;var c=0.5;l=function(){function a(e){this.mapAngle=e;this._conflictEngine=new f.ConflictEngine(e)}a.prototype.getIconPlacement=function(a,b,n,l,v,s){var r=b.width/b.pixelRatio,w=b.height/b.pixelRatio;l=v.offset[0]-r/2;var A=v.offset[1]-w/2,r=l+r,w=A+w,x=b.rect,J=new g.Point(l,A),H=new g.Point(l+x.width/b.pixelRatio,A+x.height/b.pixelRatio),N=new g.Point(l,H.y),I=new g.Point(H.x,A),E=v.rotate*m.C_DEG_TO_RAD;b=1===
v.rotationAlignment;0<=a.segment&&!b&&(E+=a.angle);if(0!==E){var K=Math.cos(E),P=Math.sin(E);J.rotate(K,P);H.rotate(K,P);N.rotate(K,P);I.rotate(K,P)}K=8*v.padding;P=new g.Point(a.x,a.y);a=new f.Footprint(this.mapAngle,K,b);a.addBox(P,new f.Box(l,A,r,w),n,E,c,m.C_INFINITY);n=new d(J,I,N,H,x,0,P,c,m.C_INFINITY);n=new e(a,[n]);l=c;v.allowOverlap||(l=this._conflictEngine.getMinZoom(n.footprint,l,s,b));a.minzoom=l;return n};a.prototype.getTextPlacement=function(a,n,l,t,v,s,r,w){for(var A=new g.Point(a.x,
a.y),x=r.rotate*m.C_DEG_TO_RAD,J=0===r.rotationAlignment,H=r.keepUpright,N=c,I=!J,E=I?0:a.angle,K=0<=a.segment&&J,P=new f.Footprint(this.mapAngle,8*r.padding,I),B=[],y=!K,u=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,F=u,z=G,U=K?H:J&&H,M=[],Q,L=0;L<l.length;L++){var O=l[L],T=t[O.glyph];if(T){var Z=T.rect;if(Z&&!(0>=Z.width||0>=Z.height)){var ba=T.metrics;y&&(Q&&Q!==O.y&&(P.addBox(A,new f.Box(u,F,G,z),v,x,c,m.C_INFINITY),u=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY,F=u,z=G),Q=O.y);
var da=[];if(K){if(T=(n.x+O.x+ba.left-3+0.5*T.metrics.width)*v,N=this._placeGlyph(a,N,T,s,a.segment,1,da),H&&(N=this._placeGlyph(a,N,T,s,a.segment,-1,da)),2<=N)break}else da.push(new b(A,E,E)),J&&H&&da.push(new b(A,E+m.C_PI,E+m.C_PI,!0));for(var T=O.x+n.x+ba.left,O=O.y+n.y-ba.top,ha=T+ba.width,ba=O+ba.height,ca=new g.Point(T-3,O-3),X=new g.Point(ca.x+Z.width,ca.y+Z.height),ea=new g.Point(ca.x,X.y),W=new g.Point(X.x,ca.y),fa=0;fa<da.length;fa++){var $=da[fa],ia=ca.clone(),ja=ea.clone(),ka=W.clone(),
la=X.clone(),ma=O,aa=ba,R=$.glyphAngle+x;if(0!==R){var V=Math.cos(R),h=Math.sin(R);ia.rotate(V,h);la.rotate(V,h);ja.rotate(V,h);ka.rotate(V,h)}B.push(new d(ia,ka,ja,la,Z,$.labelAngle,$.anchor,$.minzoom,$.maxzoom));if(!U||this._legible($.labelAngle))y?(T<u&&(u=T),ma<F&&(F=ma),ha>G&&(G=ha),aa>z&&(z=aa)):2>$.minzoom&&P.addBox($.anchor,new f.Box(T,ma,ha,aa),v,R,$.minzoom,$.maxzoom);M.push($)}}}}if(2<=N)return null;y&&P.addBox(A,new f.Box(u,F,G,z),v,x,c,m.C_INFINITY);a=new e(P,B);r.allowOverlap||(N=this._conflictEngine.getMinZoom(a.footprint,
N,w,I));P.minzoom=N;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=m.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,e,c,d,f,n,l){var w=0>n?m.positiveMod(a.angle+m.C_PI,m.C_2PI):a.angle,A=this._legible(w),x=0;0>c&&(n*=-1,c*=-1,x=m.C_PI);0<n&&++f;a=new g.Point(a.x,a.y);var J=d[f],H=m.C_INFINITY;if(d.length<=f)return H;for(;;){var N=J.x-a.x,I=J.y-a.y,E=Math.sqrt(N*N+I*I),K=Math.max(c/E,e),N=m.positiveMod(Math.atan2(I/
E,N/E)+x,m.C_2PI);l.push(new b(a,w,N,A,K,H));if(K<=e)return K;a=J.clone();do{f+=n;if(d.length<=f||0>f)return K;J=d[f]}while(a.isEqual(J));H=J.x-a.x;N=J.y-a.y;I=Math.sqrt(H*H+N*N);H*=E/I;N*=E/I;a.x-=H;a.y-=N;H=K}};return a}();a.PlacementEngine=l})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(l,a,g,m){l=function(){function a(e,c,d,b){this.left=e;this.top=c;this.right=d;this.bottom=b}a.prototype.clone=function(){return new a(this.left,
this.top,this.right,this.bottom)};a.prototype.move=function(a,c){this.left+=a;this.top+=c;this.right+=a;this.bottom+=c};a.prototype.rotate=function(a,c){var d=this.left,b=this.right,f=this.top,g=this.bottom,m=d*a-f*c,l=d*c+f*a,s=b*a-f*c,f=b*c+f*a,r=d*a-g*c,d=d*c+g*a,w=b*a-g*c,b=b*c+g*a;this.left=Math.min(m,s,r,w);this.top=Math.min(l,f,d,b);this.right=Math.max(m,s,r,w);this.bottom=Math.max(l,f,d,b)};a.overlaps=function(a,c){return a.right>c.left&&a.left<c.right&&a.bottom>c.top&&a.top<c.bottom};return a}();
a.Box=l;var f=function(){function a(e,c,d,b){this.anchor=e;this.corners=c;this.minzoom=d;this.maxzoom=b}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=f;l=function(){function a(e,c,d){this.obstacles=[];this.mapAngle=e;this.padding=c;this.isScreenAligned=d;this.minzoom=b}a.prototype.addBox=function(a,c,d,b,
m,l){var t=c.left*d-this.padding,v=c.top*d-this.padding,s=c.right*d+this.padding;c=c.bottom*d+this.padding;t=[new g.Point(t,v),new g.Point(s,v),new g.Point(s,c),new g.Point(t,c)];0!==this.mapAngle&&(v=Math.cos(this.mapAngle),s=Math.sin(this.mapAngle),a=a.clone(),a.rotate(v,s));this.isScreenAligned||(b+=this.mapAngle);if(0!==b){v=Math.cos(b);s=Math.sin(b);t[0].rotate(v,s);t[1].rotate(v,s);t[2].rotate(v,s);t[3].rotate(v,s);b=0;for(v=1;4>v;v++)t[v].x<t[b].x?b=v:t[v].x===t[b].x&&t[v].y<t[b].y&&(b=v);
if(b){s=[];for(v=0;4>v;v++)s.push(t[(v+b)%4]);t=s}}this.obstacles.push(new f(a,t,m,l))};return a}();a.Footprint=l;var b=0.5;l=function(){function a(e){this._grid=[];this._angle=e;this._c=Math.cos(e);this._s=Math.sin(e)}a.prototype.add=function(e){var c=this._grid,b=0;for(e=e.obstacles;b<e.length;b++)for(var f=e[b],g=f.anchor,m=a._gridClamp(Math.min(f.left()+g.x,g.x)),l=a._gridClamp(Math.max(f.right()+g.x,g.x)),v=a._gridClamp(Math.min(f.top()+g.y,g.y)),g=a._gridClamp(Math.max(f.bottom()+g.y,g.y));v<=
g;v++)for(var s=m;s<=l;s++){var r=c[16*v+s];r||(r=c[16*v+s]=[]);r.push(f)}};a.prototype.getMinZoom=function(e,c,b,f){if(0===e.obstacles.length)return m.C_INFINITY;b=this._grid;f=0;for(e=e.obstacles;f<e.length;f++)for(var g=e[f],l=g.anchor,t=a._gridClamp(Math.min(g.left()+l.x,l.x)),v=a._gridClamp(Math.max(g.right()+l.x,l.x)),s=a._gridClamp(Math.min(g.top()+l.y,l.y)),l=a._gridClamp(Math.max(g.bottom()+l.y,l.y));s<=l;s++)for(var r=t;r<=v;r++){var w=b[16*s+r];if(w)for(var A=0;A<w.length;A++){var x=w[A];
if(!(g.minzoom>=x.maxzoom||x.minzoom>=g.maxzoom))if(c=a._calcPlacementZoom(g,x,c),2<=c)return m.C_INFINITY}}return 2>c?c:m.C_INFINITY};a._gridClamp=function(a){return m.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(e,c,b){var f=c.anchor.x-e.anchor.x;if(0===f&&(e.right()<c.left()||c.right()<e.left()))return b;var g=c.anchor.y-e.anchor.y;if(0===g&&(e.bottom()<c.top()||c.bottom()<e.top()))return b;var l=m.C_INFINITY;if(0!==f){var t=(0<f?e.right()-c.left():e.left()-c.right())/f;t<l&&(l=t);f=0<f?a._calcExtZoomX(e,
c,t):a._calcExtZoomX(c,e,t);f<l&&(l=f)}0!==g&&(f=(0<g?e.bottom()-c.top():e.top()-c.bottom())/g,f<l&&(l=f),g=0<g?a._calcExtZoomY(e,c,f):a._calcExtZoomY(c,e,f),g<l&&(l=g));if(l<e.minzoom||l<c.minzoom)return b;l=Math.min(l,e.maxzoom,c.maxzoom);l<b&&(l=b);return l};a._calcExtZoomX=function(a,c,d){var b,f,g;if(a.anchor.y+a.corners[2].y/d<c.anchor.y+c.corners[0].y/d){b=a.corners[2].x-a.corners[3].x;g=a.corners[2].y-a.corners[3].y;var m=c.corners[1].x-c.corners[0].x;f=c.corners[1].y-c.corners[0].y;0<=b*
f-g*m?a.anchor.y+a.corners[3].y/d<c.anchor.y+c.corners[0].y/d?(d=a.corners[3],b=c.corners[0],f=c.corners[1],g=1):(d=c.corners[0],b=a.corners[3],f=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/d>c.anchor.y+c.corners[1].y/d?(d=a.corners[2],b=c.corners[0],f=c.corners[1],g=1):(d=c.corners[1],b=a.corners[3],f=a.corners[2],g=-1)}else b=a.corners[2].x-a.corners[1].x,g=a.corners[2].y-a.corners[1].y,m=c.corners[3].x-c.corners[0].x,f=c.corners[3].y-c.corners[0].y,0>b*f-g*m?a.anchor.y+a.corners[1].y/d>c.anchor.y+
c.corners[0].y/d?(d=a.corners[1],b=c.corners[0],f=c.corners[3],g=1):(d=c.corners[0],b=a.corners[1],f=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/d<c.anchor.y+c.corners[3].y/d?(d=a.corners[2],b=c.corners[0],f=c.corners[3],g=1):(d=c.corners[3],b=a.corners[1],f=a.corners[2],g=-1);m=f.x-b.x;f=f.y-b.y;return g*((d.y-b.y)*m-(d.x-b.x)*f)/((a.anchor.x-c.anchor.x)*f-(a.anchor.y-c.anchor.y)*m)};a._calcExtZoomY=function(a,c,d){var b,f,g;if(a.anchor.x+a.corners[3].x/d<c.anchor.x+c.corners[1].x/d){b=a.corners[3].x-
a.corners[2].x;g=a.corners[3].y-a.corners[2].y;var m=c.corners[0].x-c.corners[1].x;f=c.corners[0].y-c.corners[1].y;0>b*f-g*m?a.anchor.x+a.corners[2].x/d<c.anchor.x+c.corners[1].x/d?(d=a.corners[2],b=c.corners[1],f=c.corners[0],g=1):(d=c.corners[1],b=a.corners[2],f=a.corners[3],g=-1):a.anchor.x+a.corners[3].x/d>c.anchor.x+c.corners[0].x/d?(d=a.corners[3],b=c.corners[1],f=c.corners[0],g=1):(d=c.corners[0],b=a.corners[2],f=a.corners[3],g=-1)}else b=a.corners[3].x-a.corners[0].x,g=a.corners[3].y-a.corners[0].y,
m=c.corners[2].x-c.corners[1].x,f=c.corners[2].y-c.corners[1].y,0<b*f-g*m?a.anchor.x+a.corners[0].x/d>c.anchor.x+c.corners[1].x/d?(d=a.corners[0],b=c.corners[1],f=c.corners[2],g=1):(d=c.corners[1],b=a.corners[0],f=a.corners[3],g=-1):a.anchor.x+a.corners[3].x/d<c.anchor.x+c.corners[2].x/d?(d=a.corners[3],b=c.corners[1],f=c.corners[2],g=1):(d=c.corners[2],b=a.corners[0],f=a.corners[3],g=-1);m=f.x-b.x;f=f.y-b.y;return g*((d.y-b.y)*m-(d.x-b.x)*f)/((a.anchor.x-c.anchor.x)*f-(a.anchor.y-c.anchor.y)*m)};
return a}();a.ConflictEngine=l})},"esri/layers/vectorTiles/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(l,a,g){return function(){function a(f,b,d,e,c,g,m,l){this._glyphItems=f;this._maxWidth=b;this._lineHeight=d;this._letterSpacing=e;this._offset=c;this._hAnchor=g;this._vAnchor=m;this._justify=l}a.prototype.getShaping=function(a,b){for(var d=this._glyphItems,e=this._letterSpacing,c=this._offset[0],n=this._offset[1],m=[],l=0,D=a.length;l<D;l++){var t=
a.charCodeAt(l),v=d[t];v&&(m.push(new g.ShapedGlyph(t,c,n)),c+=v.metrics.advance+e)}if(0<m.length){v=this._maxWidth;d=this._lineHeight;c=this._justify;D=m.length;t=n=e=0;if(0!==v)for(var s=0,r=0,l=0;l<D;l++){var w=m[l];w.x-=r;w.y=b?w.y-d*e:w.y+d*e;if(w.x>v&&0<s){for(var A=m[s+1].x,t=Math.max(A,t),x=s+1;x<=l;x++)m[x].y=b?m[x].y-d:m[x].y+d,m[x].x-=A;c&&this._applyJustification(m,n,s-1);n=s+1;s=0;r+=A;e++}32===w.glyph&&(s=l)}l=m[D-1];t=Math.max(t,l.x+this._glyphItems[l.glyph].metrics.advance);c&&this._applyJustification(m,
n,D-1);D=(c-this._hAnchor)*t;l=(-this._vAnchor*(e+1)+0.5)*d;b&&e&&(l+=e*d);for(d=0;d<m.length;d++)e=m[d],e.x+=D,e.y+=l}return m};a.prototype._applyJustification=function(a,b,d){for(var e=a[d],e=(e.x+this._glyphItems[e.glyph].metrics.advance)*this._justify;b<=d;b++)a[b].x-=e};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(l,a,g){function m(a,c,d,g,h){var k=a;void 0===c&&(c=h.defInFormat);void 0===d&&(d=h.defOutFormat);void 0===
g&&(g=h.defSwap);if(c!==d){var n,l=c.substring(0,1);n=c.substring(1,4);var q=d.substring(0,1),p=d.substring(1,4);"C"===n.charAt(0)&&(n=f(k),n="ltr"===n||"rtl"===n?n.toUpperCase():"L"===c.charAt(2)?"LTR":"RTL",c=l+n);"C"===p.charAt(0)&&(n=f(k),"rtl"===n?p="RTL":"ltr"===n?(k=k.split(""),k.reverse(),n=f(k.join("")),p=n.toUpperCase()):p="L"===d.charAt(2)?"LTR":"RTL",d=q+p)}if(c===d)return a;q=c.substring(0,1);k=c.substring(1,4);l=d.substring(0,1);p=d.substring(1,4);h.inFormat=c;h.outFormat=d;h.swap=g;
if("L"===q&&"VLTR"===d){if("LTR"===k)return h.dir=I,b(a,h);if("RTL"===k)return h.dir=E,b(a,h)}if("V"===q&&"V"===l)return h.dir="RTL"===k?E:I,e(a,h);if("L"===q&&"VRTL"===d)return h.dir="LTR"===k?I:E,a=b(a,h),e(a);if("VLTR"===c&&"LLTR"===d)return h.dir=I,b(a,h);if("V"===q&&"L"===l&&k!==p)return a=e(a),"RTL"===k?m(a,"LLTR","VLTR",g,h):m(a,"LRTL","VRTL",g,h);if("VRTL"===c&&"LRTL"===d)return m(a,"LRTL","VRTL",g,h);if("L"===q&&"L"===l)return c=h.swap,h.swap=c.substr(0,1)+"N","RTL"===k?(h.dir=E,a=b(a,h),
h.swap="N"+c.substr(1,2),h.dir=I,a=b(a,h)):(h.dir=I,a=b(a,h),h.swap="N"+c.substr(1,2),a=m(a,"VLTR","LRTL",h.swap,h)),a}function f(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function b(a,e){var c=a.split(""),b=[];d(c,b,e);if(!(0===e.hiLevel||e.swap.substr(0,1)===e.swap.substr(1,2)))for(var f=0;f<c.length;f++)if(1===b[f]){var g=c,h=f,k;b:{k=c[f];for(var n=void 0,m=0,l=B.length-1;m<=l;)if(n=Math.floor((m+l)/2),k<B[n][0])l=
n-1;else if(k>B[n][0])m=n+1;else{k=B[n][1];break b}}g[h]=k}q(2,c,b,e);q(1,c,b,e);x=b;return c.join("")}function d(a,e,c){var d=a.length,b=c.dir?da:ba,f=null,g=null,h=null,f=0,g=g=null,k=-1,n=g=null,m=[],l=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(g=0;g<d;g++){var n=m,h=g,q=a[g].charCodeAt(0),p=oa[q>>8];n[h]=p<aa?p:pa[p-aa][q&255]}for(n=0;n<d;n++){l[n]=g=C(a,m,l,n,c);f=b[f][g];g=f&240;f&=15;e[n]=h=b[f][H];if(0<g){if(16===g)for(g=k;g<n;g++)e[g]=1;k=-1}if(g=b[f][N])-1===
k&&(k=n);else if(-1<k){for(g=k;g<n;g++)e[g]=h;k=-1}m[n]===fa&&(e[n]=0);c.hiLevel|=h}if(c.hasUbatS)for(a=0;a<d;a++)if(m[a]===$){e[a]=c.dir;for(b=a-1;0<=b;b--)if(m[b]===ja)e[b]=c.dir;else break}}function e(a,e){var c=a.split("");if(e){var b=[];d(c,b,e);x=b}c.reverse();w.reverse();return c.join("")}function c(a){for(var e=0;e<T.length;e++)if(a>=T[e]&&a<=Z[e])return!0;return!1}function n(a,e,d,b){for(;e*d<b&&t(a[e]);)e+=d;return e*d<b&&c(a[e])?!0:!1}function q(a,e,c,d){if(!(d.hiLevel<a))if(1===a&&d.dir===
E&&!d.hasUbatB)e.reverse(),w.reverse();else{d=e.length;for(var b=0,f,g,h;b<d;){if(c[b]>=a){for(f=b+1;f<d&&c[f]>=a;)f++;for(g=f-1;b<g;b++,g--)h=e[b],e[b]=e[g],e[g]=h,h=w[b],w[b]=w[g],w[g]=h;b=f}b++}}}function C(a,e,c,d,b){return{UBAT_L:function(){b.lastArabic=!1;return ha},UBAT_R:function(){b.lastArabic=!1;return ca},UBAT_ON:function(){return W},UBAT_AN:function(){return ea},UBAT_EN:function(){return b.lastArabic?ea:X},UBAT_AL:function(){b.lastArabic=!0;b.hasUbatAl=!0;return ca},UBAT_WS:function(){return W},
UBAT_CS:function(){var a,f;if(1>d||d+1>=e.length||(a=c[d-1])!==X&&a!==ea||(f=e[d+1])!==X&&f!==ea)return W;b.lastArabic&&(f=ea);return f===a?f:W},UBAT_ES:function(){return(0<d?c[d-1]:fa)===X&&d+1<e.length&&e[d+1]===X?X:W},UBAT_ET:function(){if(0<d&&c[d-1]===X)return X;if(b.lastArabic)return W;for(var a=d+1,f=e.length;a<f&&e[a]===ka;)a++;return a<f&&e[a]===X?X:W},UBAT_NSM:function(){if("VLTR"===b.inFormat){for(var f=e.length,g=d+1;g<f&&e[g]===la;)g++;if(g<f&&(f=a[d],g=e[g],(1425<=f&&2303>=f||64286===
f)&&(g===ca||g===ia)))return ca}return 1>d||e[d-1]===fa?W:c[d-1]},UBAT_B:function(){b.lastArabic=!0;b.hasUbatB=!0;return b.dir},UBAT_S:function(){b.hasUbatS=!0;return W},UBAT_LRE:function(){b.lastArabic=!1;return W},UBAT_RLE:function(){b.lastArabic=!1;return W},UBAT_LRO:function(){b.lastArabic=!1;return W},UBAT_RLO:function(){b.lastArabic=!1;return W},UBAT_PDF:function(){b.lastArabic=!1;return W},UBAT_BN:function(){return W}}[ma[e[d]]]()}function D(a,e){for(var c=0;c<F.length;c++)if(a===F[c])return e[c];
return a}function t(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function v(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function s(a,e){for(var c=0;c<y.length;c++)if(a===y[c])return e[c];return a}function r(a,e,c,d){for(var b=0;b<a.length;b++)if(a[b]>e||!c&&a[b]===e)a[b]+=d}l.getObject("string",!0,dojox);l=a("dojox.string.BidiEngine",g,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,e,d){this.sourceToTarget=
[];this.targetToSource=[];if(!a)return"";var b=this.sourceToTarget,f=this.targetToSource,g=a.length;w=[];x=[];for(var h=0;h<g;h++)b[h]=h,f[h]=h,w[h]=h;if(!this.checkParameters(e,d))return a;e=this.inputFormat;d=this.outputFormat;var b=a,b=J,h=v(e.charAt(1)),f=v(d.charAt(1)),k="I"===e.charAt(0)?"L":e.charAt(0),g="I"===d.charAt(0)?"L":d.charAt(0),h=k+h,f=g+f,g=e.charAt(2)+d.charAt(2);b.defInFormat=h;b.defOutFormat=f;b.defSwap=g;a=m(a,h,f,g,b);b=!1;if("R"===d.charAt(1))b=!0;else if("C"===d.charAt(1)||
"D"===d.charAt(1))b=this.checkContextual(a);f=this.sourceToTarget=w;g=Array(f.length);for(h=0;h<f.length;h++)g[f[h]]=h;A=this.targetToSource=g;if(e.charAt(3)===d.charAt(3))b=a;else if("S"===d.charAt(3))if(e=b,d=!0,0===a.length)b=void 0;else{void 0===e&&(e=!0);void 0===d&&(d=!0);a=String(a);a=a.split("");var l=0,f=1,b=a.length;e||(l=a.length-1,f=-1,b=1);for(var g=b,h=d,q=0,b=[],k=0;l*f<g;l+=f)if(c(a[l])||t(a[l])){var p;if(p="\u0644"===a[l])b:{for(var C=a,B=l+f,E=f,H=g;B*E<H&&t(C[B]);)B+=E;p=" ";if(B*
E<H){p=C[B];for(C=0;C<y.length;C++)if(y[C]===p){p=!0;break b}}p=!1}if(p){a[l]=0===q?s(a[l+f],u):s(a[l+f],G);l+=f;q=a;p=l;C=f;for(B=g;p*C<B&&t(q[p]);)p+=C;p*C<B&&(q[p]=" ");h&&(b[k]=l,k++);q=0}else{p=a[l];if(1===q){C=a;B=l;if(n(a,l+f,f,g))b:{E=a[l];for(H=0;H<F.length;H++)if(E===F[H]){E=M[H];break b}}else E=D(a[l],U);C[B]=E}else!0===n(a,l+f,f,g)?a[l]=D(a[l],Q):a[l]=D(a[l],z);t(p)||(q=1);b:{for(C=0;C<L.length;C++)if(L[C]===p){p=!0;break b}p=!1}!0===p&&(q=0)}}else q=0;f="";for(g=0;g<a.length;g++){if(h=
d){b:{for(h=0;h<b.length;h++)if(b[h]===g)break b;h=-1}h=-1<h}h?(r(A,g,!e,-1),w.splice(g,1)):f+=a[g]}b=f}else if(e=a,d=b,a=!0,0===e.length)b=void 0;else{void 0===a&&(a=!0);void 0===d&&(d=!0);e=String(e);b="";f=[];f=e.split("");for(g=0;g<e.length;g++)h=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(k=e.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(d?(0<g&&a&&" "===f[g-1]?b=b.substring(0,b.length-1)+"\u0644":(b+="\u0644",h=!0),b+=y[(k-65269)/2]):(b+=y[(k-65269)/2],b+="\u0644",g+1<e.length&&a&&" "===f[g+1]?g++:h=
!0),h&&(r(A,g,!0,1),w.splice(g,0,w[g]))):b+=O[k-65136]):b+=f[g]}this.sourceToTarget=w;this.targetToSource=A;this.levels=x;return b},_inputFormatSetter:function(a){if(!K.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!K.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,e){a?this.set("inputFormat",a):a=this.inputFormat;e?this.set("outputFormat",
e):e=this.outputFormat;return a===e?!1:!0},checkContextual:function(a){a=f(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(e){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return P.test(a)}});var w=[],A=[],x=[],J={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},H=5,N=6,I=0,E=1,K=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,P=/[\u0591-\u06ff\ufb1d-\ufefc]/,
B=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],y=["\u0622",
"\u0623","\u0625","\u0627"],u=["\ufef5","\ufef7","\ufef9","\ufefb"],G=["\ufef6","\ufef8","\ufefa","\ufefc"],F="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),z="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),M="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
Q="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),L="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),O="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
T=["\u0621","\u0641"],Z=["\u063a","\u064a"],ba=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],da=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ha=0,ca=1,X=2,ea=3,W=4,fa=5,$=6,ia=7,ja=8,ka=11,la=12,ma="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),aa=100;a=ha;g=ca;var R=X,V=ea,h=W,ga=fa,na=$,k=ia,Y=ja,S=ka,
p=la,oa=[aa+0,a,a,a,a,aa+1,aa+2,aa+3,g,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa+4,h,h,h,a,h,a,h,a,h,h,h,a,a,h,h,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,a,a,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,h,a,a,a,aa+5,k,k,aa+6,aa+7],pa=[[18,18,18,18,18,18,18,18,18,na,ga,na,Y,ga,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ga,ga,ga,na,Y,h,h,S,S,S,h,h,h,h,h,10,9,10,9,9,R,R,R,R,R,R,R,R,R,R,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,18,18,18,18,18,18,ga,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,h,S,S,S,S,h,h,h,h,a,h,h,18,h,h,S,S,R,R,h,a,h,h,h,R,a,h,h,h,h,h,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,h,h,h,h,h,h,h,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,
p,p,p,g,p,g,p,p,g,p,p,g,p,h,h,h,h,h,h,h,h,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,h,h,h,h,h,g,g,g,g,g,h,h,h,h,h,h,h,h,h,h,h],[V,V,V,V,h,h,h,h,k,S,S,k,9,k,h,h,p,p,p,p,p,p,p,p,p,p,p,k,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,V,V,V,V,V,V,V,V,V,V,S,V,V,k,k,k,p,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,p,p,p,p,p,p,p,V,h,p,p,p,p,p,p,k,k,p,p,h,p,p,p,p,k,k,R,R,R,R,R,R,R,R,R,R,k,k,k,k,k,k],[k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,k,k,p,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,p,p,p,p,p,p,p,p,p,
p,p,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,p,p,p,p,p,p,p,p,p,g,g,h,h,h,h,g,h,h,h,h,h],[Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,18,18,18,a,g,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Y,ga,13,14,15,16,17,9,S,S,S,S,S,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Y,18,18,18,18,18,h,h,h,h,h,18,18,18,18,18,18,R,a,h,h,R,R,R,R,R,R,10,10,h,h,h,a,R,R,R,R,R,R,R,R,R,R,10,10,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,
h,h,h,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,h,h,h,h,h,g,p,g,g,g,g,g,g,g,g,g,g,10,g,g,g,g,g,g,g,g,g,g,g,g,g,h,g,g,g,g,g,h,g,h,g,g,h,g,g,h,g,g,g,g,g,g,g,g,g,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,p,p,p,p,p,p,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,9,h,h,9,h,h,h,h,h,h,h,h,h,S,h,h,10,10,h,h,h,h,h,S,S,h,h,h,h,h,k,k,k,k,k,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,18],[h,h,h,S,S,S,h,h,h,h,h,10,9,10,9,9,R,R,R,R,R,R,R,R,R,R,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,h,h,h,S,S,h,h,h,S,S,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]];return l})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(l,a,g,m){return l("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",
g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,b){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,a[d]);return this}d=this._getAttrNames(a);var e=this._get(a,d);d=this[d.s];var c;"function"===typeof d?c=d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=b;if(this._watchCallbacks){var g=
this;m(c,function(){g._watchCallbacks(a,e,b)})}return this},_changeAttrValue:function(a,b){var d=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,d,b);return this},watch:function(a,b){var d=this._watchCallbacks;if(!d)var e=this,d=this._watchCallbacks=function(a,c,b,f){var g=function(d){if(d){d=d.slice();for(var f=0,g=d.length;f<g;f++)d[f].call(e,a,c,b)}};g(d["_"+a]);f||g(d["*"])};!b&&"function"===typeof a?(b=a,a="*"):a="_"+a;var c=d[a];"object"!==typeof c&&(c=d[a]=[]);c.push(b);
var n={};n.unwatch=n.remove=function(){var a=g.indexOf(c,b);-1<a&&c.splice(a,1)};return n}})})},"esri/layers/vectorTiles/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(l,a,g,m){var f=function(){return function(a,e,c){this.ratio=a;this.x=e;this.y=c}}();l=function(){function a(e,c,d){this.dz=e;this.yPos=c;this.xPos=d}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var c;c=64/this.finalRatio;a>>=this.dz;c>a&&(c=a);
this.margin=c;this.xmin=a*this.xPos-c;this.ymin=a*this.yPos-c;this.xmax=this.xmin+a+2*c;this.ymax=this.ymin+a+2*c};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this._pushLine();this._prevIsIn=this._isIn(a,c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new g.Point(a,c);this._firstPt=new g.Point(a,c)};a.prototype.lineTo=function(a,c){var d=this._isIn(a,c),b,m,l,t,v,s;if(d)this._prevIsIn?this._lineTo(a,c,!0):(b=this._prevPt,
m=new g.Point(a,c),l=this._intersect(m,b),this._lineTo(l.x,l.y,!0),this._lineTo(m.x,m.y,!0));else{if(this._prevIsIn)m=this._prevPt,b=new g.Point(a,c),l=this._intersect(m,b),this._lineTo(l.x,l.y,!0);else{var r=this._prevPt;b=new g.Point(a,c);if(!(r.x<=this.xmin&&b.x<=this.xmin||r.x>=this.xmax&&b.x>=this.xmax||r.y<=this.ymin&&b.y<=this.ymin||r.y>=this.ymax&&b.y>=this.ymax)){m=[];if(r.x<this.xmin&&b.x>this.xmin||r.x>this.xmin&&b.x<this.xmin)l=(this.xmin-r.x)/(b.x-r.x),s=r.y+l*(b.y-r.y),s<=this.ymin?
v=!1:s>=this.ymax?v=!0:m.push(new f(l,this.xmin,s));if(r.x<this.xmax&&b.x>this.xmax||r.x>this.xmax&&b.x<this.xmax)l=(this.xmax-r.x)/(b.x-r.x),s=r.y+l*(b.y-r.y),s<=this.ymin?v=!1:s>=this.ymax?v=!0:m.push(new f(l,this.xmax,s));if(r.y<this.ymin&&b.y>this.ymin||r.y>this.ymin&&b.y<this.ymin)l=(this.ymin-r.y)/(b.y-r.y),s=r.x+l*(b.x-r.x),s<=this.xmin?t=!1:s>=this.xmax?t=!0:m.push(new f(l,s,this.ymin));if(r.y<this.ymax&&b.y>this.ymax||r.y>this.ymax&&b.y<this.ymax)l=(this.ymax-r.y)/(b.y-r.y),s=r.x+l*(b.x-
r.x),s<=this.xmin?t=!1:s>=this.xmax?t=!0:m.push(new f(l,s,this.ymax));if(0===m.length)t?v?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):v?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<m.length&&m[0].ratio>m[1].ratio)this._lineTo(m[1].x,m[1].y,!0),this._lineTo(m[0].x,m[0].y,!0);else for(l=0;l<m.length;l++)this._lineTo(m[l].x,m[l].y,!0)}}this._lineTo(b.x,b.y,!1)}this._prevIsIn=d;this._prevPt=new g.Point(a,c)};a.prototype.close=function(){var a,
c;if(0<this.line.length&&(a=this._firstPt,c=this._prevPt,(a.x!==c.x||a.y!==c.y)&&this.lineTo(a.x,a.y),a=this.line,c=a.length,4<=c&&(a[0].x===a[1].x&&a[0].x===a[c-2].x||a[0].y===a[1].y&&a[0].y===a[c-2].y)))a.pop(),a[0].x=a[c-2].x,a[0].y=a[c-2].y};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&b.simplify(this.margin*this.finalRatio,this.lines);return this.lines};a.prototype._isIn=function(a,c){return a>=this.xmin&&a<=this.xmax&&c>=this.ymin&&c<=this.ymax};
a.prototype._intersect=function(a,c){var b,d;if(c.x>=this.xmin&&c.x<=this.xmax)d=c.y<=this.ymin?this.ymin:this.ymax,b=a.x+(d-a.y)/(c.y-a.y)*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)b=c.x<=this.xmin?this.xmin:this.xmax,d=a.y+(b-a.x)/(c.x-a.x)*(c.y-a.y);else{d=c.y<=this.ymin?this.ymin:this.ymax;b=c.x<=this.xmin?this.xmin:this.xmax;var f=(b-a.x)/(c.x-a.x),m=(d-a.y)/(c.y-a.y);f<m?d=a.y+f*(c.y-a.y):b=a.x+m*(c.x-a.x)}return new g.Point(b,d)};a.prototype._pushLine=function(){this.line&&(1===this.type?
0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,c,b){3!==this.type?b&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new g.Point(a,c))):(b||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),
a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new g.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,b){if(3!==this.type)if(b){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(b=this.line[this.line.length-1],b.equals(a,c)))return;this.line.push(new g.Point(a,c))}else this.line&&0<this.line.length&&this._pushLine();
else if(b||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){b=this.line[this.line.length-1];var d=b.x===a,f=b.y===c;if(!d||!f)this._is_h&&d?(b.x=a,b.y=c,b=this.line[this.line.length-2],this._is_h=b.x===a,this._is_v=b.y===c):this._is_v&&f?(b.x=a,b.y=c,b=this.line[this.line.length-2],this._is_h=
b.x===a,this._is_v=b.y===c):(this.line.push(new g.Point(a,c)),this._is_h=d,this._is_v=f)}else this.line.push(new g.Point(a,c))};return a}();a.TileClipper=l;l=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,b){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new g.Point(Math.round(a*d),Math.round(b*d)))};a.prototype.lineTo=
function(a,b){var d=this._ratio;this.line.push(new g.Point(Math.round(a*d),Math.round(b*d)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&b.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=l;var b=function(){function a(){}a.simplify=function(b,c){if(c){for(var f=-b,g=4096+b,m=-b,l=4096+b,t=[],
v=[],s=c.length,r=0;r<s;++r){var w=c[r];if(w&&!(2>w.length))for(var A=w[0],x=void 0,J=w.length,H=1;H<J;++H)x=w[H],A.x===x.x&&(A.x<=f&&(A.y>x.y?(t.push(r),t.push(H),t.push(0),t.push(-1)):(v.push(r),v.push(H),v.push(0),v.push(-1))),A.x>=g&&(A.y<x.y?(t.push(r),t.push(H),t.push(1),t.push(-1)):(v.push(r),v.push(H),v.push(1),v.push(-1)))),A.y===x.y&&(A.y<=m&&(A.x<x.x?(t.push(r),t.push(H),t.push(2),t.push(-1)):(v.push(r),v.push(H),v.push(2),v.push(-1))),A.y>=l&&(A.x>x.x?(t.push(r),t.push(H),t.push(3),t.push(-1)):
(v.push(r),v.push(H),v.push(3),v.push(-1)))),A=x}0===t.length||0===v.length||(a.fillParent(c,v,t),a.fillParent(c,t,v),f=[],a.calcDeltas(f,v,t),a.calcDeltas(f,t,v),a.addDeltas(f,c))}};a.fillParent=function(a,b,d){for(var f=d.length,g=b.length,l=0;l<g;l+=4){for(var t=b[l],v=b[l+1],s=b[l+2],r=a[t][v-1],t=a[t][v],v=8092,w=-1,A=0;A<f;A+=4)if(d[A+2]===s){var x=d[A],J=d[A+1],H=a[x][J-1],x=a[x][J];switch(s){case 0:case 1:m.between(r.y,H.y,x.y)&&m.between(t.y,H.y,x.y)&&(H=Math.abs(x.y-H.y),H<v&&(v=H,w=A));
break;case 2:case 3:m.between(r.x,H.x,x.x)&&m.between(t.x,H.x,x.x)&&(H=Math.abs(x.x-H.x),H<v&&(v=H,w=A))}}b[l+3]=w}};a.calcDeltas=function(b,c,f){for(var g=c.length,m=0;m<g;m+=4){var l=a.calcDelta(m,c,f,[]);b.push(c[m]);b.push(c[m+1]);b.push(c[m+2]);b.push(l)}};a.calcDelta=function(b,c,f,g){b=c[b+3];if(-1===b)return 0;var m=g.length;if(1<m&&g[m-2]===b)return 0;g.push(b);return a.calcDelta(b,f,c,g)+1};a.addDeltas=function(a,b){for(var d=a.length,f=0,g=0;g<d;g+=4){var m=a[g+3];m>f&&(f=m)}for(g=0;g<
d;g+=4){var l=b[a[g]],v=a[g+1],m=f-a[g+3];switch(a[g+2]){case 0:l[v-1].x-=m;l[v].x-=m;break;case 1:l[v-1].x+=m;l[v].x+=m;break;case 2:l[v-1].y-=m;l[v].y-=m;break;case 3:l[v-1].y+=m,l[v].y+=m}}d=b.length;for(f=0;f<d;++f)(l=b[f])&&!(2>l.length)&&l[l.length-1].x!==l[0].x&&l[l.length-1].y!==l[0].y&&l.push(l[0])};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(l,a,g){return function(){function a(f,b){this.styleJSON=
f;this.version=parseFloat(f.version);this.sprite=b?b.spriteUrl:f.sprite;this.glyphs=b?b.glyphsUrl:f.glyphs;this.layers=(f.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],b=[],d=0,e=this.layers;d<e.length;d++){var c=e[d];if(1===c.type){var g=c.sourceLayer,g=g+("|"+JSON.stringify(c.minzoom)),g=g+("|"+JSON.stringify(c.maxzoom)),g=g+("|"+JSON.stringify(c.filter));a.push({key:g,layer:c})}2===c.type&&(g=c.sourceLayer,g+="|"+JSON.stringify(c.minzoom),
g+="|"+JSON.stringify(c.maxzoom),g+="|"+JSON.stringify(c.filter),g+="|"+JSON.stringify(c.layout["line-cap"]),g+="|"+JSON.stringify(c.layout["line-join"]),b.push({key:g,layer:c}))}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,d,e=a.length,c=0;c<e;c++){var g=a[c];if(g.key===b)g.layer.refLayerId=d;else if(b=g.key,d=g.layer.id,1===g.layer.type&&!g.layer.hasPaintProperty("fill-outline-color"))for(var l=
c+1;l<e;l++){var m=a[l];if(m.key===b){if(m.layer.hasPaintProperty("fill-outline-color")){a[c]=m;a[l]=g;d=m.layer.id;break}}else break}}};a._create=function(a,b,d){b=1-(1+b)*(1/(d.length+1));switch(a.type){case "background":return new g.StyleLayer(0,a,b);case "fill":return new g.StyleLayer(1,a,b);case "line":return new g.StyleLayer(2,a,b);case "symbol":return new g.StyleLayer(3,a,b);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");
}throw Error("Unknown vector tile layer");};return a}()})}}});define("esri/layers/vectorTiles/core/workers/worker-init",[],1);