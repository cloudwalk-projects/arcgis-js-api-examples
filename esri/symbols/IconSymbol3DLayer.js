// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/kebabDictionary ../core/promiseUtils ../core/screenUtils ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DMaterial ./support/Symbol3DResource ../views/3d/layers/graphics/Graphics3DIconSymbolLayer".split(" "),function(u,v,f,c,h,k,l,m,e,b,n,p,q,r,s){var g=k({topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"}),
t=function(d){function a(){d.apply(this,arguments)}f(a,d);a.prototype.readHref=function(a,b,c){return a?e.read(a,c):b.dataURI};a.prototype.writeHref=function(a,b,c){a&&(e.isDataProtocol(a)?b.dataURI=a:b.href=e.write(a,c))};a.prototype.clone=function(){return new a({href:this.href,primitive:this.primitive})};c([b.property({json:{writable:!0,readFrom:["href","dataURI"]}})],a.prototype,"href",void 0);c([b.read("href")],a.prototype,"readHref",null);c([b.write("href")],a.prototype,"writeHref",null);return a=
c([b.subclass("esri.symbols.support.IconSymbol3DLayerResource")],a)}(b.declared(r.default));return function(d){function a(a){d.call(this);this.resource=this.material=null;this.type="Icon";this.outline=this.anchor=this.size=void 0}f(a,d);a.prototype.readAnchor=function(a){return g.fromJSON(a)};a.prototype.writeAnchor=function(a,b){b.anchor=g.toJSON(a)};a.prototype.computeResourceSize=function(){if(this.resource.href)return this._fetchImage().then(function(a){return[a.width,a.height]});if(this.resource.primitive)return l.resolve(s.PRIMITIVE_SIZE)};
a.prototype.computeSize=function(){var a=this;return this.computeResourceSize().then(function(b){if(null==a.size)return b;b=b[0]/b[1];return 1<b?[a.size,a.size/b]:[a.size*b,a.size]})};a.prototype.clone=function(){return new a({anchor:this.anchor,enabled:this.enabled,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};a.prototype._fetchImage=function(){return h(this.resource.href,{responseType:"image"}).then(function(a){return a.data})};
c([b.property({type:q.default})],a.prototype,"material",void 0);c([b.property({type:t,json:{writable:!0}})],a.prototype,"resource",void 0);c([b.property()],a.prototype,"type",void 0);c([b.property({json:{writable:!0}}),b.cast(m.toPt)],a.prototype,"size",void 0);c([b.property({type:String})],a.prototype,"anchor",void 0);c([b.read("anchor")],a.prototype,"readAnchor",null);c([b.write("anchor")],a.prototype,"writeAnchor",null);c([b.property({type:p.default,json:{writable:!0}})],a.prototype,"outline",
void 0);return a=c([b.subclass("esri.symbols.IconSymbol3DLayer")],a)}(b.declared(n))});