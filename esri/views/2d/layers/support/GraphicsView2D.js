// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),function(t,u,h,f,e,k,l,m,n,p,q,r,s){return function(g){function d(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-
0]=arguments[c];g.apply(this,b);this._frontGroup=new r;this._handles=new l;this._objects=new Map;this.container=new q;this.container.addChild(this._frontGroup);this.watch("graphics",function(){return a._reset()},!0)}h(d,g);d.prototype.hitTest=function(a,b){var c=this.container.hitTest(a,b);return c?m.resolve(c.graphic):null};d.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),
"graphics"))};d.prototype._add=function(a){if(!this._objects.has(a)){var b=new s;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};d.prototype._remove=function(a){var b=this._objects.get(a);b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};d.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};f([e.cast(k.ofType(n))],d.prototype,
"graphics",void 0);f([e.property()],d.prototype,"view",void 0);return d=f([e.subclass("esri.views.2d.layers.support.GraphicsView2D")],d)}(e.declared(p))});