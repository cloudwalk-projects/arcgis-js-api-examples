// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils ../viewpointUtils".split(" "),function(r,s,l,t,m,n,p,q){var h=[0,0];return function(e){function a(){e.apply(this,arguments);this._offScreenCanvas=null;this._offScreenRenderParameters={budget:null,clip:[],context:null,devicePixelRatio:1,state:new n({viewpoint:q.create()}),stationary:!0}}l(a,e);a.prototype.attach=function(b){this._offScreenCanvas||(this._offScreenCanvas=
document.createElement("canvas"),this._offScreenRenderParameters.context=this._offScreenCanvas.getContext("2d"));return e.prototype.attach.call(this,b)};a.prototype.detach=function(b){e.prototype.detach.call(this,b);this._offScreenCanvas=null;this._offScreenRenderParameters.context=null};a.prototype.render=function(b){this.visible&&e.prototype.render.call(this,b)};a.prototype.prepareChildrenRenderParameters=function(b){var a=b.state,c=this._offScreenRenderParameters,d=this._offScreenCanvas,f=c.state,
e=c.context,g=p.getOuterSize(h,a),k=g[0],g=g[1];f.viewpoint=a.viewpoint.clone();f.viewpoint.rotation=0;f.size=h;d.width!==k||d.height!==g?(d.width=k,d.height=g):e.clearRect(0,0,k,g);c.budget=b.budget;c.devicePixelRatio=b.devicePixelRatio;c.clip.length=0;return c};a.prototype.detachChild=function(b,a){b.detach()};a.prototype.attachChild=function(b,a){return b.attach(a)};a.prototype.renderChild=function(b,a){b.render(a)};a.prototype.beforeRenderChildren=function(a,e){this.sortChildren(function(a,b){return b.resolution-
a.resolution})};a.prototype.afterRenderChildren=function(a,e){var c=a.context,d=a.state,f=e.state,h=e.context;0===d.rotation?c.drawImage(h.canvas,0,0):(c.save(),c.translate(0.5*d.width,0.5*d.height),c.rotate(d.rotation*Math.PI/180),c.translate(0.5*-d.width,0.5*-d.height),c.drawImage(h.canvas,0.5*(d.width-f.width),0.5*(d.height-f.height)),c.restore())};return a}(m)});