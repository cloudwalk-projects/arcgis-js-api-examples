// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(p,q,e,f,g,h,k,l,m){function c(b){if(b instanceof l)return b;if(b instanceof m){var a=0;for(b=b.children;a<b.length;a++){var d=c(b[a]);if(d)return d}}return null}return function(b){function a(a){var n=this;b.call(this);this.element=a;this._budget=new h;this._renderParameters={budget:this._budget,state:this.state,devicePixelRatio:window.devicePixelRatio,
stationary:!1};this._renderRequested=!1;this._taskHandle=g.addFrameTask({render:function(){return n.renderFrame()}});this.attached=this._stationary=!0;this._taskHandle.pause()}e(a,b);a.prototype.destroy=function(){this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(a.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"stationary",{get:function(){return this._stationary},
set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.start=function(){this._taskHandle.resume()};a.prototype.stop=function(){this._taskHandle.isPaused()||this._taskHandle.pause()};a.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle.isPaused()&&this._taskHandle.resume()};a.prototype.takeScreenshot=function(a){var b=c(this);b||f.reject("Could not find an object capable of capturing screenshot!");return b.takeScreenshot(a)};
a.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.render(this._renderParameters));this._renderRequested||this._taskHandle.pause()};return a}(k)});