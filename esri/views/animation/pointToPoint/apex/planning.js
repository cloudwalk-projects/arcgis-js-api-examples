// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","./functions"],function(w,l,b){function q(c,b){var a=Math.max(c.compared.sourceZoom,c.compared.targetZoom),d=c.source.zoomAtPixelsPerPan(c.desiredPixelFlow/c.compared.pan)/2;return d<a?null!=b.maximumDistance?a+(b.maximumDistance-a)/2:1.5*a:b.maximumDistance?Math.min(b.maximumDistance,d):d}l.optimalDistance=function(c,e){var a=q(c,e),d={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:0.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:0.5},g=0===
d.ascensionFactor,h=0===d.descensionFactor,l=g?b.tAscensionZoomOnly:b.tAscensionZoomPan,r=g?b.dtAscensionZoomOnly:b.dtAscensionZoomPan,g=g?b.ddtAscensionZoomOnly:b.ddtAscensionZoomPan,s=h?b.tDescensionZoomOnly:b.tDescensionZoomPan,t=h?b.dtDescensionZoomOnly:b.dtDescensionZoomPan,h=h?b.ddtDescensionZoomOnly:b.ddtDescensionZoomPan,m=function(a){return l(c,d,a)+b.tPanion(c,d,a)+s(c,d,a)},k=m(a),u=b.tBaseLine(c),n,v=e.maximumIterations||20,p=null!=e.maximumDistance?e.maximumDistance:Infinity;for(n=0;n<
v;n++){var f=(r(c,d,a)+b.dtPanion(c,d,a)+t(c,d,a)+1E-6)/(g(c,d,a)+b.ddtPanion(c,d,a)+h(c,d,a));if(isNaN(f)||a>=p&&0>f){if(!isFinite(p))return null;a=p;k=m(a);break}a-=f;if(a<c.compared.sourceZoom||a<c.compared.targetZoom)return null;f=m(a);if(0.005>=Math.abs(f-k)/k)break;k=f}return k>0.7*u?null:a<c.compared.sourceZoom||a<c.compared.targetZoom?null:a}});