// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/libs/gl-matrix/vec3","../../core/libs/gl-matrix/mat4"],function(u,v,s,p){var t={extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,isWrappable:!0},intersects:function(a){return!1}},center:[0,0],scale:1,resolution:1,rotation:0,width:1,height:1,size:[256,256],spatialReference:{wkid:102100,isWrappable:!0},worldScreenWidth:1,viewpoint:{},toMap:function(a,b){return[0,0]},toScreen:function(a,b){return[0,0]},clone:function(){return null}},q=s.create();
return function(a,b,d,r,f,g,k,l,c,e,h,m){c=[b[0],b[1],b[2]];for(var n=e;1>n;n*=2)c[0]--,c[1]>>=1,c[2]>>=1;b={context:a,budget:null,state:t,stationary:!0,devicePixelRatio:1,displayLevel:f.adjustLevel(g),requiredLevel:f.adjustLevel(b[0]),drawphase:0,renderer:r,layerOpacity:m};if(k!==l)throw Error("It is expected that tiles are square!");g=1/e;f=f.getSchemaShift(c,g);m=f[1];d.tileTransform.displayCoord[0]=-1-2*g*h[0]-f[0];d.tileTransform.displayCoord[1]=1+2*g*(1-h[1]-e)+m;e=d.tileTransform.transform;
p.identity(e);h=0.25*g/k;q.set([h,-h,1]);p.scale(e,e,q);a.setBlendFunctionSeparate(1,771,1,771);a.setClearDepth(1);a.clear(a.gl.DEPTH_BUFFER_BIT);b.state.size=[k,l];b.state.width=k;b.state.height=l;r.setStateParams(b.state,b.devicePixelRatio,c[0]);d.attach(b);a.setFaceCullingEnabled(!1);a.setDepthFunction(515);a.setBlendingEnabled(!1);a.setDepthTestEnabled(!0);a.setDepthWriteEnabled(!0);d.render(b);a.setDepthWriteEnabled(!1);a.setBlendingEnabled(!0);b.drawphase=1;d.render(b);b.drawphase=2;d.render(b);
a.setDepthWriteEnabled(!0);a.setDepthTestEnabled(!1);a.setFaceCullingEnabled(!0)}});