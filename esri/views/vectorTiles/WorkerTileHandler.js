// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(r,a,b,m,p,k,e,f,h,s,g,l,H,n){return function(){function a(f,h,g,s){void 0===s&&(s=0);this.rotation=0;this._symbolBuckets=[];this.tileKey=f;this.refKey=h;this._workerTileHandler=g;this.status=
0;this.rotation=s;this.placementEngine=new H.PlacementEngine(n.C_DEG_TO_RAD*s)}a.prototype.setDataAndParse=function(a,f){var p=this;this.polygonVertexBuffer=new k.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new k.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new e.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new e.TriangleElementMemoryBuffer;this.lineVertexBuffer=new k.LineMemoryBuffer;this.lineIndexBuffer=new e.TriangleElementMemoryBuffer;this.lineJoinVertexBuffer=new k.LineJoinMemoryBuffer;
this.markerVertexBuffer=new k.SymbolMemoryBuffer;this.markerIndexBuffer=new e.TriangleElementMemoryBuffer;this.textVertexBuffer=new k.SymbolMemoryBuffer;this.textIndexBuffer=new e.TriangleElementMemoryBuffer;var m=new b(function(a){p.status=6});this._parse(a,f).then(function(a){p.placementEngine=null;for(var f=new Uint32Array([2,p.polygonVertexBuffer.sizeInBytes,3,p.polygonOutlineVertexBuffer.sizeInBytes,6,p.polygonIndexBuffer.sizeInBytes,7,p.polygonOutlineIndexBuffer.sizeInBytes,0,p.lineVertexBuffer.sizeInBytes,
8,p.lineIndexBuffer.sizeInBytes,1,p.lineJoinVertexBuffer.sizeInBytes,4,p.markerVertexBuffer.sizeInBytes,9,p.markerIndexBuffer.sizeInBytes,5,p.textVertexBuffer.sizeInBytes,10,p.textIndexBuffer.sizeInBytes]),e=[],b=a.length,k=0;k<b;k++){var n=a[k];n instanceof s?(e.push(n.layerIndex),e.push(1),e.push(n.polygonIndexStart),e.push(n.polygonIndexCount),e.push(n.polygonOutlineIndexStart),e.push(n.polygonOutlineIndexCount)):n instanceof g?(e.push(n.layerIndex),e.push(2),e.push(n.triangleIndexStart),e.push(n.triangleIndexCount),
e.push(n.connectorStart),e.push(n.connectorCount)):n instanceof l?(e.push(n.layerIndex),e.push(3),e.push(0===n.markerIndexCount?0:n.markerIndexStart),e.push(n.markerIndexCount),e.push(0===n.textIndexCount?0:n.textIndexStart),e.push(n.textIndexCount),e.push(n.sdfMarker?1:0)):n instanceof h&&(e.push(n.layerIndex),e.push(0))}a=new Uint32Array(e);var e=p.polygonVertexBuffer.toBuffer(),b=p.polygonOutlineVertexBuffer.toBuffer(),k=p.polygonIndexBuffer.toBuffer(),n=p.polygonOutlineIndexBuffer.toBuffer(),
z=p.lineVertexBuffer.toBuffer(),H=p.lineIndexBuffer.toBuffer(),J=p.lineJoinVertexBuffer.toBuffer(),x=p.markerVertexBuffer.toBuffer(),t=p.markerIndexBuffer.toBuffer(),E=p.textVertexBuffer.toBuffer(),w=p.textIndexBuffer.toBuffer();p.placementEngine=null;p.polygonVertexBuffer=null;p.polygonIndexBuffer=null;p.polygonOutlineVertexBuffer=null;p.polygonOutlineIndexBuffer=null;p.lineVertexBuffer=null;p.lineIndexBuffer=null;p.lineJoinVertexBuffer=null;m.resolve({data:{bufferDataInfo:f.buffer,bucketDataInfo:a.buffer,
bufferData:[e,b,k,n,z,H,J,x,t,E,w]},buffers:[e,k,b,n,z,H,J,x,t,E,w,f.buffer,a.buffer]})});return m.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var f=this,h=this._symbolBuckets;if(!h)return m.resolve({data:null});this.rotation=a;var g=new H.PlacementEngine(360*(a/256)*n.C_DEG_TO_RAD),s=new k.SymbolMemoryBuffer,b=new e.TriangleElementMemoryBuffer,l=new k.SymbolMemoryBuffer,z=new e.TriangleElementMemoryBuffer,R=[],C=h.length,G=0;return p(function(){if(6===
f.status)return!0;if(G<C){var a=h[G++].copy(s,b,l,z,g);a&&(R.push(a),a.updateSymbols())}return G>=C},5).then(function(){if(6===f.status||0===s.sizeInBytes&&0===b.sizeInBytes&&0===l.sizeInBytes&&0===z.sizeInBytes)return{data:null};var a=new Uint32Array([4,s.sizeInBytes,9,b.sizeInBytes,5,l.sizeInBytes,10,z.sizeInBytes]),h=[];C=R.length;for(var g=0;g<C;g++){var e=R[g];h.push(e.layerIndex);h.push(3);h.push(0===e.markerIndexCount?0:e.markerIndexStart);h.push(e.markerIndexCount);h.push(0===e.textIndexCount?
0:e.textIndexStart);h.push(e.textIndexCount);h.push(e.sdfMarker?1:0)}var h=new Uint32Array(h),g=s.toBuffer(),e=b.toBuffer(),p=l.toBuffer(),n=z.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:h.buffer,bufferData:[g,e,p,n]},buffers:[g,e,p,n,a.buffer,h.buffer]}}).otherwise(function(a){return m.resolve({data:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};
a.prototype._parse=function(a,h){return!a||0===a.byteLength?m.resolve([]):(new f(a,this,h)).parse()};return a}()})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(r,a,b,m){return function(a,k){var e;if(!k||0>=k)k=500;var f=new b(function(){e&&clearTimeout(e)}),h=function(){if(!f.isFulfilled()){for(var s=m(),g=!1;!g&&m()-s<k;)g=!0===a();g?f.resolve():e=setTimeout(h,0)}};e=setTimeout(h,0);return f.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(r,a,b,m,p,k){r=function(a){function f(){a.call(this,12)}b(f,a);f.prototype.add=function(a,f,g,e,b,n,k){var m=this.array,x=this.index;a=p.i1616to32(2*a|b,2*f|n);m.push(a);a=p.i1616to32(Math.round(31*g),Math.round(31*e));m.push(a);a=p.i1616to32(k,0);m.push(a);return x};return f}(p);a.LineMemoryBuffer=r;r=function(a){function f(){a.call(this,4)}b(f,a);f.prototype.add=function(a,f){var g=this.index;this.array.push(p.i1616to32(a,f));return g};return f}(p);a.LineJoinMemoryBuffer=r;r=function(a){function f(){a.call(this,
4)}b(f,a);f.prototype.add=function(a,f){this.array.push(p.i1616to32(a,f))};return f}(p);a.PolygonMemoryBuffer=r;r=function(a){function f(){a.call(this,8)}b(f,a);f.prototype.add=function(a,f,g,e,b,n){var k=this.array,m=this.index;a=p.i1616to32(a,f);k.push(a);a=p.i8888to32(Math.round(15*g),Math.round(15*e),b,n);k.push(a);return m};return f}(p);a.PolygonOutlineMemoryBuffer=r;r=function(a){function f(){a.call(this,16)}b(f,a);f.prototype.add=function(a,f,g,e,b,n,m,J,x,u){var A=this.array,D=this.index;
a=p.i1616to32(a,f);A.push(a);a=p.i1616to32(Math.round(32*g),Math.round(32*e));A.push(a);a=p.i8888to32(b/4,n/4,0,0);A.push(a);a=p.i8888to32(Math.ceil(10*u),k.radToByte(m),10*J,10*Math.min(x,25));A.push(a);return D};return f}(p);a.SymbolMemoryBuffer=r})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(r,a){return function(){function a(b){this._array=[];0>=b&&console.error("strideInBytes must be positive!");this._stride=b}Object.defineProperty(a.prototype,"array",
{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};
a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,k,e){return a&255|(b&255)<<8|(k&255)<<16|e<<24};a.i8816to32=function(a,b,k){return a&255|(b&255)<<8|k<<16};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(r,a){function b(a,b){a%=b;return 0<=a?a:a+b}a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=
a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var m=1/Math.LN2;a.positiveMod=b;a.radToByte=function(p){return b(p*a.C_RAD_TO_256,256)};a.degToByte=function(p){return b(p*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*m};a.sqr=function(a){return a*a};a.clamp=function(a,b,e){return Math.min(Math.max(a,b),e)};a.interpolate=function(a,b,e){return a*(1-e)+b*e};a.between=function(a,b,e){return a>=b&&a<=e||a>=e&&a<=b}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(r,a,b,m,p){r=function(a){function e(){a.call(this,12)}b(e,a);e.prototype.add=function(a,h,e){var g=this.array;g.push(a);g.push(h);g.push(e)};return e}(p);a.TriangleElementMemoryBuffer=r;p=function(a){function e(){a.call(this,4)}b(e,a);e.prototype.add=function(a){this.array.push(a)};return e}(p);a.PointElementMemoryBuffer=p})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(r,a,b,m,p,k,e,f,h,s,g,l,H){return function(){function a(f,h,g){this._pbfTile=new k(new Uint8Array(f),new DataView(f));this._tile=h;this._connection=g;this._layers=h.getLayers();g=h.tileKey.split("/").map(parseFloat);var e=g[0];f=g[1];g=g[2];this._level=e;h.refKey&&(h=h.refKey.split("/").map(parseFloat)[0],h=e-h,0<h&&(e=(1<<h)-1,this._tileClipper=new H.TileClipper(h,f&e,g&e)));this._tileClipper||(this._tileClipper=new H.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,h=this._parseTileData(this._pbfTile),
g=this._layers,e=g.length,s=this._level,l,n=[],I={},k=new Set,e=e-1;0<=e;e--)if(l=g[e],!(l.minzoom&&s<l.minzoom)&&!(l.maxzoom&&s>=l.maxzoom)&&!(l.layout&&"none"===l.layout.visibility))if(0===l.type)l=this._createBucket(l),n.push(l);else{var H=l.sourceLayer,C=h[H];if(C&&(k.add(H),l=this._createBucket(l)))l.layerIndex=e,l.layerExtent=C.extent,(C=I[H])||(C=I[H]=[]),C.push(l)}var G=10*(this._level+1),M=[],y=[],B=[],t=[],E=this._tileClipper,w=new Set,v={},r=[];k.forEach(function(a){return r.push(a)});
var F=0,S=0,K=r.length;return p(function(){if(6===a._tile.status)return!0;switch(F){case 0:if(S<K)for(var g=r[S++],e=h[g],s=I[g],g=e.getData();g.next(2);){var b=new f(g.getMessage(),e),l=b.values;if(l&&(l=l._minzoom)&&l>=G)continue;for(var n=0,p=s;n<p.length;n++)l=p[n],l.pushFeature(b)}else{e=a._tile;for(g in I){s=I[g];for(b=0;b<s.length;b++)l=s[b],l.hasFeatures()&&(3===l.layer.type?(M.push(l),e.addBucket(l)):l.layer.refLayerId?B.push(l):(y.push(l),t[l.layer.id]=l))}F=1;S=0;K=M.length}break;case 1:S<
K?M[S++].getResources(E,w,v):F=2}return 2===F},50).then(function(){if(6===a._tile.status)return[];var f=[],h=a._tile.getWorkerTileHandler(),g;0<w.size&&(g=h.fetchSprites(w,a._connection),f.push(g));for(var e in v)g=v[e],0<g.size&&(g=h.fetchGlyphs(a._tile.tileKey,e,g,a._connection),f.push(g));return b(f).then(function(f){if(6===a._tile.status)return[];var h=0,g=0,e=y.length;return p(function(){if(6===a._tile.status)return!0;switch(h){case 0:if(g<e){var f=y[g++];f.processFeatures(E,a._tile);n.push(f)}else h=
1,g=0,e=B.length;break;case 1:for(var b=0;b<B.length;b++){var f=B[b],l=t[f.layer.refLayerId];l&&(l.assignBufferInfo(f),n.push(f))}h=2;g=0;e=M.length;break;case 2:g<e?(f=M[g++],f.processFeatures(E,a._tile),n.push(f)):h=3}return 3===h},50).then(function(){n.sort(function(a,f){return a.layerIndex-f.layerIndex});return n})}).otherwise(function(a){return m.reject(Error(a))})}).otherwise(function(a){return m.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var f={};a.next();)switch(a.tag()){case 3:var h=
new e(a.getMessage());f[h.name]=h;break;default:a.skip()}return f};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new h(a,this._level)};a.prototype._createFillBucket=function(a){var f=this._tile;return new s(a,this._level,f.polygonVertexBuffer,f.polygonIndexBuffer,f.polygonOutlineVertexBuffer,
f.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var f=this._tile;return new g(a,this._level,f.lineVertexBuffer,f.lineIndexBuffer,f.lineJoinVertexBuffer)};a.prototype._createSymbolBucket=function(a){var f=this._tile;return new l(a,this._level,f.markerVertexBuffer,f.markerIndexBuffer,f.textVertexBuffer,f.textIndexBuffer,f.placementEngine,f.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(r,a){return function(){function a(b,
p,k,e){this._tag=0;this._dataType=99;this._data=b;this._dataView=p;this._pos=k||0;this._end=e||b.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=
function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var m=this._getLength(),p=this._pos,p=new a(this._data,
this._dataView,p,p+m);this._skip(m);return p};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,k=0,e;if(10<=this._end-b){if(e=a[b++],
k|=e&127,0!==(e&128)&&(e=a[b++],k|=(e&127)<<7,0!==(e&128)&&(e=a[b++],k|=(e&127)<<14,0!==(e&128)&&(e=a[b++],k|=(e&127)<<21,0!==(e&128)&&(e=a[b++],k+=268435456*(e&127),0!==(e&128)&&(e=a[b++],k+=34359738368*(e&127),0!==(e&128)&&(e=a[b++],k+=4398046511104*(e&127),0!==(e&128)&&(e=a[b++],k+=562949953421312*(e&127),0!==(e&128)&&(e=a[b++],k+=72057594037927936*(e&127),0!==(e&128)&&(e=a[b++],k+=9223372036854775E3*(e&127),0!==(e&128)))))))))))throw Error("Varint too long!");}else{for(var f=1;b!==this._end;){e=
a[b];if(0===(e&128))break;++b;k+=(e&127)*f;f*=128}if(b===this._end)throw Error("Varint overrun!");++b;k+=e*f}this._pos=b;return k};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,k){var e="",f="";for(k=Math.min(this._end,k);b<k;++b){var h=a[b];h&128?f+="%"+h.toString(16):(e+=decodeURIComponent(f)+
String.fromCharCode(h),f="")}f.length&&(e+=decodeURIComponent(f));return e};a.prototype._toBytes=function(a,b,k){k=Math.min(this._end,k);return new Uint8Array(a.buffer,b,k-b)};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(r,a){return function(){function a(m){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=m.clone();m.next();)switch(m.tag()){case 1:this.name=m.getString();break;case 3:this.keys.push(m.getString());break;case 4:this.values.push(a._parseValue(m.getMessage()));
break;case 5:this.extent=m.getUInt32();break;default:m.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(r,
a,b){return function(){function a(b,k){this.values={};for(var e=k.keys,f=k.values;b.next();)switch(b.tag()){case 1:this.id=b.getUInt64();break;case 2:for(var h=b.getMessage(),s=this.values;!h.empty();){var g=h.getUInt32(),l=h.getUInt32();s[e[g]]=f[l]}break;case 3:this.type=b.getUInt32();break;case 4:this._pbfGeometry=b.getMessage();break;default:b.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var k=this._pbfGeometry,e,f;a?a.reset(this.type):e=[];for(var h=
1,s=0,g=0,l=0;!k.empty();)switch(0===s&&(s=k.getUInt32(),h=s&7,s>>=3),s--,h){case 1:g+=k.getSInt32();l+=k.getSInt32();a?a.moveTo(g,l):(f&&e.push(f),f=[],f.push(new b.Point(g,l)));break;case 2:g+=k.getSInt32();l+=k.getSInt32();a?a.lineTo(g,l):f.push(new b.Point(g,l));break;case 7:a?a.close():f&&!f[0].equals(g,l)&&f.push(f[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(f&&e.push(f),a=e);return this._geometry=a};return a}()})},"esri/views/vectorTiles/Geometry":function(){define(["require",
"exports"],function(r,a){var b=function(){function a(b,k){this.x=b;this.y=k}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=
function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var e=this.x,f=this.y;this.x=e*a-f*b;this.y=e*b+f*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,b){var e=b.x-a.x,f=b.y-a.y;return Math.sqrt(e*
e+f*f)};a.add=function(b,k){return new a(b.x+k.x,b.y+k.y)};a.sub=function(b,k){return new a(b.x-k.x,b.y-k.y)};return a}();a.Point=b})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(r,a,b,m,p){return function(a){function e(f,h){a.call(this,f,h)}b(e,a);return e}(p)})},"esri/views/vectorTiles/Bucket":function(){define(["require","exports"],function(r,a){return function(){function a(b,
p){this.layerExtent=4096;this._features=[];this.layer=b;this.zoom=p;this._filter=b.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,b){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(r,a,b,m,p,k,e){return function(a){function h(h,g,b,e,n,k){a.call(this,h,g);this.polygonVertexBuffer=b;this.polygonIndexBuffer=e;this.polygonOutlineVertexBuffer=n;this.polygonOutlineIndexBuffer=k}b(h,a);Object.defineProperty(h.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});h.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};h.prototype.processFeatures=function(a,f){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);for(var h=this.layer.getPaintValue("fill-pattern",this.zoom),h=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===h,b=0,e=this._features;b<e.length;b++){var k=
e[b].getGeometry(a);this._processFeature(k,h)}};h.prototype._processFeature=function(a,f){if(a){var b=a.length;if(f)for(var e=0;e<b;e++)this._processOutline(a[e]);for(var n,e=0;e<b;e++){var k=h._area(a[e]);0<k?(void 0!==n&&this._processFill(a,n),n=[e]):0>k&&void 0!==n&&n.push(e)}void 0!==n&&this._processFill(a,n)}};h.prototype._processOutline=function(a){var f=this.polygonOutlineVertexBuffer,h=this.polygonOutlineIndexBuffer,b=h.index,e,z,J,x=new k.Point(0,0),u=new k.Point(0,0),p=new k.Point(0,0),
m=-1,L=-1,I=e=-1,Q=-1,R=a.length;if(!(2>R)){z=a[0];for(var C=a[R-1];R&&C.isEqual(z);)--R,C=a[R-1];if(!(2>R-0)){for(C=0;C<R;++C){0===C?(e=a[R-1],z=a[0],J=a[1],x.assignSub(z,e),x.normalize(),x.rightPerpendicular()):(z=J,J=C!==R-1?a[C+1]:a[0],x.assign(u));u.assignSub(J,z);u.normalize();u.rightPerpendicular();e=x.x*u.y-x.y*u.x;p.assignAdd(x,u);p.normalize();var G=-p.x*-x.x+-p.y*-x.y,G=Math.abs(0!==G?1/G:1);8<G&&(G=8);0<=e?(e=f.add(z.x,z.y,x.x,x.y,0,1),-1===I&&(I=e),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),L=
f.add(z.x,z.y,G*-p.x,G*-p.y,0,-1),-1===Q&&(Q=L),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),m=L,L=e,e=f.add(z.x,z.y,p.x,p.y,0,1),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),L=f.add(z.x,z.y,u.x,u.y,0,1)):(e=f.add(z.x,z.y,G*p.x,G*p.y,0,1),-1===I&&(I=e),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),L=f.add(z.x,z.y,-x.x,-x.y,0,-1),-1===Q&&(Q=L),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),m=L,L=e,e=f.add(z.x,z.y,-p.x,-p.y,0,-1),0<=m&&(0<=L&&0<=e)&&h.add(m,L,e),m=f.add(z.x,z.y,-u.x,-u.y,0,-1));0<=m&&(0<=L&&0<=e)&&h.add(m,L,e)}0<=m&&(0<=L&&0<=I)&&h.add(m,
L,I);0<=m&&(0<=I&&0<=Q)&&h.add(m,Q,I);this._outlineElementsNum+=3*(h.index-b)}}};h.prototype._processFill=function(a,f){var h;1<f.length&&(h=[]);for(var b=0,n=0;n<f.length;n++){var k=f[n];0!==b&&h.push(b);b+=a[k].length}for(var b=2*b,n=new Float64Array(b),m=0,x=0;x<f.length;x++)for(var k=f[x],k=a[k],u=k.length,p=0;p<u;++p)n[m++]=k[p].x,n[m++]=k[p].y;h=e(n,h,2);m=h.length;if(0<m){x=this.polygonVertexBuffer.index;for(k=0;k<b;)this.polygonVertexBuffer.add(n[k++],n[k++]);for(b=0;b<m;)this.polygonIndexBuffer.add(x+
h[b++],x+h[b++],x+h[b++]);this._triangleElementsNum+=m}};h._area=function(a){for(var f=0,h=a.length-1,e=0;e<h;e++)f+=a[e].x*a[e+1].y-a[e+1].x*a[e].y;return f};return h}(p)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function r(f,g,l){l=l||2;D=f.length/l+(g?2*g.length:0);L=!1;var s=g&&g.length,n=s?g[0]*l:f.length,H=a(f,0,n,l,!0),p=[];if(!H)return p;var u,x,J,A;if(s)a:{var v=l,s=[],r,F,S;A=0;for(r=g.length;A<r;A++)F=g[A]*v,S=A<r-1?g[A+1]*v:f.length,F=a(f,F,S,v,!1),F===F.next&&
(F.steiner=!0),s.push(h(F));s.sort(k);for(A=0;A<s.length;A++){if(!H){H=null;break a}g=s[A];v=H;if(v=e(g,v))g=z(v,g),b(g,g.next);H=b(H,H.next)}}if(L)return p;if(f.length>80*l){u=J=f[0];x=s=f[1];for(v=l;v<n;v+=l)A=f[v],g=f[v+1],A<u&&(u=A),g<x&&(x=g),A>J&&(J=A),g>s&&(s=g);J=Math.max(J-u,s-x)}m(H,p,l,u,x,J);return p}function a(a,f,h,e,b){var g;if(b===0<A(a,f,h,e))for(b=f;b<h;b+=e)g=J(b,a[b],a[b+1],g);else for(b=h-e;b>=f;b-=e)g=J(b,a[b],a[b+1],g);g&&l(g,g.next)&&(x(g),g=g.next);return g}function b(a,f){if(!a)return a;
f||(f=a);var h=a,e,b=0,s=D*D/2;do{e=!1;if(!h.steiner&&(l(h,h.next)||0===g(h.prev,h,h.next))){x(h);h=f=h.prev;if(h===h.next)return null;e=!0}else h=h.next;if(b++>s)return L=!0,null}while(e||h!==f);return f}function m(a,h,e,k,u,J,y){if(a){if(!y&&J){var A=a,t=A;do null===t.z&&(t.z=f(t.x,t.y,k,u,J)),t.prevZ=t.prev,t=t.nextZ=t.next;while(t!==A);t.prevZ.nextZ=null;t.prevZ=null;var A=t,D,w,v,r,F,S,K=1;do{t=A;v=A=null;for(r=0;t;){r++;w=t;for(D=F=0;D<K&&!(F++,w=w.nextZ,!w);D++);for(S=K;0<F||0<S&&w;)0===F?
(D=w,w=w.nextZ,S--):0===S||!w?(D=t,t=t.nextZ,F--):t.z<=w.z?(D=t,t=t.nextZ,F--):(D=w,w=w.nextZ,S--),v?v.nextZ=D:A=D,D.prevZ=v,v=D;t=w}v.nextZ=null;K*=2}while(1<r)}for(A=a;a.prev!==a.next;){t=a.prev;w=a.next;if(J)a:{v=a;S=k;var N=u,T=J;r=v.prev;F=v;K=v.next;if(0<=g(r,F,K))v=!1;else{var Z=r.x>F.x?r.x>K.x?r.x:K.x:F.x>K.x?F.x:K.x,ba=r.y>F.y?r.y>K.y?r.y:K.y:F.y>K.y?F.y:K.y;D=f(r.x<F.x?r.x<K.x?r.x:K.x:F.x<K.x?F.x:K.x,r.y<F.y?r.y<K.y?r.y:K.y:F.y<K.y?F.y:K.y,S,N,T);S=f(Z,ba,S,N,T);for(N=v.nextZ;N&&N.z<=S;){if(N!==
v.prev&&N!==v.next&&s(r.x,r.y,F.x,F.y,K.x,K.y,N.x,N.y)&&0<=g(N.prev,N,N.next)){v=!1;break a}N=N.nextZ}for(N=v.prevZ;N&&N.z>=D;){if(N!==v.prev&&N!==v.next&&s(r.x,r.y,F.x,F.y,K.x,K.y,N.x,N.y)&&0<=g(N.prev,N,N.next)){v=!1;break a}N=N.prevZ}v=!0}}else v=p(a);if(v)h.push(t.i/e),h.push(a.i/e),h.push(w.i/e),x(a),A=a=w.next;else{if(L)break;a=w;if(a===A){if(y)if(1===y){y=h;A=e;t=a;do w=t.prev,v=t.next.next,!l(w,v)&&(H(w,t,t.next,v)&&n(w,v)&&n(v,w))&&(y.push(w.i/A),y.push(t.i/A),y.push(v.i/A),x(t),x(t.next),
t=a=v),t=t.next;while(t!==a);a=t;m(a,h,e,k,u,J,2)}else{if(2===y)a:{y=a;do{for(A=y.next.next;A!==y.prev;){if(t=y.i!==A.i){t=y;w=A;v=void 0;if(v=t.next.i!==w.i)if(v=void 0,v=t.prev.i!==w.i){v=v=void 0;b:{v=t;do{if(v.i!==t.i&&v.next.i!==t.i&&v.i!==w.i&&v.next.i!==w.i&&H(v,v.next,t,w)){v=!0;break b}v=v.next}while(v!==t);v=!1}if(v=!v)if(v=void 0,v=n(t,w))if(v=void 0,v=n(w,t)){v=t;r=!1;F=(t.x+w.x)/2;w=(t.y+w.y)/2;do v.y>w!==v.next.y>w&&F<(v.next.x-v.x)*(w-v.y)/(v.next.y-v.y)+v.x&&(r=!r),v=v.next;while(v!==
t);v=r}}t=v}if(t){a=z(y,A);y=b(y,y.next);a=b(a,a.next);m(y,h,e,k,u,J);m(a,h,e,k,u,J);break a}A=A.next}y=y.next}while(y!==a)}}else m(b(a),h,e,k,u,J,1);break}}}}}function p(a){var f=a.prev,h=a.next;if(0<=g(f,a,h))return!1;for(var e=a.next.next,b=0;e!==a.prev;){if(s(f.x,f.y,a.x,a.y,h.x,h.y,e.x,e.y)&&0<=g(e.prev,e,e.next))return!1;e=e.next;if(b++>D)return L=!0,!1}return!0}function k(a,f){return a.x-f.x}function e(a,f){var h=f,e=a.x,b=a.y,g=-Infinity,l;do{if(!h)return null;if(b<=h.y&&b>=h.next.y){var k=
h.x+(b-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(k<=e&&k>g){g=k;if(k===e){if(b===h.y)return h;if(b===h.next.y)return h.next}l=h.x<h.next.x?h:h.next}}h=h.next}while(h!==f);if(!l)return null;if(e===g)return l.prev;for(var k=l,H=l.x,u=l.y,p=Infinity,z,h=l.next;h!==k;){if(e>=h.x&&h.x>=H&&s(b<u?e:g,b,H,u,b<u?g:e,b,h.x,h.y))if(z=Math.abs(b-h.y)/(e-h.x),(z<p||z===p&&h.x>l.x)&&n(h,a))l=h,p=z;h=h.next}return l}function f(a,f,h,e,b){a=32767*(a-h)/b;f=32767*(f-e)/b;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|
a<<2)&858993459;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(a|a<<1)&1431655765|((f|f<<1)&1431655765)<<1}function h(a){var f=a,h=a;do f.x<h.x&&(h=f),f=f.next;while(f!==a);return h}function s(a,f,h,e,b,g,l,s){return 0<=(b-l)*(f-s)-(a-l)*(g-s)&&0<=(a-l)*(e-s)-(h-l)*(f-s)&&0<=(h-l)*(g-s)-(b-l)*(e-s)}function g(a,f,h){return(f.y-a.y)*(h.x-f.x)-(f.x-a.x)*(h.y-f.y)}function l(a,f){return a.x===f.x&&a.y===f.y}function H(a,f,h,e){return l(a,f)&&l(h,e)||l(a,e)&&l(h,f)?!0:0<g(a,f,h)!==
0<g(a,f,e)&&0<g(h,e,a)!==0<g(h,e,f)}function n(a,f){return 0>g(a.prev,a,a.next)?0<=g(a,f,a.next)&&0<=g(a,a.prev,f):0>g(a,f,a.prev)||0>g(a,a.next,f)}function z(a,f){var h=new u(a.i,a.x,a.y),e=new u(f.i,f.x,f.y),b=a.next,g=f.prev;a.next=f;f.prev=a;h.next=b;b.prev=h;e.next=h;h.prev=e;g.next=e;e.prev=g;return e}function J(a,f,h,e){a=new u(a,f,h);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function x(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);
a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function u(a,f,h){this.i=a;this.x=f;this.y=h;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(a,f,h,e){for(var b=0,g=h-e;f<h;f+=e)b+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return b}var D,L;r.deviation=function(a,f,h,e){var b=f&&f.length,g=Math.abs(A(a,0,b?f[0]*h:a.length,h));if(b)for(var b=0,l=f.length;b<l;b++)g-=Math.abs(A(a,f[b]*h,b<l-1?f[b+1]*h:a.length,h));for(b=f=0;b<e.length;b+=3){var l=e[b]*h,s=e[b+1]*h,k=e[b+2]*h;f+=Math.abs((a[l]-
a[k])*(a[s+1]-a[l+1])-(a[l]-a[s])*(a[k+1]-a[l+1]))}return 0===g&&0===f?0:Math.abs((f-g)/g)};r.flatten=function(a){for(var f=a[0][0].length,h={vertices:[],holes:[],dimensions:f},e=0,b=0;b<a.length;b++){for(var g=0;g<a[b].length;g++)for(var l=0;l<f;l++)h.vertices.push(a[b][g][l]);0<b&&(e+=a[b-1].length,h.holes.push(e))}return h};return r})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer".split(" "),
function(r,a,b,m,p,k){return function(a){function f(f,b,g,l,k){a.call(this,f,b);this.lineVertexBuffer=g;this.lineIndexBuffer=l;this.joinsVertexBuffer=k}b(f,a);Object.defineProperty(f.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"connectorStart",{get:function(){return this.pointConnectorStart},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"connectorCount",{get:function(){return this.pointConnectorCount},enumerable:!0,configurable:!0});f.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount;a.pointConnectorStart=this.pointConnectorStart;a.pointConnectorCount=this.pointConnectorCount};f.prototype.processFeatures=function(a,f){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=
0;this.pointConnectorStart=this.joinsVertexBuffer.index;this.pointConnectorCount=0;a&&a.setExtent(this.layerExtent);for(var e=new k.LineLayout(this.layer,this.zoom),b=0,H=this._features;b<H.length;b++){var n=H[b].getGeometry(a);this._processFeature(e,n)}};f.prototype._processFeature=function(a,f){if(f)for(var e=f.length,b=0;b<e;b++)this._processGeometry(f[b],a)};f.prototype._processGeometry=function(a,f){for(var e=a.length;2<=e&&a[e-1].isEqual(a[e-2]);)e--;if(!(2>e)){var b=a[e-1],k=a[0].isEqual(b);
if(!(k&&2===e)){var n=f.cap,z=f.join,p=Math.min(f.miterLimit,4),m=Math.min(f.roundLimit,1.4142),m=2/m*Math.sqrt(1-1/m/m),u,A,D,L,r,Q,R,C,G,M=-1,y=-1,B=-1,t=1,E=0;k&&(u=a[e-2],C=b.x-u.x,G=b.y-u.y,r=Math.sqrt(C*C+G*G),C/=r,G/=r);for(var w=this.lineVertexBuffer,v=this.lineIndexBuffer,U=this.joinsVertexBuffer,F=v.index,S=U.index,K=0;K<e;K++)if(void 0!==C&&(Q=-C,R=-G),u&&(A=u,L=r),u=a[K],b=z,A&&(E+=L),D=K+1<e?a[K+1]:void 0,k&&!D&&(D=a[1]),!D||!u.isEqual(D)){D?(C=D.x-u.x,G=D.y-u.y,r=Math.sqrt(C*C+G*G),
C/=r,G/=r):(C=-Q,G=-R);void 0===Q&&(Q=-C,R=-G);var N=Q+C,T=R+G,B=C*T-G*N,N=N/B,T=T/B,Z=Math.sqrt(N*N+T*T);2!==b&&Math.abs(B)<m&&Z<p&&(b=2);if(!A&&2===n)y=B=w.add(u.x,u.y,Q+t*R,R-Q*t,0,0,E),B=w.add(u.x,u.y,Q-R*t,R+Q*t,0,1,E),M=y,y=B;else if(!D&&2===n)B=w.add(u.x,u.y,C-G*t,G+C*t,0,0,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B,B=w.add(u.x,u.y,C+G*t,G-C*t,0,1,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B;else if(2===b)0.01>Math.abs(B)?(N=-G,T=C):Z>p&&(N=(Q-C)/B,T=(R-G)/B),Z>p&&(t=-t),B=w.add(u.x,u.y,N*
t,T*t,0,0,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B,B=w.add(u.x,u.y,-N*t,-T*t,0,1,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B,(!A||!D)&&1===n&&U.add(u.x,u.y);else{A&&(B=w.add(u.x,u.y,R*t,-Q*t,0,0,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B,B=w.add(u.x,u.y,-R*t,Q*t,0,1,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B);if((!A||!D)&&1===n)M=w.add(u.x,u.y,R*t,-Q*t,0,0,E),U.add(u.x,u.y);t=1;1===b&&(A&&(D&&(!k||0<K))&&U.add(u.x,u.y),y=M=-1);D&&(B=w.add(u.x,u.y,-G*t,C*t,0,0,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,
B),M=y,y=B,B=w.add(u.x,u.y,G*t,-C*t,0,1,E),0<=M&&(0<=y&&0<=B)&&v.add(M,y,B),M=y,y=B)}}this.triangleElementsCount+=3*(v.index-F);this.pointConnectorCount+=U.index-S}}};return f}(p)})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(r,a,b,m,p){r=function(){function a(e,f,h){this.type=e;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;this.maxzoom=f.maxzoom;this.filter=
f.filter;this.layout=f.layout;this.paint=f.paint;this.z=h;switch(e){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=
b.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=b.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=p.createFilter(this.filter)};a.prototype.hasLayoutProperty=function(a){var f=this._layoutProperties;return f&&f[a]?!0:!1};a.prototype.hasPaintProperty=function(a){var f=this._paintProperties;
return f?void 0!==f[a]:!1};a.prototype.getLayoutValue=function(a,f){var h,b=this._layoutProperties;b&&(b=b[a])&&(h=b.getValue(f));b=this._layoutDefinition[a];void 0===h&&(h=b["default"]);"enum"===b.type&&(h=b.values.indexOf(h));return h};a.prototype.getPaintValue=function(a,f){var h,b=this._paintProperties;b&&(b=b[a])&&(h=b.getValue(f));b=this._paintDefinition[a];void 0===h&&(h=b["default"]);"enum"===b.type&&(h=b.values.indexOf(h));return h};a.prototype._parseLayout=function(a){var f={},h;for(h in a)f[h]=
new m(this._layoutDefinition[h],a[h]);return f};a.prototype._parsePaint=function(a){var f={},h;for(h in a)f[h]=new m(this._paintDefinition[h],a[h]);return f};return a}();a.StyleLayer=r;r=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=a.getLayoutValue("line-round-limit",b)}}();a.LineLayout=r;r=function(){return function(a,b,f){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",
b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.offset=a.getLayoutValue("icon-offset",b);f&&(1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment"))&&
(this.rotationAlignment=0)}}();a.IconLayout=r;r=function(){return function(a,b,f){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",
b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",b);this.offset=a.getLayoutValue("text-offset",b);f&&(1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment"))&&
(this.rotationAlignment=0)}}();a.TextLayout=r})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(r,a){var b=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt",
"round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},
"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},
"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},
"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean",
"default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color",
"default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",
minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},
"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",
minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};
return a}();a.StyleDefinition=b})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(r,a,b,m){return function(){function a(b,e){var f;switch(b.type){case "number":f=!0;break;case "color":f=!0;e=a._parseColor(e);break;case "array":f="number"===b.value;break;default:f=!1}this.getValue=f?this._interpolate(e):this._piecewise(e)}a.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var h=b.length;if(0!==h){for(var s=
0,g=0;g<h;g++)if(b[g][0]<=a)s=g;else break;return b[s][1]}}:function(){return a}};a.prototype._interpolate=function(a){var b=a.stops;if(b){var f=a.base||1;return function(a){for(var s,g,l=b.length,k=0;k<l;k++){var n=b[k];if(n[0]<=a)s=n;else{g=n;break}}if(s&&g){k=g[0]-s[0];a-=s[0];a=1===f?a/k:(Math.pow(f,a)-1)/(Math.pow(f,k)-1);if(Array.isArray(s[1])){s=s[1];g=g[1];l=[];for(k=0;k<s.length;k++)l.push(m.interpolate(s[k],g[k],a));return l}return m.interpolate(s[1],g[1],a)}if(s)return s[1];if(g)return g[1]}}return function(){return a}};
a._parseColor=function(k){if(Array.isArray(k))return k;if("string"===typeof k){var e=new b(k);if(e)return[e.r/255,e.g/255,e.b/255,e.a||1]}if(k&&k.stops)return k.stops=k.stops.map(function(f){return[f[0],a._parseColor(f[1])]}),k;throw Error("Incorrect color definition "+k);};return a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(r,a){return function(){function a(m,p,k){this._op=m;"$type"===p?(this._val=k instanceof Array?k.map(function(e){return a._types.indexOf(e)}):
a._types.indexOf(k),this._op+=11):(this._key=p,this._val=k)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);
case 9:for(var b=0,k=this._val;b<k.length;b++){var e=k[b];if(e.filter(a))return!0}return!1;case 10:b=0;for(k=this._val;b<k.length;b++)if(e=k[b],!e.filter(a))return!1;return!0;case 11:b=0;for(k=this._val;b<k.length;b++)if(e=k[b],e.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);
case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(m){if(!m)return new a(0,void 0,!0);var p=m[0];if(1>=m.length)return new a(0,void 0,"any"!==p);switch(p){case "\x3d\x3d":return new a(1,m[1],m[2]);case "!\x3d":return new a(2,m[1],m[2]);case "\x3e":return new a(4,m[1],m[2]);case "\x3c":return new a(3,m[1],m[2]);case "\x3e\x3d":return new a(6,m[1],m[2]);case "\x3c\x3d":return new a(5,m[1],m[2]);case "in":return new a(7,m[1],m.slice(2));case "!in":return new a(8,m[1],m.slice(2));
case "any":return new a(9,void 0,m.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,m.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,m.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+p);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(r,a,b,m,p,k,e,f,h,s,g){var l=function(){return function(){}}(),H=function(){return function(a,f,h,b){this.line=f;this.shaping=a;this.iconMosaicItem=h;this.anchor=b}}();(function(){return function(){}})();return function(a){function z(f,h,b,e,g,l,s,k){a.call(this,f,h);this._markerRatio=1;this._markerVertexBuffer=b;this._markerIndexBuffer=e;this._textVertexBuffer=g;this._textIndexBuffer=l;this._placementEngine=s;this._workerTileHandler=k}b(z,a);Object.defineProperty(z.prototype,"markerIndexStart",
{get:function(){return this._markerTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"markerIndexCount",{get:function(){return this._markerTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});
Object.defineProperty(z.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0});z.prototype.copy=function(a,f,h,b,e){e=new z(this.layer,this.zoom,a,f,h,b,e,this._workerTileHandler);e.layerIndex=this.layerIndex;e.layerExtent=this.layerExtent;e._markerVertexStart=a.index;e._markerTriangleElementsStart=f.index;e._textVertexStart=h.index;e._textTriangleElementsStart=b.index;e._markerTriangleElementsNum=0;e._textTriangleElementsNum=0;e._symbolInstances=this._symbolInstances;e._glyphItems=
this._glyphItems;e._textLayout=this._textLayout;e._markerLayout=this._markerLayout;e._isLinePlacement=this._isLinePlacement;e._avoidEdges=this._avoidEdges;return e};z.prototype.getResources=function(a,f,h){var b=this.layer,e=this.zoom;a&&a.setExtent(this.layerExtent);for(var g=b.getLayoutValue("icon-image",e),s=b.getLayoutValue("text-field",e),n=b.getLayoutValue("text-font",e),b=b.getLayoutValue("text-transform",e),e=[],k=0,H=this._features;k<H.length;k++){var p=H[k],m=p.getGeometry(a);if(m&&0!==
m.length){var y=void 0;g&&(y=this._replaceKeys(g,p.values))&&f.add(y);var B=void 0,t=!1;if(s){B=this._replaceKeys(s,p.values);switch(b){case 2:B=B.toLowerCase();break;case 1:B=B.toUpperCase()}z._bidiEngine.hasBidiChar(B)&&(t=void 0,t="rtl"===z._bidiEngine.checkContextual(B)?"IDNNN":"ICNNN",B=z._bidiEngine.bidiTransform(B,t,"VLYSN"),t=!0);p=B.length;if(0<p){var r=h[n];r||(r=h[n]=new Set);for(var w=0;w<p;w++){var v=B.charCodeAt(w);r.add(v)}}}if(y||B)p=new l,p.sprite=y,p.label=B,p.rtl=t,p.geometry=m,
e.push(p)}}this._symbolFeatures=e};z.prototype.processFeatures=function(a,b){a&&a.setExtent(this.layerExtent);var g=this.layer,l=this.zoom,n=this._isLinePlacement=1===g.getLayoutValue("symbol-placement",l),k=this._avoidEdges=g.getLayoutValue("symbol-avoid-edges",l)&&!n,p=8*g.getLayoutValue("symbol-spacing",l),m=g.getLayoutValue("icon-image",l),r=g.getLayoutValue("text-field",l),C=this._workerTileHandler,G;m&&(this._markerLayout=new e.IconLayout(g,l,n),G=C.getSpriteItems());var M,y;if(r){var B=this._textLayout=
new e.TextLayout(g,l,n);M=void 0;B.font&&B.font.length&&(M=B.font[0]);y=0.5;switch(B.anchor){case 5:case 1:case 7:y=0;break;case 6:case 2:case 8:y=1}g=0.5;switch(B.anchor){case 5:case 3:case 6:g=0;break;case 7:case 4:case 8:g=1}l=0.5;switch(B.justify){case 0:l=0;break;case 2:l=1}var m=24*B.letterSpacing,r=n?0:24*B.maxWidth,t=24*B.lineHeight,B=[24*B.offset[0],24*B.offset[1]];M=C.getGlyphItems(M);y=new s(M,r,t,m,B,y,g,l)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=
this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._symbolInstances=C=[];this._glyphItems=M;g=this._textLayout;l=1;g&&g.size&&(l=g.size/24);m=g?g.maxAngle*h.C_DEG_TO_RAD:0;r=g?8*g.size:0;t=0;for(B=this._symbolFeatures;t<B.length;t++){var E=B[t],w=void 0;E.sprite&&(w=G[E.sprite]);var v=void 0,U=E.label,F=0;if(U&&(v=y.getShaping(U,E.rtl))&&0<
v.length){for(var F=1E30,U=-1E30,S=0,K=v;S<K.length;S++)var N=K[S],F=Math.min(F,N.x),U=Math.max(U,N.x);F=8*(U-F+48)*l}U=0;for(E=E.geometry;U<E.length;U++){S=E[U];N=void 0;n?(v&&(0<v.length&&g&&g.size)&&(K=8*g.size*(2+Math.min(2,4*Math.abs(g.offset[1]))),z._smoothVertices(S,K)),N=z._findAnchors(S,p,F)):N=[new f.Anchor(S[0].x,S[0].y)];for(K=0;K<N.length;K++){var T=N[K];!(0>T.x||4096<T.x||0>T.y||4096<T.y)&&(!n||!(0<F&&0===g.rotationAlignment)||z._honorsTextMaxAngle(S,T,F,m,r))&&C.push(new H(v,S,w,T))}}}for(n=
0;n<C.length;n++)this._processFeature(C[n],M,k)};z.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;for(var a=this._glyphItems,f=this._avoidEdges,h=0,b=this._symbolInstances;h<b.length;h++)this._processFeature(b[h],a,f)};
z.prototype._replaceKeys=function(a,f){return a.replace(/{([^{}]+)}/g,function(a,h){return h in f?f[h]:""})};z.prototype._processFeature=function(a,f,b){var e=a.line,g=a.iconMosaicItem,l=a.shaping,s=a.anchor,n=(a=this._markerLayout)&&!!g,H=!0,p=1;n&&(p=8*(a.size/(1/this._markerRatio)),H=a.optional||!g);var z=this._textLayout,m=z&&l&&0<l.length,y;y=1;var r=!0;m&&(y=z.size/24,y*=8,r=z.optional||!l||0===l.length);var t=new k.Point(0,-17),E;if(n){E=this._placementEngine.getIconPlacement(s,g,p,e,a,b);
if(E.footprint.minzoom===h.C_INFINITY&&!H)return;s.minzoom>E.footprint.minzoom&&(E.footprint.minzoom=s.minzoom)}var w;if(m&&(w=this._placementEngine.getTextPlacement(s,t,l,f,y,e,z,b))){if(w.footprint.minzoom===h.C_INFINITY&&!r)return;s.minzoom>w.footprint.minzoom&&(w.footprint.minzoom=s.minzoom)}if(!r&&!H||!H&&w&&w.footprint.minzoom!==h.C_INFINITY||!r&&E&&E.footprint.minzoom!==h.C_INFINITY)f=Math.max(E.footprint.minzoom,w.footprint.minzoom),E.footprint.minzoom=f,w.footprint.minzoom=f;w&&w.footprint.minzoom!==
h.C_INFINITY&&(z.ignorePlacement||this._placementEngine.add(w),this._addPlacedSymbols(w.shapes,w.footprint.minzoom,this.zoom,!1));E&&E.footprint.minzoom!==h.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(E),this._addPlacedSymbols(E.shapes,E.footprint.minzoom,this.zoom,!0))};z.prototype._addPlacedSymbols=function(a,f,b,e){f=Math.max(b+h.log2(f),0);for(var g=0;g<a.length;g++){var l=a[g],s=Math.max(b+h.log2(l.minzoom),f),n=Math.min(b+h.log2(l.maxzoom),25);if(!(n<=s)){var k=l.tl,H=l.tr,z=l.bl,
p=l.br,m=l.mosaicRect,r=-l.labelAngle,l=l.anchor,t=e?this._markerVertexBuffer:this._textVertexBuffer,E=e?this._markerIndexBuffer:this._textIndexBuffer,w=t.index,v=m.x,U=m.y,F=v+m.width,m=U+m.height;t.add(l.x,l.y,k.x,k.y,v,U,r,s,n,f);t.add(l.x,l.y,H.x,H.y,F,U,r,s,n,f);t.add(l.x,l.y,z.x,z.y,v,m,r,s,n,f);t.add(l.x,l.y,p.x,p.y,F,m,r,s,n,f);E.add(w+0,w+1,w+2);E.add(w+1,w+2,w+3);e?this._markerTriangleElementsNum+=6:this._textTriangleElementsNum+=6}}};z._findAnchors=function(a,b,e){b+=e;for(var g=0,l=a.length-
1,s=0;s<l;s++)g+=k.Point.distance(a[s],a[s+1]);s=0.5*(e||b);if(g<=s)return[];e=s/g;b=g/Math.max(Math.round(g/b),1);for(var g=0,l=-b/2,n=[],H=a.length-1,s=0;s<H;s++){for(var z=a[s],p=a[s+1],m=p.x-z.x,r=p.y-z.y,y=Math.sqrt(m*m+r*r),B=void 0;l+b<g+y;){var l=l+b,t=(l-g)/y,E=h.interpolate(z.x,p.x,t),t=h.interpolate(z.y,p.y,t);void 0===B&&(B=Math.atan2(r,m));n.push(new f.Anchor(E,t,B,s,e))}g+=y}return n};z.deviation=function(a,f,b){return Math.atan2((f.x-a.x)*(b.y-f.y)-(f.y-a.y)*(b.x-f.x),(f.x-a.x)*(b.x-
f.x)+(f.y-a.y)*(b.y-f.y))};z._honorsTextMaxAngle=function(a,f,b,h,e){var g=0;b/=2;for(var l=new k.Point(f.x,f.y),s=f.segment+1;g>-b;){--s;if(0>s)return!1;g-=k.Point.distance(a[s],l);l=a[s]}g+=k.Point.distance(a[s],a[s+1]);f=[];for(var l=0,n=a.length;g<b;){var H=a[s],z=void 0;do{++s;if(s===n)return!1;z=a[s]}while(z.isEqual(H));var p=s,m=void 0;do{++p;if(p===n)return!1;m=a[p]}while(m.isEqual(z));H=this.deviation(H,z,m);f.push({deviation:H,distToAnchor:g});for(l+=H;g-f[0].distToAnchor>e;)l-=f.shift().deviation;
if(Math.abs(l)>h)return!1;g+=k.Point.distance(z,m)}return!0};z._smoothVertices=function(a,f){if(!(0>=f)){var b=a.length;if(!(3>b)){var h=[],e=0;h.push(0);for(var g=1;g<b;g++)e+=k.Point.distance(a[g],a[g-1]),h.push(e);f=Math.min(f,0.2*e);e=[];e.push(a[0].x);e.push(a[0].y);var l=a[b-1].x,s=a[b-1].y,g=k.Point.sub(a[0],a[1]);g.normalize();a[0].x+=f*g.x;a[0].y+=f*g.y;g.assignSub(a[b-1],a[b-2]);g.normalize();a[b-1].x+=f*g.x;a[b-1].y+=f*g.y;for(g=1;g<b;g++)h[g]+=f;h[b-1]+=f;for(var n=0.5*f,g=1;g<b-1;g++){for(var H=
0,z=0,p=0,m=g-1;0<=m&&!(h[m+1]<h[g]-n);m--){var r=n+h[m+1]-h[g],t=h[m+1]-h[m],E=h[g]-h[m]<n?1:r/t;if(1E-6>Math.abs(E))break;var w=E*E,v=E*r-0.5*w*t,U=E*t/f,F=a[m+1],S=a[m].x-F.x,K=a[m].y-F.y,H=H+U/v*(F.x*E*r+0.5*w*(r*S-t*F.x)-w*E*t*S/3),z=z+U/v*(F.y*E*r+0.5*w*(r*K-t*F.y)-w*E*t*K/3),p=p+U}for(m=g+1;m<b&&!(h[m-1]>h[g]+n);m++){r=n-h[m-1]+h[g];t=h[m]-h[m-1];E=h[m]-h[g]<n?1:r/t;if(1E-6>Math.abs(E))break;w=E*E;v=E*r-0.5*w*t;U=E*t/f;F=a[m-1];S=a[m].x-F.x;K=a[m].y-F.y;H+=U/v*(F.x*E*r+0.5*w*(r*S-t*F.x)-w*
E*t*S/3);z+=U/v*(F.y*E*r+0.5*w*(r*K-t*F.y)-w*E*t*K/3);p+=U}e.push(H/p);e.push(z/p)}e.push(l);e.push(s);for(m=g=0;g<b;g++)a[g].x=e[m++],a[g].y=e[m++]}}};z._bidiEngine=new g;return z}(p)})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(r,a,b,m,p){r=function(){return function(a,f,b,e,n){void 0===b&&(b=0);void 0===e&&(e=-1);void 0===n&&(n=h);this.x=a;this.y=f;this.angle=b;this.segment=e;this.minzoom=n}}();a.Anchor=r;r=function(){return function(a,
f,b){this.glyph=a;this.x=f;this.y=b}}();a.ShapedGlyph=r;var k=function(){return function(a,f,b,e,n,k){void 0===e&&(e=!1);void 0===n&&(n=h);void 0===k&&(k=m.C_INFINITY);this.anchor=a;this.labelAngle=f;this.glyphAngle=b;this.upsideDown=e;this.minzoom=n;this.maxzoom=k}}(),e=function(){return function(a,f,b,h,e,k,m,p,r){this.tl=a;this.tr=f;this.bl=b;this.br=h;this.mosaicRect=e;this.labelAngle=k;this.anchor=m;this.minzoom=p;this.maxzoom=r}}();a.PlacedSymbol=e;var f=function(){return function(a,f){this.footprint=
a;this.shapes=f}}();a.Placement=f;var h=0.5;r=function(){function a(f){this.mapAngle=f;this._conflictEngine=new p.ConflictEngine(f)}a.prototype.getIconPlacement=function(a,l,s,n,k,r){var x=l.width/l.pixelRatio,u=l.height/l.pixelRatio;n=k.offset[0]-x/2;var A=k.offset[1]-u/2,x=n+x,u=A+u,D=l.rect,L=new b.Point(n,A),I=new b.Point(n+D.width/l.pixelRatio,A+D.height/l.pixelRatio),Q=new b.Point(n,I.y),R=new b.Point(I.x,A),C=k.rotate*m.C_DEG_TO_RAD;l=1===k.rotationAlignment;0<=a.segment&&!l&&(C+=a.angle);
if(0!==C){var G=Math.cos(C),M=Math.sin(C);L.rotate(G,M);I.rotate(G,M);Q.rotate(G,M);R.rotate(G,M)}G=8*k.padding;M=new b.Point(a.x,a.y);a=new p.Footprint(this.mapAngle,G,l);a.addBox(M,new p.Box(n,A,x,u),s,C,h,m.C_INFINITY);s=new e(L,R,Q,I,D,0,M,h,m.C_INFINITY);s=new f(a,[s]);n=h;k.allowOverlap||(n=this._conflictEngine.getMinZoom(s.footprint,n,r,l));a.minzoom=n;return s};a.prototype.getTextPlacement=function(a,l,s,n,z,r,x,u){for(var A=new b.Point(a.x,a.y),D=x.rotate*m.C_DEG_TO_RAD,L=0===x.rotationAlignment,
I=x.keepUpright,Q=h,R=!L,C=R?0:a.angle,G=0<=a.segment&&L,M=new p.Footprint(this.mapAngle,8*x.padding,R),y=[],B=!G,t=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,w=t,v=E,U=G?I:L&&I,F=[],S,K=0;K<s.length;K++){var N=s[K],T=n[N.glyph];if(T){var Z=T.rect;if(Z&&!(0>=Z.width||0>=Z.height)){var ba=T.metrics;B&&(S&&S!==N.y&&(M.addBox(A,new p.Box(t,w,E,v),z,D,h,m.C_INFINITY),t=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,w=t,v=E),S=N.y);var da=[];if(G){if(T=(l.x+N.x+ba.left-3+0.5*T.metrics.width)*
z,Q=this._placeGlyph(a,Q,T,r,a.segment,1,da),I&&(Q=this._placeGlyph(a,Q,T,r,a.segment,-1,da)),2<=Q)break}else da.push(new k(A,C,C)),L&&I&&da.push(new k(A,C+m.C_PI,C+m.C_PI,!0));for(var T=N.x+l.x+ba.left,N=N.y+l.y-ba.top,ha=T+ba.width,ba=N+ba.height,ca=new b.Point(T-3,N-3),X=new b.Point(ca.x+Z.width,ca.y+Z.height),ea=new b.Point(ca.x,X.y),W=new b.Point(X.x,ca.y),fa=0;fa<da.length;fa++){var $=da[fa],ia=ca.clone(),ja=ea.clone(),ka=W.clone(),la=X.clone(),ma=N,aa=ba,O=$.glyphAngle+D;if(0!==O){var V=Math.cos(O),
c=Math.sin(O);ia.rotate(V,c);la.rotate(V,c);ja.rotate(V,c);ka.rotate(V,c)}y.push(new e(ia,ka,ja,la,Z,$.labelAngle,$.anchor,$.minzoom,$.maxzoom));if(!U||this._legible($.labelAngle))B?(T<t&&(t=T),ma<w&&(w=ma),ha>E&&(E=ha),aa>v&&(v=aa)):2>$.minzoom&&M.addBox($.anchor,new p.Box(T,ma,ha,aa),z,O,$.minzoom,$.maxzoom);F.push($)}}}}if(2<=Q)return null;B&&M.addBox(A,new p.Box(t,w,E,v),z,D,h,m.C_INFINITY);a=new f(M,y);x.allowOverlap||(Q=this._conflictEngine.getMinZoom(a.footprint,Q,u,R));M.minzoom=Q;return a};
a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=m.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,f,h,e,s,p,r){var u=0>p?m.positiveMod(a.angle+m.C_PI,m.C_2PI):a.angle,A=this._legible(u),D=0;0>h&&(p*=-1,h*=-1,D=m.C_PI);0<p&&++s;a=new b.Point(a.x,a.y);var L=e[s],I=m.C_INFINITY;if(e.length<=s)return I;for(;;){var Q=L.x-a.x,R=L.y-a.y,C=Math.sqrt(Q*Q+R*R),G=Math.max(h/C,f),Q=m.positiveMod(Math.atan2(R/C,Q/C)+D,m.C_2PI);r.push(new k(a,
u,Q,A,G,I));if(G<=f)return G;a=L.clone();do{s+=p;if(e.length<=s||0>s)return G;L=e[s]}while(a.isEqual(L));I=L.x-a.x;Q=L.y-a.y;R=Math.sqrt(I*I+Q*Q);I*=C/R;Q*=C/R;a.x-=I;a.y-=Q;I=G}};return a}();a.PlacementEngine=r})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(r,a,b,m){r=function(){function a(f,b,e,g){this.left=f;this.top=b;this.right=e;this.bottom=g}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};
a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.rotate=function(a,b){var e=this.left,g=this.right,l=this.top,k=this.bottom,n=e*a-l*b,p=e*b+l*a,m=g*a-l*b,l=g*b+l*a,r=e*a-k*b,e=e*b+k*a,u=g*a-k*b,g=g*b+k*a;this.left=Math.min(n,m,r,u);this.top=Math.min(p,l,e,g);this.right=Math.max(n,m,r,u);this.bottom=Math.max(p,l,e,g)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=r;var p=function(){function a(f,
b,e,g){this.anchor=f;this.corners=b;this.minzoom=e;this.maxzoom=g}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=p;r=function(){function a(f,b,e){this.obstacles=[];this.mapAngle=f;this.padding=b;this.isScreenAligned=e;this.minzoom=k}a.prototype.addBox=function(a,h,e,g,l,k){var n=h.left*e-this.padding,m=h.top*
e-this.padding,r=h.right*e+this.padding;h=h.bottom*e+this.padding;n=[new b.Point(n,m),new b.Point(r,m),new b.Point(r,h),new b.Point(n,h)];0!==this.mapAngle&&(m=Math.cos(this.mapAngle),r=Math.sin(this.mapAngle),a=a.clone(),a.rotate(m,r));this.isScreenAligned||(g+=this.mapAngle);if(0!==g){m=Math.cos(g);r=Math.sin(g);n[0].rotate(m,r);n[1].rotate(m,r);n[2].rotate(m,r);n[3].rotate(m,r);g=0;for(m=1;4>m;m++)n[m].x<n[g].x?g=m:n[m].x===n[g].x&&n[m].y<n[g].y&&(g=m);if(g){r=[];for(m=0;4>m;m++)r.push(n[(m+g)%
4]);n=r}}this.obstacles.push(new p(a,n,l,k))};return a}();a.Footprint=r;var k=0.5;r=function(){function a(f){this._grid=[];this._angle=f;this._c=Math.cos(f);this._s=Math.sin(f)}a.prototype.add=function(f){var b=this._grid,s=0;for(f=f.obstacles;s<f.length;s++)for(var g=f[s],l=g.anchor,k=a._gridClamp(Math.min(g.left()+l.x,l.x)),n=a._gridClamp(Math.max(g.right()+l.x,l.x)),m=a._gridClamp(Math.min(g.top()+l.y,l.y)),l=a._gridClamp(Math.max(g.bottom()+l.y,l.y));m<=l;m++)for(var p=k;p<=n;p++){var r=b[16*
m+p];r||(r=b[16*m+p]=[]);r.push(g)}};a.prototype.getMinZoom=function(f,b,s,g){if(0===f.obstacles.length)return m.C_INFINITY;s=this._grid;g=0;for(f=f.obstacles;g<f.length;g++)for(var l=f[g],k=l.anchor,n=a._gridClamp(Math.min(l.left()+k.x,k.x)),p=a._gridClamp(Math.max(l.right()+k.x,k.x)),r=a._gridClamp(Math.min(l.top()+k.y,k.y)),k=a._gridClamp(Math.max(l.bottom()+k.y,k.y));r<=k;r++)for(var x=n;x<=p;x++){var u=s[16*r+x];if(u)for(var A=0;A<u.length;A++){var D=u[A];if(!(l.minzoom>=D.maxzoom||D.minzoom>=
l.maxzoom))if(b=a._calcPlacementZoom(l,D,b),2<=b)return m.C_INFINITY}}return 2>b?b:m.C_INFINITY};a._gridClamp=function(a){return m.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(f,b,s){var g=b.anchor.x-f.anchor.x;if(0===g&&(f.right()<b.left()||b.right()<f.left()))return s;var l=b.anchor.y-f.anchor.y;if(0===l&&(f.bottom()<b.top()||b.bottom()<f.top()))return s;var k=m.C_INFINITY;if(0!==g){var n=(0<g?f.right()-b.left():f.left()-b.right())/g;n<k&&(k=n);g=0<g?a._calcExtZoomX(f,b,n):a._calcExtZoomX(b,
f,n);g<k&&(k=g)}0!==l&&(g=(0<l?f.bottom()-b.top():f.top()-b.bottom())/l,g<k&&(k=g),l=0<l?a._calcExtZoomY(f,b,g):a._calcExtZoomY(b,f,g),l<k&&(k=l));if(k<f.minzoom||k<b.minzoom)return s;k=Math.min(k,f.maxzoom,b.maxzoom);k<s&&(k=s);return k};a._calcExtZoomX=function(a,b,e){var g,l,k;if(a.anchor.y+a.corners[2].y/e<b.anchor.y+b.corners[0].y/e){g=a.corners[2].x-a.corners[3].x;k=a.corners[2].y-a.corners[3].y;var n=b.corners[1].x-b.corners[0].x;l=b.corners[1].y-b.corners[0].y;0<=g*l-k*n?a.anchor.y+a.corners[3].y/
e<b.anchor.y+b.corners[0].y/e?(e=a.corners[3],g=b.corners[0],l=b.corners[1],k=1):(e=b.corners[0],g=a.corners[3],l=a.corners[2],k=-1):a.anchor.y+a.corners[2].y/e>b.anchor.y+b.corners[1].y/e?(e=a.corners[2],g=b.corners[0],l=b.corners[1],k=1):(e=b.corners[1],g=a.corners[3],l=a.corners[2],k=-1)}else g=a.corners[2].x-a.corners[1].x,k=a.corners[2].y-a.corners[1].y,n=b.corners[3].x-b.corners[0].x,l=b.corners[3].y-b.corners[0].y,0>g*l-k*n?a.anchor.y+a.corners[1].y/e>b.anchor.y+b.corners[0].y/e?(e=a.corners[1],
g=b.corners[0],l=b.corners[3],k=1):(e=b.corners[0],g=a.corners[1],l=a.corners[2],k=-1):a.anchor.y+a.corners[2].y/e<b.anchor.y+b.corners[3].y/e?(e=a.corners[2],g=b.corners[0],l=b.corners[3],k=1):(e=b.corners[3],g=a.corners[1],l=a.corners[2],k=-1);n=l.x-g.x;l=l.y-g.y;return k*((e.y-g.y)*n-(e.x-g.x)*l)/((a.anchor.x-b.anchor.x)*l-(a.anchor.y-b.anchor.y)*n)};a._calcExtZoomY=function(a,b,e){var g,l,k;if(a.anchor.x+a.corners[3].x/e<b.anchor.x+b.corners[1].x/e){g=a.corners[3].x-a.corners[2].x;k=a.corners[3].y-
a.corners[2].y;var n=b.corners[0].x-b.corners[1].x;l=b.corners[0].y-b.corners[1].y;0>g*l-k*n?a.anchor.x+a.corners[2].x/e<b.anchor.x+b.corners[1].x/e?(e=a.corners[2],g=b.corners[1],l=b.corners[0],k=1):(e=b.corners[1],g=a.corners[2],l=a.corners[3],k=-1):a.anchor.x+a.corners[3].x/e>b.anchor.x+b.corners[0].x/e?(e=a.corners[3],g=b.corners[1],l=b.corners[0],k=1):(e=b.corners[0],g=a.corners[2],l=a.corners[3],k=-1)}else g=a.corners[3].x-a.corners[0].x,k=a.corners[3].y-a.corners[0].y,n=b.corners[2].x-b.corners[1].x,
l=b.corners[2].y-b.corners[1].y,0<g*l-k*n?a.anchor.x+a.corners[0].x/e>b.anchor.x+b.corners[1].x/e?(e=a.corners[0],g=b.corners[1],l=b.corners[2],k=1):(e=b.corners[1],g=a.corners[0],l=a.corners[3],k=-1):a.anchor.x+a.corners[3].x/e<b.anchor.x+b.corners[2].x/e?(e=a.corners[3],g=b.corners[1],l=b.corners[2],k=1):(e=b.corners[2],g=a.corners[0],l=a.corners[3],k=-1);n=l.x-g.x;l=l.y-g.y;return k*((e.y-g.y)*n-(e.x-g.x)*l)/((a.anchor.x-b.anchor.x)*l-(a.anchor.y-b.anchor.y)*n)};return a}();a.ConflictEngine=r})},
"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(r,a,b){return function(){function a(b,k,e,f,h,s,g,l){this._glyphItems=b;this._maxWidth=k;this._lineHeight=e;this._letterSpacing=f;this._offset=h;this._hAnchor=s;this._vAnchor=g;this._justify=l}a.prototype.getShaping=function(a,k){for(var e=this._glyphItems,f=this._letterSpacing,h=this._offset[0],s=this._offset[1],g=[],l=0,m=a.length;l<m;l++){var n=a.charCodeAt(l),r=e[n];r&&(g.push(new b.ShapedGlyph(n,
h,s)),h+=r.metrics.advance+f)}if(0<g.length){r=this._maxWidth;e=this._lineHeight;h=this._justify;m=g.length;n=s=f=0;if(0!==r)for(var J=0,x=0,l=0;l<m;l++){var u=g[l];u.x-=x;u.y=k?u.y-e*f:u.y+e*f;if(u.x>r&&0<J){for(var A=g[J+1].x,n=Math.max(A,n),D=J+1;D<=l;D++)g[D].y=k?g[D].y-e:g[D].y+e,g[D].x-=A;h&&this._applyJustification(g,s,J-1);s=J+1;J=0;x+=A;f++}32===u.glyph&&(J=l)}l=g[m-1];n=Math.max(n,l.x+this._glyphItems[l.glyph].metrics.advance);h&&this._applyJustification(g,s,m-1);m=(h-this._hAnchor)*n;l=
(-this._vAnchor*(f+1)+0.5)*e;k&&f&&(l+=f*e);for(e=0;e<g.length;e++)f=g[e],f.x+=m,f.y+=l}return g};a.prototype._applyJustification=function(a,b,e){for(var f=a[e],f=(f.x+this._glyphItems[f.glyph].metrics.advance)*this._justify;b<=e;b++)a[b].x-=f};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(r,a,b){function m(a,b,c,d,e){var h=a;void 0===b&&(b=e.defInFormat);void 0===c&&(c=e.defOutFormat);void 0===d&&(d=e.defSwap);if(b!==
c){var g,l=b.substring(0,1);g=b.substring(1,4);var n=c.substring(0,1),s=c.substring(1,4);"C"===g.charAt(0)&&(g=p(h),g="ltr"===g||"rtl"===g?g.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=l+g);"C"===s.charAt(0)&&(g=p(h),"rtl"===g?s="RTL":"ltr"===g?(h=h.split(""),h.reverse(),g=p(h.join("")),s=g.toUpperCase()):s="L"===c.charAt(2)?"LTR":"RTL",c=n+s)}if(b===c)return a;n=b.substring(0,1);h=b.substring(1,4);l=c.substring(0,1);s=c.substring(1,4);e.inFormat=b;e.outFormat=c;e.swap=d;if("L"===n&&"VLTR"===c){if("LTR"===
h)return e.dir=R,k(a,e);if("RTL"===h)return e.dir=C,k(a,e)}if("V"===n&&"V"===l)return e.dir="RTL"===h?C:R,f(a,e);if("L"===n&&"VRTL"===c)return e.dir="LTR"===h?R:C,a=k(a,e),f(a);if("VLTR"===b&&"LLTR"===c)return e.dir=R,k(a,e);if("V"===n&&"L"===l&&h!==s)return a=f(a),"RTL"===h?m(a,"LLTR","VLTR",d,e):m(a,"LRTL","VRTL",d,e);if("VRTL"===b&&"LRTL"===c)return m(a,"LRTL","VRTL",d,e);if("L"===n&&"L"===l)return b=e.swap,e.swap=b.substr(0,1)+"N","RTL"===h?(e.dir=C,a=k(a,e),e.swap="N"+b.substr(1,2),e.dir=R,a=
k(a,e)):(e.dir=R,a=k(a,e),e.swap="N"+b.substr(1,2),a=m(a,"VLTR","LRTL",e.swap,e)),a}function p(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function k(a,b){var c=a.split(""),f=[];e(c,f,b);if(!(0===b.hiLevel||b.swap.substr(0,1)===b.swap.substr(1,2)))for(var d=0;d<c.length;d++)if(1===f[d]){var h=c,l=d,k;b:{k=c[d];for(var n=void 0,s=0,m=y.length-1;s<=m;)if(n=Math.floor((s+m)/2),k<y[n][0])m=n-1;else if(k>y[n][0])s=n+1;else{k=
y[n][1];break b}}h[l]=k}g(2,c,f,b);g(1,c,f,b);D=f;return c.join("")}function e(a,b,c){var f=a.length,d=c.dir?da:ba,e=null,h=null,g=null,e=0,h=h=null,k=-1,n=h=null,s=[],m=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(h=0;h<f;h++){var n=s,g=h,p=a[h].charCodeAt(0),q=oa[p>>8];n[g]=q<aa?q:pa[q-aa][p&255]}for(n=0;n<f;n++){m[n]=h=l(a,s,m,n,c);e=d[e][h];h=e&240;e&=15;b[n]=g=d[e][I];if(0<h){if(16===h)for(h=k;h<n;h++)b[h]=1;k=-1}if(h=d[e][Q])-1===k&&(k=n);else if(-1<k){for(h=
k;h<n;h++)b[h]=g;k=-1}s[n]===fa&&(b[n]=0);c.hiLevel|=g}if(c.hasUbatS)for(a=0;a<f;a++)if(s[a]===$){b[a]=c.dir;for(d=a-1;0<=d;d--)if(s[d]===ja)b[d]=c.dir;else break}}function f(a,b){var c=a.split("");if(b){var f=[];e(c,f,b);D=f}c.reverse();u.reverse();return c.join("")}function h(a){for(var b=0;b<T.length;b++)if(a>=T[b]&&a<=Z[b])return!0;return!1}function s(a,b,c,f){for(;b*c<f&&n(a[b]);)b+=c;return b*c<f&&h(a[b])?!0:!1}function g(a,b,c,f){if(!(f.hiLevel<a))if(1===a&&f.dir===C&&!f.hasUbatB)b.reverse(),
u.reverse();else{f=b.length;for(var d=0,e,h,g;d<f;){if(c[d]>=a){for(e=d+1;e<f&&c[e]>=a;)e++;for(h=e-1;d<h;d++,h--)g=b[d],b[d]=b[h],b[h]=g,g=u[d],u[d]=u[h],u[h]=g;d=e}d++}}}function l(a,b,c,f,d){return{UBAT_L:function(){d.lastArabic=!1;return ha},UBAT_R:function(){d.lastArabic=!1;return ca},UBAT_ON:function(){return W},UBAT_AN:function(){return ea},UBAT_EN:function(){return d.lastArabic?ea:X},UBAT_AL:function(){d.lastArabic=!0;d.hasUbatAl=!0;return ca},UBAT_WS:function(){return W},UBAT_CS:function(){var a,
e;if(1>f||f+1>=b.length||(a=c[f-1])!==X&&a!==ea||(e=b[f+1])!==X&&e!==ea)return W;d.lastArabic&&(e=ea);return e===a?e:W},UBAT_ES:function(){return(0<f?c[f-1]:fa)===X&&f+1<b.length&&b[f+1]===X?X:W},UBAT_ET:function(){if(0<f&&c[f-1]===X)return X;if(d.lastArabic)return W;for(var a=f+1,e=b.length;a<e&&b[a]===ka;)a++;return a<e&&b[a]===X?X:W},UBAT_NSM:function(){if("VLTR"===d.inFormat){for(var e=b.length,h=f+1;h<e&&b[h]===la;)h++;if(h<e&&(e=a[f],h=b[h],(1425<=e&&2303>=e||64286===e)&&(h===ca||h===ia)))return ca}return 1>
f||b[f-1]===fa?W:c[f-1]},UBAT_B:function(){d.lastArabic=!0;d.hasUbatB=!0;return d.dir},UBAT_S:function(){d.hasUbatS=!0;return W},UBAT_LRE:function(){d.lastArabic=!1;return W},UBAT_RLE:function(){d.lastArabic=!1;return W},UBAT_LRO:function(){d.lastArabic=!1;return W},UBAT_RLO:function(){d.lastArabic=!1;return W},UBAT_PDF:function(){d.lastArabic=!1;return W},UBAT_BN:function(){return W}}[ma[b[f]]]()}function H(a,b){for(var c=0;c<w.length;c++)if(a===w[c])return b[c];return a}function n(a){return"\u064b"<=
a&&"\u0655">=a?!0:!1}function z(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function J(a,b){for(var c=0;c<B.length;c++)if(a===B[c])return b[c];return a}function x(a,b,c,f){for(var d=0;d<a.length;d++)if(a[d]>b||!c&&a[d]===b)a[d]+=f}r.getObject("string",!0,dojox);r=a("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,c){this.sourceToTarget=[];this.targetToSource=
[];if(!a)return"";var f=this.sourceToTarget,d=this.targetToSource,e=a.length;u=[];D=[];for(var g=0;g<e;g++)f[g]=g,d[g]=g,u[g]=g;if(!this.checkParameters(b,c))return a;b=this.inputFormat;c=this.outputFormat;var f=a,f=L,g=z(b.charAt(1)),d=z(c.charAt(1)),l="I"===b.charAt(0)?"L":b.charAt(0),e="I"===c.charAt(0)?"L":c.charAt(0),g=l+g,d=e+d,e=b.charAt(2)+c.charAt(2);f.defInFormat=g;f.defOutFormat=d;f.defSwap=e;a=m(a,g,d,e,f);f=!1;if("R"===c.charAt(1))f=!0;else if("C"===c.charAt(1)||"D"===c.charAt(1))f=this.checkContextual(a);
d=this.sourceToTarget=u;e=Array(d.length);for(g=0;g<d.length;g++)e[d[g]]=g;A=this.targetToSource=e;if(b.charAt(3)===c.charAt(3))f=a;else if("S"===c.charAt(3))if(b=f,c=!0,0===a.length)f=void 0;else{void 0===b&&(b=!0);void 0===c&&(c=!0);a=String(a);a=a.split("");var k=0,d=1,f=a.length;b||(k=a.length-1,d=-1,f=1);for(var e=f,g=c,p=0,f=[],l=0;k*d<e;k+=d)if(h(a[k])||n(a[k])){var q;if(q="\u0644"===a[k])b:{for(var r=a,y=k+d,C=d,G=e;y*C<G&&n(r[y]);)y+=C;q=" ";if(y*C<G){q=r[y];for(r=0;r<B.length;r++)if(B[r]===
q){q=!0;break b}}q=!1}if(q){a[k]=0===p?J(a[k+d],t):J(a[k+d],E);k+=d;p=a;q=k;r=d;for(y=e;q*r<y&&n(p[q]);)q+=r;q*r<y&&(p[q]=" ");g&&(f[l]=k,l++);p=0}else{q=a[k];if(1===p){r=a;y=k;if(s(a,k+d,d,e))b:{C=a[k];for(G=0;G<w.length;G++)if(C===w[G]){C=F[G];break b}}else C=H(a[k],U);r[y]=C}else!0===s(a,k+d,d,e)?a[k]=H(a[k],S):a[k]=H(a[k],v);n(q)||(p=1);b:{for(r=0;r<K.length;r++)if(K[r]===q){q=!0;break b}q=!1}!0===q&&(p=0)}}else p=0;d="";for(e=0;e<a.length;e++){if(g=c){b:{for(g=0;g<f.length;g++)if(f[g]===e)break b;
g=-1}g=-1<g}g?(x(A,e,!b,-1),u.splice(e,1)):d+=a[e]}f=d}else if(b=a,c=f,a=!0,0===b.length)f=void 0;else{void 0===a&&(a=!0);void 0===c&&(c=!0);b=String(b);f="";d=[];d=b.split("");for(e=0;e<b.length;e++)g=!1,"\ufe70"<=d[e]&&"\ufeff">d[e]?(l=b.charCodeAt(e),"\ufef5"<=d[e]&&"\ufefc">=d[e]?(c?(0<e&&a&&" "===d[e-1]?f=f.substring(0,f.length-1)+"\u0644":(f+="\u0644",g=!0),f+=B[(l-65269)/2]):(f+=B[(l-65269)/2],f+="\u0644",e+1<b.length&&a&&" "===d[e+1]?e++:g=!0),g&&(x(A,e,!0,1),u.splice(e,0,u[e]))):f+=N[l-65136]):
f+=d[e]}this.sourceToTarget=u;this.targetToSource=A;this.levels=D;return f},_inputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=
p(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(b){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return M.test(a)}});var u=[],A=[],D=[],L={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},I=5,Q=6,R=0,C=1,G=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,M=/[\u0591-\u06ff\ufb1d-\ufefc]/,y=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],
["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],B=["\u0622","\u0623","\u0625","\u0627"],t=["\ufef5","\ufef7","\ufef9",
"\ufefb"],E=["\ufef6","\ufef8","\ufefa","\ufefc"],w="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),v="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),F="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
S="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),K="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),N="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
T=["\u0621","\u0641"],Z=["\u063a","\u064a"],ba=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],da=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ha=0,ca=1,X=2,ea=3,W=4,fa=5,$=6,ia=7,ja=8,ka=11,la=12,ma="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),aa=100;a=ha;b=ca;var O=X,V=ea,c=W,ga=fa,na=$,d=ia,Y=ja,P=ka,
q=la,oa=[aa+0,a,a,a,a,aa+1,aa+2,aa+3,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa+4,c,c,c,a,c,a,c,a,c,c,c,a,a,c,c,a,a,a,a,a,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,a,a,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,a,a,c,c,a,a,c,c,a,a,c,c,c,c,c,c,c,c,c,c,c,c,c,c,
c,c,c,c,c,c,c,c,c,a,a,a,aa+5,d,d,aa+6,aa+7],pa=[[18,18,18,18,18,18,18,18,18,na,ga,na,Y,ga,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ga,ga,ga,na,Y,c,c,P,P,P,c,c,c,c,c,10,9,10,9,9,O,O,O,O,O,O,O,O,O,O,9,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,18,18,18,18,18,18,ga,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,c,P,P,P,P,c,c,c,c,a,c,c,18,c,c,P,P,O,O,c,a,c,c,c,O,a,c,c,c,c,c,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,a,a,a,a,a,a,a,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,a,c,c,c,c,c,c,c,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,
q,q,q,b,q,b,q,q,b,q,q,b,q,c,c,c,c,c,c,c,c,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,c,c,c,c,c,b,b,b,b,b,c,c,c,c,c,c,c,c,c,c,c],[V,V,V,V,c,c,c,c,d,P,P,d,9,d,c,c,q,q,q,q,q,q,q,q,q,q,q,d,c,c,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,V,V,V,V,V,V,V,V,V,V,P,V,V,d,d,d,q,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,
d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,q,q,q,q,q,q,q,V,c,q,q,q,q,q,q,d,d,q,q,c,q,q,q,q,d,d,O,O,O,O,O,O,O,O,O,O,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,d,d,q,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,c,c,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,q,q,q,q,q,q,q,q,q,
q,q,d,c,c,c,c,c,c,c,c,c,c,c,c,c,c,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,q,q,q,q,q,q,q,q,q,b,b,c,c,c,c,b,c,c,c,c,c],[Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,18,18,18,a,b,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,Y,ga,13,14,15,16,17,9,P,P,P,P,P,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,9,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,Y,18,18,18,18,18,c,c,c,c,c,18,18,18,18,18,18,O,a,c,c,O,O,O,O,O,O,10,10,c,c,c,a,O,O,O,O,O,O,O,O,O,O,10,10,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,
c,c,c,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[a,a,a,a,a,a,a,c,c,c,c,c,c,c,c,c,c,c,c,a,a,a,a,a,c,c,c,c,c,b,q,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,c,b,b,b,b,b,c,b,c,b,b,c,b,b,c,b,b,b,b,b,b,b,b,b,b,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,
d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,q,q,q,q,q,q,q,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,9,c,9,c,c,9,c,c,c,c,c,c,c,c,c,P,c,c,10,10,c,c,c,c,c,P,P,c,c,c,c,c,d,d,d,d,d,c,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,
d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,c,18],[c,c,c,P,P,P,c,c,c,c,c,10,9,10,9,9,O,O,O,O,O,O,O,O,O,O,9,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,c,c,c,c,c,c,c,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,c,c,c,a,a,a,a,a,a,c,c,a,a,a,a,a,a,c,c,a,a,a,a,a,a,c,c,a,a,a,c,c,c,P,P,c,c,c,P,P,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c]];return r})},"esri/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(r,a,b,m){var p=function(){return function(a,b,h){this.ratio=a;this.x=b;this.y=h}}();r=function(){function a(b,e,k){this.dz=b;this.yPos=
e;this.xPos=k}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var b;b=64/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,e){this._pushLine();this._prevIsIn=this._isIn(a,e);this._moveTo(a,e,this._prevIsIn);this._prevPt=new b.Point(a,e);this._firstPt=new b.Point(a,
e)};a.prototype.lineTo=function(a,e){var k=this._isIn(a,e),g,l,m,n,r,J;if(k)this._prevIsIn?this._lineTo(a,e,!0):(g=this._prevPt,l=new b.Point(a,e),m=this._intersect(l,g),this._lineTo(m.x,m.y,!0),this._lineTo(l.x,l.y,!0));else{if(this._prevIsIn)l=this._prevPt,g=new b.Point(a,e),m=this._intersect(l,g),this._lineTo(m.x,m.y,!0);else{var x=this._prevPt;g=new b.Point(a,e);if(!(x.x<=this.xmin&&g.x<=this.xmin||x.x>=this.xmax&&g.x>=this.xmax||x.y<=this.ymin&&g.y<=this.ymin||x.y>=this.ymax&&g.y>=this.ymax)){l=
[];if(x.x<this.xmin&&g.x>this.xmin||x.x>this.xmin&&g.x<this.xmin)m=(this.xmin-x.x)/(g.x-x.x),J=x.y+m*(g.y-x.y),J<=this.ymin?r=!1:J>=this.ymax?r=!0:l.push(new p(m,this.xmin,J));if(x.x<this.xmax&&g.x>this.xmax||x.x>this.xmax&&g.x<this.xmax)m=(this.xmax-x.x)/(g.x-x.x),J=x.y+m*(g.y-x.y),J<=this.ymin?r=!1:J>=this.ymax?r=!0:l.push(new p(m,this.xmax,J));if(x.y<this.ymin&&g.y>this.ymin||x.y>this.ymin&&g.y<this.ymin)m=(this.ymin-x.y)/(g.y-x.y),J=x.x+m*(g.x-x.x),J<=this.xmin?n=!1:J>=this.xmax?n=!0:l.push(new p(m,
J,this.ymin));if(x.y<this.ymax&&g.y>this.ymax||x.y>this.ymax&&g.y<this.ymax)m=(this.ymax-x.y)/(g.y-x.y),J=x.x+m*(g.x-x.x),J<=this.xmin?n=!1:J>=this.xmax?n=!0:l.push(new p(m,J,this.ymax));if(0===l.length)n?r?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):r?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<l.length&&l[0].ratio>l[1].ratio)this._lineTo(l[1].x,l[1].y,!0),this._lineTo(l[0].x,l[0].y,!0);else for(m=0;m<l.length;m++)this._lineTo(l[m].x,
l[m].y,!0)}}this._lineTo(g.x,g.y,!1)}this._prevIsIn=k;this._prevPt=new b.Point(a,e)};a.prototype.close=function(){var a,b;if(0<this.line.length&&(a=this._firstPt,b=this._prevPt,(a.x!==b.x||a.y!==b.y)&&this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)))a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&k.simplify(this.margin*this.finalRatio,
this.lines);return this.lines};a.prototype._isIn=function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,e){var k,g;if(e.x>=this.xmin&&e.x<=this.xmax)g=e.y<=this.ymin?this.ymin:this.ymax,k=a.x+(g-a.y)/(e.y-a.y)*(e.x-a.x);else if(e.y>=this.ymin&&e.y<=this.ymax)k=e.x<=this.xmin?this.xmin:this.xmax,g=a.y+(k-a.x)/(e.x-a.x)*(e.y-a.y);else{g=e.y<=this.ymin?this.ymin:this.ymax;k=e.x<=this.xmin?this.xmin:this.xmax;var l=(k-a.x)/(e.x-a.x),m=(g-a.y)/(e.y-
a.y);l<m?g=a.y+l*(e.y-a.y):k=a.x+m*(e.x-a.x)}return new b.Point(k,g)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,e,k){3!==this.type?k&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,
e))):(k||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,e)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,e,k){if(3!==this.type)if(k){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);e=Math.round((e-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(k=this.line[this.line.length-
1],k.equals(a,e)))return;this.line.push(new b.Point(a,e))}else this.line&&0<this.line.length&&this._pushLine();else if(k||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){k=this.line[this.line.length-1];var g=k.x===a,l=k.y===e;if(!g||!l)this._is_h&&g?(k.x=a,k.y=e,k=this.line[this.line.length-
2],this._is_h=k.x===a,this._is_v=k.y===e):this._is_v&&l?(k.x=a,k.y=e,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===e):(this.line.push(new b.Point(a,e)),this._is_h=g,this._is_v=l)}else this.line.push(new b.Point(a,e))};return a}();a.TileClipper=r;r=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,e){this.line&&this.lines.push(this.line);
this.line=[];var k=this._ratio;this.line.push(new b.Point(Math.round(a*k),Math.round(e*k)))};a.prototype.lineTo=function(a,e){var k=this._ratio;this.line.push(new b.Point(Math.round(a*k),Math.round(e*k)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&k.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=
r;var k=function(){function a(){}a.simplify=function(b,h){if(h){for(var k=-b,g=4096+b,l=-b,m=4096+b,n=[],p=[],r=h.length,x=0;x<r;++x){var u=h[x];if(u&&!(2>u.length))for(var A=u[0],D=void 0,L=u.length,I=1;I<L;++I)D=u[I],A.x===D.x&&(A.x<=k&&(A.y>D.y?(n.push(x),n.push(I),n.push(0),n.push(-1)):(p.push(x),p.push(I),p.push(0),p.push(-1))),A.x>=g&&(A.y<D.y?(n.push(x),n.push(I),n.push(1),n.push(-1)):(p.push(x),p.push(I),p.push(1),p.push(-1)))),A.y===D.y&&(A.y<=l&&(A.x<D.x?(n.push(x),n.push(I),n.push(2),n.push(-1)):
(p.push(x),p.push(I),p.push(2),p.push(-1))),A.y>=m&&(A.x>D.x?(n.push(x),n.push(I),n.push(3),n.push(-1)):(p.push(x),p.push(I),p.push(3),p.push(-1)))),A=D}0===n.length||0===p.length||(a.fillParent(h,p,n),a.fillParent(h,n,p),k=[],a.calcDeltas(k,p,n),a.calcDeltas(k,n,p),a.addDeltas(k,h))}};a.fillParent=function(a,b,e){for(var g=e.length,k=b.length,p=0;p<k;p+=4){for(var n=b[p],r=b[p+1],J=b[p+2],x=a[n][r-1],n=a[n][r],r=8092,u=-1,A=0;A<g;A+=4)if(e[A+2]===J){var D=e[A],L=e[A+1],I=a[D][L-1],D=a[D][L];switch(J){case 0:case 1:m.between(x.y,
I.y,D.y)&&m.between(n.y,I.y,D.y)&&(I=Math.abs(D.y-I.y),I<r&&(r=I,u=A));break;case 2:case 3:m.between(x.x,I.x,D.x)&&m.between(n.x,I.x,D.x)&&(I=Math.abs(D.x-I.x),I<r&&(r=I,u=A))}}b[p+3]=u}};a.calcDeltas=function(b,h,k){for(var g=h.length,l=0;l<g;l+=4){var m=a.calcDelta(l,h,k,[]);b.push(h[l]);b.push(h[l+1]);b.push(h[l+2]);b.push(m)}};a.calcDelta=function(b,h,k,g){b=h[b+3];if(-1===b)return 0;var l=g.length;if(1<l&&g[l-2]===b)return 0;g.push(b);return a.calcDelta(b,k,h,g)+1};a.addDeltas=function(a,b){for(var e=
a.length,g=0,k=0;k<e;k+=4){var m=a[k+3];m>g&&(g=m)}for(k=0;k<e;k+=4){var n=b[a[k]],p=a[k+1],m=g-a[k+3];switch(a[k+2]){case 0:n[p-1].x-=m;n[p].x-=m;break;case 1:n[p-1].x+=m;n[p].x+=m;break;case 2:n[p-1].y-=m;n[p].y-=m;break;case 3:n[p-1].y+=m,n[p].y+=m}}e=b.length;for(g=0;g<e;++g)(n=b[g])&&!(2>n.length)&&n[n.length-1].x!==n[0].x&&n[n.length-1].y!==n[0].y&&n.push(n[0])};return a}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(r,a,
b){return function(){function a(b,k){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=k?k.spriteUrl:b.sprite;this.glyphs=k?k.glyphsUrl:b.glyphs;this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],b=[],e=0,f=this.layers;e<f.length;e++){var h=f[e];if(1===h.type){var m=h.sourceLayer,m=m+("|"+JSON.stringify(h.minzoom)),m=m+("|"+JSON.stringify(h.maxzoom)),m=m+("|"+JSON.stringify(h.filter));a.push({key:m,layer:h})}2===
h.type&&(m=h.sourceLayer,m+="|"+JSON.stringify(h.minzoom),m+="|"+JSON.stringify(h.maxzoom),m+="|"+JSON.stringify(h.filter),m+="|"+JSON.stringify(h.layout["line-cap"]),m+="|"+JSON.stringify(h.layout["line-join"]),b.push({key:m,layer:h}))}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,e,f=a.length,h=0;h<f;h++){var m=a[h];if(m.key===b)m.layer.refLayerId=e;else if(b=m.key,e=m.layer.id,1===
m.layer.type&&!m.layer.hasPaintProperty("fill-outline-color"))for(var g=h+1;g<f;g++){var l=a[g];if(l.key===b){if(l.layer.hasPaintProperty("fill-outline-color")){a[h]=l;a[g]=m;e=l.layer.id;break}}else break}}};a._create=function(a,k,e){k=1-(1+k)*(1/(e.length+1));switch(a.type){case "background":return new b.StyleLayer(0,a,k);case "fill":return new b.StyleLayer(1,a,k);case "line":return new b.StyleLayer(2,a,k);case "symbol":return new b.StyleLayer(3,a,k);case "raster":throw Error("Unsupported vector tile raster layer");
case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(r,a,b,m,p,k){return function(){function a(){this._tiles={};this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new b;this._spriteInfo={};this._glyphInfo={};var e=this._tiles,k;for(k in e){var g=e[k];g&&g.setObsolete()}this._tiles={};a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new k(a)).layers;return m.resolve({data:""})};a.prototype.getTile=function(a,b){var e=this,g=a.key,k=new p(a.key,a.refKey,this,a.rotation),r=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return k.setDataAndParse(a.protobuff,b).then(function(a){r&&6!==k.status&&(e._tiles[g]=k);return a}).otherwise(function(a){k.setObsolete();return m.reject(a)})}).otherwise(function(a){k.setObsolete();e._tiles[k.tileKey]&&delete e._tiles[k.tileKey];return m.reject(a)}).always(function(a){return a})};
a.prototype.update=function(a){var b=this._tiles[a.key];return!b?m.reject():b.updateSymbols(a.rotation)};a.prototype.destructTileData=function(a){this._tiles[a.key]&&delete this._tiles[a.key];return m.resolve()};a.prototype.fetchSprites=function(a,b){var e=[],g=this._spriteInfo;a.forEach(function(a){void 0===g[a]&&e.push(a)});return 0===e.length?m.resolve():b.invoke("getSprites",{sprites:e}).then(function(a){a=a.spriteItems;for(var b in a)g[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};
a.prototype.fetchGlyphs=function(a,b,e,g){var k=[],p=this._glyphInfo[b];p?e.forEach(function(a){p[a]||k.push(a)}):(p=this._glyphInfo[b]=[],e.forEach(function(a){return k.push(a)}));return 0===k.length?m.resolve():g.invoke("getGlyphs",{tileID:a,font:b,codePoints:k}).then(function(a){a=a.glyphItems;for(var b in a)p[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()});