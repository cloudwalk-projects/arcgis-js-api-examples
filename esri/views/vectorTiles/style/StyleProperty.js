// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../Color","../GeometryUtils"],function(n,p,m,k){return function(){function e(a,b){var g;switch(a.type){case "number":g=!0;break;case "color":g=!0;b=e._parseColor(b);break;case "array":g="number"===a.value;break;default:g=!1}this.getValue=g?this._interpolate(b):this._piecewise(b)}e.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var l=b.length;if(0!==l){for(var c=0,d=0;d<l;d++)if(b[d][0]<=a)c=d;else break;return b[c][1]}}:function(){return a}};
e.prototype._interpolate=function(a){var b=a.stops;if(b){var g=a.base||1;return function(a){for(var c,d,e=b.length,f=0;f<e;f++){var h=b[f];if(h[0]<=a)c=h;else{d=h;break}}if(c&&d){f=d[0]-c[0];a-=c[0];a=1===g?a/f:(Math.pow(g,a)-1)/(Math.pow(g,f)-1);if(Array.isArray(c[1])){c=c[1];d=d[1];e=[];for(f=0;f<c.length;f++)e.push(k.interpolate(c[f],d[f],a));return e}return k.interpolate(c[1],d[1],a)}if(c)return c[1];if(d)return d[1]}}return function(){return a}};e._parseColor=function(a){if(Array.isArray(a))return a;
if("string"===typeof a){var b=new m(a);if(b)return[b.r/255,b.g/255,b.b/255,b.a||1]}if(a&&a.stops)return a.stops=a.stops.map(function(a){return[a[0],e._parseColor(a[1])]}),a;throw Error("Incorrect color definition "+a);};return e}()});