// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["../lib/glMatrix"],function(l){function m(b,c,a,d){d.clip[0]=0;d.clip[1]=a?d.len:Number.MAX_VALUE;for(a=0;a<b.length;a++){var e;var f=b[a],h=c;e=d;var k=g.dot(f,e.dir),f=-g.dot(h,f)-f[3];0>f&&0<=k?e=!1:-1E-6<k&&1E-6>k?e=!0:(0>f||0>k)&&!(0>f&&0>k)?e=!0:(f/=k,0<k?f<e.clip[1]&&(e.clip[1]=f):f>e.clip[0]&&(e.clip[0]=f),e=e.clip[0]<=e.clip[1]);if(!e)return!1}return!0}function n(b,c,a,d){b?(a&&d&&(h.len=g.dist(c,a)),g.set(b,h.dir)):d?(h.len=g.dist(c,a),g.scale(g.subtract(a,c,h.dir),1/h.len)):g.normalize(g.subtract(a,
c,h.dir));return h}var g=l.vec3d;l=l.vec2d;var h={dir:g.create(),len:0,clip:l.create()},p={planeSphere:function(b,c,a){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]<a},frustumSphere:function(b,c,a){for(var d=0;6>d;d++)if(!p.planeSphere(b[d],c,a))return!1;return!0},frustumRay:function(b,c,a,d){a=n(d,c,a,!1);return m(b,c,null,a)},frustumPoint:function(b,c){for(var a=0;6>a;a++)if(0>-g.dot(c,b[a])-b[a][3])return!1;return!0},conservativeFrustumConvexBuffer:function(b,c,a,d,e){e=e||0;for(var f=0;6>f;f++){for(var g=
(e+f)%6,k=!1,h=0;h<d;h++)if(0<=-b[g][0]*c[a+3*h]-b[g][1]*c[a+3*h+1]-b[g][2]*c[a+3*h+2]-b[g][3]){k=!0;break}if(!k)return g}return-1},frustumLineSegment:function(b,c,a,d){d=n(d,c,a,!0);return m(b,c,a,d)}};return p});