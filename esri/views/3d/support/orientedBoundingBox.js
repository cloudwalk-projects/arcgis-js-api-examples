// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","./aaBoundingBox","../lib/glMatrix"],function(h,e,n,d){function k(a,b){var c=b[0]*a.center[0]+b[1]*a.center[1]+b[2]*a.center[2]+b[3],d=l(a,b);return 0<c-d?1:0>c+d?-1:0}function l(a,b){f.conjugate(a.quaternion,m);f.multiplyVec3(m,b,g);var c=a.halfSize;return Math.abs(g[0]*c[0])+Math.abs(g[1]*c[1])+Math.abs(g[2]*c[2])}var f=d.quat4;h=d.vec3;d=d.mat3d;var m=f.create(),g=h.create(),p=d.create();d=function(){return function(a){this.buffer=new ArrayBuffer(56*a);this.obbs=Array(a);
for(var b=0;b<a;b++)this.obbs[b]={center:new Float64Array(this.buffer,56*b+0,3),halfSize:new Float32Array(this.buffer,56*b+24,3),quaternion:new Float32Array(this.buffer,56*b+36,4)}}}();e.ObbArray=d;e.intersectPlane=k;e.toAaBoundingBox=function(a,b){b||(b=n.create());var c=f.toMat3(a.quaternion,p),d=a.halfSize[0]*Math.abs(c[0])+a.halfSize[1]*Math.abs(c[3])+a.halfSize[2]*Math.abs(c[6]),e=a.halfSize[0]*Math.abs(c[1])+a.halfSize[1]*Math.abs(c[4])+a.halfSize[2]*Math.abs(c[7]),c=a.halfSize[0]*Math.abs(c[2])+
a.halfSize[1]*Math.abs(c[5])+a.halfSize[2]*Math.abs(c[8]);b[0]=a.center[0]-d;b[1]=a.center[1]-e;b[2]=a.center[2]-c;b[3]=a.center[0]+d;b[4]=a.center[1]+e;b[5]=a.center[2]+c;return b};e.minimumDistancePlane=function(a,b){var c=b[0]*a.center[0]+b[1]*a.center[1]+b[2]*a.center[2]+b[3],d=l(a,b);return Math.max(0,Math.abs(c)-d)};e.isVisible=function(a,b){for(var c=0;6>c;c++)if(0<k(a,b[c]))return!1;return!0}});