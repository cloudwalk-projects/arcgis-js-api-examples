// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../support/PromiseLightweight ./Graphics3DGraphic ./Graphics3DSymbolLayerFactory".split(" "),function(s,t,n,p,q,r){return function(l){function g(a,e,c){l.call(this);this.symbol=a;a=a.symbolLayers;c&&(a=c.concat(a));c=a.length;this.childGraphics3DSymbols=Array(a.length);this.childGraphics3DSymbolPromises=Array(a.length);for(var d=e.layerOrder,b=0,f=0,g=!1,m=function(a,c){c&&(this.childGraphics3DSymbols[a]=c,f++);b--;!this.isRejected()&&
(g&&1>b)&&(0<f?this.resolve():this.reject())},h=0;h<c;h++){var k=a.getItemAt(h);if(!1!==k.enabled&&(e.layerOrder=d+(1-(1+h)/c),e.layerOrderDelta=1/c,k=r.make(k,e,k._ignoreDrivers)))b++,this.childGraphics3DSymbolPromises[h]=k,k.then(m.bind(this,h,k),m.bind(this,h,null))}e.layerOrder=d;g=!0;!this.isRejected()&&1>b&&(0<f?this.resolve():this.reject())}n(g,l);g.prototype.createGraphics3DGraphic=function(a,e,c){for(var d=Array(this.childGraphics3DSymbols.length),b=0;b<this.childGraphics3DSymbols.length;b++){var f=
this.childGraphics3DSymbols[b];f&&(d[b]=f.createGraphics3DGraphic(a,e))}return new q(a,c||this,d)};g.prototype.layerPropertyChanged=function(a,e){for(var c=this.childGraphics3DSymbols.length,d=0;d<c;d++){var b=this.childGraphics3DSymbols[d];if(b&&!b.layerPropertyChanged(a,e,d))return!1}return!0};g.prototype.applyRendererDiff=function(a,e,c){return!this.isResolved()?!1:this.childGraphics3DSymbols.reduce(function(d,b,f){return d&&(!b||b.applyRendererDiff(a,e,c,f))},!0)};g.prototype.setDrawOrder=function(a,
e){for(var c=this.childGraphics3DSymbols.length,d=1/c,b=0;b<c;b++){var f=this.childGraphics3DSymbols[b];f&&f.setDrawOrder(a+(1-(1+b)/c),d,e)}};g.prototype.destroy=function(){this.isFulfilled()||this.reject();for(var a=0;a<this.childGraphics3DSymbolPromises.length;a++)this.childGraphics3DSymbolPromises[a]&&this.childGraphics3DSymbolPromises[a].destroy()};return g}(p.Promise)});