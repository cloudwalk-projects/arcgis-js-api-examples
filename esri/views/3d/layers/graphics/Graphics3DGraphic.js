// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define(["require","exports","../../support/aaBoundingBox","../../support/aaBoundingRect"],function(m,n,g,k){var h=g.create(),l=k.create();return function(){function e(a,c,b){this.graphics3DSymbol=c;this.graphic=a;this._graphics=b;this._labelGraphics=[];this.addedToSpatialIndex=!1}e.prototype.initialize=function(a,c){this._graphics.forEach(function(b){b&&b.initialize(a,c)})};e.prototype.clearLabelGraphics=function(){this._labelGraphics.forEach(function(a){return a.destroy()});this._labelGraphics.length=
0};e.prototype.addLabelGraphic=function(a,c,b){this._labelGraphics.push(a);a.initialize(c,b)};e.prototype.isDraped=function(){for(var a=0;a<this._graphics.length;a++){var c=this._graphics[a];if(c&&c.isDraped())return!0}return!1};e.prototype.areVisibilityFlagsSet=function(a,c){for(var b=!0,d=0;d<this._graphics.length;d++){var f=this._graphics[d];f&&(b=b&&f.areVisibilityFlagsSet(a,c))}for(d=0;d<this._labelGraphics.length;d++)(f=this._labelGraphics[d])&&(b=b&&f.areVisibilityFlagsSet(a,c));return b};
e.prototype.setVisibilityFlag=function(a,c){var b=!1,d=function(d){d&&(b=d.setVisibilityFlag(a,c)||b)};this._graphics.forEach(d);this._labelGraphics.forEach(d);return b};e.prototype.destroy=function(){var a=function(a){a&&a.destroy()};this._graphics.forEach(a);this._graphics.length=0;this._labelGraphics.forEach(a);this._labelGraphics.length=0};e.prototype.getBSRadius=function(){return this._graphics.reduce(function(a,c){return Math.max(a,c.getBSRadius())},0)};e.prototype.getCenterObjectSpace=function(){return this._graphics[0].getCenterObjectSpace()};
e.prototype.getProjectedBoundingBox=function(a,c,b){b?g.set(b,g.NEGATIVE_INFINITY):b=g.create(g.NEGATIVE_INFINITY);for(var d=0;d<this._graphics.length;d++){var f=this._graphics[d];if(f){var e=f.isDraped()?c:a;f&&f.getProjectedBoundingBox(e,h)&&g.expand(b,f.isDraped()?g.toRect(h,l):h)}}return g.allFinite(b)||k.allFinite(g.toRect(b,l))?b:null};e.prototype.mustAlignToTerrain=function(){for(var a=this._graphics.length,c=0;c<a;c++){var b=this._graphics[c];if(b&&b.mustAlignToTerrain())return!0}a=this._labelGraphics.length;
for(c=0;c<a;c++)if((b=this._labelGraphics[c])&&b.mustAlignToTerrain())return!0;return!1};e.prototype.alignWithElevation=function(a,c){for(var b=this._graphics.length,d=0;d<b;d++){var f=this._graphics[d];f&&f.alignWithElevation(a,c)}b=this._labelGraphics.length;for(d=0;d<b;d++)(f=this._labelGraphics[d])&&this._labelGraphics[d].alignWithElevation(a,c)};e.prototype.setDrawOrder=function(a,c,b){b[this.graphics3DSymbol.symbol.id]=!0;for(var d=this._graphics.length,f=0;f<d;f++){var e=this._graphics[f];
e&&e.setDrawOrder(a+(1-(1+f)/d),c,b)}};return e}()});