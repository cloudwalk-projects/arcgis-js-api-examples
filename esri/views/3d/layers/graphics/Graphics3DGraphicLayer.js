// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ./ElevationInfo ../../webgl-engine/Stage ../../lib/glMatrix ../../support/aaBoundingBox".split(" "),function(m,u,n,p,e,l,k){m=l.vec3d;var q=l.mat4d;l=function(){function a(c,b,d,r,f,s,e,g){this._addedToStage=!1;this.graphics3DSymbolLayer=c;this.uniqueMaterials=r;this.uniqueGeometries=d;this.uniqueTextures=f;this.stageObject=b;this.elevationAligner=s;this.elevationInfo=new t(e);this.stageLayer=this.stage=null;this._shown=!1;this._visibilityFlags=
{};this.visibilityMode=null!=g?g:a.VisibilityModes.HIDE_FACERANGE}a.prototype.initialize=function(c,b){this.stageLayer=c;this.stage=b;if(this.uniqueMaterials)for(var d=0;d<this.uniqueMaterials.length;d++)b.add(e.ModelContentType.MATERIAL,this.uniqueMaterials[d]);if(this.uniqueGeometries)for(d=0;d<this.uniqueGeometries.length;d++)b.add(e.ModelContentType.GEOMETRY,this.uniqueGeometries[d]);if(this.uniqueTextures)for(d=0;d<this.uniqueTextures.length;d++)b.add(e.ModelContentType.TEXTURE,this.uniqueTextures[d]);
b.add(e.ModelContentType.OBJECT,this.stageObject)};a.prototype.isDraped=function(){return!1};a.prototype.areVisibilityFlagsSet=function(c,b){for(var d=!0,a=Object.keys(this._visibilityFlags),f=0;f<a.length;f++){var e=a[f];if(e!==b){if(e===c)return this._visibilityFlags[e];d=d&&this._visibilityFlags[e]}}return d};a.prototype.setVisibilityFlag=function(c,b){this._visibilityFlags[c]=b;return this._calcAndSetVisibility()};a.prototype._calcAndSetVisibility=function(){if(null!=this.stage){var c=this.areVisibilityFlagsSet();
return this._shown!==c?((this._shown=c)?this._addedToStage?this.stageObject.unhideAllFaceRange():(this.stageLayer.addObject(this.stageObject),this._addedToStage=!0):this.visibilityMode===a.VisibilityModes.HIDE_FACERANGE?this.stageObject.hideAllFaceRanges():(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1),!0):!1}};a.prototype.destroy=function(){var c=this.stage;if(this.stageLayer){if(this.uniqueMaterials)for(var b=0;b<this.uniqueMaterials.length;b++)c.remove(e.ModelContentType.MATERIAL,
this.uniqueMaterials[b].getId());if(this.uniqueGeometries)for(b=0;b<this.uniqueGeometries.length;b++)c.remove(e.ModelContentType.GEOMETRY,this.uniqueGeometries[b].getId());if(this.uniqueTextures)for(b=0;b<this.uniqueTextures.length;b++)c.remove(e.ModelContentType.TEXTURE,this.uniqueTextures[b].getId())}c.remove(e.ModelContentType.OBJECT,this.stageObject.getId());this._addedToStage&&(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1);this._shown=!1;this.stage=this.stageLayer=null};
a.prototype.mustAlignToTerrain=function(){return null!==this.elevationAligner};a.prototype.alignWithElevation=function(c,b){this.elevationAligner&&this.elevationAligner(this,c,b)};a.prototype.setDrawOrder=function(c,b,d){};a.prototype.getBSRadius=function(){return this.stageObject.getBSRadius()};a.prototype.getCenterObjectSpace=function(){return this.stageObject.getCenter(!0)};a.prototype.getBoundingBoxObjectSpace=function(c){var b=this.stageObject;c||(c=k.create());k.setMin(c,b.getBBMin(!0));k.setMax(c,
b.getBBMax(!0));return c};a.prototype.getProjectedBoundingBox=function(c,b){for(var d=this.getBoundingBoxObjectSpace(b),a=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],f=0;f<a.length;f++){var e=a[f];g[0]=d[e[0]];g[1]=d[e[1]];g[2]=d[e[2]];q.multiplyVec3(this.stageObject.objectTransformation,g);h[3*f+0]=g[0];h[3*f+1]=g[1];h[3*f+2]=g[2]}if(c(h,0,8)){k.set(d,k.NEGATIVE_INFINITY);for(f=0;f<h.length;f+=3)for(a=0;3>a;a++)d[a]=Math.min(d[a],h[f+a]),d[a+3]=Math.max(d[a+3],h[f+a]);return d}return null};
a.prototype.getScreenSize=function(){throw Error("Not implemented for this symbol layer/graphic type");};a.VisibilityModes={REMOVE_OBJECT:0,HIDE_FACERANGE:1};return a}();var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=m.create(),t=function(a){function c(b){a.call(this,b);this.centerPointInElevationSR=null}n(c,a);return c}(p);return l});