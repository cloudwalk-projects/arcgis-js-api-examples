// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
define("../Navigation ./ConstraintsSpherical ./AnimationSpherical ./actions/PanSpherical ./actions/ZoomSpherical ./actions/RotateSpherical ../../webgl-engine/lib/Camera ../../support/earthUtils ../../lib/glMatrix".split(" "),function(q,r,s,t,u,v,w,l,m){var a=m.vec3d,d=m.mat4d,n=a.create(),p=a.create(),g=d.create();return q.createSubclass([r,s],{declaredClass:"esri.views.3d.navigation.spherical.NavigationSpherical",initialize:function(){this.pan=new t({navigation:this});this.zoom=new u({navigation:this});
this.rotate=new v({navigation:this});this._intersectTerrainSelector.enableBackfacesTerrain=!1},getInitialCamera:function(){return new w(a.createFrom(4*l.earthRadius,0,0),a.createFrom(l.earthRadius,0,0),a.createFrom(0,0,1))},fixTargetUpVector:function(){this.cameras.target.computeUpOnSphere()},setPoiAuto:function(b,c){var e=this.picker.pickAlongRay(this.cameras.target.eye,this.cameras.target.center,null,b);this.picker.pickedIntersectionPoint(e,n)&&(this.setCameraFromEyeAndCenter(this.cameras.target.eye,
n,{animate:!1}),a.set(this.cameras.target.center,this.cameras.current.center),c&&this.setCurrentToTarget())},rotateCameraWithPointsOnSphere:function(b,c,e,k,f){var h;null==f&&(f=a.length(b));1E-4<=Math.abs(a.length(b)-f)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere]: invalid radius for source point (got "+f+", but expected "+a.length(b)+", "+b+")"),h=a.length(b));1E-4<=Math.abs(a.length(c)-f)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere: invalid radius for target point (got "+
f+", but expected "+a.length(c)+")"),void 0===h&&(h=a.length(c)));void 0!==h&&(f=h);b=this.rotationFromPointsOnSphere(b,c,f,p);d.identity(g);d.rotate(g,b,p);d.multiplyVec3(g,e.eye,k.eye);d.multiplyVec3(g,e.center,k.center);d.multiplyVec3(g,e.up,k.up)},rotationFromPointsOnSphere:function(b,c,e,d){a.cross(b,c,d);return-Math.acos(1-a.dist2(b,c)/(2*e*e))}})});