// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t){var s=[0,0],u=16,v=750;return function(d){function x(){var a=this;d.call(this);this.height=
0;this.position=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.width=0;Object.defineProperty(this,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:u,time:v}});this._domHandles=new l;this.watch("interacting",function(c){var b=a.surface;b&&b.setAttribute("data-interacting",c.toString())})}a(x,d);x.prototype.getDefaults=function(){return c.mixin(this.inherited(arguments),{popup:{},ui:{}})};x.prototype.initialize=function(){var a=this,c=this._measureInfo,b=null;
m.init(this,"container",function(d,e,h,l){null==d&&null==e||(b&&(b.remove(),b=null,c.freq=u,c.time=v),c.task&&(c.task.remove(),c.task=null),d?(b=f(window,"resize",function(){c.freq=u;c.time=v}),c.task=g.addFrameTask({prepare:function(c){var b=a._measureInfo;b.time+=c.deltaTime;b.time<b.freq||(b.time=0,a._measure()?(b.freq=u,a._set("resizing",!0)):(b.freq=Math.min(v,2*b.freq),512<=b.freq&&a._set("resizing",!1)))}})):a._set("resizing",!1),a._measure(),d=a.root,e=a.surface,h=a.width,l=a.height,d&&(e&&
h&&l)&&(d.style.width=e.style.width=h+"px",d.style.height=e.style.height=l+"px"))})};x.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null};Object.defineProperty(x.prototype,"container",{set:function(a){var c=this._get("container");if(c!==a){c&&(c.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,h.destroy(this.root),this._set("root",null));if(a){a.classList.add("esri-view");c=document.createElement("div");c.className=
"esri-view-root";a.insertBefore(c,a.firstChild);this._set("root",c);var b=document.createElement("div");b.className="esri-view-surface";e.setSelectable(b,!1);c.appendChild(b);this._set("surface",b);this._forceReadyCycle();this.popupManager=new p({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",a)}},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"popup",{set:function(a){var c=
this._get("popup");a!==c&&(this._domHandles.remove("view-popup"),c&&c.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([m.init(this,"root",function(c,b){var d=a.domNode;e.isDescendant(d.parentNode,b)&&d.parentNode.removeChild(d);c&&!d.parentNode&&a.placeAt(c)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,
"ui",{set:function(a){var c=this._get("ui");a!==c&&(this._domHandles.remove("ui"),c&&c.destroy(),a&&(a.view=this,this._domHandles.add([m.init(this,"root",function(c){a.container=c?h.create("div",null,c):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0});x.prototype.pageToContainer=function(a,c,b){var d=this.position;a-=d[0];c-=d[1];b?(b[0]=a,b[1]=c):b=[a,c];return b};x.prototype.containerToPage=function(a,c,b){var d=this.position;a+=d[0];c+=d[1];b?(b[0]=a,b[1]=c):b=[a,c];return b};
x.prototype._measure=function(){var a=this.container,c=a?a.clientWidth:0,b=a?a.clientHeight:0;if(0===c||0===b||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var d=this.root,g=this.surface,e=this.width,f=this.height,h=this.position;if(c===e&&b===f)return this._set("suspended",!1),!1;d&&g&&(d.style.width=g.style.width=c+"px",d.style.height=g.style.height=b+"px");this._set("width",c);this._set("height",b);this._set("suspended",!1);d=(a.ownerDocument||window.document).defaultView;
a=a.getBoundingClientRect();s[0]=a.left+d.pageXOffset;s[1]=a.top+d.pageYOffset;(!h||s[0]!==h[0]||s[1]!==h[1])&&this._set("position",s.slice());this.emit("resize",{oldWidth:e,oldHeight:f,width:c,height:b});return!0};b([t.property({value:null,cast:function(a){return e.byId(a)}})],x.prototype,"container",null);b([t.property({readOnly:!0})],x.prototype,"height",void 0);b([t.property({type:q})],x.prototype,"popup",null);b([t.property({readOnly:!0})],x.prototype,"position",void 0);b([t.property({readOnly:!0})],
x.prototype,"resizing",void 0);b([t.property({readOnly:!0})],x.prototype,"root",void 0);b([t.property({value:null,dependsOn:["width","height"],readOnly:!0})],x.prototype,"size",null);b([t.property({readOnly:!0})],x.prototype,"surface",void 0);b([t.property({readOnly:!0})],x.prototype,"suspended",void 0);b([t.property({type:r})],x.prototype,"ui",null);b([t.property({readOnly:!0})],x.prototype,"width",void 0);return x=b([t.subclass("esri.views.DOMContainer")],x)}(t.declared(d))})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner ./Message require".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D,I){var A=I.toUrl("./Popup/images/default-action.svg"),z={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},E={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},C={buttonEnabled:!0,position:E.auto,breakpoint:{width:544}},J={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return k.createSubclass([h],{declaredClass:"esri.widgets.Popup",
baseClass:z.base,templateString:p,constructor:function(){this._handleRegistry=new b;this._contentStorage=v.create("div")},postCreate:function(){var a=this;this.inherited(arguments);var b=this.viewModel;this.own(c.whenTrue(b,"view.ready",function(){this._wireUpView(this.viewModel.view)}.bind(this)),c.init(b,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),
c.init(b,"features",this._updateFeatures.bind(this)),c.init(b,"selectedFeatureIndex,selectedFeature",function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),c.init(b,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),c.init(b,"actions",
function(a){var c=this.viewModel;this._updateActions(a,c.features,c.selectedFeature);this._actionChangeListener(a)}.bind(this)),c.init(b,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),c.init(b,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),l(this._dockNode,e,this._toggleDock.bind(this)),l(this._closeNode,e,this.close.bind(this)),l(this._previousNode,e,b.previous.bind(b)),l(this._previousDockedNode,
e,b.previous.bind(b)),l(this._nextNode,e,b.next.bind(b)),l(this._nextDockedNode,e,b.next.bind(b)),l(this._pageMenuNode,e,this._togglePageMenu.bind(this)),l(this._pageMenuDockedNode,e,this._togglePageMenu.bind(this)),l(this._pageMenuInfoNode,e,this._togglePageMenu.bind(this)),l(this._paginationNode,l.selector("li",e),function(){a._selectFeature(this)}),l(this._paginationNode,l.selector("li","keyup"),function(c){a._keyupFeature(c,this)}),l(this._actionsNode,l.selector("[data-action-index]",e),function(){a._actionEvent(this)}),
l(b,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));n.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroyMessage();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},
autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:C,set:function(a){var c=t.clone(C),b=this.viewModel.get("view.breakpoints"),d={};b&&(d.width=b.xsmall,d.height=b.xsmall);a=t.mixin({},c,a);c=t.mixin({},c.breakpoint,d);!0===a.breakpoint?a.breakpoint=c:"object"===typeof a.breakpoint&&(a.breakpoint=t.mixin({},c,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},
dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},location:{aliasOf:"viewModel.location"},messageEnabled:{value:!0,set:function(a){this._set("messageEnabled",a);this._createMessage(a,this.viewModel.view)}},paginationEnabled:{value:!0,set:function(a){var c=this.viewModel;this._set("paginationEnabled",
a);this._updatePagination(c.features,c.selectedFeatureIndex);this._updateFooterVisibility(c.features,c.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},rendered:{dependsOn:["viewModel.content","_popupRenderer.rendered"],get:function(){var a=this._contentIsPopupRenderer()&&this.get("_popupRenderer.rendered");return this._popupRenderer?a:!0},readOnly:!0},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:a},visible:{value:!1,set:function(a){this._set("visible",a);s.remove(this._containerNode,z.hasPaginationMenuOpen);s.toggle(this.domNode,z.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}}},_css:z,_i18n:q,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,
_popupRendererVMs:[],clear:n.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:n.createMethodDelegate("next"),previous:n.createMethodDelegate("previous"),reposition:function(){this._positionPopup();return this._moveIntoView()},open:function(a){var c=t.mixin({updateLocationEnabled:!1},a);this.viewModel.set(c);a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:n.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(J.actionsChange);
a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],J.actionsChange)},_actionEvent:function(a){var c=this.viewModel;if(a=u.get(a,"data-action-index"))a=parseInt(a,10),c.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,
c,b){this._updateActionButtons(a,b);this._updateFooterVisibility(c,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),c=this.get("_popupRenderer.domNode");return!(!a||!(c&&a===c))},_updateActionButtons:function(a,b){this._handleRegistry.remove(J.actions);if(this._actionsNode){var d=document.createDocumentFragment(),g=a.length;g&&a.forEach(function(a,e){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=z.iconZoom);var f=a.title,h=a.className,l=a.image;
!l&&!h&&(l=A);var m=b&&b.attributes;m&&(f=f?r.substitute(m,f):"",h=h?r.substitute(m,h):null,l=l?r.substitute(m,l):null);var q=v.create("div",{tabindex:"0",title:f},d);u.set(q,"data-action-index",e);s.add(q,[z.button,z.action]);var p=v.create("span",{"aria-hidden":!0},q);s.add(p,z.icon);h&&s.add(p,h);l&&(s.add(p,z.actionImage),x.set(p,"background-image","url("+l+")"));f={className:z.actionText,textContent:f};g>=this._hideActionsTextNum&&(f.className=z.iconText);var y=v.create("span",f,q);this._handleRegistry.add([c.init(a,
"visible",function(a){s.toggle(q,z.hidden,!a)}),c.init(a,"className",function(a,c){m&&(a=r.substitute(m,a),c=r.substitute(m,c));s.remove(p,c);s.add(p,a)}),c.init(a,"image",function(a){m&&(a=r.substitute(m,a));s.toggle(p,z.actionImage,!!a);x.set(p,"background-image",a?"url("+a+")":"")}),c.init(a,"title",function(a){m&&(a=r.substitute(m,a));a=a||"";u.set(q,"title",a);u.set(y,"textContent",a)})],J.actions)},this);v.place(d,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,
c;if(a.location&&this.visible){var b=a.location;b&&a.get("view.ready")&&(c=a.view.toScreen(b))}return c},_calculatePosition:function(a,c,b){var d=this.alignment,g,e=this._pointerOffset,f=null,h=null,l=null,m=null;if(a&&c&&b){g=c.h;if("top"===d||"bottom"===d)g+=e;c=c.w;if("left-top"===d||"left-bottom"===d||"right-top"===d||"right-bottom"===d)c+=e,g+=e;var q=c/2,r=a.y,p=a.x,s=b.height-r,y=b.width-p,t=c;switch(d){case "bottom":f=r+e;h=p-q;t=q;break;case "left-top":l=s+e;m=y+e;break;case "left-bottom":f=
r+e;m=y+e;break;case "right-top":l=s+e;h=p+e;break;case "right-bottom":f=r+e;h=p+e;break;default:l=s+e,h=p-q,t=q}b=b.padding;b=this.dockEnabled?{left:b.left?b.left+"px":"",top:b.top?b.top+"px":"",right:b.right?b.right+"px":"",bottom:b.bottom?b.bottom+"px":""}:{top:null!==f?f+"px":"auto",left:null!==h?h+"px":"auto",bottom:null!==l?l+"px":"auto",right:null!==m?m+"px":"auto"};return{height:g,width:c,box:{top:null!==f?f:a.y-g,left:null!==h?h:a.x-t,bottom:null!==l?l:a.y+g,right:null!==m?m:a.x+t},style:b}}},
_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,c){var b=new B({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(b)},this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(J.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,b){this._handleRegistry.remove(J.paginationTitles);if(a){var d=a.length;this._paginationNode&&u.set(this._paginationNode,
"innerHTML","");1<d&&(d=r.substitute({total:d},this._i18n.selectedFeatures),u.set(this._pageMenuInfoNode,"textContent",d),a.forEach(function(a,d){var g=this._i18n.untitled,e=v.create("li",{role:"menuitem",className:z.featureMenuItem},this._paginationNode);d===b?(u.set(e,"aria-label",q.selectedFeature),s.add(e,z.featureMenuSelected)):u.set(e,"data-feature-index",d);var f=v.create("span",{className:z.featureMenuTitle,innerHTML:g},e);if(g=this._popupRendererVMs[d])g=c.init(g,"title",function(a){u.set(f,
"innerHTML",a)}),this._handleRegistry.add(g,J.paginationTitles);d===b&&v.create("span",{className:z.iconCheckMark},f)},this))}},_createMessage:function(a,c){this._destroyMessage();a&&c&&(this._message=new D({visible:!1,text:this._i18n.noFeaturesFound,viewModel:{view:c}}),this._message.startup(),v.place(this._message.domNode,c.root))},_createSpinner:function(a,c){this._destroySpinner();a&&c&&(this._spinner=new H({visible:!1,viewModel:{view:c}}),this._spinner.startup(),v.place(this._spinner.domNode,
c.root))},_updateContent:function(a){a&&a.nodeName?(v.place(a,this._contentStorage),v.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),u.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;s.toggle(this._containerNode,z.hasPopupRenderer,this._contentIsPopupRenderer());s.toggle(this._containerNode,z.showContent,!!a);s.remove(this._containerNode,z.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&
!this._popupRenderer._destroyed&&(this._handleRegistry.remove(J.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroyMessage:function(){this._message&&(this._message.destroyRendering(),this._message.destroy(),this._message=null)},_destroySpinner:function(){this._spinner&&(this._spinner.destroyRendering(),this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},
_togglePopupDocking:function(a){s.remove(this._containerNode,z.hasPaginationMenuOpen);s.toggle(this._containerNode,z.isDocked,!!a);u.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,c,b){var d=a[0];a=a[1];var g=c[0];c=c[1];var e=b.width;b=b.height;return d<=e&&g>e||d>e&&g<=e||a<=b&&c>b||a>b&&c<=b},_determineDockPosition:function(a){var c=this.viewModel,b=c.view,d=b&&b.padding,d=b&&b.width-d.left-d.right;
return(c=b&&c.get("view.breakpoints"))&&d<=c.xsmall?a.bottomCenter:!this.isLeftToRight()?a.topLeft:a.topRight},_updateDockPosition:function(a){s.remove(this._containerNode,[z.isDockedTopLeft,z.isDockedTopCenter,z.isDockedTopRight,z.isDockedBottomLeft,z.isDockedBottomCenter,z.isDockedBottomRight,z.canDockToTop,z.canDockToBottom,z.canDockToLeft,z.canDockToRight]);var c,b,d;c=a.position;c=c===E.auto?this._determineDockPosition(E):"function"===typeof c?c.call(this):c;switch(c){case E.topLeft:b=z.isDockedTopLeft;
d=z.canDockToLeft;break;case E.topCenter:b=z.isDockedTopCenter;d=z.canDockToTop;break;case E.bottomLeft:b=z.isDockedBottomLeft;d=z.canDockToLeft;break;case E.bottomCenter:b=z.isDockedBottomCenter;d=z.canDockToBottom;break;case E.bottomRight:b=z.isDockedBottomRight;d=z.canDockToRight;break;default:b=z.isDockedTopRight,d=z.canDockToRight}s.toggle(this._containerNode,d,!!a.buttonEnabled);this.dockEnabled?(s.add(this._containerNode,b),this._set("currentDockPosition",c)):this._set("currentDockPosition",
null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},_toggleDockButton:function(a){var c=this._containerNode;s.toggle(c,z.showDock,!!a.buttonEnabled);s.toggle(c,z.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,c){var b=this._isPaginationEnabled(a)||c&&c.length;s.toggle(this._containerNode,z.showFooter,!!b)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,c){this._updatePageText(a,
c);this._createPaginationNodes(a,c);s.toggle(this._containerNode,z.showPagination,this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,c,b,d){var g=0<a&&0===c;b=b&&b.length;a&&(b&&a===b)&&this.set("visible",!1);s.toggle(this._containerNode,z.hasPendingPromises,!!a);s.toggle(this._containerNode,z.isPendingPromisesResult,!!g);s.toggle(this._containerNode,z.hasPromiseFeatures,!!c);this._message&&this._message.set({visible:!1});g?this._spinner&&(this._spinner.set({visible:!0}),this._spinner.viewModel.point=
d):(this._spinner&&(this._spinner.viewModel.point=null),b&&c&&!this.visible?this.set("visible",!0):b&&(!c&&this.visible)&&this.set("visible",!1),!c&&b&&this._message&&(this._message.set({visible:!0}),this._message.viewModel.point=d))},_moveIntoView:function(){var a=new m;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,c=this.get("viewModel.view");if(a&&c&&c.stationary){var b=this._getLocationScreenPoint();if(b){var d=this._sizePopup(),
d=this._calculatePosition(b,d,c),g=c.width,e=c.height,h=c.padding,l=c.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(b.y<h.top||b.y>e-h.bottom||b.x<h.left||b.x>g-h.right)return a.centerAtLocation();if(!this.dockEnabled&&d&&d.width<c.width&&d.height<c.height){var m=b=0;d.box.top<h.top?m=-d.box.top+l.top+h.top:d.box.bottom>e-h.bottom&&(m=-(d.box.bottom-e+h.bottom)-l.bottom);d.box.left<h.left?b=d.box.left-l.left-h.left:d.box.right>g-h.right&&(b=d.box.right-g+h.right+l.right);if(b||
m)return d=f.translateBy(f.create(),c.viewpoint,[b,m]),c.goTo(d,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,c){return c&&a&&-1<a.x&&-1<a.y&&a.x<=c.width&&a.y<=c.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=this.get("viewModel.view"),c=this._getLocationScreenPoint();if(this._isScreenPointWithinView(c,a)){var b=this._sizePopup(),d=this._pointerOffset,g=b.h+d,b=(b.w+d)/2,e,h,f,l,d=a.padding;c.x-b<0+d.left&&(h=!0);c.x+b>a.width-d.right&&
(e=!0);c.y-g<0+d.top&&(f=!0);c.y+g>a.height-d.bottom&&(l=!0);h?this._set("alignment",f?"right-bottom":"right-top"):e?this._set("alignment",f?"left-bottom":"left-top"):f?this._set("alignment",l?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=this.viewModel.view;if(a){s.remove(this._containerNode,[z.alignTop,z.alignBottom,z.alignLeftTop,z.alignLeftBottom,z.alignRightTop,z.alignRightBottom]);this._triggerOffset();var c;switch(this.alignment){case "bottom":c=z.alignBottom;
break;case "right-top":c=z.alignRightTop;break;case "right-bottom":c=z.alignRightBottom;break;case "left-top":c=z.alignLeftTop;break;case "left-bottom":c=z.alignLeftBottom;break;default:c=z.alignTop}s.add(this._containerNode,c);c=this._getLocationScreenPoint();var b=this._sizePopup();(a=(a=this._calculatePosition(c,b,a))&&a.style)&&x.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();u.set(this._bodyContentNode,"innerHTML","");u.set(this._titleNode,"innerHTML","");
u.set(this._pageTextNode,"innerHTML","");u.set(this._pageTextDockedNode,"innerHTML","");s.remove(this._containerNode,[z.showTitle,z.showContent])},_keyupFeature:function(a,c){var b=a.keyCode;if(b===d.UP_ARROW||b===d.DOWN_ARROW){a.stopPropagation();a.preventDefault();var e=g("li",this._paginationNode),f=e.length,h=e.indexOf(c),l;b===d.UP_ARROW?l=h-1:b===d.DOWN_ARROW&&(l=h+1);0>l?l=f-1:l>=f&&(l=0);e[l].focus()}},_selectFeature:function(a){var c=this.viewModel,b=-1;(a=u.get(a,"data-feature-index"))&&
(b=parseInt(a,10));-1!==b&&(c.selectedFeatureIndex=b);s.remove(this._containerNode,z.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(a){var b=this.viewModel,d,g="",e="";if(a){if(d=a.layer)g=d.id||"",e=d.title||"";if(!this._popupRenderer||this._popupRenderer&&this._popupRenderer._destroyed){this._handleRegistry.remove(J.popupRenderer);this._set("_popupRenderer",new y);d=c.init(this._popupRenderer.viewModel,"title",function(a){b.title=a});var f=c.init(this._popupRenderer.viewModel,
"content",function(a){b.content=a?this._popupRenderer.domNode:null}.bind(this)),h=l(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([d,f,h],J.popupRenderer);this._popupRenderer.startup()}this._popupRenderer.viewModel.graphic=a}this._toggleFeatureUpdatedClass();u.set(this._containerNode,"data-layer-title",e);u.set(this._containerNode,"data-layer-id",g);this.reposition()},_updateFeatures:function(a){var c=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,
c.selectedFeatureIndex);this._updateFooterVisibility(a,c.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var c=this.viewModel;a=a.breakpoint;return c.view&&(a.hasOwnProperty("width")&&c.view.ui.width<=a.width||a.hasOwnProperty("height")&&c.view.ui.height<=a.height)},_sizePopup:function(){return w.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";u.set(this._titleNode,"innerHTML",a);s.toggle(this._containerNode,z.showTitle,!!a);s.remove(this._containerNode,z.hasPaginationMenuOpen)},
_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){s.toggle(this._containerNode,z.hasPaginationMenuOpen);var a=s.contains(this._containerNode,z.hasPaginationMenuOpen);u.set(this._pageMenuSectionNode,"aria-hidden",!a);var c=g("li",this._paginationNode),b=c[0];c.forEach(function(c){u.set(c,"tabIndex",a?"0":"")});a?b&&b.focus():this._pageMenuNode.focus()},_updatePageText:function(a,c){var b="";this._isPaginationEnabled(a)&&(b=r.substitute({index:c+1,total:a.length},
this._i18n.pageText));this._pageTextNode&&u.set(this._pageTextNode,{textContent:b});this._pageTextDockedNode&&u.set(this._pageTextDockedNode,{textContent:b})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){s.remove(this._containerNode,z.hasFeatureUpdated);this._triggerOffset();s.add(this._containerNode,z.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},
_wireUpView:function(a){this._handleRegistry.remove(J.view);this._viewPointEvent=null;if(a){var b="viewpoint";"3d"===a.type&&(b="camera");this._viewPointEvent=c.pausable(a,b,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),a.watch("size",this._updateDockEnabledForViewSize.bind(this)),l(a,"resize",this.reposition.bind(this)),this._viewPointEvent],J.view);this._togglePopupLocationRepositioning(this.visible);this._createMessage(this.messageEnabled,
a);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,c){var b=this.get("viewModel.view.padding"),d=b.left+b.right,g=b.top+b.bottom,b=[],e=[];b[0]=a[0]-d;b[1]=a[1]-g;e[0]=c[0]-d;e[1]=c[1]-g;d=this.dockOptions;this._dockingThresholdCrossed(b,e,d.breakpoint)&&this._setDockEnabledForViewSize(d);this._updateDockPosition(d)},_togglePopupLocationRepositioning:function(a){var c=
this.viewModel;this._viewPointEvent&&(a&&c.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(n){function k(a,b){Array.isArray(b)||(b=[b]);return b.map(function(c){return a.viewModel.on(c,function(b){a.emit(c,b)})})}return{createGetterDelegate:function(a){var b="viewModel."+a;return function(){return this.get(b)}},
createSetterDelegate:function(a){return function(b){var c=this.get("viewModel");c&&c.set(a,b)}},createMethodDelegate:function(a){var b="viewModel."+a;return function(){var a=this.get(b);if(a)return a.apply(this.viewModel,arguments)}},setUpEventDelegates:function(a,b){var c=k(a,b),f=n.init(a,"viewModel",function(e,h){c.forEach(function(a){a.remove()});c.length=0;e&&(c=k(a,b));a.own.apply(a,c)});a.own(f)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q){function p(a){return function(c){this._set(a,c)}}function r(a,c){return function(b){t.call(this,a,c,b);this._set(a,b)}}function t(a,c,b){(Array.isArray(c)?c:[c]).forEach(function(c){var d=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":e.isFunction(b)&&(b=b.bind(this));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?g.set(d,c,b):d.set(c,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":d.innerHTML=b;break;case "class":c=this._get(a),m.replace(d,b,c)}},this)}k.before(function(c,b){if(b.declaredClass===s||k.hasMixin(c,s)){var d=a.getPropertiesMetadata(b);Object.keys(d).forEach(function(a){var c=d[a];var b=c.set;a="function"===typeof b?b:null===b?p(c.name):"string"===typeof b||"object"===typeof b?r(a,b):void 0;c.set=a})}});var s="esri.widgets._WidgetBase";return n.createSubclass([c],{declaredClass:s,postscript:function(a){var c=this.__accessor__;a=c.ctorArgs||
a;var b;(b=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(b).forEach(function(a){c.set(a,b[a])},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=h.body(this.ownerDocument);f.add(this);this.buildRendering();c.initialize();a&&(this.set(a),c.ctorArgs=null);c.initialize();this.initialize();this.postCreate();if(this.domNode){var e;if((a=this.srcNodeRef)&&
a.parentNode&&this.domNode!==a)a.parentNode.replaceChild(this.domNode,a),e=!0;g.set(this.domNode,{widgetId:this.id,id:this.id});e&&(this.srcNodeRef=null)}this._created=!0;this.notifyChange("container");d.around(this,"startup",function(a){return function(){this._started||a.apply(this)}});this.autoStart&&this.startup()},getDefaults:function(a){var c={};c.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||f.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(c.srcNodeRef=a.srcNodeRef,
delete a.srcNodeRef);return e.mixin(this.inherited(arguments),c)},normalizeCtorArgs:function(a,c){a=a||{};var b=a.container||a.srcNodeRef||c;b&&(a.srcNodeRef=l.byId(b));return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:b.prototype.postMixInProperties,buildRendering:b.prototype.buildRendering,postCreate:b.prototype.postCreate,startup:b.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},
domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:b.prototype._setStyleAttr},widgetId:{}},destroyDescendants:b.prototype.destroyDescendants,destroyRecursive:b.prototype.destroyRecursive,destroyRendering:b.prototype.destroyRendering,emit:b.prototype.emit,on:function(a,c){return this.own(q(this.domNode,a,c))[0]},toString:b.prototype.toString,getChildren:b.prototype.getChildren,getParent:b.prototype.getParent,isLeftToRight:b.prototype.isLeftToRight,placeAt:b.prototype.placeAt,
onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function c(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&f.findWidgets(this.domNode,this.containerNode).forEach(c);this.destroyRendering(a);f.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widget",getDefaults:function(){return e.mixin(this.inherited(arguments),
{viewModel:{}})},buildRendering:function(){this.inherited(arguments);m.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var c=this._get("container");!this._created&&(!c&&a)&&this._set("container",l.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);m.toggle(this.domNode,"esri-hidden",
!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),function(n,k,a,b,c,f,e,h,d,l,g,m,q){var p={id:"zoom-to"};return k.createSubclass([c],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:a.ofType(g)},
animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:l},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},view:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new f},getDefaults:function(a){return q.mixin(this.inherited(arguments),
{actions:[p],animationOptions:{duration:300,easing:m.quadInOut},promises:[]})},initialize:function(){this._handles.add(h.init(this,"view.scale",this._scaleWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[p],animationOptions:{duration:300,easing:m.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=
0))},location:null,_locationSetter:function(a){var c=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&c&&(a=d.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var c=this._get("promises");c&&c.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",
a);a&&a.length&&(this._set("pendingPromisesCount",a.length),a=a.slice(0),a.forEach(function(a){a.always(function(c){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,c))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var c=null,b=this.features;b&&b.length&&(a=(a+b.length)%b.length,c=b[a]);this._set("selectedFeature",c);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(c,
this.updateLocationEnabled)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,zoomFactor:4,_zoomFactorSetter:function(a){var c=this.view;c&&null!=c.scale&&this._setZoomScale(c.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return!this.location||!this.view?
e.reject(new b(this.declaredClass+"::Cannot center at location without a location and view.")):this.view.goTo({target:this.location,scale:this.view.scale},this.animationOptions)},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){this.selectedFeatureIndex-=1;return this},zoomToLocation:function(){var a=
this.view,c=this.location,d=this.zoomScale;if(!c||!a)return e.reject(new b(this.declaredClass+"::Cannot zoom to location without a location and view."));var g=this.selectedFeature,h=g&&g.geometry,f=g&&"3d"===a.type;h||f?(c={target:g},h&&("point"===h.type&&this._isScreenSize(g))&&(c.scale=d,this.location=h)):c={target:c,scale:d};return a.goTo(c,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var c=!0,b=this.view.getViewForGraphic(a);
b&&b.whenGraphicBounds&&b.whenGraphicBounds(a).then(function(a){c=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return c},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),c=a,b=this.selectedFeature.getEffectivePopupTemplate();if(b&&b.actions){for(var c=b.actions,d=0;d<c.length;d++)c.getItemAt(d).temporary=!0;b.overwriteActions?this._originalActions=a:c=a.concat(c)}this.actions=
c},_scaleWatcher:function(a){null!=a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_selectedFeatureChange:function(a,c){a&&(c&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var c=0;a&&a.length&&(c=
a.length);this._set("featureCount",c)},_setZoomScale:function(a,c){this._set("zoomScale",a/c)},_updateFeatures:function(a,c){if(a&&this.promises&&this._validatePromise(a)&&!(c instanceof b||c instanceof Error)&&c&&c.length){var d={};if(!this.features||!this.features.length)d.features=c,d.selectedFeatureIndex=0;else{var g=c.filter(function(a){return-1===this.features.indexOf(a)},this);d.features=this.features.concat(g)}this.set(d)}},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},
"dojo/fx/easing":function(){define(["../_base/lang"],function(n){var k={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return-1*a*(a-2)},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-
1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-0.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*(Math.PI/2))},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==
a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=2;return 1>a?-0.5*(Math.sqrt(1-Math.pow(a,2))-1):0.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){a-=1;return Math.pow(a,2)*(2.70158*
a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;a-=1;return-1*Math.pow(2,10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)},elasticOut:function(a){return 0==a||1==a?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var b=0.3*1.5,c=b/4;if(1>a)return a-=1,-0.5*Math.pow(2,10*a)*Math.sin((a-c)*2*
Math.PI/b);a-=1;return 0.5*Math.pow(2,-10*a)*Math.sin((a-c)*2*Math.PI/b)+1},bounceIn:function(a){return 1-k.bounceOut(1-a)},bounceOut:function(a){a<1/2.75?a=7.5625*Math.pow(a,2):a<2/2.75?a=7.5625*Math.pow(a-1.5/2.75,2)+0.75:a<2.5/2.75?(a-=2.25/2.75,a=7.5625*Math.pow(a,2)+0.9375):(a-=2.625/2.75,a=7.5625*Math.pow(a,2)+0.984375);return a},bounceInOut:function(a){return 0.5>a?k.bounceIn(2*a)/2:k.bounceOut(2*a-1)/2+0.5}};n.setObject("dojo.fx.easing",k);return k})},"esri/views/2d/viewpointUtils":function(){define("require exports ./math/common ./math/mat2d ./math/vec2 ../../Viewpoint ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p){function r(b,d,g,e){return e&&(g&&!e.equals(g)&&m.canProject(e,g))&&e.isWebMercator?(e.isWebMercator?(g=d[1],89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999),g=Math.sin(a.toRadian(g)),b=c.set(b,a.toRadian(d[0])*J,0.5*J*Math.log((1+g)/(1-g)))):(g=a.toDegree(d[0]/J),b=c.set(b,g-360*Math.floor((g+180)/360),a.toDegree(0.5*Math.PI-2*Math.atan(Math.exp(-1*d[1]/J))))),b):c.copy(b,d)}function t(a){return a.wkid?a:a.spatialReference||h.WGS84}function s(a,b){return b.type?
c.set(a,b.x,b.y):c.copy(a,b)}function u(a,c){return Math.max(a.width/c[0],a.height/c[1])*I(a.spatialReference)}function v(a,c,b){var e;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new l(a);if(a.reduce)return a.reduce(function(a,b){return v(b,c,a)},b);a instanceof d?e=a:a.geometry&&(e=a.geometry);if(!e)return null;a="point"===e.type?new g({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;if(!a)return null;
e=m.canProject(a,c);if(!a.spatialReference.equals(c)&&e)a=m.project(a,c);else if(!e)return null;return b=b?b.union(a):a.clone()}function w(a,b){if(!a)return new f({targetGeometry:new l,scale:0,rotation:0});var g=b.spatialReference,e=b.size,h=b.currentViewpoint,m=b.constraints,q=null;"esri.Viewpoint"===a.declaredClass?q=a:a.viewpoint?q=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(q=a.target);var p=null;if(q&&q.targetGeometry)p=q.targetGeometry;else if(a instanceof d)p=a;else if(a||
a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))p=v(a.center,g)||v(a.extent,g)||v(a.target,g)||v(a,g);!p&&h&&h.targetGeometry?p=h.targetGeometry:!p&&b.extent&&(p=b.extent);var y=t(p);g||(g=t(b.spatialReference||b.extent||p));var x=s(c.create(),p.center?p.center:p),g=new l(r(x,x,y,g),g),y=null,y=q&&q.targetGeometry&&"point"===q.targetGeometry.type?q.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&m&&m.effectiveLODs?m.zoomToScale(a.zoom):
Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height?b.extent?u(b.extent,e):h.scale:u(p.extent,e),e=0;q?e=q.rotation:a.hasOwnProperty("rotation")?e=a.rotation:h&&(e=h.rotation);m&&(m.rotationEnabled||(e=0),m.snapToZoom&&(y=m.snapScale(y)),0!==m.effectiveMinScale&&(y=Math.min(m.effectiveMinScale,y)),0!==m.effectiveMaxScale&&(y=Math.max(m.effectiveMaxScale,y)));return new f({targetGeometry:g,scale:y,rotation:e})}function x(a,c){var b=a.targetGeometry,d=c.targetGeometry;b.x=
d.x;b.y=d.y;b.spatialReference=d.spatialReference;a.scale=c.scale;a.rotation=c.rotation;return a}function y(a,b,d){return!d?c.scale(a,b,0.5):c.set(a,0.5*(b[0]-d.right+d.left),0.5*(b[1]-d.bottom+d.top))}function B(a,c,d){k.getTransform(a,c,d);return b.invert(a,a)}function H(b,d,g){var e=a.toRadian(d.rotation)||0;d=Math.abs(Math.cos(e));e=Math.abs(Math.sin(e));return c.set(b,Math.round(g[1]*e+g[0]*d),Math.round(g[1]*d+g[0]*e))}function D(a){return a.scale*(1/(96*(q.getUnitValueForSR(a.targetGeometry.spatialReference)||
C)*E))}function I(a){return 96*(q.getUnitValueForSR(a)||C)*E}function A(a){return a.isWrappable?(a=p.getInfo(a),a.valid[1]-a.valid[0]):0}function z(a,c){return Math.round(A(a)/c)}var E=39.37,C=6370997*Math.PI/180,J=6378137,F=180/Math.PI;k.create=w;k.copy=x;k.getAnchor=y;k.getExtent=function(){var a=c.create();return function(c,b,d){var g=b.targetGeometry;s(a,g);b=0.5*D(b);c.xmin=a[0]-b*d[0];c.ymin=a[1]-b*d[1];c.xmax=a[0]+b*d[0];c.ymax=a[1]+b*d[1];c.spatialReference=g.spatialReference;return c}}();
k.setExtent=function(a,c,b,d,g){k.centerAt(a,c,b.center);a.scale=u(b,d);g&&g.constraints&&g.constraints.constrain(a);return a};k.getOuterExtent=function(){var a=c.create(),b=c.create();return function(c,d,g){s(a,d.targetGeometry);H(b,d,g);g=0.5*D(d);c.set({xmin:a[0]-g*b[0],ymin:a[1]-g*b[1],xmax:a[0]+g*b[0],ymax:a[1]+g*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();k.getClippedExtent=function(){var a=c.create(),b=c.create();return function(c,d,g){var e=D(d),h=d.targetGeometry.spatialReference,
f=z(h,e);s(a,d.targetGeometry);H(b,d,g);h.isWrappable&&b[0]>f&&(b[0]=f);d=0.5*e;c.set({xmin:a[0]-d*b[0],ymin:a[1]-d*b[1],xmax:a[0]+d*b[0],ymax:a[1]+d*b[1],spatialReference:h});return c}}();k.getOuterSize=H;k.getPaddingScreenTranslation=function(){var a=c.create();return function(b,d,g){return c.sub(b,c.scale(b,d,0.5),y(a,d,g))}}();var G=function(){var d=b.create(),g=c.create();return function(e,h,f,l){var m=D(h);h=a.toRadian(h.rotation)||0;c.set(g,m,m);b.fromScaling(d,g);b.rotate(d,d,h);b.translate(d,
d,k.getPaddingScreenTranslation(g,f,l));b.translate(d,d,[0,l.top-l.bottom]);return c.set(e,d[4],d[5])}}();k.getResolution=D;k.getResolutionToScaleFactor=I;k.getMatrix=function(){var a=c.create(),d=c.create(),g=c.create();return function(e,h,f,l,m){c.negate(a,h);c.scale(d,f,0.5);c.set(g,1/l,-1/l);b.identity(e);b.translate(e,e,d);m&&b.rotate(e,e,m);b.scale(e,e,g);b.translate(e,e,a);return e}}();k.getTransform=function(){var b=c.create();return function(c,d,g){var e=D(d),h=a.toRadian(d.rotation)||0;
s(b,d.targetGeometry);return k.getMatrix(c,b,g,e,h)}}();k.getTransformNoRotation=function(){var a=c.create();return function(c,b,d){var g=D(b);s(a,b.targetGeometry);return k.getMatrix(c,a,d,g,0)}}();k.getWorldWidth=A;k.getWorldScreenWidth=z;k.createAsync=function(a,c){return e.resolve(w(a,c))};k.angleBetween=function(){var a=c.create(),b=c.create(),d=c.create();return function(g,e,h){c.subtract(a,g,e);c.normalize(a,a);c.subtract(b,g,h);c.normalize(b,b);c.cross(d,a,b);g=Math.acos(c.dot(a,b)/(c.length(a)*
c.length(b)))*F;0>d[2]&&(g=-g);isNaN(g)&&(g=0);return g}}();k.addPadding=function(){var a=c.create();return function(c,b,d,g){var e=c.targetGeometry;x(c,b);G(a,b,d,g);e.x+=a[0];e.y+=a[1];return c}}();k.removePadding=function(){var a=c.create();return function(c,b,d,g){var e=c.targetGeometry;x(c,b);G(a,b,d,g);e.x-=a[0];e.y-=a[1];return c}}();k.centerAt=function(){var a=c.create();return function(c,b,d){x(c,b);b=c.targetGeometry;var g=t(d),e=t(b);s(a,d);r(a,a,g,e);b.x=a[0];b.y=a[1];return c}}();k.pixelSizeAt=
function(a,c,b){return D(c)};k.resize=function(){var a=c.create();return function(b,d,g,e,h){h||(h="center");c.sub(a,g,e);c.scale(a,a,0.5);g=a[0];e=a[1];switch(h){case "center":c.set(a,0,0);break;case "left":c.set(a,-g,0);break;case "top":c.set(a,0,e);break;case "right":c.set(a,g,0);break;case "bottom":c.set(a,0,-e);break;case "top-left":c.set(a,-g,e);break;case "bottom-left":c.set(a,-g,-e);break;case "top-right":c.set(a,g,e);break;case "bottom-right":c.set(a,g,-e)}k.translateBy(b,d,a);return b}}();
k.rotateBy=function(a,c,b){x(a,c);a.rotation+=b;return a};k.rotateTo=function(a,c,b){x(a,c);a.rotation=b;return a};k.scaleBy=function(){var a=c.create();return function(b,d,g,e,h){x(b,d);0!==g&&(k.toMap(a,e,d,h),b.scale=d.scale/g,k.toScreen(a,a,b,h),k.translateBy(b,b,c.set(a,a[0]-e[0],e[1]-a[1])));return b}}();k.scaleTo=function(a,c,b){x(a,c);a.scale=b;return a};k.scaleAndRotateBy=function(){var a=c.create();return function(b,d,g,e,h,f){x(b,d);0!==g&&(k.toMap(a,h,d,f),b.scale=d.scale/g,b.rotation+=
e,k.toScreen(a,a,b,f),k.translateBy(b,b,c.set(a,a[0]-h[0],h[1]-a[1])));return b}}();k.toMap=function(){var a=b.create();return function(b,d,g,e){return c.transformMat2d(b,d,B(a,g,e))}}();k.toScreen=function(){var a=b.create();return function(b,d,g,e){return c.transformMat2d(b,d,k.getTransform(a,g,e))}}();k.translateBy=function(){var d=c.create(),g=b.create();return function(e,h,f){x(e,h);var l=D(h),m=e.targetGeometry;b.fromRotation(g,a.toRadian(h.rotation)||0);b.scale(g,g,c.fromValues(l,l));c.transformMat2d(d,
f,g);m.x+=d[0];m.y+=d[1];return e}}()})},"esri/views/2d/math/common":function(){define([],function(){if(!n)var n=1E-6;if(!k)var k="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:n,GLMAT_ARRAY_TYPE:k,GLMAT_RANDOM:a,setMatrixArrayType:function(a){b.GLMAT_ARRAY_TYPE=a}},c=Math.PI/180,f=180/Math.PI;b.toRadian=function(a){return a*c};b.toDegree=function(a){return a*f};b.setMatrixArrayType(Array);return b})},"esri/views/2d/math/mat2d":function(){define(["./common"],
function(n){var k=n.GLMAT_ARRAY_TYPE;n={create:function(){var a=new k(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new k(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],f=b[1],e=b[2],h=b[3],d=b[4],l=b[5],g=c*h-f*e;if(!g)return null;g=1/g;a[0]=h*g;a[1]=
-f*g;a[2]=-e*g;a[3]=c*g;a[4]=(e*l-h*d)*g;a[5]=(f*d-c*l)*g;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var f=b[0],e=b[1],h=b[2],d=b[3],l=b[4];b=b[5];var g=c[0],m=c[1],q=c[2],p=c[3],r=c[4];c=c[5];a[0]=f*g+h*m;a[1]=e*g+d*m;a[2]=f*q+h*p;a[3]=e*q+d*p;a[4]=f*r+h*c+l;a[5]=e*r+d*c+b;return a}};n.mul=n.multiply;n.rotate=function(a,b,c){var f=b[0],e=b[1],h=b[2],d=b[3],l=b[4];b=b[5];var g=Math.sin(c);c=Math.cos(c);a[0]=f*c+h*g;a[1]=e*c+d*g;a[2]=f*-g+h*c;a[3]=e*-g+d*
c;a[4]=l;a[5]=b;return a};n.scale=function(a,b,c){var f=b[1],e=b[2],h=b[3],d=b[4],l=b[5],g=c[0];c=c[1];a[0]=b[0]*g;a[1]=f*g;a[2]=e*c;a[3]=h*c;a[4]=d;a[5]=l;return a};n.translate=function(a,b,c){var f=b[0],e=b[1],h=b[2],d=b[3],l=b[4];b=b[5];var g=c[0];c=c[1];a[0]=f;a[1]=e;a[2]=h;a[3]=d;a[4]=f*g+h*c+l;a[5]=e*g+d*c+b;return a};n.fromRotation=function(a,b){var c=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=c;a[2]=-c;a[3]=f;a[4]=0;a[5]=0;return a};n.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];
a[4]=0;a[5]=0;return a};n.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};n.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};n.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return n})},"esri/views/2d/math/vec2":function(){define(["./common"],function(n){var k=n.GLMAT_ARRAY_TYPE,a=n.GLMAT_RANDOM,b={create:function(){var a=new k(2);
a[0]=0;a[1]=0;return a},clone:function(a){var b=new k(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var e=new k(2);e[0]=a;e[1]=b;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,e){a[0]=b;a[1]=e;return a},add:function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];return a},subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a}};b.sub=b.subtract;b.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a};b.mul=b.multiply;b.divide=function(a,b,e){a[0]=
b[0]/e[0];a[1]=b[1]/e[1];return a};b.div=b.divide;b.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);return a};b.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);return a};b.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};b.scaleAndAdd=function(a,b,e,h){a[0]=b[0]+e[0]*h;a[1]=b[1]+e[1]*h;return a};b.distance=function(a,b){var e=b[0]-a[0],h=b[1]-a[1];return Math.sqrt(e*e+h*h)};b.dist=b.distance;b.squaredDistance=function(a,b){var e=b[0]-a[0],h=b[1]-
a[1];return e*e+h*h};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};b.normalize=function(a,b){var e=b[0],h=b[1],e=e*e+h*h;0<e&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};b.cross=function(a,
b,e){b=b[0]*e[1]-b[1]*e[0];a[0]=a[1]=0;a[2]=b;return a};b.lerp=function(a,b,e,h){var d=b[0];b=b[1];a[0]=d+h*(e[0]-d);a[1]=b+h*(e[1]-b);return a};b.random=function(b,f){f=f||1;var e=2*a()*Math.PI;b[0]=Math.cos(e)*f;b[1]=Math.sin(e)*f;return b};b.transformMat2=function(a,b,e){var h=b[0];b=b[1];a[0]=e[0]*h+e[2]*b;a[1]=e[1]*h+e[3]*b;return a};b.transformMat2d=function(a,b,e){var h=b[0];b=b[1];a[0]=e[0]*h+e[2]*b+e[4];a[1]=e[1]*h+e[3]*b+e[5];return a};b.transformMat3=function(a,b,e){var h=b[0];b=b[1];a[0]=
e[0]*h+e[3]*b+e[6];a[1]=e[1]*h+e[4]*b+e[7];return a};b.transformMat4=function(a,b,e){var h=b[0];b=b[1];a[0]=e[0]*h+e[4]*b+e[12];a[1]=e[1]*h+e[5]*b+e[13];return a};b.forEach=function(){var a=b.create();return function(b,e,h,d,l,g){e||(e=2);h||(h=0);for(d=d?Math.min(d*e+h,b.length):b.length;h<d;h+=e)a[0]=b[h],a[1]=b[h+1],l(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return b})},"esri/widgets/Popup/PopupRenderer":function(){define("require ../Widgette ./PopupRendererViewModel ../../core/requireUtils ../../core/watchUtils dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/on dijit/_TemplatedMixin dijit/a11yclick dojo/i18n!./nls/PopupRenderer dojo/text!./templates/PopupRenderer.html".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p){var r={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",iconDownload:"esri-icon-download",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconMedia:"esri-icon-media",iconChart:"esri-icon-chart",base:"esri-popup-renderer",container:"esri-popup-renderer__size-container",main:"esri-popup-renderer__main-container",btn:"esri-popup-renderer__button",icon:"esri-popup-renderer__icon",
content:"esri-popup-renderer__content",contentElement:"esri-popup-renderer__content-element",text:"esri-popup-renderer__text",showMediaPagination:"esri-popup-renderer--media-pagination-visible",attachments:"esri-popup-renderer__attachments",attachmentsTitle:"esri-popup-renderer__attachments-title",attachmentsItem:"esri-popup-renderer__attachments-item",attachmentsItemIcon:"esri-popup-renderer__attachments-item-icon",fields:"esri-popup-renderer__fields",fieldHeader:"esri-popup-renderer__field-header",
fieldData:"esri-popup-renderer__field-data",fieldDataDate:"esri-popup-renderer__field-data--date",media:"esri-popup-renderer__media",mediaContainer:"esri-popup-renderer__media-container",mediaItemContainer:"esri-popup-renderer__media-item-container",mediaItem:"esri-popup-renderer__media-item",mediaItemTitle:"esri-popup-renderer__media-item-title",mediaItemCaption:"esri-popup-renderer__media-item-caption",mediaPrevious:"esri-popup-renderer__media-previous",mediaPreviousIconLTR:"esri-popup-renderer__media-previous-icon",
mediaPreviousIconRTL:"esri-popup-renderer__media-previous-icon--rtl",mediaNext:"esri-popup-renderer__media-next",mediaNextIconLTR:"esri-popup-renderer__media-next-icon",mediaNextIconRTL:"esri-popup-renderer__media-next-icon--rtl",mediaSummary:"esri-popup-renderer__media-summary",mediaCount:"esri-popup-renderer__media-count",mediaImageSummary:"esri-popup-renderer__media-image-summary",mediaImageIcon:"esri-popup-renderer__media-image-icon",mediaChart:"esri-popup-renderer__media-chart",mediaChartSummary:"esri-popup-renderer__media-chart-summary",
mediaChartIcon:"esri-popup-renderer__media-chart-icon",loading:"esri-popup-renderer__loading",loadingSpinnerContainer:"esri-popup-renderer__loading-container",spinner:"esri-popup-renderer__loading-spinner"},t=/^\s*(https?:\/\/[^\s]+)\s*$/i;return k.createSubclass([g],{declaredClass:"esri.widgets.Popup.PopupRenderer",templateString:p,baseClass:r.base,constructor:function(){this._charts=[];this._chartTooltips=[]},postCreate:function(){this.inherited(arguments);var a=this;this.own(c.init(this,"viewModel.waitingForContent",
this._loadingSpinner.bind(this)),c.init(this,"viewModel.graphic",this._graphicChanged.bind(this)),c.init(this,"viewModel.content",this._render.bind(this)),l(this._contentNode,l.selector("."+r.mediaNext,m),function(){a._nextMedia(this)}),l(this._contentNode,l.selector("."+r.mediaPrevious,m),function(){a._previousMedia(this)}))},destroy:function(){this._destroyCharts();this._clearResizeTimer()},properties:{viewModel:{type:a},rendered:{readOnly:!0,value:!1}},_i18n:q,_css:r,resize:function(){this._resizeCharts();
this.emit("resize")},_clearResizeTimer:function(){this._mediaResizeTimer&&(clearTimeout(this._mediaResizeTimer),this._mediaResizeTimer=0)},_countMediaInfos:function(a){var b=0,c=0;a.forEach(function(a){"image"===a.type?b++:-1!==a.type.indexOf("chart")&&c++});return{total:c+b,images:b,charts:c}},_createMediaNodes:function(a){this._destroyCharts();var b=a.mediaIndex,c=a.mediaInfos[b];a=a.node;d.empty(a);var g=d.create("div",{className:r.mediaItem},a),b=this._createMediaType(c,b);d.place(b,g,"only");
c.title&&d.create("div",{className:r.mediaItemTitle,innerHTML:c.title},a);c.caption&&d.create("div",{className:r.mediaItemCaption,innerHTML:c.caption},a);this._clearResizeTimer();this._mediaResizeTimer=setTimeout(function(){this.resize();this._clearResizeTimer()}.bind(this),0)},_createMediaType:function(a,c){var g=a.value,e;if("image"===a.type){var h=d.create("img",{alt:a.title||"",src:g.sourceURL});g.linkURL?(e=d.create("a",{title:a.title||"",href:g.linkURL,target:this._preventNewTab(g.linkURL)?
"":"_blank"}),d.place(h,e)):e=h}else-1!==a.type.indexOf("chart")&&(e=d.create("div",{className:r.mediaChart},e),g=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],h=a.value.theme||this.chartTheme,"string"===typeof h&&(h=h.replace(/\./gi,"/"),-1===h.indexOf("/")&&(h="dojox/charting/themes/"+h)),h||(h="dojox/charting/themes/Claro"),g.push(h),this._cancelChartModules(),this._chartsPromise=b.when(n,g).then(function(b){this._showChart(e,a.type,a.value,b[0],b[1],b[2]);this._chartsPromise=null}.bind(this)));
return e},_cancelChartModules:function(){this._chartsPromise&&this._chartsPromise.cancel()},_destroyCharts:function(){this._cancelChartModules();var a;if(this._chartTooltips&&this._chartTooltips.length)for(a=0;a<this._chartTooltips.length;a++)this._chartTooltips[a].destroy();this._chartTooltips.length=0;if(this._charts&&this._charts.length)for(a=0;a<this._charts.length;a++)this._charts[a].destroy();this._charts.length=0},_graphicChanged:function(){this._set("rendered",!1)},_loadingSpinner:function(a){h.toggle(this.domNode,
r.loading,!!a)},_nextMedia:function(a){this._pageMedia(a,"next")},_pageMedia:function(a,b){var c,d=e.get(a,"data-element-index");d&&(c=parseInt(d,10),c=this._elementInfo[c]);if(c){var d=c.mediaInfos,g=c.mediaIndex;"previous"===b?g--:g++;d&&d.length&&(g=(g+d.length)%d.length);c.mediaIndex=g;this._createMediaNodes(c)}},_preventNewTab:function(a){return(a=a&&f.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_previousMedia:function(a){this._pageMedia(a,"previous")},_render:function(a){this._elementInfo=
[];this._destroyCharts();d.empty(this._contentNode);var b=this.viewModel;a&&("string"===typeof a?(a=this._renderText({type:"text",text:a}))&&d.place(a,this._contentNode,"only"):a.nodeName?d.place(a,this._contentNode,"only"):Array.isArray(a)&&a.forEach(function(a,c){var g;switch(a.type){case b.contentTypes.attachments:g=this._renderAttachments(a,c);break;case b.contentTypes.fields:g=this._renderFields(a,c);break;case b.contentTypes.media:g=this._renderMedia(a,c);break;case b.contentTypes.text:g=this._renderText(a,
c)}g&&d.place(g,this._contentNode,0===c?"only":"last")},this));this.resize();setTimeout(function(){this._set("rendered",!0)}.bind(this),0)},_renderAttachments:function(a,b){var c,g=a.attachmentInfos;if(g&&g.length){c=d.create("div");h.add(c,[r.attachments,r.contentElement]);d.create("div",{className:r.attachmentsTitle,textContent:q.attach},c);var e=d.create("ul",{},c);g.forEach(function(a){var b=d.create("li",{},e),b=d.create("a",{href:a.url,target:"_blank"},b);d.create("span",{className:r.iconDownload+
" "+r.attachmentsItemIcon},b);d.create("span",{className:r.attachmentsItem,textContent:a.name||q.noTitle},b)},this)}return c},_renderFields:function(a,b){var c=this.viewModel,g,e=c.graphic.getEffectivePopupTemplate();if(e=a.fieldInfos||e&&e.fieldInfos){var l=c.formattedAttributes.content[b]||c.formattedAttributes.global;g=d.create("div");h.add(g,[r.fields,r.contentElement]);var c=d.create("table",{summary:q.fieldsSummary},g),f=d.create("tbody",{},c);e.forEach(function(a){if(a.hasOwnProperty("visible")?
a.visible:1){var b=a.fieldName,c=a.label||b,b=l[b]||"",g;a=a.format&&a.format.dateFormat;b&&"string"===typeof b&&(g=b.replace(t,'\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+c+'"\x3e'+q.view+"\x3c/a\x3e"));var e=d.create("tr",{},f),m=c,p=b;g&&g!==b&&(m=c,p=g);d.create("th",{className:r.fieldHeader,innerHTML:m},e);c=d.create("td",{className:r.fieldData,innerHTML:p},e);a&&h.add(c,r.fieldDataDate)}},this)}return g},_renderMedia:function(a,b){var c,g=a.mediaInfos;if(g&&g.length){var e=this._countMediaInfos(g),
l={tabIndex:"0",role:"button"};l["data-element-index"]=b;c=d.create("div");h.add(c,[r.media,r.contentElement]);h.toggle(c,r.showMediaPagination,1<e.total);var m=d.create("ul",{className:r.mediaSummary},c),p=d.create("li",{className:r.mediaImageSummary},m);d.create("span",{className:r.mediaCount,"aria-label":q.numImages,textContent:"("+e.images+")"},p);d.create("span",{"aria-hidden":!0,className:r.mediaImageIcon+" "+r.iconMedia},p);m=d.create("li",{className:r.mediaImageSummary},m);d.create("span",
{className:r.mediaCount,"aria-label":q.numCharts,textContent:"("+e.charts+")"},m);d.create("span",{"aria-hidden":!0,className:r.mediaChartIcon+" "+r.iconChart},m);e=d.create("div",{className:r.mediaContainer},c);m=d.create("div",f.mixin({title:q.previous},l),e);h.add(m,[r.btn,r.mediaPrevious]);p=d.create("span",{"aria-hidden":!0},m);h.add(p,[r.icon,r.mediaPreviousIconLTR,r.iconLeftTriangleArrow]);p=d.create("span",{"aria-hidden":!0},m);h.add(p,[r.icon,r.mediaPreviousIconRTL,r.iconRightTriangleArrow]);
d.create("span",{className:r.iconText,textContent:q.previous},m);g={mediaIndex:0,node:d.create("div",{className:r.mediaItemContainer},e),mediaInfos:g};this._elementInfo[b]=g;this._createMediaNodes(g);l=d.create("div",f.mixin({title:q.next},l),e);h.add(l,[r.btn,r.mediaNext]);g=d.create("span",{"aria-hidden":!0},l);h.add(g,[r.icon,r.mediaNextIconLTR,r.iconRightTriangleArrow]);g=d.create("span",{"aria-hidden":!0},l);h.add(g,[r.icon,r.mediaNextIconRTL,r.iconLeftTriangleArrow]);d.create("span",{className:r.iconText,
textContent:q.next},l)}return c},_renderText:function(a,b){var c;a&&a.text&&(c=d.create("div",{innerHTML:a.text}),h.add(c,[r.text,r.contentElement]));return c},_resizeCharts:function(){if(this._charts&&this._charts.length)for(var a=0;a<this._charts.length;a++){var b=this._charts[a],c=b.node;c&&(c.offsetWidth&&c.offsetHeight)&&b.resize()}},_showChart:function(a,b,c,d,g,e){a=new d(a,{margins:{l:4,t:4,r:4,b:4}});e&&a.setTheme(e);switch(b){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});
a.addSeries("Series A",c.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",c.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",c.fields);break;case "bar-chart":a.addPlot("default",
{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",c.fields)}b=new g(a);a.render();this._charts.push(a);this._chartTooltips.push(b)}})})},"esri/widgets/Spinner":function(){define("./Widgette ./support/AnchorElementViewModel dojo/i18n!./Spinner/nls/Spinner dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(n,k,a,b,c,f){var e={base:"esri-spinner",
visible:"esri-spinner--visible",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};return n.createSubclass({properties:{viewModel:{type:k}},declaredClass:"esri.widgets.Spinner",baseClass:e.base,postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:e,_i18n:a,animationDelay:500,
visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},_clearTimeout:function(){this._resetTimeout&&clearTimeout(this._resetTimeout)},_setDomClasses:function(a){this.visible&&a?(b.remove(this.domNode,e.spinnerStart),b.remove(this.domNode,e.spinnerFinish),this.domNode.offsetWidth=this.domNode.offsetWidth,b.add(this.domNode,e.spinnerStart)):this.visible&&!a?b.add(this.domNode,e.spinnerFinish):(b.remove(this.domNode,e.spinnerStart),b.remove(this.domNode,e.spinnerFinish))},
_positionDomNode:function(a){a?f.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):(this._clearTimeout(),this._resetTimeout=setTimeout(function(){f.set(this.domNode,{left:"",top:""});this._resetTimeout=0}.bind(this),this.animationDelay))},_visibleChange:function(){b.toggle(this.domNode,e.visible,this.visible)}})})},"esri/widgets/support/AnchorElementViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(n,k,a){return n.createSubclass({properties:{point:{},
screenPoint:{},state:{},view:{}},declaredClass:"esri.widgets.support.AnchorElementViewModel",constructor:function(){this._handles=new k},destroy:function(){this._viewReady&&this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null},point:null,_pointSetter:function(a){this._viewControl(a);this._createScreenPoint(a,this.view);this._set("point",a)},screenPoint:null,state:"disabled",view:null,_viewSetter:function(b){this._handles&&(this._handles.remove("viewHandles"),
this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this.state="disabled";b&&(this._viewReady=b.then(function(){this.state="ready";var c="viewpoint";"3d"===b.type&&(c="camera");this._viewWatch=a.pausable(b,c,function(){this._createScreenPoint(this.point,this.view)}.bind(this));this._handles.add(this._viewWatch,"viewHandles");this._viewControl(this.point)}.bind(this)));this._set("view",b)},_viewControl:function(a){this._viewWatch&&(a?this._viewWatch.resume():this._viewWatch.pause())},_createScreenPoint:function(a,
c){this.screenPoint=a&&c?c.toScreen(a.x,a.y,a.z):null}})})},"esri/widgets/Message":function(){define(["./Widgette","./support/AnchorElementViewModel","dojo/dom-class","dojo/dom-construct","dojo/dom-style"],function(n,k,a,b,c){var f={base:"esri-message",visible:"esri-message--visible",text:"esri-message__text",messageFadeIn:"esri-message--fade-in"};return n.createSubclass({properties:{viewModel:{type:k}},declaredClass:"esri.widgets.Message",baseClass:f.base,constructor:function(){this._text=b.create("span",
{className:f.text})},postCreate:function(){this.inherited(arguments);b.place(this._text,this.domNode);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:f,animationDelay:3E3,visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},text:"",_setTextAttr:{node:"_text",type:"innerText"},_clearTimeout:function(){this._resetTimeout&&
(clearTimeout(this._resetTimeout),this._resetTimeout=0)},_setDomClasses:function(b){this._clearTimeout();a.remove(this.domNode,f.messageFadeIn);this.domNode.offsetWidth=this.domNode.offsetWidth;b&&(a.add(this.domNode,f.messageFadeIn),this._resetTimeout=setTimeout(function(){this.viewModel.point=null;this._resetTimeout=0}.bind(this),this.animationDelay))},_positionDomNode:function(a){a?c.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):c.set(this.domNode,{left:"",top:""})},_visibleChange:function(){a.toggle(this.domNode,
f.visible,this.visible)}})})},"esri/views/ui/DefaultUI":function(){define("../../core/watchUtils ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom ./Component ./UI dojo/_base/lang dojo/dom-geometry".split(" "),function(n,k,a,b,c,f,e,h,d){return e.createSubclass({declaredClass:"esri.views.ui.DefaultUI",constructor:function(){this._addComponents=this._addComponents.bind(this);this._componentsWatcher=this._componentsWatcher.bind(this);this._updateViewAwareWidgets=
this._updateViewAwareWidgets.bind(this)},getDefaults:function(){return h.mixin(this.inherited(arguments),{components:[]})},initialize:function(){this._handles.add([n.init(this,"components",this._componentsWatcher),n.init(this,"view",this._updateViewAwareWidgets)])},_defaultPositionLookup:null,_componentsSetter:function(a){this._set("components",a||[])},_findComponentPosition:function(a){if(!this._defaultPositionLookup){var b=d.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?
"top-left":"top-right","navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]},_removeComponents:function(a){a.forEach(function(a){if(a=this.find(a))this.remove(a),a.destroy()},this)},_updateViewAwareWidgets:function(a){this.components.forEach(function(b){if(b=(b=this.find(b))&&b.widget)b.viewModel&&b.viewModel.hasOwnProperty("view")?b.viewModel.view=a:b.hasOwnProperty("view")&&b.set("view",a)},this)},_componentsWatcher:function(a,b){this._removeComponents(b);
this._addComponents(a)},_addComponents:function(a){this.initialized&&a.forEach(function(a){this.add(this._createComponent(a),this._findComponentPosition(a))},this)},_createComponent:function(a){var b=this._createWidget(a);if(b)return new f({id:a,node:b})},_createWidget:function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()},_createAttribution:function(){var a=
new k({viewModel:{view:this.view}});a.startup();return a},_createCompass:function(){var b=new a({viewModel:{view:this.view}});b.startup();return b},_createNavigationToggle:function(){var a=new b({viewModel:{view:this.view}});a.startup();return a},_createZoom:function(){var a=new c({viewModel:{view:this.view}});a.startup();return a}})})},"esri/widgets/Attribution":function(){define("../core/watchUtils ./Attribution/AttributionViewModel ./support/viewModelWiring ./Widgette dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/on dojo/text!./Attribution/templates/Attribution.html".split(" "),
function(n,k,a,b,c,f,e,h,d,l){var g={base:"esri-attribution",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",clearFix:"esri-clearfix",interactive:"esri-interactive",hidden:"esri-hidden"};return b.createSubclass([c],{declaredClass:"esri.widgets.Attribution",baseClass:g.base,templateString:l,constructor:function(){this._attributionTextWatcher=this._attributionTextWatcher.bind(this);
this._updateStatus=this._updateStatus.bind(this)},postCreate:function(){this.inherited(arguments);this.own(d(this._sourcesNode,f,this._toggleOpenState.bind(this)),n.init(this.viewModel,"view.size",this._updateStatus),n.init(this.viewModel,"attributionText",this._attributionTextWatcher))},_css:g,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:k}},_attributionTextWatcher:function(a){this._sourcesNode.innerHTML=a;this._updateStatus()},_updateStatus:function(){var a=this.domNode,b=this._sourcesNode,
c=h.contains(a,g.open);h.remove(a,g.open);h.remove(b,g.sourcesOpen);h.remove(b,g.interactive);e.remove(b,"role");e.remove(b,"tabIndex");this._hasOverflowingText()&&(h.add(b,g.interactive),c&&(h.add(a,g.open),h.add(b,g.sourcesOpen)),e.set(b,{tabIndex:0,role:"button"}))},_hasOverflowingText:function(){var a=this._sourcesNode;return a.scrollWidth>a.clientWidth},_toggleOpenState:function(){h.contains(this._sourcesNode,g.interactive)&&h.toggle(this.domNode,g.open);this._updateStatus()}})})},"esri/widgets/Attribution/AttributionViewModel":function(){define("dojo/_base/lang ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/lang ../../core/watchUtils ../../geometry/Extent ../../geometry/support/webMercatorUtils".split(" "),
function(n,k,a,b,c,f,e,h){return k.createSubclass([a],{properties:{attributionText:{dependsOn:["items","itemDelimiter"],readOnly:!0},itemDelimiter:{},items:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Attribution.AttributionViewModel",constructor:function(){this._handles=new b;this._pendingAttributionItemsByLayerId={};this._attributionDataByLayerId={};this._updateAttributionItems=this._updateAttributionItems.bind(this)},getDefaults:function(){return n.mixin(this.inherited(arguments),
{items:[]})},initialize:function(){this._handles.add(f.init(this,"view",this._viewWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},_handles:null,_pendingAttributionItemsByLayerId:null,_attributionDataByLayerId:null,attributionText:null,_attributionTextGetter:function(){return this.items.join(this.itemDelimiter)},itemDelimiter:" | ",items:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_viewWatcher:function(a){var b=
this._handles;b&&b.remove();a&&(b.add([a.allLayerViews.on("change",function(a){this._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){b.remove(a.uid)}),this._updateAttributionItems())}.bind(this)),f.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))},_addLayerViews:function(a){a.forEach(function(a){this._handles.has(a.uid)||this._handles.add(f.init(a,"suspended",this._updateAttributionItems),a.uid)},this)},_updateAttributionItems:function(){var a=
[];this._getActiveLayerViews().forEach(function(b){var c=b.layer,e,h;c.hasAttributionData?(e=this._attributionDataByLayerId,e[c.uid]?(b=this._getDynamicAttribution(e[c.uid],this.view,c),this._isUnique(a,b)&&a.push(b)):(h=this._pendingAttributionItemsByLayerId,this._inProgress(h[c.uid])||(h[c.uid]=c.fetchAttributionData().then(function(a){a=this._createContributionIndex(a,this._isBingLayer(c));delete h[c.uid];e[c.uid]=a;this._updateAttributionItems()}.bind(this))))):(b=c.copyright,this._isUnique(a,
b)&&a.push(b))},this);this._itemsChanged(this.items,a)&&(this.items=a)},_itemsChanged:function(a,b){return a.length!==b.length||a.some(function(a,c){return a!==b[c]})},_inProgress:function(a){return a&&!a.isFulfilled()},_getActiveLayerViews:function(){return(this.get("view.allLayerViews")||[]).filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})},_isUnique:function(a,b){return b&&-1===a.indexOf(b)},_isBingLayer:function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")},
_createContributionIndex:function(a,b){var g=a.contributors,f={},q,p,r,t,s,k,v,w;if(!g)return f;for(t=0;t<g.length;t++)if(q=g[t],p=q.coverageAreas)for(s=0;s<p.length;s++){r=p[s];k=r.bbox;w=r.zoomMin-(b&&r.zoomMin?1:0);v=r.zoomMax-(b&&r.zoomMax?1:0);q={extent:h.geographicToWebMercator(new e({xmin:k[1],ymin:k[0],xmax:k[3],ymax:k[2]})),attribution:q.attribution||"",score:c.isDefined(r.score)?r.score:100,id:t};for(r=w;r<=v;r++)f[r]=f[r]||[],f[r].push(q)}f.maxKey=Math.max.apply(null,Object.keys(f));return f},
_getDynamicAttribution:function(a,b,g){var e=b.extent;b=g.tileInfo.scaleToZoom(b.scale);var h,f;b=Math.min(a.maxKey,Math.round(b));if(!e||!c.isDefined(b)||-1>=b)return"";a=a[b];h=e.center.clone().normalize();f={};return a.filter(function(a){var b=!f[a.id]&&a.extent.contains(h);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")}})})},"esri/widgets/Compass":function(){define("../core/watchUtils ./Compass/CompassViewModel ./support/viewModelWiring ./Widgette dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!./Compass/nls/Compass dojo/text!./Compass/templates/Compass.html".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g){var m={base:"esri-compass esri-widget-button",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",interactive:"esri-interactive",disabled:"esri-disabled"};return b.createSubclass([c],{declaredClass:"esri.widgets.Compass",baseClass:m.base,templateString:g,constructor:function(){this._applyRotation=this._applyRotation.bind(this);this._handleClick=this._handleClick.bind(this);this._handleState=this._handleState.bind(this)},
postCreate:function(){this.inherited(arguments);this.own(n.init(this.viewModel,"state",this._handleState),n.when(this.viewModel,"orientation",this._applyRotation),this.on(f,this._handleClick))},_css:m,_i18n:l,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:k}},reset:a.createMethodDelegate("reset"),_applyRotation:function(a){a="rotateZ("+a.z+"deg)";d.set(this._iconNode,{transform:a,mozTransform:a,webkitTransform:a,oTransform:a,msTransform:a})},_handleClick:function(){this.viewModel.reset()},
_handleState:function(a){var b="disabled"===a;a="compass"===("rotation"===a?"rotation":"compass");h.toggle(this.domNode,m.disabled,b);h.toggle(this.domNode,m.interactive,!b);e.set(this.domNode,"tabindex",b?"":0);h.toggle(this._iconNode,m.northIcon,a);h.toggle(this._iconNode,m.rotationIcon,!a)}})})},"esri/widgets/Compass/CompassViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils","dojo/_base/lang"],function(n,k,a,b){return n.createSubclass({declaredClass:"esri.widgets.CompassViewModel",
properties:{canShowNorth:{dependsOn:["spatialReference"]},orientation:{},spatialReference:{dependsOn:["view.spatialReference"]},state:{dependsOn:["view.ready","canShowNorth"]},view:{}},constructor:function(){this._handles=new k;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)},getDefaults:function(){return b.mixin(this.inherited(arguments),{orientation:{x:0,y:0,z:0}})},
initialize:function(){this._handles.add(a.init(this,"view",this._updateRotationWatcher))},destroy:function(){this._handles.destroy()},_handles:null,canShowNorth:!1,_canShowNorthGetter:function(){var a=this.spatialReference;return a&&(a.isWebMercator||4326===a.wkid)},orientation:null,spatialReference:null,_spatialReferenceGetter:function(){return this.get("view.spatialReference")||null},state:"disabled",_stateGetter:function(){return!this.get("view.ready")?"disabled":this.canShowNorth?"compass":"rotation"},
view:null,reset:function(){var a=this.view;a&&a.ready&&("2d"===a.type?a.goTo({rotation:0}):a.goTo({heading:0}))},_updateForRotation:function(a){void 0===a||null===a||(this.orientation={z:a})},_updateForCamera:function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})},_updateRotationWatcher:function(b){this._handles.removeAll();b&&("2d"===b.type?this._handles.add(a.init(this,"view.rotation",this._updateForRotation)):this._handles.add(a.init(this,"view.camera",this._updateForCamera)))}})})},"esri/widgets/NavigationToggle":function(){define("dojo/dom-class dojo/dom-attr dojo/on dijit/_TemplatedMixin dijit/a11yclick ../core/watchUtils ./support/viewModelWiring ./Widgette ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle dojo/text!./NavigationToggle/templates/NavigationToggle.html".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g){var m={base:"esri-navigation-toggle",button:"esri-navigation-toggle__button esri-widget-button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",disabled:"esri-disabled"};return h.createSubclass([b],{declaredClass:"esri.widgets.NavigationToggle",baseClass:m.base,
templateString:g,postCreate:function(){this.inherited(arguments);this.own(f.init(this,"viewModel.state",this._handleState),f.init(this,"viewModel.navigationMode",this._applyPrimaryButton),a(this.domNode,c,this.viewModel.toggle))},_css:m,_i18n:l,properties:{layout:{value:"vertical",set:function(a){"horizontal"!==a&&(a="vertical");n.toggle(this.domNode,m.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)}},view:{aliasOf:"viewModel.view"},viewModel:{type:d}},toggle:e.createMethodDelegate("toggle"),
_handleState:function(a){a="disabled"===a;n.toggle(this.domNode,m.disabled,a);k.set(this.domNode,"tabindex",a?"":0)},_applyPrimaryButton:function(a){a="pan"===a;n.toggle(this._panButtonNode,m.activeButton,a);n.toggle(this._rotateButtonNode,m.activeButton,!a)}})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(n,k,a){return n.createSubclass({declaredClass:"esri.widgets.NavigationToggleViewModel",
properties:{navigationMode:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},constructor:function(){this._handles=new k;this.toggle=this.toggle.bind(this)},initialize:function(){this._handles.add(a.when(this,"view.inputManager",this._setNavigationMode.bind(this)))},destroy:function(){this._handles.destroy()},_handles:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},navigationMode:"pan",view:null,toggle:function(){"disabled"!==
this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())},_setNavigationMode:function(){this.view.inputManager.primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}})})},"esri/widgets/Zoom":function(){define("../core/sniff ../core/watchUtils ./support/viewModelWiring ./Widgette ./Zoom/ZoomViewModel dijit/_TemplatedMixin dijit/a11yclick dojo/dom dojo/dom-class dojo/dom-attr dojo/on dojo/i18n!./Zoom/nls/Zoom dojo/text!./Zoom/templates/Zoom.html".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q){var p={base:"esri-zoom",button:"esri-button esri-widget-button",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon",isLayoutHorizontal:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus"};return b.createSubclass([f],{declaredClass:"esri.widgets.Zoom",baseClass:p.base,templateString:q,constructor:function(){this._handleZoomOutClick=this._handleZoomOutClick.bind(this);this._handleZoomInClick=
this._handleZoomInClick.bind(this);this._handleStateChange=this._handleStateChange.bind(this);this._handleZoomInChange=this._handleZoomInChange.bind(this);this._handleZoomOutChange=this._handleZoomOutChange.bind(this)},postCreate:function(){this.inherited(arguments);n("css-user-select")||h.setSelectable(this.domNode,!1);this.own(g(this._zoomInNode,e,this._handleZoomInClick),g(this._zoomOutNode,e,this._handleZoomOutClick),k.init(this.viewModel,"state",this._handleStateChange),k.init(this.viewModel,
"canZoomIn",this._handleZoomInChange),k.init(this.viewModel,"canZoomOut",this._handleZoomOutChange))},_css:p,_i18n:m,properties:{layout:{value:"vertical",set:function(a){"horizontal"!==a&&(a="vertical");d.toggle(this.domNode,p.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)}},view:{aliasOf:"viewModel.view"},viewModel:{type:c}},zoomIn:a.createMethodDelegate("zoomIn"),zoomOut:a.createMethodDelegate("zoomOut"),_handleStateChange:function(a){(a="ready"===a)?(l.set(this._zoomInNode,"tabindex",
0),l.set(this._zoomOutNode,"tabindex",0),d.add(this._zoomInNode,p.interactive),d.add(this._zoomOutNode,p.interactive)):(l.remove(this._zoomInNode,"tabindex"),l.remove(this._zoomOutNode,"tabindex"),d.remove(this._zoomInNode,p.interactive),d.remove(this._zoomOutNode,p.interactive));d.toggle(this.domNode,p.disabled,!a)},_handleZoomInChange:function(a){d.toggle(this._zoomInNode,p.disabled,!a);d.toggle(this._zoomInNode,p.interactive,a)},_handleZoomOutChange:function(a){d.toggle(this._zoomOutNode,p.disabled,
!a);d.toggle(this._zoomOutNode,p.interactive,a)},_handleZoomInClick:function(){this.viewModel.zoomIn()},_handleZoomOutClick:function(){this.viewModel.zoomOut()}})})},"esri/widgets/Zoom/ZoomViewModel":function(){define(["../../core/Accessor"],function(n){return n.createSubclass({properties:{state:{dependsOn:["view.ready"],readOnly:!0},canZoomIn:{dependsOn:["view.ready","view.scale"],readOnly:!0},canZoomOut:{dependsOn:["view.ready","view.scale"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Zoom.ZoomViewModel",
constructor:function(){this.zoomIn=this.zoomIn.bind(this);this.zoomOut=this.zoomOut.bind(this)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_canZoomInGetter:function(){if("2d"!==this.get("view.type"))return!0;var k=this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||k>a},_canZoomOutGetter:function(){if("2d"!==this.get("view.type"))return!0;var k=this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");
return 0===a||k<a},zoomIn:function(){this.canZoomIn&&this._zoomToFactor(0.5)},zoomOut:function(){this.canZoomOut&&this._zoomToFactor(2)},_zoomToFactor:function(k){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*k})}})})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(n,k,a,b,c,f,e,h){return function(d){function f(){d.apply(this,
arguments);this.widget=null}a(f,d);f.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(f.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"node",{set:function(a){var b=this._get("node");if(a!==b){var c;a&&a.domNode?(c=a.domNode,this._set("widget",a)):(c=e.byId(a),this._set("widget",null));c&&h.add(c,"esri-component");b&&
h.remove(b,"esri-component");this._set("node",c)}},enumerable:!0,configurable:!0});b([c.property()],f.prototype,"id",null);b([c.property()],f.prototype,"node",null);b([c.property({readOnly:!0})],f.prototype,"widget",void 0);return f=b([c.subclass("esri.views.ui.Component")],f)}(c.declared(f))})},"esri/views/ui/UI":function(){define("../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils ./Component dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(n,
k,a,b,c,f,e,h){function d(a){return a&&!a._started&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup}var l={left:0,top:0,bottom:0,right:0},g={bottom:30,top:15,right:15,left:15};return n.createSubclass({properties:{container:{},height:{readOnly:!0,dependsOn:["view.height"]},padding:{},view:{},width:{readOnly:!0,dependsOn:["view.width"]}},declaredClass:"esri.views.ui.UI",constructor:function(){this._components=
[];this._handles=new k;this._initContainers()},getDefaults:function(){return c.mixin(this.inherited(arguments),{padding:g})},initialize:function(){this._handles.add(a.init(this,"view.padding, container",this._applyViewPadding.bind(this)),a.init(this,"padding",this._applyUIPadding.bind(this)))},destroy:function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},_cornerNameToContainerLookup:null,_positionNameToContainerLookup:null,
_components:null,_handles:null,container:null,_containerSetter:function(a){var b=this._get("container");a!==b&&(a&&(f.add(a,"esri-ui"),this._attachContainers(a)),b&&(f.remove(b,"esri-ui"),h.set(b,{top:"",bottom:"",left:"",right:""}),e.empty(b)),this._set("container",a))},_heightGetter:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},_paddingSetter:function(a){"number"===typeof a?this._set("padding",{bottom:a,top:a,right:a,
left:a}):this._set("padding",c.mixin({},g,a))},view:null,_widthGetter:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},add:function(a,c){var g;if(Array.isArray(a))a.forEach(function(a){this.add(a,c)},this);else if(c&&"object"===typeof c&&(g=c.index,c=c.position),a&&(!c||this._isValidPosition(c))){if(!a.isInstanceOf||!a.isInstanceOf(b))"object"===typeof a&&("domNode"in a&&!a.domNode&&!d(a.widget))&&(a.domNode=e.create("div")),
a=new b({node:a});this._place({component:a,position:c,index:g});this._components.push(a)}},remove:function(a){if(a){if(Array.isArray(a))return a.map(this.remove,this);if(a=this.find(a)){var b=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(b,1)[0]}}},empty:function(a){if(Array.isArray(a))return a.map(function(a){return this.empty(a).reduce(function(a,b){return a.concat(b)})},this);a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!f.contains(a,
"esri-ui-corner")},this).map(this.remove,this);if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)},move:function(a,b){if(!b||this._isValidPosition(b)){var c=this.remove(a);c&&this.add(c,b)}},find:function(a){return!a?null:a.isInstanceOf&&a.isInstanceOf(b)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a)},_getViewPadding:function(){return this.get("view.padding")||l},_attachContainers:function(a){e.place(this._manualContainer,
a);e.place(this._innerContainer,a)},_initContainers:function(){var a=e.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=e.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d,g,h,f;d=e.create("div",{className:"esri-ui-top-left esri-ui-corner"},a);g=e.create("div",{className:"esri-ui-top-right esri-ui-corner"},a);h=e.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a);f=e.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},
a);this._innerContainer=a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":d,"top-right":g,"bottom-left":h,"bottom-right":f};this._positionNameToContainerLookup=c.mixin({manual:b},this._cornerNameToContainerLookup)},_isValidPosition:function(a){return!!this._positionNameToContainerLookup[a]},_place:function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d,g;-1<c?(d=a.children,0===c?this._placeComponent(b,a,"first"):(g=c>=d.length)?
this._placeComponent(b,a,"last"):this._placeComponent(b,d[c],"before")):this._placeComponent(b,a,"last")},_placeComponent:function(a,b,c){d(a.widget)&&a.widget.startup();e.place(a.node,b,c)},_applyViewPadding:function(){var a=this.container;a&&h.set(a,this._toPxPosition(this._getViewPadding()))},_applyUIPadding:function(){this._innerContainer&&h.set(this._innerContainer,this._toPxPosition(this.padding))},_toPxPosition:function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),
bottom:this._toPxUnit(a.bottom)}},_toPxUnit:function(a){return 0===a?0:a+"px"},_findByComponent:function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b},_findById:function(a){var b=null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b},_findByNode:function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b}})})},"esri/views/animation/easing":function(){define(["require","exports"],function(n,
k){function a(a){return a}function b(a){var b=2*(a-Math.sqrt((a-1)*a)),c=b/2/a;return function(d){return d<c?a*d*d:b*d-b+1}}function c(a,b){return function(c){return c<b?b*a(c/b):1-a((1-c)/(1-b))*(1-b)}}k.linear=a;k.inQuad=function(a){return a*a};k.outQuad=function(a){return 1-k.inQuad(1-a)};k.inOutQuad=function(a){return 0.5>a?k.inQuad(2*a)/2:(k.outQuad(2*(a-0.5))+1)/2};k.inCubic=function(a){return a*a*a};k.outCubic=function(a){return 1-k.inCubic(1-a)};k.inOutCubic=function(a){return 0.5>a?k.inCubic(2*
a)/2:(k.outCubic(2*(a-0.5))+1)/2};k.inQuart=function(a){return a*a*a*a};k.outQuart=function(a){return 1-k.inQuart(1-a)};k.inOutQuart=function(a){return 0.5>a?k.inQuart(2*a)/2:(k.outQuart(2*(a-0.5))+1)/2};k.inQuint=function(a){return a*a*a*a*a};k.outQuint=function(a){return 1-k.inQuint(1-a)};k.inOutQuint=function(a){return 0.5>a?k.inQuint(2*a)/2:(k.outQuint(2*(a-0.5))+1)/2};k.inSine=function(a){return-Math.cos(a*Math.PI/2)+1};k.outSine=function(a){return 1-k.inSine(1-a)};k.inOutSine=function(a){return 0.5>
a?k.inSine(2*a)/2:(k.outSine(2*(a-0.5))+1)/2};k.inExpo=function(a){return Math.pow(2,10*(a-1))};k.outExpo=function(a){return 1-k.inExpo(1-a)};k.inOutExpo=function(a){return 0.5>a?k.inExpo(2*a)/2:(k.outExpo(2*(a-0.5))+1)/2};k.inCirc=function(a){return-(Math.sqrt(1-a*a)-1)};k.outCirc=function(a){return 1-k.inCirc(1-a)};k.inOutCirc=function(a){return 0.5>a?k.inCirc(2*a)/2:(k.outCirc(2*(a-0.5))+1)/2};k.inCoastQuad=c(b(1),1);k.outCoastQuad=c(b(1),0);k.inOutCoastQuad=c(b(1),0.5);k.inCoastCubic=c(b(2),1);
k.outCoastCubic=c(b(2),0);k.inOutCoastCubic=c(b(2),0.5);k.inCoastQuart=c(b(3),1);k.outCoastQuart=c(b(3),0);k.inOutCoastQuart=c(b(3),0.5);k.inCoastQuint=c(b(4),1);k.outCoastQuint=c(b(4),0);k.inOutCoastQuint=c(b(4),0.5);k.named={linear:a,"in-quad":k.inQuad,"out-quad":k.outQuad,"in-out-quad":k.inOutQuad,"in-cubic":k.inCubic,"out-cubic":k.outCubic,"in-out-cubic":k.inOutCubic,"in-quart":k.inQuart,"out-quart":k.outQuart,"in-out-quart":k.inOutQuart,"in-quint":k.inQuint,"out-quint":k.outQuint,"in-out-quint":k.inOutQuint,
"in-sine":k.inSine,"out-sine":k.outSine,"in-out-sine":k.inOutSine,"in-expo":k.inExpo,"out-expo":k.outExpo,"in-out-expo":k.inOutExpo,"in-circ":k.inCirc,"out-circ":k.outCirc,"in-out-circ":k.inOutCirc}})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(n){return n.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/webscene/Environment":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./Lighting".split(" "),
function(n,k,a,b,c,f,e){return function(c){function d(a){c.call(this,a);this.lighting=new e}a(d,c);d.prototype.clone=function(){return new d({lighting:e.prototype.clone.call(this.lighting)})};d.sanitizeJSON=function(a){return{lighting:a.lighting?e.sanitizeJSON(a.lighting):(new e).toJSON()}};b([f.property({type:e,json:{writable:!0}})],d.prototype,"lighting",void 0);return d=b([f.subclass("esri.webscene.Environment")],d)}(f.declared(c))})},"esri/webscene/Lighting":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(n,k,a,b,c,f){return function(c){function h(a){c.call(this,a);this.date=null;this.directShadowsEnabled=!1;this.displayUTCOffset=null}a(h,c);h.prototype.readDate=function(a,b){return null!=b.datetime&&new Date(b.datetime)||null};h.prototype.writeDate=function(a,b){null!=a&&(b.datetime=a.getTime())};h.prototype.readDirectShadowsEnabled=function(a,b){return!!b.directShadows};h.prototype.writedirectShadowsEnabled=function(a,b){a&&(b.directShadows=!0)};h.prototype.writeDisplayUTCOffset=function(a,
b){null!=a&&(b.displayUTCOffset=a)};h.prototype.clone=function(){return new h({date:null!=this.date?new Date(this.date.getTime()):null,directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null})};h.sanitizeJSON=function(a){var b={datetime:a.datetime};void 0!==a.directShadows&&(b.directShadows=!!a.directShadows);void 0!==a.displayUTCOffset&&(b.displayUTCOffset=a.displayUTCOffset);return b};b([f.property({type:Date})],h.prototype,"date",void 0);
b([f.read("date",["datetime"])],h.prototype,"readDate",null);b([f.write("date")],h.prototype,"writeDate",null);b([f.property({type:Boolean})],h.prototype,"directShadowsEnabled",void 0);b([f.read("directShadowsEnabled",["directShadows"])],h.prototype,"readDirectShadowsEnabled",null);b([f.write("directShadowsEnabled")],h.prototype,"writedirectShadowsEnabled",null);b([f.property({type:Number,json:{writable:!0}})],h.prototype,"displayUTCOffset",void 0);b([f.write("displayUTCOffset")],h.prototype,"writeDisplayUTCOffset",
null);return h=b([f.subclass("esri.webscene.Lighting")],h)}(f.declared(c))})},"esri/views/3d/environment/SceneViewEnvironment":function(){define(["dojo/_base/lang","../../../webscene/Environment","../../../webscene/Lighting","./SceneViewLighting","./SceneViewAtmosphere"],function(n,k,a,b,c){var f=k.createSubclass({declaredClass:"esri.views.3d.environment.SceneViewEnvironment",properties:{atmosphere:{type:c,json:{readable:!1}},atmosphereEnabled:{value:!0,json:{readable:!1}},starsEnabled:{value:!0,
json:{readable:!1}},lighting:{set:function(c){if(c)if(this.lighting)null!=c.date&&(this.lighting.date=c.date),null!=c.defaultDate&&(this.lighting.defaultDate=c.defaultDate),null!=c.displayUTCOffset&&(this.lighting.displayUTCOffset=c.displayUTCOffset),this.lighting.directShadowsEnabled=c.directShadowsEnabled,null!=c.ambientOcclusionEnabled&&(this.lighting.ambientOcclusionEnabled=c.ambientOcclusionEnabled),null!=c.cameraTrackingEnabled&&(this.lighting.cameraTrackingEnabled=c.cameraTrackingEnabled);
else if(c instanceof b)this._set("lighting",c);else if(c instanceof a){var h={directShadowsEnabled:c.directShadowsEnabled};null!=c.date&&(h.date=c.date);null!=c.displayUTCOffset&&(h.displayUTCOffset=c.displayUTCOffset);null!=c.defaultDate&&(h.defaultDate=c.defaultDate);this._set("lighting",new b(h))}else this._set("lighting",new b(c));else this.lighting||this._set("lighting",new b)}}},getDefaults:function(){return n.mixin(this.inherited(arguments),{atmosphere:{}})},atmosphere:null,atmosphereEnabled:!0,
starsEnabled:!0,clone:function(){return new f({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled})}});return f})},"esri/views/3d/environment/SceneViewLighting":function(){define(["../../../core/Evented","../../../webscene/Lighting"],function(n,k){var a=new Date,b={target:null,date:null},c={target:null,timezoneOffset:0};return k.createSubclass([n],{declaredClass:"esri.views.3d.environment.SceneViewLighting",properties:{cameraTrackingEnabled:{value:!0},
ambientOcclusionEnabled:{value:!1},defaultDate:{get:function(){return new Date(this._get("defaultDate"))},set:function(a){var b=this._get("date")===this._get("defaultDate");a=new Date(a);this._set("defaultDate",a);b&&this._set("date",a)}},date:{cast:function(a){return a},set:function(a){null!=a&&(this._set("date",new Date(a)),this.positionTimezoneInfo.autoUpdated=!1,this._emitDateWillChange())}}},constructor:function(){this.positionTimezoneInfo={hours:0,minutes:0,seconds:0,autoUpdated:!0};this._autoUpdateDate=
null;var a=(new Date).getFullYear(),a=new Date("March 15, "+a+" 12:00:00 UTC");this._set("defaultDate",a);this._set("date",a)},autoUpdate:function(a,b){var h=this._calculateTimezoneOffset(this.positionTimezoneInfo);this.positionTimezoneInfo.hours=b.hours;this.positionTimezoneInfo.minutes=b.minutes;this.positionTimezoneInfo.seconds=b.seconds;if(null!=a){this.positionTimezoneInfo.autoUpdated=!0;var d=this.date&&this.date.getTime();this._set("date",new Date(a));this._emitDateWillChange()}var l=this._calculateTimezoneOffset(this.positionTimezoneInfo);
h!==l&&(c.target=this,c.timezoneOffset=l,this.emit("timezone-will-change",c));if(null!=a)return d!==a.getTime()},_calculateTimezoneOffset:function(a){return Math.round(a.hours+a.minutes/60+a.seconds/3600)},_emitDateWillChange:function(){b.target=this;a.setTime(this._get("date").getTime());b.date=a;this.emit("date-will-change",b)}})})},"esri/views/3d/environment/SceneViewAtmosphere":function(){define(["../../../core/Accessor"],function(n){return n.createSubclass({properties:{quality:{}},quality:"low",
_qualitySetter:function(k){-1!==["low","high"].indexOf(k)&&this._set("quality",k)},clone:function(){return new this.constructor({quality:this.quality})}})})},"esri/views/3d/environment/SceneViewEnvironmentManager":function(){define("../../../core/declare ../../../core/Accessor ../../../core/Evented ../../../core/promiseUtils ../../../core/watchUtils ../../../core/HandleRegistry ../../../geometry/Point ../../../geometry/support/webMercatorUtils ../../../geometry/SpatialReference ../support/sunUtils ../support/earthUtils ./EnvironmentRenderer".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m){var q=new Date,p={hours:0,minutes:0,seconds:0},r=[0.5773502691896258,-0.5773502691896258,0.5773502691896258];n=n([k,a],{declaredClass:"esri.views.3d.environment.SceneViewEnvironmentManager",referencePointUpdateDelay:200,referencePointUpdateInterval:3E3,referencePointUpdateDistThreshold:1E6,properties:{updating:{dependsOn:["noReferencePositionQueries"],readOnly:!0,get:function(){return!this.noReferencePositionQueries&&(!!this._referencePosUpdateQuery||!!this._referencePosMapCoordsRequested)}},
noReferencePositionQueries:{},view:{},_environmentRenderer:{}},constructor:function(){this._viewHandles=new f;this._environmentRenderer=null;this._viewConnected=this._trackingEnabled=this._preserveAbsoluteDateTime=!1;this._referencePosResetPreserveAbsoluteTime=null;this._resetReferencePosition()},destroy:function(){this._viewHandles.destroy();this.disposeRendering()},disposeRendering:function(){this._environmentRenderer&&(this._environmentRenderer.destroy(),this._environmentRenderer=null);this._resetReferencePosition(!0)},
updateReadyChange:function(a){a&&!this._viewConnected?(this._viewConnected=!0,this.connectView(this.view)):!a&&this._viewConnected&&(this._viewConnected=!1,this.disconnectView(this.view))},connectView:function(a){this._environmentRenderer=new m({view:a});this._viewHandles.add([c.on(this.view,"environment.lighting","date-will-change",this._lightingDateHandler.bind(this)),this.view.watch("interacting,stationary",this._interactingStationaryHandler.bind(this)),this.view.watch("environment.lighting.directShadowsEnabled,environment.lighting.ambientOcclusionEnabled",
this._updateRenderParamsHandler.bind(this)),this.view.watch("spatialReference",this._spatialReferenceHandler.bind(this)),c.init(this.view,"viewingMode",this._viewingModeHandler.bind(this)),c.init(this.view,"environment.lighting.cameraTrackingEnabled",this._updateCameraTracking.bind(this),!0),this.watch("noReferencePositionQueries",this._cameraHandler.bind(this,null))]);this._updateRenderParamsHandler();this._updateLightParams();this._cameraHandler()},_updateCameraTracking:function(a){if(this._trackingEnabled=
a)a=c.on(this,"view.navigation","currentViewChanged",this._cameraHandler.bind(this,null),this._cameraHandler.bind(this,null),null,!0),this._viewHandles.add(a,"camera");else{if(a=this.get("view.environment.lighting"))a.positionTimezoneInfo.autoUpdated=!1;this._viewHandles.remove("camera")}},disconnectView:function(a){this.disposeRendering();this._viewHandles.removeAll()},_lightingDateHandler:function(a){if(a=a.date){var b=this.view.environment.lighting;if(!b.positionTimezoneInfo.autoUpdated){this._preserveAbsoluteDateTime=
!0;var c=this.view.spatialReference;if(!c.isWGS84&&!c.isWebMercator&&(c=this.view.camera.position,!this._referencePosMapCoords||!this._referencePosMapCoords.equals(c))){this._requestReferencePositionUpdate(c);return}this._preupdateTracking(a);this._referencePosWGS84&&(c=g.positionToTimezone(this._referencePosWGS84,p),b.autoUpdate(null,c),this._trackingEnabled&&(b.positionTimezoneInfo.autoUpdated=!0))}this._updateLightParams(a)}},_preupdateTracking:function(a){!this._trackingEnabled&&this.get("view.environment.lighting.cameraTrackingEnabled")&&
this._cameraHandler(a)},_cameraHandler:function(a){var b=this.view.camera;if(b){var c=this.view.spatialReference;c.isWGS84||c.isWebMercator?this._cameraHandlerGlobal(b,a):this._cameraHandlerLocal(b,a)}},_cameraHandlerGlobal:function(a,b){var c=a.position;this._referencePosWGS84||(this._referencePosWGS84=new e({spatialReference:d.WGS84}));c.spatialReference.isWebMercator?h.webMercatorToGeographic(c,!1,this._referencePosWGS84):(this._referencePosWGS84.x=c.x,this._referencePosWGS84.y=c.y);this._referencePosWGS84.z=
c.z;this._autoUpdateTimezone(c,b)||this._updateLightParams(b)},_cameraHandlerLocal:function(a,b){var c=a.position;(!this._referencePosMapCoords||this._referencePosMapCoordsRequested||this._exceedsReferencePosDistThreshold(c))&&this._requestReferencePositionUpdate(c,!0);this.view.mapCoordsHelper&&this._referencePosWGS84&&(this._referencePosWGS84.z=c.z*this.view.mapCoordsHelper.unitInMeters,this._referencePosChanged())},_interactingStationaryHandler:function(){!this.view.interacting&&this.view.stationary&&
this._executePendingReferencePositionUpdate()},_updateLightParams:function(a){var b=this.view.environment.lighting;a=a||b.date;var b=this.view._stage,c;this._referencePosWGS84?(c=l.computeColorAndIntensity(a,this._referencePosWGS84),l.computeDirection(a,this._referencePosWGS84,this.view.viewingMode,c.diffuse.direction)):c={diffuse:{color:[1,1,1],intensity:0.5,direction:r},ambient:{color:[1,1,1],intensity:0.5}};b.setDirectionalLight(c.diffuse);b.setAmbientLight(c.ambient);this._updateRenderParamsHandler()},
_autoUpdateTimezone:function(a,b){if(!this.view.get("environment.lighting.cameraTrackingEnabled"))return!1;q.setTime((b||this.view.environment.lighting.date).getTime());var c=g.positionToTimezone(a,p),d=this.view.environment.lighting.positionTimezoneInfo;if(d.autoUpdated){if(d.hours===c.hours&&d.minutes===c.minutes&&d.seconds===c.seconds)return!1}else d=c;var e=q.getUTCHours()-(c.hours-d.hours),h=q.getUTCMinutes()-(c.minutes-d.minutes),d=q.getUTCSeconds()-(c.seconds-d.seconds);q.setUTCHours(e);q.setUTCMinutes(h);
q.setUTCSeconds(d);return b?!1:this.view.environment.lighting.autoUpdate(q,c)},_updateRenderParamsHandler:function(){var a=this.view._stage,b=!0;this._referencePosWGS84&&(b=l.computeShadowsEnabled(this._referencePosWGS84,this.view.viewingMode));a&&a.setRenderParams({shadowMap:this.view.environment.lighting.directShadowsEnabled&&b,ssao:this.view.environment.lighting.ambientOcclusionEnabled})},_spatialReferenceHandler:function(){this._resetReferencePosition()},_viewingModeHandler:function(a){this._resetReferencePosition()},
_resetReferencePosition:function(a){this._cancelReferencePosUpdates();this._referencePosWGS84=this._referencePosResetPreserveAbsoluteTime=this._referencePosMapCoordsRequested=this._referencePosMapCoords=null;a||this.notifyChange("updating")},_requestReferencePositionUpdate:function(a,c){if(this.view.mapCoordsHelper.canProject()&&!this.noReferencePositionQueries&&(this._referencePosMapCoordsRequested?this._referencePosMapCoordsRequested.copy(a):this._referencePosMapCoordsRequested=a.clone(),this._referencePosResetPreserveAbsoluteTime=
!!c,!this._referencePosUpdateQuery&&!this._referencePosUpdateTimer&&!this.view.interacting&&this.view.stationary)){var d=this,g=this._referencePosUpdateQuery=b.after(this.referencePointUpdateDelay).then(function(){if(d._referencePosUpdateQuery===g)return d._doReferencePositionUpdateQuery(function(){return d._referencePosUpdateQuery!==g})}).always(function(){d._referencePosUpdateQuery===g&&(d._referencePosUpdateQuery=null,d._referencePosUpdateTimer||d._executePendingReferencePositionUpdate(),d.notifyChange("updating"))}),
e=this._referencePosUpdateTimer=b.after(this.referencePointUpdateInterval).then(function(){d._referencePosUpdateTimer===e&&(d._referencePosUpdateTimer=null,d._referencePosUpdateQuery||d._executePendingReferencePositionUpdate())});this.notifyChange("updating")}},_doReferencePositionUpdateQuery:function(a){this._referencePosResetPreserveAbsoluteTime&&(this._preserveAbsoluteDateTime=!1);this._referencePosMapCoords?this._referencePosMapCoords.copy(this._referencePosMapCoordsRequested):this._referencePosMapCoords=
this._referencePosMapCoordsRequested.clone();this._referencePosMapCoordsRequested=this._referencePosResetPreserveAbsoluteTime=null;return this.view.mapCoordsHelper.toGeographic(this._referencePosMapCoords).then(function(b){if(!a()&&!isNaN(b[0])&&!isNaN(b[1])){var c=this._referencePosMapCoords.z*this.view.mapCoordsHelper.unitInMeters;this._referencePosWGS84?(this._referencePosWGS84.x=b[0],this._referencePosWGS84.y=b[1],this._referencePosWGS84.z=c):this._referencePosWGS84=new e({x:b[0],y:b[1],z:c,spatialReference:d.WGS84});
this._referencePosChanged()}}.bind(this))},_executePendingReferencePositionUpdate:function(){var a=this._referencePosMapCoordsRequested;a&&this._requestReferencePositionUpdate(a,this._referencePosResetPreserveAbsoluteTime)},_referencePosChanged:function(){this._preserveAbsoluteDateTime?this._updateLightParams():this._autoUpdateTimezone(this._referencePosWGS84)||this._updateLightParams()},_exceedsReferencePosDistThreshold:function(a){return this._referencePosMapCoords?(a=this._referencePosMapCoords.distance(a),
this.view.mapCoordsHelper&&(a*=this.view.mapCoordsHelper.unitInMeters),a>this.referencePointUpdateDistThreshold):!0},_cancelReferencePosUpdates:function(){this._referencePosUpdateTimer=this._referencePosUpdateQuery=null}});n.FIXED_LIGHT_DIRECTION=r;return n})},"esri/views/3d/support/sunUtils":function(){define(["./mathUtils","../lib/glMatrix","../lib/SunCalc"],function(n,k,a){var b=k.vec3d,c=k.mat4d,f=n.lerp,e=c.identity(),h={azimuth:0,altitude:0};k={local:{altitude:2E3,ambientAtNight:0.2,ambientAtNoon:0.75,
ambientAtTwilight:0.5,diffuseAtNoon:0.25,diffuseAtTwilight:0.5},global:{altitude:2E4,ambient:0.5,diffuse:0.5},planarDirection:{localAltitude:1E5,globalAltitude:1E6,globalAngles:{azimuth:Math.PI/2,altitude:Math.PI/2}}};var d={ambient:{color:b.create(),intensity:0},diffuse:{color:b.create(),intensity:0,direction:b.create()}},l={settings:k,computeDirection:function(d,g,f,r){r||(r=b.create());var t=c.identity(e);if("global"===f)a.getPosition(d,0,0,h),b.set3(0,0,-1,r),c.rotateX(t,-h.azimuth),c.rotateY(t,
-h.altitude);else{var s=l.settings.planarDirection;f=s.globalAngles;s=(g.z-s.localAltitude)/(s.globalAltitude-s.localAltitude);s=n.clamp(s,0,1);1>s?(a.getPosition(d,g.y,g.x,h),h.azimuth=(1-s)*h.azimuth+s*f.azimuth,h.altitude=(1-s)*h.altitude+s*f.altitude):(h.azimuth=f.azimuth,h.altitude=f.altitude);b.set3(0,-1,0,r);c.rotateZ(t,-h.azimuth);c.rotateX(t,-h.altitude)}c.multiplyVec3(t,r);return r},computeShadowsEnabled:function(a,b){return"global"===b?!0:a.z<l.settings.planarDirection.localAltitude},computeColorAndIntensity:function(c,
e){var h,r,t,s=e.z;r=l.settings;b.set3(1,1,1,d.ambient.color);d.ambient.intensity=r.global.ambient;b.set3(1,1,1,d.diffuse.color);d.diffuse.intensity=r.global.diffuse;s=(s-r.local.altitude)/(r.global.altitude-r.local.altitude);s=n.clamp(s,0,1);if(1>s){t=a.getTimes(c,e.y,e.x);r=c.valueOf();var k,v;t.polarException===a.POLAR_EXCEPTION.MIDNIGHT_SUN?(k=r-36E5*(c.getHours()+48)-6E4*c.getMinutes(),v=k+432E6):t.polarException===a.POLAR_EXCEPTION.POLAR_NIGHT?(k=r-2,v=r-1):(k=t.sunrise.valueOf(),v=t.sunset.valueOf());
var w=v-k;t=k+w/2;var x=w/4;h=t-x;var x=t+x,y=0.06*w,w=k-y/2;k+=y/2;var B=v-y/2,H=v+y/2;v=l.settings.local;var D=[0.01,v.ambientAtNight],I=[0.8,0.8,1],A=[0.01,0.01,0.01],z=[v.diffuseAtTwilight,v.ambientAtTwilight],E=[1,0.75,0.75],C=[0.8,0.8,1],J=[0.9*v.diffuseAtNoon,v.ambientAtNoon],F=[1,0.98,0.98],G=[0.98,0.98,1],K=[v.diffuseAtNoon,v.ambientAtNoon],N=[1,1,1],V=[1,1,1];v=[0,0];var U=[0,0],y=[0,0];r<w||r>H?(v=D,U=A,y=I):r<k?(y=k-w,v=g(r-w,y,D,z),U=g(r-w,y,A,E),y=g(r-w,y,I,C)):r<h?(y=h-k,v=g(r-k,y,
z,J),U=g(r-k,y,E,F),y=g(r-k,y,C,G)):r<t?(y=t-h,v=g(r-h,y,J,K),U=g(r-h,y,F,N),y=g(r-h,y,G,V)):r<x?(y=x-t,v=g(r-t,y,K,J),U=g(r-t,y,N,F),y=g(r-t,y,V,G)):r<B?(y=B-x,v=g(r-x,y,J,z),U=g(r-x,y,F,E),y=g(r-x,y,G,C)):r<H&&(y=H-B,v=g(r-B,y,z,D),U=g(r-B,y,E,A),y=g(r-B,y,C,I));r=v[0];t=U;h=v[1];b.lerp(y,d.ambient.color,s,d.ambient.color);d.ambient.intensity=f(h,d.ambient.intensity,s);b.lerp(t,d.diffuse.color,s,d.diffuse.color);d.diffuse.intensity=f(r,d.diffuse.intensity,s)}return d}},g=function(a,b,c,d){for(var g=
[],e=0;e<c.length;e++)g[e]=(d[e]-c[e])*a/b+c[e];return g};return l})},"esri/views/3d/lib/SunCalc":function(){define([],function(){function n(a){return new Date((a+0.5-p)*q)}function k(a,b){return d(f(b)*e(s)+e(b)*f(s)*f(a))}function a(a,b){var d=m*(357.5291+0.98560028*a),g=m*(1.9148*f(d)+0.02*f(2*d)+3E-4*f(3*d)),d=d+g+102.9372*m+c;b||(b={dec:0,ra:0});b.dec=k(d,0);b.ra=l(f(d)*e(s)-h(0)*f(s),e(d));return b}function b(a){var b=m*(134.963+13.064993*a),c=m*(93.272+13.22935*a);a=m*(218.316+13.176396*a)+
6.289*m*f(b);c=5.128*m*f(c);b=385001-20905*e(b);return{ra:l(f(a)*e(s)-h(c)*f(s),e(a)),dec:k(a,c),dist:b}}var c=Math.PI,f=Math.sin,e=Math.cos,h=Math.tan,d=Math.asin,l=Math.atan2,g=Math.acos,m=c/180,q=864E5,p=2440588,r=2451545,t={dec:0,ra:0},s=23.4397*m,u={POLAR_EXCEPTION:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(b,c,g,s){g=m*-g;c*=m;var k=b.valueOf()/q-0.5+p-r;b=a(k,t);g=m*(280.16+360.9856235*k)-g-b.ra;s||(s={azimuth:0,altitude:0});s.azimuth=l(f(g),e(g)*f(c)-h(b.dec)*e(c));s.altitude=
d(f(c)*f(b.dec)+e(c)*e(b.dec)*e(g));return s}},v=[[-0.83,"sunrise","sunset"]];u.addTime=function(a,b,c){v.push([a,b,c])};var w=9E-4;u.getTimes=function(a,b,d){function h(a){a=g((f(a)-f(t)*f(C))/(e(t)*e(C)));return r+(w+(a+l)/(2*c)+s)+0.0053*f(z)-0.0069*f(2*E)}var l=m*-d,t=m*b,s=Math.round(a.valueOf()/q-0.5+p-r-w-l/(2*c));a=w+(0+l)/(2*c)+s;var z=m*(357.5291+0.98560028*a);b=m*(1.9148*f(z)+0.02*f(2*z)+3E-4*f(3*z));var E=z+b+102.9372*m+c,C=k(E,0);a=r+a+0.0053*f(z)-0.0069*f(2*E);b={solarNoon:n(a),nadir:n(a-
0.5),polarException:u.POLAR_EXCEPTION.NORMAL};var J,F,G,K;d=0;for(J=v.length;d<J;d+=1)F=v[d],G=h(F[0]*m),K=a-(G-a),b[F[1]]=n(K),b[F[2]]=n(G);b.polarException=function(a){a=(f(a)-f(t)*f(C))/(e(t)*e(C));return-1>a?u.POLAR_EXCEPTION.MIDNIGHT_SUN:1<a?u.POLAR_EXCEPTION.POLAR_NIGHT:u.POLAR_EXCEPTION.NORMAL}(v[0][0]*m);return b};u.getMoonPosition=function(a,c,g){g=m*-g;c*=m;var t=a.valueOf()/q-0.5+p-r;a=b(t);g=m*(280.16+360.9856235*t)-g-a.ra;t=d(f(c)*f(a.dec)+e(c)*e(a.dec)*e(g));t+=0.017*m/h(t+10.26*m/(t+
5.1*m));return{azimuth:l(f(g),e(g)*f(c)-h(a.dec)*e(c)),altitude:t,distance:a.dist}};u.getMoonFraction=function(c){var d=c.valueOf()/q-0.5+p-r;c=a(d);d=b(d);c=g(f(c.dec)*f(d.dec)+e(c.dec)*e(d.dec)*e(c.ra-d.ra));c=l(149598E3*f(c),d.dist-149598E3*e(c));return(1+e(c))/2};return u})},"esri/views/3d/environment/EnvironmentRenderer":function(){define("../../../core/watchUtils ../support/ExternalRenderer ./PanoramicAtmosphere ./RealisticAtmosphere ./SimpleAtmosphere ./Stars ../webgl-engine/lib/RenderSlot".split(" "),
function(n,k,a,b,c,f,e){return k.createSubclass({declaredClass:"esri.views.3d.environment.EnvironmentRenderer",properties:{view:{},viewingMode:{dependsOn:["view.viewingMode"],get:function(){return this.get("view.viewingMode")||"global"}},atmosphereQuality:{dependsOn:["view.environment.atmosphereEnabled","view.environment.atmosphere.quality"],get:function(){return this.get("view.environment.atmosphereEnabled")?this.get("view.environment.atmosphere.quality")||"none":"none"}},starsEnabled:{dependsOn:["view.environment.starsEnabled"],
get:function(){return this.get("view.environment.starsEnabled")||!1}},transparent:{dependsOn:["view.basemapTerrain.opacity","view.basemapTerrain.wireframe"],get:function(){var a=this.get("view.basemapTerrain");return a&&a._renderer.isTransparent()}},_atmosphere:{},_stars:{},needsRender:{dependsOn:["_stars.needsRender","_atmosphere.needsRender"],get:function(){return!(!this._needsRender&&!(this._atmosphere&&this._atmosphere.needsRender||this._stars&&this._stars.needsRender))}}},constructor:function(){this._STANDARD_SLOT=
e.BACKGROUND;this._SPECIAL_SLOT=e.POSTPROCESSING_ATMOSPHERE;this._slots=[this._STANDARD_SLOT,this._SPECIAL_SLOT];this._stars=this._atmosphere=this._atmosphereReadyPromise=this._AtmosphereClass=null;this._needsRender=!0;this.notifyChange("needsRender")},initialize:function(){this.view._stage.addExternalRenderer(this._slots,this);this._basemapTerrainHandle=n.when(this.view,"basemapTerrain",this._updateBasemapTerrain.bind(this))},destroy:function(){this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=
null);this._stars&&(this._stars.destroy(),this._stars=null);this._basemapTerrainHandle&&this._basemapTerrainHandle.remove();this.view&&(this.view._stage.removeExternalRenderer(this),this.view=null)},setup:function(a){this.watch("viewingMode,atmosphereQuality,transparent,visible",this._updateAtmosphere.bind(this));this._updateAtmosphere();this.watch("starsEnabled,transparent,visible",this._updateStars.bind(this));this._updateStars();this.watch("view.basemapTerrain.loaded",function(){this._needsRender=
!0;this.notifyChange("needsRender")}.bind(this))},resetNeedsRender:function(){this._atmosphere&&(this._atmosphere.resetNeedsRender?this._atmosphere.resetNeedsRender():this._atmosphere.didRender&&(this._atmosphere.needsRender=!1,this._atmosphere.didRender=!1));this._stars&&(this._stars.resetNeedsRender?this._stars.resetNeedsRender():this._stars.didRender&&(this._stars.needsRender=!1,this._stars.didRender=!1));this.didRender&&(this.didRender=this._needsRender=!1,this.notifyChange("needsRender"))},render:function(a){if(!this.get("view.basemapTerrain.loaded")&&
"global"===this.viewingMode)return!1;if(!this._stars&&!this._atmosphere)return!0;this._stars&&this._stars.render(a);this._atmosphere&&this._atmosphere.render(a);return this._stars&&this._stars.didRender||this._atmosphere&&this._atmosphere.didRender},_updateStars:function(){var a=this._getAtmosphereSlot();this.starsEnabled&&!this._stars?(this._stars=new f({view:this.view,slot:a}),this._stars.initializeRenderContext(this.renderContext)):!this.starsEnabled&&this._stars?(this._stars.destroy(),this._stars=
null):this._stars&&(this._stars.slot=a);this._needsRender=!0;this.notifyChange("needsRender")},_updateAtmosphere:function(){var a=this._getAtmosphereSlot();this._atmosphere&&(this._atmosphere.slot=a);if(this._updateAtmosphereClass(this.renderContext)){this._needsRender=!0;this.notifyChange("needsRender");var b=function(){this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=null)}.bind(this);if(this._AtmosphereClass){this._atmosphereReadyPromise&&(this._atmosphereReadyPromise.cancel(),this._atmosphereReadyPromise=
null);var c=new this._AtmosphereClass({view:this.view,slot:a});c.initializeRenderContext(this.renderContext);this._atmosphere?this._atmosphereReadyPromise=c.then(function(){b();this._atmosphereReadyPromise=null;this._atmosphere=c}.bind(this)):this._atmosphere=c;c.then(function(){this._updateBasemapTerrain()}.bind(this))}else b(),this._updateBasemapTerrain()}},_updateAtmosphereClass:function(e){var d=this._AtmosphereClass;"none"===this.atmosphereQuality?this._AtmosphereClass=null:"high"===this.atmosphereQuality&&
!this.transparent&&b.isSupported(e)?this._AtmosphereClass="local"===this.viewingMode?a:b:this._AtmosphereClass="local"===this.viewingMode?a:c;return this._AtmosphereClass!==d},_getAtmosphereSlot:function(){return this.transparent&&"global"===this.viewingMode?this._SPECIAL_SLOT:this._STANDARD_SLOT},_updateBasemapTerrain:function(){var a=this.get("view.basemapTerrain");a&&(a.velvetOverground=!!(this._AtmosphereClass&&this._AtmosphereClass!==b))}})})},"esri/views/3d/support/ExternalRenderer":function(){define("../../../core/declare ../../../core/Accessor ../../../core/Promise dojo/Deferred dojo/aspect dojo/_base/lang".split(" "),
function(n,k,a,b,c,f){return n([k,a],{"-chains-":f.mixin(k._meta.chains,{setup:"after",initializeRenderContext:"after",uninitializeRenderContext:"before"}),properties:{gl:{readOnly:!0,get:function(){return this._gl}},needsRender:{value:!0},visible:{value:!0}},constructor:function(){this.didRender=!1;this.renderContext=null;this.watch("visible",function(){this.needsRender=!0}.bind(this));this._contextDfd=new b},initialize:function(){this.addResolvingPromise(this._contextDfd.promise);c.around(this,
"render",function(a){return function(){return this.isRejected()?this.didRender=!0:!this.isResolved()?!1:!this.visible||a.apply(this,arguments)?this.didRender=!0:!1}.bind(this)}.bind(this));this.then(function(){this.destroyed||this.setup(this.renderContext)}.bind(this))},needsRender:!0,visible:!0,initializeRenderContext:function(a){this.renderContext=a;this._contextDfd.resolve()},uninitializeRenderContext:function(a){},setup:function(a){},render:function(a){return!1}})})},"esri/views/3d/environment/PanoramicAtmosphere":function(){define("dojo/text!./materials/SimpleAtmosphereMaterial.xml dojo/Deferred ../support/ExternalRenderer ../lib/glMatrix ../webgl-engine/lib/GeometryRenderer ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Texture ../webgl-engine/lib/Util ../webgl-engine/lib/GLTextureRep ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot ./resources/SimpleAtmosphereTexture ../../webgl/Program ../webgl-engine/lib/DefaultVertexBufferLayouts ../webgl-engine/lib/DefaultVertexAttributeLocations".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r){var t=b.vec2d,s=b.vec3d,u=b.mat4d,v=h.VertexAttrConstants,w=u.create();return a.createSubclass({declaredClass:"esri.views.3d.environment.PanoramicAtmosphere",properties:{view:{},needsRender:{value:!1},slot:{value:g.BACKGROUND,set:function(a){this.needsRender=!0;this._set("slot",a)}}},constructor:function(){this._renderData={texV:t.create(),silCircleCenter:s.create(),silCircleV1:s.create(),silCircleV2:s.create()};this._textureRep=this._texture=null;this.slot=
g.BACKGROUND},initialize:function(){this._textureDfd=new k;this.addResolvingPromise(this._textureDfd.promise)},destroy:function(){this._textureRep&&(this._texture&&(this._textureRep.release("SimpleAtmosphere"),this._textureRep.getTexture("SimpleAtmosphere").unload()),this._textureRep=null);this._program&&(this._program.dispose(),this._program=null);this._textureDfd&&(this._textureDfd.cancel(),this._textureDfd=null)},initializeRenderContext:function(a){this._textureRep=new d({SimpleAtmosphere:new e(m,
"SimpleAtmosphere",{wrapClamp:!0})},a.programRep,function(){return this.view._stage.getCamera().viewport}.bind(this),a.rctx);this._texture=this._textureRep.aquire("SimpleAtmosphere",void 0,void 0,function(a){this._texture=a.getGLTexture();this._textureDfd.resolve();this._textureDfd=null}.bind(this))},setup:function(a){var b=this._createGeometryData(),d=this.renderContext.rctx;this._renderer=new c(b,p.Pos3,null,d);a.shaderSnippets.vsSimpleAtmosphere||a.shaderSnippets._parse(n);this._program=new q(d,
a.shaderSnippets.vsSimpleAtmosphere,a.shaderSnippets.fsSimpleAtmosphere,r.Default3D,["PANORAMIC"])},render:function(a){if(a.slot!==this.slot||a.pass!==l.MATERIAL||!this._textureRep.getIsLoaded("SimpleAtmosphere"))return!1;var b=this.renderContext.rctx,c=b.gl,d=this._program;b.bindProgram(d);b.bindTexture(this._texture);d.setUniform1i("tex",0);d.setUniformMatrix4fv("proj",a.camera.projectionMatrix);u.toRotationMat(a.camera.viewMatrix,w);d.setUniformMatrix4fv("view",w);d.setUniform4f("color",1,1,1,
1);d.setUniform3fv("lightDirection",a.lightingData.direction);b.setFaceCullingEnabled(!0);b.setDepthFunction(c.LEQUAL);b.setBlendingEnabled(!0);b.setDepthWriteEnabled(!1);this._renderer.render(this._program);b.setDepthWriteEnabled(!0);b.setBlendingEnabled(!1);b.setDepthFunction(c.LESS);b.setFaceCullingEnabled(!1);return!0},_createGeometryData:function(){for(var a=f.createPolySphereGeometry(1,2),b=a.getFaces(),c=b[0].indices[v.POSITION],d=0;d<c.length;d+=3){var g=c[d];c[d]=c[d+2];c[d+2]=g}a=a.getVertexAttr();
c=a[v.NORMAL].data;for(d=0;d<c.length;d++)c[d]=-c[d];return{faces:b[0],vertexAttr:a}}})})},"esri/views/3d/webgl-engine/lib/GeometryRenderer":function(){define("require exports ../materials/internal/MaterialUtil ./DefaultVertexAttributeLocations ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ../../../webgl/Util ../../../webgl/enums".split(" "),function(n,k,a,b,c,f,e,h){return function(){function d(d,g,h,q){this._drawMode=4;this._layout=g;var p=d.faces;this._count=p.indices[p.positionKey].length;
p=new Float32Array(this._count*e.getStride(g)/4);h?h(d,void 0,void 0,null,g,p,0):a.fillInterleaved(d,void 0,void 0,null,g,p,0);this._rctx=q;this._vao=new c(q,b.Default3D,{geometry:g},{geometry:f.createVertex(q,35044,p)})}d.prototype.enablePointRendering=function(a){this._drawMode=a?0:4};d.prototype.render=function(a){var b=this._rctx;b.bindVAO(this._vao);e.assertCompatibleVertexAttributeLocations(this._vao,a);b.drawArrays(this._drawMode,0,this._count)};return d}()})},"esri/views/3d/environment/resources/SimpleAtmosphereTexture":function(){define([],
function(){return"data:image/png;base64,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"})},
"esri/views/3d/environment/RealisticAtmosphere":function(){define("dojo/text!./materials/RealisticAtmosphereMaterial.xml ../../../core/watchUtils ../../../core/HandleRegistry ../support/ExternalRenderer ../lib/glMatrix ../webgl-engine/lib/GeometryRenderer ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot ../webgl-engine/lib/OffscreenRenderingHelper ../support/earthUtils ../../webgl/Program ../webgl-engine/lib/DefaultVertexBufferLayouts ../webgl-engine/lib/DefaultVertexAttributeLocations".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p){var r=g.earthRadius,t=c.vec3d,s=c.vec2d,u=c.vec4d;c=0.02*Math.PI;g=0.004*Math.PI;var v=t.createFrom(1/Math.pow(0.65,4),1/Math.pow(0.57,4),1/Math.pow(0.475,4)),w=t.create(v);t.scale(w,c);t.add(w,t.createFrom(g,g,g));var x=1.5*((1- -0.99999*-0.99999)/(2+-0.99999*-0.99999));b=b.createSubclass({declaredClass:"esri.views.3d.environment.RealisticAtmosphere",properties:{view:{},planar:{value:!1,set:function(a){a=!!a;a!==this.planar&&this._update();this._set("planar",
a)}},needsRender:{value:!1}},constructor:function(){this._handles=new a;this._lowerElevationBoundRadius=0;this._earthRadius=r;this._renderer=this._skyPlanarProgram=this._skyProgram=this._hazePlanarProgram=this._hazeProgram=null;this._renderData={texDepth:s.create(),v3CameraPos:t.create(),v3CameraUp:t.create(),v3CameraRight:t.create(),v3CameraDir:t.create(),v3CameraCenter:t.create(),halfSizeNearPlane:s.create(),v2CameraCenterOffset:s.create(),v4SphereComp:u.create(),v4AtmosParams1:u.create(),v4AtmosParams2:u.create(),
v4AtmosParams3:u.create(),v3InvWavelength:v,v3InvWavelengthScaled:w,v4Radii:u.create(),fScale:0,fScaleDepth:0.25,fLowerAlphaBlendBound:0,fScaleOverScaleDepth:0,fOneOverScaleDepth:0,fScaleDepthBlue:0.05,fOneOverScaleDepthBlue:20,fScaleOverScaleDepthBlue:0,g:-0.99999,g2:-0.99999*-0.99999,fMiePhaseCoefficients:x,showTest:0,nearFar:s.create()};this._updateRadius(r);this._hazeSlot=d.POSTPROCESSING_ATMOSPHERE;this._skySlot=d.BACKGROUND},destroy:function(){this._handles&&(this._handles.destroy(),this._handles=
null);this._hazeProgram&&(this._hazeProgram.dispose(),this._hazeProgram=null);this._hazePlanarProgram&&(this._hazePlanarProgram.dispose(),this._hazePlanarProgram=null);this._skyProgram&&(this._skyProgram.dispose(),this._skyProgram=null);this._skyPlanarProgram&&(this._skyPlanarProgram.dispose(),this._skyPlanarProgram=null)},setup:function(a){var b=e.createSquareGeometry(),c={faces:b.getFaces()[0],vertexAttr:b.getVertexAttr()},b=this.renderContext.rctx;this._renderer=new f(c,q.Pos3Tex,null,b);var d=
this._update.bind(this);this._handles.add(k.on(this,"view.navigation","currentViewChanged",function(a){d(a.camera)},function(){d()},null,!0));var c=this._updateElevation.bind(this),g=this._updateVisibleElevationBounds.bind(this);this._handles.add(k.on(this,"view.basemapTerrain","elevation-change",c,c));this._handles.add(k.on(this,"view.basemapTerrain","elevation-bounds-change",g,g));a.shaderSnippets.fsRealisticAtmosphere||a.shaderSnippets._parse(n);this._hazeProgram=new m(b,a.shaderSnippets.vsRealisticAtmosphere,
a.shaderSnippets.fsRealisticAtmosphere,p.Default3D,["HAZE"]);this._skyProgram=new m(b,a.shaderSnippets.vsRealisticAtmosphere,a.shaderSnippets.fsRealisticAtmosphere,p.Default3D);this._hazePlanarProgram=new m(b,a.shaderSnippets.vsRealisticAtmosphere,a.shaderSnippets.fsRealisticAtmosphere,p.Default3D,["HAZE","PLANAR"]);this._skyPlanarProgram=new m(b,a.shaderSnippets.vsRealisticAtmosphere,a.shaderSnippets.fsRealisticAtmosphere,p.Default3D,["PLANAR"])},render:function(a){if((a.slot==this._hazeSlot||a.slot==
this._skySlot)&&a.pass==h.MATERIAL&&!(a.slot==this._hazeSlot&&a.options.earlyOcclusionPixelDraw)){var b,c=this.renderContext.rctx,d=c.gl,g=a.offscreenRenderingHelper,e=!1;if(a.slot==this._hazeSlot){b=this.planar?this._hazePlanarProgram:this._hazeProgram;c.bindProgram(b);c.setBlendFunctionSeparate(d.ONE,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);g.detachDepthTextureFromBuffer();var e=!0,l=g.getDepthTexture();c.bindTexture(l,0);b.setUniform1i("tDepth",0);b.setUniform4fv("v4SphereComp",this._renderData.v4SphereComp)}a.slot==
this._skySlot&&(b=this.planar?this._skyPlanarProgram:this._skyProgram,c.bindProgram(b),c.setBlendFunctionSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA),b.setUniform4fv("v4SphereComp",this._renderData.v4SphereComp),b.setUniform4fv("v4AtmosParams3",this._renderData.v4AtmosParams3));b.setUniform3fv("v3InvWavelength",this._renderData.v3InvWavelength);b.setUniform3fv("v3InvWavelengthScaled",this._renderData.v3InvWavelengthScaled);b.setUniform3fv("v3LightDir",a.lightingData.direction);
b.setUniform3fv("v3CameraPos",this._renderData.v3CameraPos);b.setUniform3fv("v3CameraUp",this._renderData.v3CameraUp);b.setUniform3fv("v3CameraRight",this._renderData.v3CameraRight);b.setUniform3fv("v3CameraDir",this._renderData.v3CameraDir);b.setUniform2fv("nearFar",this._renderData.nearFar);b.setUniform2fv("halfSizeNearPlane",this._renderData.halfSizeNearPlane);b.setUniform2fv("v2CameraCenterOffset",this._renderData.v2CameraCenterOffset);b.setUniform4fv("v4Radii",this._renderData.v4Radii);b.setUniform4fv("v4AtmosParams1",
this._renderData.v4AtmosParams1);b.setUniform4fv("v4AtmosParams2",this._renderData.v4AtmosParams2);b.setUniform1f("showTest",this._renderData.showTest);c.setDepthTestEnabled(!1);c.setBlendingEnabled(!0);this._renderer.render(b);c.setBlendingEnabled(!1);c.setDepthTestEnabled(!0);c.setBlendFunctionSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);e&&g.restoreDepthTextureToBuffer();return!0}},_setEnableTestImage:function(a){this._renderData.showTest=a?1:0;this.needsRender=!0},_adjustRadiusForTesselation:function(a){var b=
Math.PI/Math.pow(2,4)/16;return a*Math.cos(b)},_normalizeRadius:function(a){a=this._adjustRadiusForTesselation(a);return Math.max(r-1E4,Math.min(a,r))},_updateElevation:function(){if(this.get("view.basemapTerrain.ready")){var a=this._adjustRadiusForTesselation(r+this.view.basemapTerrain.rootTiles[0].elevationBounds[0]);a!==this._lowerElevationBoundRadius&&(this._lowerElevationBoundRadius=a,this._earthRadius=-1,this._updateVisibleElevationBounds())}},_updateVisibleElevationBounds:function(){var a=
this._adjustRadiusForTesselation(r+this.view.basemapTerrain.getElevationBounds()[0]);return 0>this._earthRadius||a<this._earthRadius?this._updateRadius(a):!1},_updateRadius:function(a){this._earthRadius=a;var b=a*a,c=10.25*(a/10),d=c*c,g=1/(c-a),e=g/0.25,h=g/0.05,l=0.3*(c-a)+a,f=1/(c-l),m=this._renderData;u.set4(g,0.25,e,4,m.v4AtmosParams1);u.set4(-0.99999,0.05,h,20,m.v4AtmosParams2);u.set4(-0.99999*-0.99999,x,l,f,m.v4AtmosParams3);u.set4(a,b,c,d,m.v4Radii);m.fScale=g;m.fLowerAlphaBlendBound=l;m.fScaleOverScaleDepth=
e;m.fScaleOverScaleDepthBlue=h;this._update();return!0},_update:function(a){if(a=a||this.get("view.navigation.currentCamera")){t.negate(a.viewForward,this._renderData.v3CameraDir);t.set(a.viewUp,this._renderData.v3CameraUp);t.set(a.viewRight,this._renderData.v3CameraRight);if(this.planar){var b=this.view.renderCoordsHelper;this._renderData.fCameraHeight=b.getAltitude(a.eye)/b.unitInMeters+r}else this._renderData.fCameraHeight=t.length(a.eye);this._renderData.fCameraHeight2=this._renderData.fCameraHeight*
this._renderData.fCameraHeight;this._renderData.fC=this._renderData.fCameraHeight2-this._renderData.v4Radii[3];this._renderData.fCSur=this._renderData.fCameraHeight2-this._renderData.v4Radii[1];this._renderData.v4SphereComp=u.createFrom(this._renderData.fCameraHeight,this._renderData.fCameraHeight2,this._renderData.fC,this._renderData.fCSur);t.set(a.eye,this._renderData.v3CameraPos);t.set(a.center,this._renderData.v3CameraCenter);s.set2(Math.tan(a.fovX/2)/(a.width/a.fullWidth),Math.tan(a.fovY/2)/
(a.height/a.fullHeight),this._renderData.halfSizeNearPlane);s.set2((a.padding[3]+a.width/2)/a.fullWidth-0.5,(a.padding[2]+a.height/2)/a.fullHeight-0.5,this._renderData.v2CameraCenterOffset);s.set2(a.near,a.far,this._renderData.nearFar);this.needsRender=!0}}});b.isSupported=function(a){return l.supportsDepthTexture(a.rctx.extensions)};return b})},"esri/views/3d/environment/SimpleAtmosphere":function(){define("dojo/text!./materials/SimpleAtmosphereMaterial.xml dojo/Deferred ../../../core/watchUtils ../support/ExternalRenderer ../lib/glMatrix ../webgl-engine/lib/GeometryRenderer ../webgl-engine/lib/Texture ../webgl-engine/lib/Util ../webgl-engine/lib/GLTextureRep ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot ./resources/SimpleAtmosphereTexture ../support/earthUtils ../../webgl/Program ../webgl-engine/lib/DefaultVertexAttributeLocations".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r){var t=q.earthRadius,s=c.vec3d,u=c.vec2d,v=c.mat4d,w=h.VertexAttrConstants,x=(t-1E4)/t,y=(t+3E5)/t,B=-1E4/3E5,H=1-B;return b.createSubclass({declaredClass:"esri.views.3d.environment.SimpleAtmosphere",properties:{view:{},needsRender:{value:!1},slot:{value:g.BACKGROUND,set:function(a){this.needsRender=!0;this._set("slot",a)}}},constructor:function(){this._renderData={texV:u.create(),silCircleCenter:s.create(),silCircleV1:s.create(),silCircleV2:s.create()};this._textureRep=
this._texture=null},initialize:function(){this._textureDfd=new k;this.addResolvingPromise(this._textureDfd.promise)},destroy:function(){this._currentViewChangedHandle&&(this._currentViewChangedHandle.remove(),this._currentViewChangedHandle=null);this._textureRep&&(this._texture&&(this._textureRep.release("SimpleAtmosphere"),this._textureRep.getTexture("SimpleAtmosphere").unload()),this._textureRep=null);this._program&&(this._program.dispose(),this._program=null);this._textureDfd&&(this._textureDfd.cancel(),
this._textureDfd=null)},initializeRenderContext:function(a){this._textureRep=new d({SimpleAtmosphere:new e(m,"SimpleAtmosphere",{wrapClamp:!0})},a.programRep,function(){return this.view._stage.getCamera().viewport}.bind(this),a.rctx);this._texture=this._textureRep.aquire("SimpleAtmosphere",void 0,void 0,function(a){this._texture=a.getGLTexture();this._textureDfd.resolve();this._textureDfd=null}.bind(this))},setup:function(b){var c=this._createRibbonGeometryData();this._renderer=new f(c,[{name:"position",
count:3,type:5126,offset:0,stride:12,normalized:!1}],null,b.rctx);this._currentViewChangedHandle=a.on(this,"view.navigation","currentViewChanged",function(a){this._update(a.camera)}.bind(this),function(){this._update(this.get("view.navigation.currentCamera"))}.bind(this),null,!0);b.shaderSnippets.vsSimpleAtmosphere||b.shaderSnippets._parse(n);this._program=new p(b.rctx,b.shaderSnippets.vsSimpleAtmosphere,b.shaderSnippets.fsSimpleAtmosphere,r.Default3D)},render:function(a){if(a.slot!==this.slot||a.pass!==
l.MATERIAL)return!1;var b=this.renderContext.rctx,c=b.gl,d=this._program;b.bindProgram(d);d.setUniform4f("color",1,1,1,1);d.setUniformMatrix4fv("proj",a.camera.projectionMatrix);d.setUniformMatrix4fv("view",a.camera.viewMatrix);d.setUniform3fv("silCircleCenter",this._renderData.silCircleCenter);d.setUniform3fv("silCircleV1",this._renderData.silCircleV1);d.setUniform3fv("silCircleV2",this._renderData.silCircleV2);d.setUniform2fv("texV",this._renderData.texV);b.bindTexture(this._texture,0);d.setUniform1i("tex",
0);d.setUniform3fv("lightDirection",a.lightingData.direction);b.setDepthFunction(c.LEQUAL);b.setBlendingEnabled(!0);b.setDepthWriteEnabled(!1);this._renderer.render(d);b.setBlendingEnabled(!1);b.setDepthWriteEnabled(!0);b.setDepthFunction(c.LESS);return!0},_update:function(a){var b=s.create(),c=s.create(),d=s.create(),g=this.view.renderCoordsHelper.getAltitude(a.eye);s.scale(a.eye,(t+50)/s.length(a.eye),d);this._computeSilhouetteCircle(d,a.center,a.up,t);s.add(this._renderData.silCircleCenter,this._renderData.silCircleV2,
b);s.scale(b,y,c);var d=this._computeScreenRimWidth(d,a.up,b,c),e=0,l=1,f=1;50>g?(e=0.001953125,l=0.1015625):500>g?(f=(g-50)/450,e=0.001953125*(1-f)+0.001953125*f,l=0.1015625*(1-f)+0.21875*f):5E3>g?(f=(g-500)/4500,e=0.001953125*(1-f)+0.001953125*f,l=0.21875*(1-f)+0.51171875*f):5E4>g&&(f=(g-5E3)/45E3,e=0.001953125*(1-f)+0.001953125*f,l=0.51171875*(1-f)+0.4140625*f);g=B+e*H;f=B+d*l*H;50<s.length(a.eye)-t&&(this._computeSilhouetteCircle(a.eye,a.center,a.up,t),s.add(this._renderData.silCircleCenter,this._renderData.silCircleV2,
b),s.scale(b,y,c),a=this._computeScreenRimWidth(a.eye,a.up,b,c),a=h.clamp((a-1.5)/(d-1.5),0,1),g=B+a*e*H,f=B+h.lerp(1,d*l,a)*H);u.set2(g,f,this._renderData.texV);this.needsRender=!0},_computeSilhouetteCircle:function(a,b,c,d){var g=s.length(a),e=Math.sqrt(g*g-d*d),e=d*e/g;d=Math.sqrt(d*d-e*e);var h=this._renderData.silCircleV1,l=this._renderData.silCircleV2;s.scale(a,d/g,this._renderData.silCircleCenter);s.cross(a,b,h);1>s.length2(h)&&s.cross(a,c,h);s.scale(h,e/s.length(h));s.cross(h,a,l);s.scale(l,
e/s.length(l));return e},_computeScreenRimWidth:function(a,b,c,d){var g=v.create();v.lookAt(a,c,b,g);a=this.view.navigation.currentCamera;h.project(c,g,a.projectionMatrix,a.viewport);h.project(d,g,a.projectionMatrix,a.viewport);return s.dist(c,d)/a.height},_createRibbonGeometryData:function(){for(var a=new Float32Array(768),b=new Uint32Array(768),c=0;128>c;c++){var d=6*c;a[d+0]=c;a[d+1]=x;a[d+2]=0;a[d+3]=c;a[d+4]=y;a[d+5]=1;var g=2*c,e=127===c?0:g+2;b[d+0]=g;b[d+1]=g+1;b[d+2]=e+1;b[d+3]=e+1;b[d+4]=
e;b[d+5]=g}c={};c[w.POSITION]=b;b={};b[w.POSITION]={size:3,data:a};return{faces:{type:"triangle",indices:c,positionKey:w.POSITION},vertexAttr:b}}})})},"esri/views/3d/environment/Stars":function(){define("dojo/text!./materials/StarMaterial.xml require ../../../request ../../../core/watchUtils ../../../core/promiseUtils ../lib/glMatrix ../support/ExternalRenderer ../webgl-engine/lib/GeometryRenderer ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot ../../webgl/Program ../webgl-engine/lib/DefaultVertexAttributeLocations ../../webgl/Util".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r){var t=f.mat4d;f=f.mat3d;var s=d.VertexAttrConstants,u="9bb2ff;9eb5ff;aabfff;bbccff;ccd8ff ;dae2ff;e4e9ff;eeefff;f8f6ff;fff9fb;fff5ef;fff1e5;ffeddb;ffe9d2;ffe6ca;ffe3c3;ffe0bb;ffddb4;ffdaad;ffd6a5;ffd29c;ffcc8f;ffc178;ffa94b;ff7b00".split(";"),v=f.toMat4(f.createFrom(1,0,0,0,0.9174771405229186,0.39778850739794974,0,-0.39778850739794974,0.9174771405229186)),w=f.toMat4(f.createFrom(1,0,0,0,0.9174771405229186,-0.39778850739794974,0,0.39778850739794974,0.9174771405229186)),
x=null;return e.createSubclass({properties:{view:{},numBinaryFloats:{value:2},numBinaryUInt8:{value:1},bytesPerStar:{value:9},needsRender:{value:!1},slot:{value:m.BACKGROUND,set:function(a){this.needsRender=!0;this._set("slot",a)}}},constructor:function(){this._renderData={model:t.identity()};this.slot=m.BACKGROUND;this._vertexBufferLayout=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:20,normalized:!1},{name:"size",count:1,type:5126,
offset:16,stride:20,normalized:!1}]},initialize:function(){this._loadDataPromise=this._loadBrightStarCatalogue();this.addResolvingPromise(this._loadDataPromise)},destroy:function(){this._loadDataPromise.isFulfilled()||this._loadDataPromise.cancel("Atmosphere has been removed.");this._dateHandle&&(this._dateHandle.remove(),this._dateHandle=null);this._program&&(this._program.dispose(),this._program=null)},setup:function(a){this._numStars=this._starData.byteLength/this.bytesPerStar;var c=new Float32Array(this._starData,
0,this._numStars*this.numBinaryFloats),d=new Uint8Array(this._starData,4*this._numStars*this.numBinaryFloats,this._numStars*this.numBinaryUInt8),c=this._createStarGeometryData(c,d);this._renderer=new h(c,this._vertexBufferLayout,this._fillInterleaved,a.rctx);this._renderer.enablePointRendering(!0);this._dateHandle=b.init(this,"view.environment.lighting.date",this._update.bind(this));a.shaderSnippets.vertexShaderStar||a.shaderSnippets._parse(n);this._program=new q(a.rctx,a.shaderSnippets.vertexShaderStar,
a.shaderSnippets.fragmentShaderStar,p.Default3D)},render:function(a){if(a.slot!==this.slot||a.pass!==g.MATERIAL)return!1;var b=this.renderContext.rctx,c=b.gl,d=this._program;b.bindProgram(d);d.setUniformMatrix4fv("view",a.camera.viewMatrix);d.setUniformMatrix4fv("proj",a.camera.projectionMatrix);d.setUniform4fv("viewport",a.camera.fullViewport);d.setUniformMatrix4fv("model",this._renderData.model);b.setDepthFunction(c.LEQUAL);b.setBlendingEnabled(!0);b.setBlendFunctionSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,
c.ONE,c.ONE_MINUS_SRC_ALPHA);b.setDepthWriteEnabled(!1);this._renderer.render(d);b.setBlendingEnabled(!1);b.setDepthWriteEnabled(!0);b.setDepthFunction(c.LESS);return!0},_fillInterleaved:function(a,b,c,d,g,e,h){var f=r.getStride(g);c=f/4;var m=l.fill,q=a.faces.indices[s.POSITION],p=a.vertexAttr[s.POSITION].data;d=h+r.findAttribute(g,"position").offset/4;for(var t=0;t<q.length;++t){var x=3*q[t];m(p,x,e,d,b,3);d+=c}b=a.faces.indices[s.COLOR];q=a.vertexAttr[s.COLOR].data;d=h+r.findAttribute(g,"color").offset;
p=new Uint8Array(e.buffer);for(t=0;t<b.length;++t)x=4*b[t],m(q,x,p,d,null,4),d+=f;f=a.faces.indices[s.SIZE];a=a.vertexAttr[s.SIZE].data;d=h+r.findAttribute(g,"size").offset/4;for(t=0;t<f.length;++t)e[d]=a[f[t]],d+=c},_computeDayDuration:function(a){var b=new Date(a.getFullYear(),0,1,11,58,56),c=new Date(a.getFullYear()+1,0,1,11,58,55);return(a-b)/(c-b)},_update:function(a){if(a){var b=a.getHours()/12,c=a.getMinutes()/60*(2/24),d=a.getSeconds()/60*(2/1440),b=(b+c+d-0.9972222)%2;a=2*this._computeDayDuration(a);
c=t.create(w);t.rotateZ(c,-a*Math.PI);t.multiply(v,c,c);t.rotateZ(c,-b*Math.PI);this._renderData.model=c;this.needsRender=!0}},_hexToRGB:function(a){return[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]},_unpackUint8Attributes:function(a){return 192<=a?[2.9,a-192]:160<=a?[2.5,a-160]:128<=a?[2,a-128]:96<=a?[1.5,a-96]:64<=a?[1,a-64]:32<=a?[0.7,a-32]:[0.4,a]},_createStarGeometryData:function(a,b){for(var c=new Float32Array(3*this._numStars),d=new Uint8Array(4*
this._numStars),g=new Float32Array(this._numStars),e=new Uint32Array(this._numStars),h=0;h<this._numStars;h++){var l=2*h,f=3*h,m=4*h,q=a[l+0],l=a[l+1];c[f+0]=-Math.cos(q)*Math.sin(l);c[f+1]=-Math.sin(q)*Math.sin(l);c[f+2]=-Math.cos(l);f=this._unpackUint8Attributes(b[h]);q=this._hexToRGB(u[f[1]]);d[m+0]=255*q[0];d[m+1]=255*q[1];d[m+2]=255*q[2];d[m+3]=255;g[h]=f[0];e[h]=h}h={};h[s.POSITION]=e;h[s.NORMAL]=e;h[s.UV0]=e;h[s.COLOR]=e;h[s.SIZE]=e;e={};e[s.POSITION]={size:3,data:c};e[s.COLOR]={size:4,data:d};
e[s.SIZE]={size:1,data:g};return{faces:{type:"point",indices:h,positionKey:s.POSITION},vertexAttr:e}},_loadBrightStarCatalogue:function(){return x?(this._starData=x,c.resolve()):a(k.toUrl("./resources/stars.wsv"),{responseType:"array-buffer",failOk:!0}).then(function(a){if(a=a.data)this._starData=x=a;else throw Error("no data received");}.bind(this)).otherwise(function(a){console.error("Failed to load star data:",a);throw a;})}})})},"esri/views/3d/constraints/SceneViewConstraints":function(){define(["../../../core/Accessor",
"./SceneViewAltitudeConstraint","./SceneViewClipDistanceConstraint","./SceneViewTiltConstraint","./SceneViewCollisionConstraint"],function(n,k,a,b,c){return n.createSubclass([],{declaredClass:"esri.views.3d.constraints.SceneViewConstraints",properties:{tilt:b,altitude:k,clipDistance:a,collision:c},getDefaults:function(a){var b={};a.tilt||(b.tilt={});a.altitude||(b.altitude={});a.clipDistance||(b.clipDistance={});a.collision||(b.collision={});return b},scale:function(a){this.tilt.scale(a);this.altitude.scale(a);
this.clipDistance.scale(a)}})})},"esri/views/3d/constraints/SceneViewAltitudeConstraint":function(){define(["../../../core/Accessor","../support/earthUtils"],function(n,k){var a=4*k.earthRadius,b=n.createSubclass([],{declaredClass:"esri.views.3d.constraints.SceneViewAltitudeConstraint",properties:{mode:{value:"auto"},min:{value:-Infinity,set:function(a){this._set("min",a);this._get("max")<a&&this._set("max",a);this.mode="manual"}},max:{value:a,set:function(a){this._set("max",a);this._get("min")>a&&
this._set("min",a);this.mode="manual"}}},autoUpdate:function(a,b){"auto"===this.mode&&(this._get("min")!==a&&this._set("min",a),this._get("max")!==b&&this._set("max",b))},scale:function(a){this._set("max",this._get("max")*a);this._set("min",this._get("min")*a)}});b.MIN_DEFAULT=-Infinity;b.MAX_DEFAULT=a;return b})},"esri/views/3d/constraints/SceneViewClipDistanceConstraint":function(){define(["../../../core/Accessor"],function(n){return n.createSubclass([],{declaredClass:"esri.views.3d.constraints.SceneViewClipDistanceConstraint",
properties:{near:{value:0,cast:function(k){return Math.max(1E-8,k)},set:function(k){this._set("near",k);k>=this._get("far")&&(this.far=k+1E-9);this.mode="manual"}},far:{value:0,cast:function(k){return Math.max(1E-8,k)},set:function(k){this._set("far",k);k<=this._near&&(this.near=k-1E-9);this.mode="manual"}},mode:{value:"auto"}},autoUpdate:function(k,a){"auto"===this.mode&&(this._get("near")!==k&&this._set("near",k),this._get("far")!==a&&this._set("far",a))},scale:function(k){this._set("near",this._get("near")*
k);this._set("far",this._get("far")*k)}})})},"esri/views/3d/constraints/SceneViewTiltConstraint":function(){define(["../../../core/Accessor","../support/mathUtils"],function(n,k){var a=n.createSubclass([],{declaredClass:"esri.views.3d.constraints.SceneViewTiltConstraint",properties:{mode:{value:"auto"},max:{value:0.5,cast:function(a){return k.clamp(a,0.5,179.5)},set:function(a){this._set("max",a);this.mode="manual"}}},autoUpdate:function(a){"auto"===this.mode&&this._get("max")!==a&&this._set("max",
a)},scale:function(a){}});a.MAX_DEFAULT=0.5;a.MIN_DEFAULT=179.5;return a})},"esri/views/3d/constraints/SceneViewCollisionConstraint":function(){define(["../../../core/Accessor"],function(n){return n.createSubclass([],{declaredClass:"esri.views.3d.constraints.SceneViewCollisionConstraint",properties:{enabled:!0}})})},"esri/views/3d/input/SceneInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/Accessor ../../../core/HandleRegistry ../../../core/accessorSupport/decorators ../../input/InputManager ../../input/BrowserEventSource ../../input/ViewEvents ../../input/handlers/PreventContextMenu ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/DragZoom ./handlers/KeyPan ./handlers/MouseWheelZoom ./handlers/SingleKeyResetHeading ./handlers/SingleKeyResetTilt ./handlers/PointerDownCancelAnimation".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x){n=function(f){function k(){f.apply(this,arguments);this._handles=new e}a(k,f);k.prototype.initialize=function(){var a=this;this.viewEvents=new g.ViewEvents(this.view);this._handles.add([c.whenNot(this.view,"ready",function(){return a._disconnect()}),c.when(this.view,"ready",function(){return a._connect()})])};k.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};Object.defineProperty(k.prototype,
"primaryDragAction",{get:function(){return this._get("primaryDragAction")},set:function(a){if(("pan"===a||"rotate"===a)&&a!==this._get("primaryDragAction"))this._set("primaryDragAction",a),this._updateMode()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"mode",{get:function(){return this._get("mode")},set:function(a){if(("default"===a||"pro"===a)&&a!==this._get("mode"))this._set("mode",a),this._updateMode()},enumerable:!0,configurable:!0});k.prototype._disconnect=function(){this.viewEvents.disconnect();
this._source&&(this._source.destroy(),this._source=null);this._inputManager=null};k.prototype._connect=function(){var a=this.view;this._source=new l.BrowserEventSource(this.view.canvas);var b=new d.InputManager(this._source);b.installHandlers("prevent-context-menu",[new m.PreventContextMenu]);this._modeDragPan=new p.DragPan(a,"primary");this._modeDragRotate=new r.DragRotate(a,"secondary","center");this._modeDragZoom=new t.DragZoom(a,"tertiary");b.installHandlers("navigation",[new x.PointerDownCancelAnimation(a),
new q.DoubleClickZoom(a),new s.KeyPan(a,{left:"ArrowLeft",right:"ArrowRight",forward:"ArrowUp",backward:"ArrowDown",up:"u",down:"j"}),new u.MouseWheelZoom(a),new w.SingleKeyResetTilt(a,"p"),new v.SingleKeyResetHeading(a,"n"),new r.DragRotate(a,"primary","eye",["b"]),new r.DragRotate(a,"secondary","center",["b"]),new p.DragPan(a,"tertiary",["b"]),this._modeDragPan,this._modeDragRotate,this._modeDragZoom]);this.viewEvents.connect(b);this._updateMode()};k.prototype._updateMode=function(){var a=this.primaryDragAction,
a=y.get(this.mode).get(a);this._modeDragPan&&(this._modeDragPan.pointerType=a.pan);this._modeDragRotate&&(this._modeDragRotate.pointerType=a.rotate);this._modeDragZoom&&(this._modeDragZoom.pointerType=a.zoom)};b([h.property()],k.prototype,"view",void 0);b([h.property({value:"pan"})],k.prototype,"primaryDragAction",null);b([h.property({value:"default"})],k.prototype,"mode",null);return k=b([h.subclass("esri.views.3d.input.SceneInputManager")],k)}(h.declared(f));var y=new Map;k=new Map;f=new Map;k.set("pan",
{pan:"primary",rotate:"secondary",zoom:"tertiary"});k.set("rotate",{pan:"secondary",rotate:"primary",zoom:"tertiary"});f.set("pan",{pan:"primary",rotate:"tertiary",zoom:"secondary"});f.set("rotate",{pan:"tertiary",rotate:"primary",zoom:"secondary"});y.set("default",k);y.set("pro",f);return n})},"esri/views/input/InputManager":function(){define(["require","exports","./keys","./recognizers","../../core/Logger"],function(n,k,a,b,c){var f=c.getLogger("esri.views.input");n=function(){function c(b,e){this._pointerCaptures=
new Map;this._nameToGroup={};this._handlers=[];this._currentPropagation=null;this._sourceEvents=new Set;this._keyModifiers=new Set;this._activeKeyModifiers=new Set;this.primaryKey=a.primaryKey;this._browserEvents=b;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._installRecognizers(e)}c.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])f.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)f.error("Can't register a group of zero handlers");
else{var e={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=e;for(var h=function(a){var b=e.handlers[a];p._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},emit:function(a,d){c._emitInputEvent(b.priorityIndex,a,d)},setPointerCapture:function(a,d){c._setPointerCapture(e,b,a,d)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=
a}})},p=this,r=e.handlers.length-1;0<=r;r--)h(r);this.updateDependencies()}};c.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):f.error("There is no InputHandler group registered under the name `"+a+"`")};c.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};
c.prototype.updateDependencies=function(){var b=new Set,c=new Set;this._handlersPriority=[];for(var g=this._handlers.length-1;0<=g;g--){var e=this._handlers[g];e.priorityIndex=g;this._handlersPriority.push(e)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(g=this._handlersPriority.length-1;0<=g;g--){e=this._handlersPriority[g];e.priorityIndex=g;var h=e.handler.hasSideEffects;if(!h)for(var f=0,r=e.handler.outgoingEventTypes;f<r.length;f++)if(b.has(r[f])){h=!0;break}if(h){f=
0;for(r=e.handler.incomingEventMatches;f<r.length;f++){var t=r[f];b.add(t.eventType);for(var s=0,t=t.keyModifiers;s<t.length;s++){var k=t[s];a.isSystemModifier(k)||c.add(k)}}}e.active=h}this._sourceEvents=b;this._keyModifiers=c;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};c.prototype._onEventReceived=
function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b)};c.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){if("key-down"===a||"key-up"===a){var e=b.key;this._keyModifiers.has(e)&&("key-down"===a?this._activeKeyModifiers.add(e):this._activeKeyModifiers.delete(e))}var e=b.native,h=function(a,b){b?c._activeKeyModifiers.add(a):c._activeKeyModifiers.delete(a)};h("Alt",!(!e||!e.altKey));h("Ctrl",
!(!e||!e.ctrlKey));h("Shift",!(!e||!e.shiftKey));h("Meta",!(!e||!e.metaKey));h("Primary",this._activeKeyModifiers.has(this.primaryKey))}};c.prototype._installRecognizers=function(a){a||(a=b.defaults.map(function(a){return new a}));0<a.length&&this.installHandlers("default",a)};c.prototype._setPointerCapture=function(a,b,c,e){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures[c.pointerId]||new Set;this._pointerCaptures[c.pointerId]=b;e?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,
!0)):(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};c.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};c.prototype._emitInputEventFromSource=function(a,b){this._emitInputEvent(0,a,b)};c.prototype._emitInputEvent=function(a,b,c){b=new e(b,c);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,
b)};c.prototype._doNewPropagation=function(a,b){for(var c=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1};c.currentHandler;){if(c.currentHandler.removed)c.needsHandlerGarbageCollect=!0;else{var e=c.events,h=[];c.addedEvents=[];for(var f=0;f<e.length;f++){var r=e[f];c.currentHandler.active&&c.currentHandler.eventCallback(r,this._activeKeyModifiers);r.shouldStopPropagation()||h.push(r)}c.events=h.concat(c.addedEvents)}c.currentHandler=
this._handlersPriority[c.currentHandler.priorityIndex+1]}c.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};c.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,e=a.handler.incomingEventMatches;c<e.length;c++)for(var h=e[c],f=function(a){if(h.eventType!==a.eventType)return"continue";var b=h.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});
if(b.length===h.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:h.keyModifiers.length>a.keyModifiers.length?-1:1}},r=0,t=b.handler.incomingEventMatches;r<t.length;r++){var s=f(t[r]);if("object"===typeof s)return s.value}return a.priorityIndex>b.priorityIndex?-1:1};c.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var e=a[c],h=0;h<b.length&&0<=this._compareHandlerPriority(e,b[h]);)h++;b.splice(h,0,e)}return b};return c}();k.InputManager=n;var e=
function(){function a(b,c){this.type=b;this.data=c;this._stopPropagation=!1;this.timestamp=Date.now()}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(n,k,a){k.primaryKey=a("mac")?"Meta":"Ctrl";var b={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",
38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(n=48;58>n;n++)b[n]=String.fromCharCode(n);for(n=1;25>n;n++)b[111+n]="F"+n;for(n=65;91>n;n++)b[n]=[String.fromCharCode(n+32),String.fromCharCode(n)];var c={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};k.eventKey=function(a){if(void 0!==a.key)return c[a.key]||a.key;var e=b[a.keyCode];return Array.isArray(e)?a.shiftKey?e[1]:e[0]:e};k.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},
"esri/views/input/recognizers":function(){define(["require","exports","./recognizers/Drag","./recognizers/PointerClickAndDrag","./recognizers/SingleAndDoubleClick"],function(n,k,a,b,c){k.defaults=[b.PointerClickAndDrag,c.SingleAndDoubleClick,a.Drag]})},"esri/views/input/recognizers/Drag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,k,a,b,c){n=function(b){function e(){b.call(this,"recognizers.Drag",!1);this._activePointers=
[];this._activePointerMap=new Map;this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}a(e,b);e.prototype._createPayload=function(a,b){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,currentState:b}};
e.prototype._fitCircleLSQ=function(){var a=this._activePointers.map(function(a){return a.data.currentEvent});return c.fitCircleLSQ(a)};e.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),b=0,c=0,g=this._activePointers;c<g.length;c++){var e=g[c],e=this._pointerAngle(e,a)-e.initialAngle;0>e&&(e+=2*Math.PI);b+=e}b/=this._activePointers.length;return{angle:b,radius:a.radius,center:a.center}};e.prototype._updateMultiPointer=function(a){var b=a.startEvent.native.pointerId,c=this._activePointerMap.get(b),
g=!c;g&&(c={data:null,initialAngle:0},this._activePointers.push(c),this._activePointerMap.set(b,c));c.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};g&&this._isDragging&&this._updateInitialAngles();return c};e.prototype._pointerAngle=function(a,b){var c=a.data.currentEvent;return Math.atan2(c.y-b.center.y,c.x-b.center.x)};e.prototype._updateInitialAngle=function(a,b){a.initialAngle=this._pointerAngle(a,b);this._previousState&&(a.initialAngle-=this._previousState.angle)};
e.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),b=0,c=this._activePointers;b<c.length;b++)this._updateInitialAngle(c[b],a)};e.prototype._emitStart=function(){this._updateInitialAngles();var a=this._createDragState();this._previousState=this._startState=a;this._isDragging=!0;this._drag.emit(this._createPayload("start",a))};e.prototype._emitUpdate=function(){var a=this._createDragState();this._drag.emit(this._createPayload("update",a));this._previousState=a};e.prototype._emitEnd=
function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",a));this._startState=this._previousState=null;this._isDragging=!1};e.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&1===this._activePointers.length&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a});this._isDragging&&this._emitUpdate()};e.prototype._removeMultiPointer=function(a){var b=this,c=a.pointerId,g=this._activePointerMap.get(c);a=function(){b._activePointerMap.delete(c);
var a=b._activePointers.indexOf(g);b._activePointers.splice(a,1);b._isDragging&&b._updateInitialAngles()};this._isDragging?1===this._activePointers.length||2===this._activePointers.length?(this._emitEnd(),a()):(a(),this._emitUpdate()):a()};e.prototype._handlePointerUp=function(a){this._removeMultiPointer(a.data.native)};e.prototype._handlePointerDrag=function(a){a=a.data;switch(a.action){case "start":this._isDragging||this._emitStart();break;case "update":this._isDragging||this._emitStart(),this._updateMultiPointer(a),
this._emitUpdate()}};return e}(b.InputHandler);k.Drag=n})},"esri/views/input/InputHandler":function(){define(["require","exports","./EventMatch","../../core/Logger"],function(n,k,a,b){var c=b.getLogger("esri.views.input");n=function(){function b(a,c){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=c}Object.defineProperty(b.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=
[];for(var a in this._incoming)for(var b=0,c=this._incoming[a];b<c.length;b++)this._incomingEventMatches.push(c[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||
(this._outgoingEventTypes=Object.keys(this._outgoing));return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});b.prototype.onInstall=function(a){var b=this;this._manager?c.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a,c){return b._handleEvent(a,c)}),a.setUninstallCallback(function(){return b._onUninstall()}),
this._manager=a)};b.prototype.registerIncoming=function(b,c,g){var e=this;"function"===typeof c?(g=c,c=[]):c=c||[];b="string"===typeof b?new a.EventMatch(b,c):b;var h=function(){e._incomingEventTypes=null;e._incomingEventMatches=null};c=function(a){var b=e._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),h(),e._manager&&e._manager.updateDependencies())};g=new f(b,g,{onPause:c,onRemove:c,onResume:function(a){var b=e._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),h(),e._manager&&
e._manager.updateDependencies())}});c=this._incoming[b.eventType];c||(c=[],this._incoming[b.eventType]=c);c.push(g);h();this._manager&&this._manager.updateDependencies();return g};b.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new e(a,{onEmit:function(a,c){b._manager.emit(a.eventType,c)},onRemove:function(a){delete b._outgoing[a.eventType];b._manager.updateDependencies()}});this._outgoing[a]=
c;this._outgoingEventTypes=null;this._manager&&this._manager.updateDependencies();return c};b.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};b.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};b.prototype._onUninstall=function(){this._manager?this._manager=null:c.error("This InputHandler is not registered with an InputManager")};b.prototype._handleEvent=function(a,b){var c=this._incoming[a.type];if(c)for(var e=0;e<c.length;e++){var h=
c[e];if(h.match.matches(a,b)&&(h.callback(a),a.shouldStopPropagation()))break}};return b}();k.InputHandler=n;var f=function(){function a(b,c,g){this.match=b;this._callback=c;this._handler=g}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},enumerable:!0,configurable:!0});return a}(),e=function(){function a(b,
c){this.eventType=b;this._removed=!1;this._handler=c}a.prototype.emit=function(a){if(!this._removed)this._handler.onEmit(this,a)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(n,k){var a=function(){function a(b,f){void 0===f&&(f=[]);this.eventType=b;this.keyModifiers=f}a.prototype.matches=function(a,b){if(a.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;
for(var e=0,h=this.keyModifiers;e<h.length;e++)if(!b.has(h[e]))return!1;return!0};return a}();k.EventMatch=a})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(n,k){k.manhattanDistance=function(a,b){return Math.abs(b.x-a.x)+Math.abs(b.y-a.y)};k.fitCircleLSQ=function(a,b){b?(b.radius=0,b.center.x=0,b.center.y=0):b={radius:0,center:{x:0,y:0}};if(0===a.length)return b;if(1===a.length)return b.center.x=a[0].x,b.center.y=a[0].y,b;if(2===a.length){var c=a[0],f=a[1],
e=[f.x-c.x,f.y-c.y],h=e[0],e=e[1];b.radius=Math.sqrt(h*h+e*e)/2;b.center.x=(c.x+f.x)/2;b.center.y=(c.y+f.y)/2;return b}for(var d=0,l=0,g=0;g<a.length;g++)d+=a[g].x,l+=a[g].y;for(var d=d/a.length,l=l/a.length,m=a.map(function(a){return a.x-d}),q=a.map(function(a){return a.y-l}),p=f=c=0,r=0,t=h=0,g=e=0;g<m.length;g++)var s=m[g],k=q[g],v=s*s,w=k*k,c=c+v,f=f+w,p=p+s*k,r=r+v*s,h=h+w*k,t=t+s*w,e=e+k*v;g=c;m=p;q=f;r=0.5*(r+t);h=0.5*(h+e);e=g*q-p*m;t=(r*q-h*m)/e;h=(g*h-p*r)/e;e={x:t+d,y:h+l};return{radius:Math.sqrt(t*
t+h*h+(c+f)/a.length),center:e}}})},"esri/views/input/recognizers/PointerClickAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,k,a,b,c){n=function(b){function e(a,c){void 0===a&&(a=300);void 0===c&&(c=1.5);b.call(this,"recognizers.PointerClickAndDrag",!1);this.maximumClickDelay=a;this.movementUntilDrag=c;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");this._pointerClick=this.registerOutgoing("pointer-click");
this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this));this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this));this._moveHandle.pause()}a(e,b);e.prototype._handlePointerDown=function(a){var b=a.data;this._pointerState.set(b.native.pointerId,{startEvent:b,previousEvent:b,startTimestamp:a.timestamp,totalMovement:0,isDragging:!1,downButton:b.native.button});this.startCapturingPointer(b.native);
this._moveHandle.resume()};e.prototype._createPointerDragData=function(a,b,c){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:c}};e.prototype._handlePointerMove=function(a){a=a.data;var b=this._pointerState.get(a.native.pointerId);b&&(b.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",b,a)):(b.totalMovement+=c.manhattanDistance(a,b.previousEvent),b.totalMovement>this.movementUntilDrag&&(b.isDragging=!0,b.previousEvent=b.startEvent,this._pointerDrag.emit(this._createPointerDragData("start",
b,b.startEvent)),this._pointerDrag.emit(this._createPointerDragData("update",b,a)))),b.previousEvent=a)};e.prototype._handlePointerUp=function(a){var b=a.data,c=b.native.pointerId,g=this._pointerState.get(c);g&&(g.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",g,b)):g.downButton===b.native.button&&a.timestamp-g.startTimestamp<=this.maximumClickDelay&&this._pointerClick.emit(b),this._pointerState.delete(c),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};
return e}(b.InputHandler);k.PointerClickAndDrag=n})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,k,a,b,c){n=function(b){function e(a,c,e){void 0===a&&(a=250);void 0===c&&(c=10);void 0===e&&(e=35);b.call(this,"recognizers.SingleAndDoubleClick",!1);this.maximumDoubleClickDelay=a;this.maximumDoubleClickDistance=c;this.maximumDoubleTouchDistance=e;this._pointerState=new Map;
this._click=this.registerOutgoing("click");this._doubleClick=this.registerOutgoing("double-click");this.registerIncoming("pointer-click",this._handlePointerClick.bind(this))}a(e,b);e.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};e.prototype._handlePointerClick=function(a){a=a.data;var b=this._pointerId(a),e=this._pointerState.get(b);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var g="touch"===a.native.pointerType?
this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;c.manhattanDistance(e.event,a)>g?(this._doubleClickTimeoutExceeded(b),this._startClick(a)):(this._doubleClick.emit(a),this._pointerState.delete(b))}else this._startClick(a)};e.prototype._startClick=function(a){var b=this,c=this._pointerId(a);this._pointerState.set(c,{event:a,doubleClickTimeout:setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},this.maximumDoubleClickDelay)})};e.prototype._doubleClickTimeoutExceeded=function(a){var b=
this._pointerState.get(a);this._click.emit(b.event);b.doubleClickTimeout=0;this._pointerState.delete(a)};return e}(b.InputHandler);k.SingleAndDoubleClick=n})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],function(n,k,a,b,c){var f=c("trident"),e=c("edge"),h=c("chrome"),d=c("ff"),l=c("safari");n=function(){function c(a){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=a;b.applyLocal(a);
a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none"}c.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});
this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction};Object.defineProperty(c.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)if(!a||!a.has(c))this._element.removeEventListener(g[c],this._active[c]),delete this._active[c];a&&a.forEach(function(a){if(!b._active[a]&&g[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,
a);b._element.addEventListener(g[a],c);b._active[a]=c}})},enumerable:!0,configurable:!0});c.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};c.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();b.x=a.clientX-Math.round(c.left);b.y=a.clientY-Math.round(c.top);return b};
c.prototype._handleKey=function(b,c){var d=a.eventKey(c);d&&"key-up"===b&&this._keyDownState.delete(d);var g={"native":c,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===b&&this._keyDownState.add(g.key);this._callback(b,g)};c.prototype._handlePointerDown=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});this._callback(a,c)};c.prototype._handlePointer=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});b.preventDefault();this._callback(a,
c)};c.prototype._handleMouseWheel=function(a,b){b.preventDefault();var c=b.deltaY;switch(b.deltaMode){case 0:if(f||e)c=600*(c/document.documentElement.clientHeight);break;case 1:c*=30;break;case 2:c*=900}f||e?c*=0.7:h||l?c*=0.6:d&&(c*=1.375);var g=Math.abs(c);100<g&&(c=200*(c/g)/(1+Math.exp(-0.02*(g-100))));c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0,deltaY:c});this._callback(a,c)};c.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);
this._handleDefault(a,b)};c.prototype._handleDefault=function(a,b){var c={"native":b};b.preventDefault();this._callback(a,c)};return c}();k.BrowserEventSource=n;var g={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define(function(){function n(a,b){b=
b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);for(var d=2,e;d<l.length;d++)e=l[d],c[e]=b[e]||g[d];c.buttons=b.buttons||0;d=0;d=b.pressure?b.pressure:c.buttons?0.5:0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=d;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||0;c.isPrimary=b.isPrimary||!1;return c}function k(){this.array=[];this.size=
0}function a(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);B&&(this.observer=new B(this.mutationWatcher.bind(this)))}function b(a){return"body /shadow-deep/ "+c(a)}function c(a){return'[touch-action\x3d"'+a+'"]'}function f(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function e(){if(A){D.forEach(function(a){String(a)===a?(I+=c(a)+f(a)+"\n",z&&(I+=b(a)+f(a)+"\n")):(I+=a.selectors.map(c)+f(a.rule)+"\n",z&&(I+=
a.selectors.map(b)+f(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=I;document.head.appendChild(a)}}function h(a){if(!s.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function d(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var l="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),g=[!1,!1,null,null,0,
0,0,0,!1,!1,!1,!1,0,null,0,0],m=window.Map&&window.Map.prototype.forEach?Map:k;k.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var q="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
p=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!==typeof SVGElementInstance,s={pointermap:new m,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(c){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);var c=new n(a,b);b.preventDefault&&(c.preventDefault=b.preventDefault);c._target=c._target||b.target;
return c},fireEvent:function(a,b){var c=this.makeEvent(a,b);return this.dispatchEvent(c)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<q.length;d++)if(c=q[d],b[c]=a[c]||p[d],t&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance)b[c]=b[c].correspondingUseElement;a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in r))return b},propagate:function(a,
b,c){for(var d=a.target,g=[];!d.contains(a.relatedTarget)&&d!==document;)g.push(d),d=d.parentNode;c&&g.reverse();g.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new n("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},
releaseCapture:function(a){var b=this.captureInfo[a];if(b){var c=new n("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};s.boundHandler=s.eventHandler.bind(s);
var u={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&Boolean(a.elementFromPoint)},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;if(!b&&(a=a.querySelector("shadow")))b=a.olderShadowRoot;return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),g;for(g=this.targetingShadow(d);g;){if(a=
g.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;g=this.olderShadow(g)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},v=Array.prototype.forEach.call.bind(Array.prototype.forEach),w=Array.prototype.map.call.bind(Array.prototype.map),
x=Array.prototype.slice.call.bind(Array.prototype.slice),y=Array.prototype.filter.call.bind(Array.prototype.filter),B=window.MutationObserver||window.WebKitMutationObserver,H={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};a.prototype={watchSubtree:function(a){this.observer&&u.canTarget(a)&&this.observer.observe(a,H)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){v(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(x(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=w(a,this.findElements,this);b.push(y(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var D=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],I="",A=window.PointerEvent||window.MSPointerEvent,z=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,E=s.pointermap,C=[1,4,2,8,16],J=!1;try{J=1===(new MouseEvent("test",{buttons:1})).buttons}catch(F){}var G={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){s.listen(a,this.events)},unregister:function(a){s.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,g=b.length,e;d<g&&(e=b[d]);d++){var h=Math.abs(c-e.x),f=Math.abs(a-e.y);if(25>=h&&25>=f)return!0}},prepareEvent:function(a){var b=s.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=E.get(this.POINTER_ID);a.buttons=
0===b.which||!c?0:c.buttons;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);J||(c.buttons=C[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);E.set(this.POINTER_ID,a);!b||0===b.buttons?s.down(c):s.move(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);s.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
E.get(this.POINTER_ID),c=this.prepareEvent(a);if(!J){var d=C[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}E.set(this.POINTER_ID,a);c.buttons&=~C[c.button];0===c.buttons?s.up(c):s.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);s.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);J||this.prepareButtonsForMove(b,a);b.button=
-1;s.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);s.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},K=s.captureInfo,N=u.findTarget.bind(u),V=u.allShadows.bind(u),U=s.pointermap,ha,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){ha.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,s.listen(a,this.events),
V(a).forEach(function(a){a._scrollType=c;s.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;s.unlisten(a,this.events);V(a).forEach(function(a){a._scrollType=void 0;s.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c),c=this.touchActionToScrollType(b);d&&c?(a._scrollType=d,V(a).forEach(function(a){a._scrollType=d},this)):c?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",
XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===U.size||1===U.size&&U.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=
!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,
c=s.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=K[d]||N(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||0.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var g=this;c.preventDefault=function(){g.scrolling=!1;g.firstXY=null;
b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;for(var d=0,g;d<c.length;d++)g=c[d],b.call(this,this.touchToPointer(g))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b]);a=Math.abs(a["client"+c]-this.firstXY[c]);b=b>=a}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=
0,d=a.length,g;c<d&&(g=a[c]);c++)if(g.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(U.size>=b.length){var c=[];U.forEach(function(a,d){1!==d&&!this.findTouch(b,d-2)&&c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){U.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});
s.enterOver(a);s.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=U.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;s.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(s.leaveOut(c),s.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);
this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(s.up(a),s.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){s.cancel(a);s.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){U.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=G.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){var c=a.indexOf(b);-1<
c&&a.splice(c,1)}.bind(null,b,a),setTimeout(b,2500))}};ha=new a(Q.elementAdded,Q.elementRemoved,Q.elementChanged,Q);var S=s.pointermap,Y=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,ia={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){s.listen(a,this.events)},unregister:function(a){s.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch",
"pen","mouse"],prepareEvent:function(a){var b=a;Y&&(b=s.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){S.delete(a)},MSPointerDown:function(a){S.set(a.pointerId,a);a=this.prepareEvent(a);s.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);s.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);s.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);s.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);
s.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);s.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=s.makeEvent("lostpointercapture",a);s.dispatchEvent(a)},MSGotPointerCapture:function(a){a=s.makeEvent("gotpointercapture",a);s.dispatchEvent(a)}},X,aa;window.navigator.msPointerEnabled?(X=function(a){h(a);d(this);0!==s.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},aa=function(a){h(a);this.msReleasePointerCapture(a)}):(X=function(a){h(a);d(this);
0!==s.pointermap.get(a).buttons&&s.setCapture(a,this)},aa=function(a){h(a);s.releaseCapture(a,this)});var ba=window.PointerEvent||window.MSPointerEvent;return{dispatcher:s,Installer:a,PointerEvent:n,PointerMap:m,targetFinding:u,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=n,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),s.registerSource("ms",ia)):(s.registerSource("mouse",G),
void 0!==window.ontouchstart&&s.registerSource("touch",Q)),s.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:X},releasePointerCapture:{value:aa}})},applyLocal:function(a){ba||(window.PointerEvent||(window.navigator.msPointerEnabled?s.registerSource("ms",ia):(s.registerSource("mouse",G),void 0!==window.ontouchstart&&s.registerSource("touch",Q)),s.register(document)),window.Element&&!Element.prototype.setPointerCapture&&
(a.setPointerCapture=X.bind(a),a.releasePointerCapture=aa.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/ViewEvents":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(n,k,a,b,c){function f(a){return!!h[a]}function e(a){for(var b=0;b<a.length;b++)if(!f(a[b]))return!1;return!0}var h={click:!0,"double-click":!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,
"pointer-up":!0,"mouse-wheel":!0},d;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(d||(d={}));n=function(){function a(b){this.handlers=new Map;this.counter=0;this.view=b;this.inputManager=null}a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});
this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,b,c){var d=this;a=Array.isArray(a)?a:a.split(",");if(!e(a))return a.some(f)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var g=Array.isArray(b)?b:[];c=Array.isArray(b)?c:b;var h=this.createUniqueGroupName();b=new l(this.view,a,g,c);this.handlers.set(h,b);this.inputManager&&this.inputManager.installHandlers(h,
[b]);return{remove:function(){return d.removeHandler(h)}}};a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers.delete(a);this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();k.ViewEvents=n;var l=function(b){function d(a,c,e,h){var f=this;b.call(this,"esri.views.input.ViewEventHandler",!0);this.view=a;for(a=0;a<c.length;a++)switch(c[a]){case "click":this.registerIncoming("click",
e,function(a){return h(f.wrapClick(a))});break;case "double-click":this.registerIncoming("double-click",e,function(a){return h(f.wrapDoubleClick(a))});break;case "drag":this.registerIncoming("drag",e,function(a){return h(f.wrapDrag(a))});break;case "key-down":this.registerIncoming("key-down",e,function(a){return h(f.wrapKeyDown(a))});break;case "key-up":this.registerIncoming("key-up",e,function(a){return h(f.wrapKeyUp(a))});break;case "pointer-down":this.registerIncoming("pointer-down",e,function(a){return h(f.wrapPointer(a,
"pointer-down"))});break;case "pointer-move":this.registerIncoming("pointer-move",e,function(a){return h(f.wrapPointer(a,"pointer-move"))});break;case "pointer-up":this.registerIncoming("pointer-up",e,function(a){return h(f.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":this.registerIncoming("mouse-wheel",e,function(a){return h(f.wrapMouseWheel(a))})}}a(d,b);d.prototype.wrapClick=function(a){var b=a.data.x,d=a.data.y;return{type:"click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,
x:b,y:d,"native":a.data.native,timestamp:a.timestamp,screenPoint:new c(b,d),mapPoint:this.view.toMap(b,d),stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,"native":a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapDrag=function(a){return{type:"drag",
action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},"native":a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapKeyUp=function(a){return{type:"key-up",
key:a.data.key,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};d.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,"native":a.data.native,timestamp:a.timestamp,
stopPropagation:function(){return a.stopPropagation()}}};return d}(b.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,k,a,b){n=function(b){function f(){b.call(this,"PreventContextMenu",!0);this.registerIncoming("context-menu",function(a){a.data.native.preventDefault()})}a(f,b);return f}(b.InputHandler);k.PreventContextMenu=n;Object.defineProperty(k,"__esModule",{value:!0});k.default=
n})},"esri/views/3d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,k,a,b,c){n=function(b){function e(a,c){var e=this;b.call(this,"esri.views.3d.input.handlers.DoubleClickZoom",!0);this.view=a;this.registerIncoming("double-click",c,function(a){return e._handleDoubleClick(a)})}a(e,b);e.prototype._handleDoubleClick=function(a){var b=a.data;c.eventMatchesPointerType(b.native,
"primary")&&(this.view.navigation.zoom.stepScreen(Math.log(0.5)/Math.log(0.6),[b.x,this.view.height-b.y]),a.stopPropagation())};return e}(b.InputHandler);k.DoubleClickZoom=n})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(n,k){k.eventMatchesPointerType=function(a,b){switch(b){case "primary":return"touch"===a.pointerType||0===a.button;case "secondary":return"touch"!==a.pointerType&&2===a.button;case "tertiary":return"touch"!==a.pointerType&&1===a.button}}})},
"esri/views/3d/input/handlers/DragPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","./support"],function(n,k,a,b,c){n=function(b){function e(a,c,e){var g=this;b.call(this,"esri.views.3d.input.handlers.DragPan",!0);this.view=a;this.pointerType=c;this.registerIncoming("drag",e,function(a){return g._handleDrag(a)})}a(e,b);e.prototype._handleDrag=function(a){var b=a.data;if(!(1<b.pointers.length)){var e=b.pointers[0];if(c.eventMatchesPointerType(e.startEvent.native,
this.pointerType)){var e=[e.currentEvent.x,this.view.height-e.currentEvent.y],g=this.view.navigation.pan;switch(b.action){case "start":g.begin(e);break;case "update":g.update(e);break;case "end":g.end(e)}a.stopPropagation()}}};return e}(b.InputHandler);k.DragPan=n})},"esri/views/3d/input/handlers/support":function(){define(["require","exports"],function(n,k){k.eventMatchesPointerType=function(a,b){switch(b){case "primary":return"touch"===a.pointerType||0===a.button;case "secondary":return"touch"!==
a.pointerType&&2===a.button;case "tertiary":return"touch"!==a.pointerType&&1===a.button}}})},"esri/views/3d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/InputHandler ./support ../../navigation/NavigationConstants".split(" "),function(n,k,a,b,c,f){n=function(b){function h(a,c,g,h){var q=this;b.call(this,"esri.views.3d.input.handlers.DragRotate",!0);this.view=a;this.pointerType=c;this.pivotPoint=g;this.registerIncoming("drag",
h,function(a){return q._handleDrag(a)});switch(g){case "center":this._navigationPivot=f.Rotate.PivotPoint.POI;break;case "eye":this._navigationPivot=f.Rotate.PivotPoint.EYE}}a(h,b);h.prototype._handleDrag=function(a){var b=a.data;if(!(1<b.pointers.length)){var e=b.pointers[0];if(c.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var e=[e.currentEvent.x,this.view.height-e.currentEvent.y],h=this.view.navigation.rotate;switch(b.action){case "start":h.begin(e,this._navigationPivot);break;
case "update":h.update(e,this._navigationPivot);break;case "end":h.end(e)}a.stopPropagation()}}};return h}(b.InputHandler);k.DragRotate=n})},"esri/views/3d/navigation/NavigationConstants":function(){define(["require","exports"],function(n,k){k.Pan={Direction:{LEFT:1,RIGHT:2,FORWARD:4,BACKWARD:8,UP:16,DOWN:32},Mode:{HORIZONTAL:0,VERTICAL:1},Momentum:{DURATION_SHORT:1,DURATION_LONG:3,DURATION_LONG_VEL:8,INPUT_FILTER:0.2,BUFFER_SIZE:5,MINIMUM_VELOCITY:300},Vertical:{ELEVATION_THRESHOLD:3E4,ANGLE_THRESHOLD:8/
180*Math.PI}};k.Rotate={PivotPoint:{POI:1,EYE:2}}})},"esri/views/3d/input/handlers/DragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","./support"],function(n,k,a,b,c){n=function(b){function e(a,c,e){var g=this;b.call(this,"esri.views.3d.input.handlers.DragZoom"+c,!0);this.view=a;this.pointerType=c;this.registerIncoming("drag",e,function(a){return g._handleDrag(a)})}a(e,b);e.prototype._handleDrag=function(a){var b=a.data;if(!(1<
b.pointers.length)){var e=b.pointers[0];if(c.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var e=[e.currentEvent.x,this.view.height-e.currentEvent.y],g=this.view.navigation.zoom;switch(b.action){case "start":g.begin(e);break;case "update":g.update(e);break;case "end":g.end(e)}a.stopPropagation()}}};return e}(b.InputHandler);k.DragZoom=n})},"esri/views/3d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler",
"../../navigation/NavigationConstants"],function(n,k,a,b,c){var f=c.Pan.Direction;n=function(b){function c(a,h,g){var m=this;b.call(this,"esri.views.3d.input.handlers.KeyPan",!0);this.view=a;this.keys=h;this._keyToDirection=(q={},q[h.left]=f.LEFT,q[h.right]=f.RIGHT,q[h.forward]=f.FORWARD,q[h.backward]=f.BACKWARD,q[h.up]=f.UP,q[h.down]=f.DOWN,q);this.registerIncoming("key-down",g,function(a){return m._handleKeyDown(a)});this.registerIncoming("key-up",g,function(a){return m._handleKeyUp(a)});var q}
a(c,b);c.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};c.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};c.prototype._handleKey=function(a,b){var c=this._keyToDirection[a.data.key];null!=c&&(b?this.view.navigation.pan.beginContinuous(c):this.view.navigation.pan.endContinuous(c),a.stopPropagation())};return c}(b.InputHandler);k.KeyPan=n})},"esri/views/3d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(n,k,a,b){n=function(b){function f(a,h){var d=this;b.call(this,"esri.views.3d.input.handlers.MouseWheelZoom",!0);this.view=a;this.registerIncoming("mouse-wheel",h,function(a){return d._handleMouseWheel(a)})}a(f,b);f.prototype._handleMouseWheel=function(a){var b=a.data;this.view.navigation.zoom.stepScreen(-1/60*b.deltaY,[b.x,this.view.height-b.y]);a.stopPropagation()};return f}(b.InputHandler);k.MouseWheelZoom=n})},"esri/views/3d/input/handlers/SingleKeyResetHeading":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(n,k,a,b){n=function(b){function f(a,h,d){b.call(this,"esri.views.3d.input.handlers.SingleKeyResetHeading",h,d);this.view=a;this.key=h}a(f,b);f.prototype.activate=function(){this.view.goTo({heading:0})};return f}(b.SingleKey);k.SingleKeyResetHeading=n})},"esri/views/3d/input/handlers/SingleKey":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,k,a,b){n=
function(b){function f(a,h,d){var f=this;b.call(this,a,!0);this.key=h;this.registerIncoming("key-down",d,function(a){return f._handleKeyDown(a)})}a(f,b);f.prototype._handleKeyDown=function(a){a.data.key===this.key&&(this.activate(),a.stopPropagation())};return f}(b.InputHandler);k.SingleKey=n})},"esri/views/3d/input/handlers/SingleKeyResetTilt":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(n,k,a,b){n=function(b){function f(a,h,d){b.call(this,
"esri.views.3d.input.handlers.SingleKeyResetTilt",h,d);this.view=a;this.key=h}a(f,b);f.prototype.activate=function(){this.view.goTo({tilt:0})};return f}(b.SingleKey);k.SingleKeyResetTilt=n})},"esri/views/3d/input/handlers/PointerDownCancelAnimation":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,k,a,b){n=function(b){function f(a,h){var d=this;b.call(this,"esri.views.3d.input.handlers.PointerDownCancelAnimation",!0);this.view=
a;this.registerIncoming("pointer-down",h,function(a){return d._handlePointerDown(a)})}a(f,b);f.prototype._handlePointerDown=function(a){this.view.navigation.stop()};return f}(b.InputHandler);k.PointerDownCancelAnimation=n})},"esri/views/3d/support/cameraUtils":function(){define("dojo/_base/lang ../../../geometry/SpatialReference ../../../config ../../../geometry/Point ../../../geometry/support/webMercatorUtils ../../../Camera ../lib/glMatrix ./mathUtils ./earthUtils ./projectionUtils ./cameraUtilsPlanar ./cameraUtilsSpherical".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m){function q(a,b){return"global"===a.viewingMode?m[b]:g[b]}function p(a,c,d){var e=a.renderSpatialReference,g=w.set(c.viewForward,D),g=u(a,c.eye,g,c.up,I);a=a.spatialReference||k.WGS84;l.vectorToVector(c.eye,e,B,a)||(a=k.WGS84,l.vectorToVector(c.eye,e,B,a));return d?(d.position.x=B[0],d.position.y=B[1],d.position.z=B[2],d.position.spatialReference=a,d.heading=g.heading,d.tilt=g.tilt,d.fov=h.rad2deg(c.fov),d):new f(new b(B,a),g.heading,g.tilt,h.rad2deg(c.fov))}function r(b,
c,d){var e=b.navigation.currentCamera,g=e.fovX,e=e.width/2;"global"===b.viewingMode&&null!=d&&(c*=Math.cos(h.deg2rad(d)));c/=b.renderCoordsHelper.unitInMeters;return e/(a.screenDPI*x/c)/Math.tan(g/2)}function t(b,c,d){var e=b.navigation.currentCamera;c*=Math.tan(e.fovX/2);e=a.screenDPI*x/(e.width/2/c);"global"===b.viewingMode&&(e/=Math.cos(h.deg2rad(d)));return e*=b.renderCoordsHelper.unitInMeters}function s(a,b,c,d,e,g){var h=a.renderSpatialReference;b=v(a,d.heading,d.tilt,b,c,e);a=l.vectorToPoint(b.eye,
h,a.spatialReference||k.WGS84);if(!a)return null;if(!g)return new f(a,b.heading,b.tilt,d.fov);g.position=a;g.heading=b.heading;g.tilt=b.tilt;g.fov=d.fov;return g}function u(a,b,c,d,e){return q(a,"directionToHeadingTilt")(b,c,d,e)}function v(a,c,d,e,g,h){var f=w.create(),m=a.renderSpatialReference;if(e&&e instanceof b){var p=e;l.pointToVector(p,f,a.renderSpatialReference);null==p.z&&("global"===a.viewingMode?a._pickRay([0,0,0],f):a._pickRay([f[0],f[1]-1,f[2]],f),null!=a.basemapTerrain&&(p=a.basemapTerrain.getElevation(p),
null!=p&&a.renderCoordsHelper.setAltitude(p,f)))}else e?w.set(e,f):w.set(a.navigation.currentCamera.center,f);if(!e||!(e instanceof b))e=l.vectorToPoint(f,m,a.spatialReference||k.WGS84);g=Math.max(g,a.navigation.minPoiDist);m=d;d=g;if(p=!h||!h.noReset)var r=e,p=a.engineToScreen(a.navigation.currentCamera.center),t=a.toScreen(r),r=p.x-t.x,p=p.y-t.y,p=Math.sqrt(r*r+p*p),r=Math.max(a.width,a.height),p=p>y*r;p?(c=0,m=a.navigation.constraints.tilt.min(d)):(m=q(a,"eyeTiltToLookAtTilt")(f,d,m),m=a.navigation.constraints.tilt.apply(m,
d),m=q(a,"lookAtTiltToEyeTilt")(f,d,m));c=q(a,"eyeForCenterWithHeadingTilt")(f,g,c,m);c.center=f;if((!h||!h.noReset)&&"global"===a.viewingMode)if(f=a.renderCoordsHelper.fromRenderCoords(c.eye,A,a.spatialReference)?a.basemapTerrain&&(a.basemapTerrain.getElevation(A)||0)>A.z-1:!1,f)return f=a.navigation.constraints.tilt.min(g),v(a,0,f,e,g,n.mixin({},h,{noReset:!0}));return c}var w=e.vec3d,x=39.37,y=5,B=w.create(),H=w.create(),D=w.create(),I={heading:0,tilt:0},A=new b,z=new h.Cyclical(-2.0037508342788905E7,
2.0037508342788905E7);return{externalToInternal:function(a,b){var c=a.renderSpatialReference,d=q(a,"headingTiltToDirectionUp"),e=w.create();return l.pointToVector(b.position,e,c)?(c=d(e,b.heading,b.tilt),w.add(c.direction,e),e=a.navigation.getCameraIntersectTerrain(e,c.direction,c.up),e.fov=h.deg2rad(b.fov),e):null},internalToExternal:p,scaleToDistance:r,distanceToScale:t,fromExtent:function(a,e,g,h,m){h instanceof f&&(m=h,h={});var q="global"===a.viewingMode,p=a.renderSpatialReference,r=a.spatialReference||
k.WGS84,t=k.WebMercator,s=e.spatialReference||t,x,y=0;null!=e.zmax&&null!=e.zmin&&(x=(e.zmax+e.zmin)/2,y=e.zmax-e.zmin);if(q){var q=new b(e.xmin,e.ymin,s),u=new b(e.xmax,e.ymax,s),q=c.project(q,t),u=c.project(u,t);if(null===q||null===u)return;e=new b(z.center(q.x,u.x),(u.y+q.y)/2,t);null!=x&&(e.z=x);s=d.getGreatCircleSpanAt(e,q,u);t=s.lon;s=s.lat;z.diff(q.x,u.x)>z.range/2&&(t+=d.halfEarthCircumference);t=Math.min(t,d.halfEarthCircumference);s=Math.min(s,d.halfEarthCircumference)}else c.canProject(e,
r)&&(e=c.project(e,r)),t=e.xmax-e.xmin,s=e.ymax-e.ymin,e=new b({x:e.xmin+0.5*t,y:e.ymin+0.5*s,z:x,spatialReference:r});u=a.navigation.currentCamera;x=1/Math.tan(u.fovX/2);q=1/Math.tan(u.fovY/2);u=1/Math.tan(u.fov/2);y=Math.max(0.5*t*x,0.5*s*q,0.5*y*u)/1;g=v(a,g.heading,g.tilt,e,y,h);p=l.vectorToPoint(g.eye,p,r);if(!p)return null;m||(m=new f);m.position=p;m.heading=g.heading;m.tilt=g.tilt;m.fov=a.camera.fov;return m},toExtent:function(a,b,c,e,h){var f=a.renderSpatialReference;b||(c||(c=a.navigation.currentCamera),
b=p(a,c,h));if(c)h=l.vectorToPoint(c.center,f,a.spatialReference||k.WGS84),b=c.distance;else{h=a.toMap(a.screenCenter);if(!h)return null;b=d.computeCarthesianDistance(b.position,h)}c||(c=a.navigation.currentCamera);f=Math.tan(c.fovX/2);c=Math.tan(c.fovY/2);f=1*2*b*f;c=1*2*b*c;return"global"===a.viewingMode?m.toExtent(a,h,f,c,e):g.toExtent(a,h,f,c,e)},fromCenterScale:function(a,b,c,d,e,g){c=r(a,c,b.latitude);return s(a,b,c,d,e,g)},fromCenterDistance:s,directionToHeadingTilt:u,eyeHeadingTiltForCenterPointAtDistance:v,
scaleToZoom:function(a,b){var c=a.get("basemapTerrain.tilingScheme");return c?c.levelAtScale(b):void 0},zoomToScale:function(a,b){var c=a.get("basemapTerrain.tilingScheme");return c?c.scaleAtLevel(b):void 0},computeScale:function(a,b,c){var d=a.renderSpatialReference;b||(b=a.navigation.currentCamera);var e;e=k.WGS84;b.center?(l.vectorToVector(b.center,d,H,e),e=H[1],b=b.distance):(e=b.position.latitude,l.pointToVector(b.position,B,d),l.pointToVector(c,H,d),b=w.dist(B,H));return t(a,b,e)}}})},"esri/views/3d/support/cameraUtilsPlanar":function(){define(["../../../geometry/Extent",
"./mathUtils","./projectionUtils","../lib/glMatrix","./cameraUtilsInternal"],function(n,k,a,b,c){function f(a,b,c){a=h.create();var e=h.create();d.identity(m);d.rotateZ(m,-k.deg2rad(b));d.rotateX(m,k.deg2rad(c));d.multiplyVec3(m,g,a);h.scale(a,-1);d.multiplyVec3(m,l,e);return{direction:a,up:e}}var e={headingTiltToDirectionUp:f,directionToHeadingTilt:function(a,b,d,e){return c.directionToHeadingTilt(b,d,e,g,l)},eyeForCenterWithHeadingTilt:function(a,b,c,d){var e=f(a,c,d);a=h.add(h.scale(e.direction,
-b,h.create()),a);return{up:e.up,eye:a,heading:c,tilt:d}},lookAtTiltToEyeTilt:function(a,b,c){return k.rad2deg(c)},eyeTiltToLookAtTilt:function(a,b,c){return k.deg2rad(c)},toExtent:function(b,c,d,e,g){var h=b.renderSpatialReference;b=b.map&&b.spatialReference||c.spatialReference;a.pointToVector(c,q,h);a.pointToVector(c,p,h);q[0]-=d/2;p[0]+=d/2;q[1]-=e/2;p[1]+=e/2;a.vectorToVector(q,h,q,b);a.vectorToVector(p,h,p,b);g?(g.xmin=q[0],g.ymin=q[1],g.xmax=p[0],g.ymax=p[1],g.spatialReference=b):g=new n(q[0],
q[1],p[0],p[1],b);return g}},h=b.vec3d,d=b.mat4d,l=h.createFrom(0,1,0),g=h.createFrom(0,0,1),m=d.create(),q=h.create(),p=h.create();return e})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["./mathUtils","../lib/glMatrix"],function(n,k){var a=k.vec3d,b=a.create(),c=a.create();return{directionToHeadingTilt:function(f,e,h,d,l){var g=b;a.normalize(f,g);var m=Math.abs(a.dot(g,d));0.99<m&&(m=Math.abs(a.dot(e,d)),0.99>m?a.set(e,g):g=null);e=0;g&&(a.scale(d,a.dot(d,g),c),a.subtract(g,c),
e=a.dot(g,l)/(a.length(g)*a.length(l)),a.cross(g,l,c),e=(0<a.dot(c,d)?1:-1)*n.rad2deg(n.acos(e)));f=n.rad2deg(n.acos(-a.dot(d,f)/a.length(f)));return h?(h.heading=e,h.tilt=f,h):{heading:e,tilt:f}}}})},"esri/views/3d/support/cameraUtilsSpherical":function(){define("../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/support/webMercatorUtils ./mathUtils ./earthUtils ../lib/glMatrix ./cameraUtilsInternal".split(" "),function(n,k,a,b,c,f,e){function h(a,c,d){var e=m.create(),
g=m.create();m.cross(a,p,u);0===m.dot(u,u)&&m.cross(a,r,u);q.identity(s);q.rotate(s,-b.deg2rad(c),a);q.rotate(s,-b.deg2rad(d),u);m.cross(u,a,g);m.normalize(g);q.multiplyVec3(s,g);m.normalize(a,e);q.multiplyVec3(s,m.negate(e));return{direction:e,up:g}}function d(a){var b=a[1];a[1]=-a[2];a[2]=b}function l(a,b){var c=h(b,a.heading,a.tilt);a.up=c.up;return a}var g={headingTiltToDirectionUp:h,directionToHeadingTilt:function(a,b,c,d){var g=u,h=v;m.normalize(a,g);m.cross(g,p,v);0===m.dot(v,v)&&m.cross(g,
r,v);m.cross(v,g,h);return e.directionToHeadingTilt(b,c,d,g,h)},eyeForCenterWithHeadingTilt:function(a,c,e,g){var h={eye:m.create(),tilt:g,heading:e},f=u;f[0]=a[0];f[1]=a[2];f[2]=-a[1];e=b.deg2rad(e);var q=b.deg2rad(g);g=Math.sin(e);e=Math.cos(e);var p=Math.sin(q),r=Math.cos(q),t=m.length(f);if(1E-8>Math.abs(q))q=c+t;else var s=t/p,k=b.asin(c/s),q=s*Math.sin(Math.PI-q-k);var s=p*c,r=r*c,v=e*s,k=q-r,n=k*k,K=c*c*p*p,p=e*e*K,K=g*g*K,N=f[1]*k,V=p*(p+n-f[1]*f[1]);if(0>V)return m.scale(f,q/t,h.eye),h.tilt=
0,h;var U=Math.sqrt(V),V=p+n,N=0<e?-U+N:U+N;if(1E-8>Math.abs(V))return 1E-8>t?(h.eye[0]=0,h.eye[1]=0,h.eye[2]=c):m.scale(f,q/t,h.eye),h.tilt=0,d(h.eye),l(h,a);h.eye[1]=N/V;c=h.eye[1]*h.eye[1];V=v*h.eye[1];v=1-c;N=Math.sqrt(v);c=p*c+K-2*V*N*k+v*n;if(1E-8>Math.abs(c))return m.scale(f,q/t,h.eye),h.tilt=0,d(h.eye),l(h,a);h.eye[0]=(v*(q*f[0]-r*f[0])-s*N*(f[0]*h.eye[1]*e+f[2]*g))/c;h.eye[2]=(v*(q*f[2]-r*f[2])-s*N*(f[2]*h.eye[1]*e-f[0]*g))/c;m.scale(h.eye,q);d(h.eye);return l(h,a)},lookAtTiltToEyeTilt:function(a,
c,d){a=m.length(a);a=Math.sqrt(c*c+a*a-2*c*a*Math.cos(Math.PI-d));c=b.asin(c/(a/Math.sin(d)));return b.rad2deg(d-c)},eyeTiltToLookAtTilt:function(a,c,d){d=b.deg2rad(d);a=m.length(a);return b.asin(c/(a/Math.sin(d)))+d},toExtent:function(d,e,g,h,f){var l,m=e.latitude;e=e.longitude;l=c.getLonDeltaForDistance(e,m,g)/2;g=e-l;e+=l;l=b.deg2rad(m);m=c.earthRadius;l=(1+Math.sin(l))/(1-Math.sin(l));var q=l+1,p=Math.tan(h/m/2),q=q*p;l=1.5*Math.PI-2*Math.atan(0.5*(q+Math.sqrt(4*l+q*q)));h=l+h/m;m=function(a){var c=
Math.PI/2;a=b.cyclical2PI.normalize(a,-c);a>c&&(a=Math.PI-a);return a};l=m(l);h=m(h);h<l&&(m=h,h=l,l=m);l=Math.max(b.rad2deg(l),-90);h=Math.min(b.rad2deg(h),90);e=t.monotonic(g,e);180<e-g&&(m=(e-g-180)/2,g+=m,e-=m);f?(f.xmin=g,f.ymin=l,f.xmax=e,f.ymax=h,f.spatialReference=n.WGS84):f=new k(g,l,e,h,n.WGS84);d.spatialReference&&d.spatialReference.isWebMercator&&a.geographicToWebMercator(f,!1,f);return f}},m=f.vec3d,q=f.mat4d,p=m.createFrom(0,0,1),r=m.normalize(m.createFrom(1,1,1)),t=new b.Cyclical(-180,
180),s=q.create(),u=m.create(),v=m.create();return g})},"esri/views/3d/support/viewpointUtils":function(){define("../../../geometry/SpatialReference ../../../geometry/Geometry ../../../geometry/Point ../../../geometry/Extent ../../../geometry/support/webMercatorUtils ../../../core/Error ../../../core/promiseUtils ../../../Camera ../../../Viewpoint ../../../Graphic ../lib/glMatrix ./mathUtils ./projectionUtils ./cameraUtils ./aaBoundingBox ./aaBoundingRect ./intersectionUtils".split(" "),function(n,
k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s){function u(a){return 360-m.cyclicalDeg.normalize(a)}function v(a){return m.cyclicalDeg.normalize(360-a)}function w(b,d,e){if(!d)return null;var g=b.spatialReference||n.WGS84,f;if(d.camera){f=d.get("camera.position.spatialReference");if(!c.canProject(f,g))return null;d=d.camera.clone();f.equals(g)||(b=c.project(d.position,g),d.position=b);return d}if((f=d.get("targetGeometry.spatialReference"))&&!c.canProject(f,g))return null;var l=b.navigation.currentCamera;f=p.internalToExternal(b,
l);var m={noReset:!1};null!=d.rotation&&(f.heading=u(d.rotation),m.noReset=!0);null!=e&&(f.tilt=e);if(d.targetGeometry instanceof a){var r=d.targetGeometry;e=d.targetGeometry.clone();d=null!=d.scale?p.scaleToDistance(b,d.scale,r.latitude):l.distance;d=p.eyeHeadingTiltForCenterPointAtDistance(b,f.heading,f.tilt,e,d,m);b=q.vectorToPoint(d.eye,b.renderSpatialReference,g);return new h(b,d.heading,d.tilt,f.fov)}return p.fromExtent(b,d.targetGeometry.extent,f,m)}function x(a,b,c,d){var e=c.scale;null==
e&&null!=c.zoom&&(e=p.zoomToScale(a,c.zoom));null==e&&null!=c.distance&&(b=b.center||b,e=p.distanceToScale(a,c.distance,b.latitude));null==e&&d&&(e="function"===typeof d?d():d);return e}function y(b,c,d,e,g){if(!(c&&d.position||c&&d.direction||d.position&&d.direction))return!1;var h=b.spatialReference||n.WGS84,f=b.renderSpatialReference,l=d.direction;c&&d.position&&(l=null);d.position&&q.pointToVector(d.position,U,f);c&&q.pointToVector(c,ha,f);if(l){var m=new a(d.position||c);m.x+=l[0];m.y+=l[1];
2<l.length&&(m.z+=l[2]);q.pointToVector(m,Q,f);K.subtract(Q,d.position?U:ha)}d.position&&l?(g.camera.position=new a(d.position),p.directionToHeadingTilt(b,U,Q,e.up,g.camera),K.add(U,Q,ha),b.navigation.getCenterIntersectTerrain(U,ha,ha),g.targetGeometry=q.vectorToPoint(ha,f,h),g.scale=p.distanceToScale(b,K.dist(U,ha),g.targetGeometry.latitude)):c&&l?(g.targetGeometry=new a(c),g.scale=x(b,g.targetGeometry,d,function(){return p.computeScale(b,e)}),c=p.scaleToDistance(b,g.scale,c.latitude),K.scale(Q,
c/K.length(Q),U),K.add(U,ha),g.camera.position=q.vectorToPoint(U,f,h),p.directionToHeadingTilt(b,U,Q,e.up,g.camera)):(g.targetGeometry=new a(c),g.camera.position=new a(d.position),K.subtract(ha,U,Q),p.directionToHeadingTilt(b,U,Q,e.up,g.camera),g.scale=p.distanceToScale(b,K.dist(U,ha),g.targetGeometry.latitude));g.rotation=v(g.camera.heading);return!0}function B(a,b){var c=!1;null!=b.heading?(a.heading=b.heading,c=!0):null!=b.rotation&&(a.heading=u(b.rotation),c=!0);null!=b.tilt&&(a.tilt=b.tilt,c=
!0);null!=b.fov&&(a.fov=b.fov);return c}function H(a,b,c){var d=a.spatialReference||n.WGS84;b=b||p.externalToInternal(a,c.camera);c.targetGeometry=q.vectorToPoint(b.center,a.renderSpatialReference,d);c.scale=p.computeScale(a,b);c.rotation=v(c.camera.heading);return c}function D(b,c,d){if(c){var e=[];if(!c.hasZ&&b.basemapTerrain){var g;g=c.isInstanceOf(a)?c:c.centroid||c.center;Y[2]=g?b.basemapTerrain.getElevation(g)||0:0}M[c.declaredClass](c,function(a){e.push(a[0],a[1],a[2])},Y);var h=e.length/3;
if(0!==h&&(g=Array(e.length),q.bufferToBuffer(e,c.spatialReference,0,g,b.spatialReference,0,h))){c.hasZ&&(d.hasZ=!0);for(b=0;b<g.length;b+=3)c.hasZ?(Y[0]=g[b+0],Y[1]=g[b+1],Y[2]=g[b+2]):(Y[0]=g[b+0],Y[1]=g[b+1]),r.expand(d.boundingBox,Y)}}}function I(a,b,c){return a.whenViewForGraphic(b).then(function(a){if(a&&a.whenGraphicBounds)return a.whenGraphicBounds(b)}).then(function(a){r.expand(c.boundingBox,a);isFinite(a[2])&&(c.hasZ=!0)}).otherwise(function(){D(a,b.geometry,c)})}function A(a,b,c){if(Array.isArray(b)&&
2===b.length&&"number"===typeof b[0]&&"number"===typeof b[1])R.x=b[0],R.y=b[1],R.z=void 0,R.spatialReference=n.WGS84,D(a,R,c);else{if(b&&b.forEach){var d=e.resolve();b.forEach(function(b){d=d.then(function(){return A(a,b,c)})});return d}if(b instanceof k)D(a,b,c);else if(b instanceof l)return I(a,b,c)}return e.resolve()}function z(a,b,c,d){if(b.camera)return E(a,c,b.camera,d);d.scale=b.scale;d.rotation=b.rotation;d.targetGeometry=b.targetGeometry?b.targetGeometry.clone():null;d.camera=null;null!=
c.heading?d.rotation=v(c.heading):null!=c.rotation&&(d.rotation=c.rotation);b=x(a,d.targetGeometry,c);null!=b&&(d.scale=b);d.camera=w(a,d,c.tilt);return d}function E(a,b,d,e){e.camera=d.clone();e.camera.fov=a.camera.fov;b=a.spatialReference;d=e.camera.position.spatialReference;if(!c.canProject(d,b))return null;d.equals(b)||(b=c.project(e.camera.position,b),e.camera.position=b);return H(a,null,e)}function C(a,b,c,d){if(!c)return null;d.targetGeometry=c.clone();var e=a.navigation.getCameraIntersectTerrain();
if(y(a,d.targetGeometry,b,e,d))return d;p.internalToExternal(a,e,d.camera);var g={noReset:!1};B(d.camera,b)&&(g.noReset=!0);d.scale=x(a,d.targetGeometry,b);null==d.scale&&(q.pointToVector(c,Y,a.renderSpatialReference),s.frustumPoint(e.frustumPlanes,Y)?d.scale=p.distanceToScale(a,K.dist(e.eye,Y),c.latitude):d.scale=p.computeScale(a,e));return!p.fromCenterScale(a,d.targetGeometry,d.scale,d.camera,g,d.camera)?null:d}function J(a,b,c,d){d.targetGeometry=c.clone();var e=a.navigation.getCameraIntersectTerrain();
p.internalToExternal(a,e,d.camera);e={noReset:!1};B(d.camera,b)&&(e.noReset=!0);return!p.fromExtent(a,c,d.camera,e,d.camera)?null:d}function F(a,b){if(!b||!a.spatialReference)return null;var c={};if(null==b.declaredClass&&!Array.isArray(b)){for(var d in b)c[d]=b[d];b.center&&!c.target&&(c.target=b.center)}else c.target=b;return c}function G(a){a&&(a.rotation=v(a.camera.heading));return e.resolve(a)}var K=g.vec3d,N=g.mat3d,V=g.mat4d,U=K.create(),ha=K.create(),Q=K.create(),S={heading:0,tilt:0},Y=K.create(),
ia=V.create(),X=N.create(),aa=r.create(),ba=t.create(),R=new a;g=function(a,b,c){for(var d=a.hasZ,e=0;e<a.rings.length;e++)for(var g=a.rings[e],h=0;h<g.length;h++)c[0]=g[h][0],c[1]=g[h][1],d&&(c[2]=g[h][2]),b(c)};var M={"esri.geometry.Point":function(a,b,c){c[0]=a.x;c[1]=a.y;a.hasZ&&(c[2]=a.z);b(c)},"esri.geometry.Polygon":g,"esri.geometry.Circle":g,"esri.geometry.Polyline":function(a,b,c){for(var d=a.hasZ,e=0;e<a.paths.length;e++)for(var g=a.paths[e],h=0;h<g.length;h++)c[0]=g[h][0],c[1]=g[h][1],
d&&(c[2]=g[h][2]),b(c)},"esri.geometry.Multipoint":function(a,b,c){var d=a.points;a=a.hasZ;for(var e=0;e<d.length;e++)c[0]=d[e][0],c[1]=d[e][1],a&&(c[2]=d[e][2]),b(c)},"esri.geometry.Extent":function(a,b,c){a.hasZ?(b(K.set3(a.xmin,a.ymin,a.zmin,c)),b(K.set3(a.xmax,a.ymin,a.zmin,c)),b(K.set3(a.xmin,a.ymax,a.zmin,c)),b(K.set3(a.xmax,a.ymax,a.zmin,c)),b(K.set3(a.xmin,a.ymin,a.zmax,c)),b(K.set3(a.xmax,a.ymin,a.zmax,c)),b(K.set3(a.xmin,a.ymax,a.zmax,c)),b(K.set3(a.xmax,a.ymax,a.zmax,c))):(b(K.set3(a.xmin,
a.ymin,c[2],c)),b(K.set3(a.xmax,a.ymin,c[2],c)),b(K.set3(a.xmin,a.ymax,c[2],c)),b(K.set3(a.xmax,a.ymax,c[2],c)))}},T={create:function(c,g){var l=F(c,g);if(!l)return e.reject(new f("viewpointutils-create:no-target","Missing target for creating viewpoint"));var m=new d({camera:new h({fov:c.camera.fov})}),s=null!=l.scale||null!=l.zoom||null!=l.distance;if(l.target instanceof d)return G(z(c,l.target,l,m));if(l.target instanceof h)return G(E(c,l,l.target,m));if(l.target instanceof b){var k=l.target.xmin===
l.target.xmax||l.target.ymin===l.target.ymax;return s||k?G(C(c,l,l.target.center,m)):G(J(c,l,l.target,m))}var x={boundingBox:r.create(r.NEGATIVE_INFINITY),spatialReference:c.spatialReference,hasZ:!1};return A(c,l.target,x).then(function(){if(isFinite(x.boundingBox[0])){r.center(x.boundingBox,Y);R.x=Y[0];R.y=Y[1];R.z=Y[2];R.spatialReference=c.spatialReference;var b;!isFinite(R.z)||!x.hasZ?(R.z=void 0,b=t.isPoint(r.toRect(x.boundingBox,ba))):b=r.isPoint(x.boundingBox);if(s||b)return C(c,l,R,m);var d=
R,e=x.boundingBox,g=T.DEFAULT_FRAME_COVERAGE;m.targetGeometry=d.clone();b=c.navigation.getCameraIntersectTerrain();var h=0;d.hasZ?h=d.z:c.basemapTerrain&&(h=c.basemapTerrain.getElevation(d));K.set3(d.x,d.y,h,Y);q.computeLinearTransformation(c.spatialReference,Y,ia,c.renderSpatialReference);V.toMat3(ia,X);N.transpose(X);r.set(aa,r.NEGATIVE_INFINITY);for(var d=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],f=0;f<d.length;f++){var k=d[f],v=e[k[2]];isFinite(v)||(v=h);K.set3(e[k[0]],
e[k[1]],v,Y);q.vectorToVector(Y,c.spatialReference,Y,c.renderSpatialReference);r.expand(aa,N.multiplyVec3(X,Y))}e=r.width(aa);h=r.height(aa);d=r.depth(aa);k=1/Math.tan(b.fovX/2);f=1/Math.tan(b.fovY/2);k=0.5*Math.sqrt(e*e+d*d)*Math.max(f,k)+0.5*h;e=0.5*h*f+0.5*Math.max(e,d);g=Math.max(k,e)/g;p.internalToExternal(c,b,m.camera);b={noReset:!1};B(m.camera,l)&&(b.noReset=!0);m.scale=p.distanceToScale(c,g,m.targetGeometry.latitude);b=p.fromCenterScale(c,m.targetGeometry,m.scale,m.camera,b,m.camera)?m:null;
return b}b=c.navigation.getCameraIntersectTerrain();y(c,null,l,b,m)?b=m:l.position?(K.set(b.viewForward,Q),p.directionToHeadingTilt(c,b.eye,Q,b.up,S),m.camera.position=new a(l.position),b=m.camera,g=S.heading,e=l.heading,null==e&&null!=l.rotation&&(e=u(l.rotation)),null==e&&g&&(e="function"===typeof g?g():g),b.heading=e,b=m.camera,g=S.tilt,g=null!=l.tilt?l.tilt:null!=g?"function"===typeof g?g():g:void 0,b.tilt=g,b=H(c,null,m)):(b=q.vectorToPoint(b.center,c.renderSpatialReference,R,c.spatialReference),
b=C(c,l,b,m));return b}).then(function(a){return G(a)})},rotationToHeading:u,headingToRotation:v,toCamera:w,fromCamera:function(a,b,c){c||(c=new d);c.camera=b.clone();return H(a,null,c)},fromInternalCamera:function(a,b,c){c||(c=new d({camera:new h}));p.internalToExternal(a,b,c.camera);return H(a,b,c)},DEFAULT_FRAME_COVERAGE:0.66};return T})},"esri/views/3d/support/intersectionUtils":function(){define(["../lib/glMatrix"],function(n){function k(a,c,d,f){f.clip[0]=0;f.clip[1]=d?f.len:Number.MAX_VALUE;
for(d=0;d<a.length;d++){var g;var m=a[d],q=c;g=f;var p=b.dot(m,g.dir),m=-b.dot(q,m)-m[3];0>m&&0<=p?g=!1:-1E-6<p&&1E-6>p?g=!0:(0>m||0>p)&&!(0>m&&0>p)?g=!0:(m/=p,0<p?m<g.clip[1]&&(g.clip[1]=m):m>g.clip[0]&&(g.clip[0]=m),g=g.clip[0]<=g.clip[1]);if(!g)return!1}return!0}function a(a,h,d,f){a?(d&&f&&(c.len=b.dist(h,d)),b.set(a,c.dir)):f?(c.len=b.dist(h,d),b.scale(b.subtract(d,h,c.dir),1/c.len)):b.normalize(b.subtract(d,h,c.dir));return c}var b=n.vec3d;n=n.vec2d;var c={dir:b.create(),len:0,clip:n.create()},
f={planeSphere:function(a,b,c){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]<c},frustumSphere:function(a,b,c){for(var l=0;6>l;l++)if(!f.planeSphere(a[l],b,c))return!1;return!0},frustumRay:function(b,c,d,f){d=a(f,c,d,!1);return k(b,c,null,d)},frustumPoint:function(a,c){for(var d=0;6>d;d++)if(0>-b.dot(c,a[d])-a[d][3])return!1;return!0},conservativeFrustumConvexBuffer:function(a,b,c,f,g){g=g||0;for(var m=0;6>m;m++){for(var q=(g+m)%6,p=!1,r=0;r<f;r++)if(0<=-a[q][0]*b[c+3*r]-a[q][1]*b[c+3*r+1]-a[q][2]*b[c+
3*r+2]-a[q][3]){p=!0;break}if(!p)return q}return-1},frustumLineSegment:function(b,c,d,f){f=a(f,c,d,!0);return k(b,c,d,f)}};return f})},"esri/views/3d/support/RenderCoordsHelper":function(){define(["./earthUtils","./projectionUtils","../lib/glMatrix","../webgl-engine/lib/BufferVectorMath","../../../geometry/support/scaleUtils"],function(n,k,a,b,c){var f=a.vec3,e=b.Vec3Compact,h=n.earthRadius,d=[0,0,1];n=function(a){this.spatialReference=a};n.prototype.toRenderCoords=function(a,b,c){return"esri.geometry.Point"===
a.declaredClass?k.pointToVector(a,b,this.spatialReference):k.vectorToVector(a,b,c,this.spatialReference)};n.prototype.fromRenderCoords=function(a,b,c){return"esri.geometry.Point"===b.declaredClass||"esri.SpatialReference"===b.declaredClass?k.vectorToPoint(a,this.spatialReference,b,c):k.vectorToVector(a,this.spatialReference,b,c)};a=function(a){this.spatialReference=a=a||k.SphericalRenderSpatialReference;this.unitInMeters=1};a.prototype=new n;a.prototype.getAltitude=function(a,b){return e.length(a,
b||0)-h};a.prototype.setAltitude=function(a,b,c){c=c||0;a=(a+h)/e.length(b,c);e.scale(b,c,a)};a.prototype.setAltitudeOfTransformation=function(a,b){this.setAltitude(a,b,12)};a.prototype.worldUpAtPosition=function(a,b){f.normalize(a,b)};b=function(a){this.spatialReference=a;this.unitInMeters=c.getUnitValueForSR(a);this.worldUp=d};b.prototype=new n;b.prototype.getAltitude=function(a,b){return b?a[b+2]:a[2]};b.prototype.setAltitude=function(a,b,c){c?b[c+2]=a:b[2]=a};b.prototype.setAltitudeOfTransformation=
function(a,b){this.setAltitude(a,b,12)};b.prototype.worldUpAtPosition=function(a,b){f.set(d,b)};b.worldUp=d;n.Spherical=a;n.Planar=b;return n})},"esri/views/3d/support/MapCoordsHelper":function(){define("dojo/Evented dojo/Deferred ../../../core/declare ../../../portal/support/geometryServiceUtils ../../../tasks/support/ProjectParameters ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/support/scaleUtils".split(" "),function(n,k,a,b,c,f,e,h){return a(n,{unitInMeters:1,spatialReference:null,
constructor:function(a,c,e){this.spatialReference=c;this.unitInMeters=h.getUnitValueForSR(this.spatialReference);(this.geometryService=e)||b.create(a&&a.portalItem).then(function(a){this.geometryService=a}.bind(this)).otherwise(function(){})},toGeographic:function(a){var b=new k,g=!0,h=this.spatialReference;if(!this.geometryService)return b.reject("Must specify geometryService in esri/config"),b;if(!Array.isArray(a[0])||"number"===typeof a[0])a=[a],g=!1;a.forEach(function(b,c){b instanceof e||(a[c]=
new e(b,h))});var q=new c({geometries:a,outSR:f.WGS84});this.geometryService.project(q).then(function(a){try{a=a.map(function(a){return[a.x,a.y]}),b.resolve(g?a:a[0])}catch(c){b.reject(c)}},function(a){b.reject(a)});return b.promise},canProject:function(){return!!this.geometryService}})})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../Portal ../PortalItem ../../config ../../tasks/GeometryService ../../core/promiseUtils ../../core/Error".split(" "),function(n,k,a,
b,c,f,e,h){k.create=function(d){void 0===d&&(d=null);if(c.geometryServiceUrl)return e.resolve(new f({url:c.geometryServiceUrl}));if(!d)return e.reject(new h("internal:geometry-service-url-not-configured"));var l;d.isInstanceOf(b)?l=d.portal||a.getDefault():d.isInstanceOf(a)&&(l=d);return l.load().then(function(a){if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return e.resolve(new f({url:a.helperServices.geometry.url}));throw new h("internal:geometry-service-url-not-configured");
})}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task dojo/_base/lang".split(" "),function(n,k,a,b,c,f,e,h,d){var l=n({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n=h.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){var c={query:d.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/areasAndLengths",c).then(function(a){return a.data})},autoComplete:function(a,b,h){var f=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)}),callbackParamName:"callback"};if(this.requestOptions||
h)a=d.mixin({},this.requestOptions,h,a);return e(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:f,rings:a.rings})})})},buffer:function(a,b){var h=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),f=a.outSpatialReference||a.geometries[0].spatialReference,h={query:h,callbackParamName:"callback"};if(this.requestOptions||b)h=d.mixin({},this.requestOptions,b,h);return e(this.parsedUrl.path+"/buffer",h).then(function(a){return(a.data.geometries||
[]).map(function(a){return new c({spatialReference:f,rings:a.rings})})})},cut:function(a,b,c){var h=a[0].spatialReference,l=a.map(function(a){return a.toJSON()});a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:f.getJsonType(a[0]),geometries:l}),cutter:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/cut",a).then(function(a){a=
a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return f.fromJSON(a).set("spatialReference",h)})}})},convexHull:function(a,b){var c=a[0].spatialReference,h={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||b)h=d.mixin({},this.requestOptions,b,h);return e(this.parsedUrl.path+"/convexHull",h).then(function(a){return f.fromJSON(a.data.geometry).set("spatialReference",
c)})},densify:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,c={query:c,callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/densify",c).then(function(a){return(a.data.geometries||[]).map(function(a){return f.fromJSON(a).set("spatialReference",h)})})},difference:function(a,b,c){var h=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),
geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:f.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return f.fromJSON(a).set("spatialReference",h)})})},distance:function(a,b){var c={query:d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};
if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/distance",c).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var c={};d.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=l.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c={query:d.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},
this.requestOptions,b,c);return e(this.parsedUrl.path+"/fromGeoCoordinateString",c).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,c={query:c,callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/generalize",c).then(function(a){return(a.data.geometries||[]).map(function(a){return f.fromJSON(a).set("spatialReference",
h)})})},intersect:function(a,b,c){var h=a[0].spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:f.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return f.fromJSON(a).set("spatialReference",
h)})})},lengths:function(a,b){var c={query:d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/lengths",c).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),h=a[0].spatialReference,c={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h.toJSON()),polygons:JSON.stringify(c)}),callbackParamName:"callback"};
if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/labelPoints",c).then(function(a){return(a.data.labelPoints||[]).map(function(a){return f.fromJSON(a).set("spatialReference",h)})})},offset:function(a,b){var c=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference,c={query:c,callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/offset",c).then(function(a){return(a.data.geometries||
[]).map(function(a){return f.fromJSON(a).set("spatialReference",h)})})},project:function(a,b){var c=d.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),h=a.outSR,l=f.getJsonType(a.geometries[0]),t=this._decodeGeometries,c={query:c,callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/project",c).then(function(a){return t(a.data,l,h)})},relation:function(a,b){var c={query:d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),
callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},this.requestOptions,b,c);return e(this.parsedUrl.path+"/relation",c).then(this._handleRelationResponse)},reshape:function(a,b,c){var h=a.spatialReference;a={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:f.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=d.mixin({},this.requestOptions,
c,a);return e(this.parsedUrl.path+"/reshape",a).then(function(a){return f.fromJSON(a.data.geometry).set("spatialReference",h)})},simplify:function(a,b){var c=a[0].spatialReference,h=d.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),l=f.getJsonType(a[0]),t=this._decodeGeometries,h={query:h,callbackParamName:"callback"};if(this.requestOptions||b)h=d.mixin({},this.requestOptions,b,h);return e(this.parsedUrl.path+
"/simplify",h).then(function(a){return t(a.data,l,c)})},toGeoCoordinateString:function(a,b){var c={};d.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.coordinates=JSON.stringify(a.coordinates);c.conversionType=l.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;c={query:d.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)c=d.mixin({},
this.requestOptions,b,c);return e(this.parsedUrl.path+"/toGeoCoordinateString",c).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,c){var h=d.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),f=a.sr,h={query:h,callbackParamName:"callback"};if(this.requestOptions||c)h=d.mixin({},this.requestOptions,c,h);return e(this.parsedUrl.path+"/trimExtend",h).then(function(a){return(a.data.geometries||[]).map(function(a){return new b({spatialReference:f,paths:a.paths})})})},union:function(a,
b){var c=a[0].spatialReference,h={query:d.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||b)h=d.mixin({},this.requestOptions,b,h);return e(this.parsedUrl.path+"/union",h).then(function(a){return f.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},
_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:f.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var e=f.getGeometryType(b);a=a.geometries;var h=[],l={spatialReference:c.toJSON()},k=d.mixin;a.forEach(function(a,b){h[b]=new e(k(a,l))});return h},_toProjectGeometry:function(a){var d=
a.spatialReference.toJSON();return a instanceof k?new c({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:d}):new b({paths:[[].concat(a.points)],spatialReference:d})},_fromProjectedGeometry:function(b,c,d){return"extent"===c?(b=b.rings[0],new k(b[0][0],b[0][1],b[2][0],b[2][1],d)):new a({points:b.paths[0],spatialReference:d.toJSON()})}});d.mixin(n,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,
UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,
UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,
UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",
UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return n})},"esri/tasks/support/ProjectParameters":function(){define(["../../core/declare","dojo/_base/array","../../core/Accessoire","../../core/lang","../../geometry/support/jsonUtils"],
function(n,k,a,b,c){return n(a,{declaredClass:"esri.tasks.support.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJSON:function(){var a=k.map(this.geometries,function(a){return a.toJSON()}),e={};e.outSR=this.outSR.wkid||JSON.stringify(this.outSR.toJSON());e.inSR=this.geometries[0].spatialReference.wkid||JSON.stringify(this.geometries[0].spatialReference.toJSON());e.geometries=JSON.stringify({geometryType:c.getJsonType(this.geometries[0]),geometries:a});this.transformation&&
(e.transformation=this.transformation.wkid||JSON.stringify(this.transformation));b.isDefined(this.transformForward)&&(e.transformForward=this.transformForward);return e}})})},"esri/views/3d/support/ResourceController":function(){define("../../../core/declare ../../../core/Scheduler ../../../core/HandleRegistry ../../../core/watchUtils ./StreamDataSupplier ./StreamDataLoader ./PreallocArray ../webgl-engine/lib/Util".split(" "),function(n,k,a,b,c,f,e,h){function d(a){this.budget=this.begin=0;this.performance=
h.performance;this.enabled=!0;void 0!==a&&this.reset(a)}var l=h.assert,g={TERRAIN:"terrain",SCENE:"scene",SYMBOLOGY:"symbols"},m=new e(20);d.prototype.now=function(){return this.performance.now()};d.prototype.reset=function(a){this.begin=this.now();this.budget=this.enabled?a:Number.MAX_VALUE};d.prototype.done=function(){return this.enabled&&this.elapsed()>=this.budget};d.prototype.remaining=function(){return Math.max(this.budget-this.elapsed(),0)};d.prototype.elapsed=function(){return this.now()-
this.begin};n=n(null,{constructor:function(c,e){this._clients=[];this._frameWorker=null;this._budget=new d;this._idleFrameWorkers=[];this._idleFrameWorkerRobin=0;this._idleUpdatesStartFired=!1;this._lastTargetChangeTime=h.performance.now();this.navigationTimeout=300;this.animatingFrameTimeBudget=10;this.idleFrameWorkerBudget=30;this.idleFrameTimeBudget=50;var l={},m;for(m in g)l[g[m]]=0;l[g.TERRAIN]=15;l[g.SCENE]=20;l[g.SYMBOLOGY]=5;this._maxGpuMemory=1500;this.streamDataLoader=new f(l);this._cameraListeners=
new a;this._cameraListeners.add([b.on(c,"navigation","currentViewReachedTarget",this._targetReached.bind(this)),b.on(c,"navigation","targetViewChanged",this._targetChanged.bind(this))]);e||(e=k);this._frameTask=e.addFrameTask({update:this._frameUpdate.bind(this)});this._view=c;this.stats={frameUpdateTime:new q,idleUpdateTime:new q};this.frameUpdateNavigation=null},destroy:function(){this._frameTask.remove();this._frameTask=null;this._cameraListeners.remove();this.streamDataLoader.destroy();this.streamDataLoader=
null},setEnableBudget:function(a){this._budget.enabled=!!a},registerClient:function(a,b,d){this._clients.push({client:a,type:b});"function"===typeof a.setMaxGpuMemory&&a.setMaxGpuMemory(this._maxGpuMemory);return new c(b,this.streamDataLoader,d)},deregisterClient:function(a){for(var b=0;b<this._clients.length;b++)if(this._clients[b].client===a){this._clients[b]=this._clients[this._clients.length-1];this._clients.pop();return}console.warn("deregistering an unregistered client.")},setMaxGpuMemory:function(a){this._maxGpuMemory=
a;for(var b=0;b<this._clients.length;b++){var c=this._clients[b].client;"function"===typeof c.setMaxGpuMemory&&c.setMaxGpuMemory(a)}},registerIdleFrameWorker:function(a,b){var c=this._idleFrameWorkers.some(function(b){return b.client===a});l(!c,"Can only register idle frame workers once per client/layer");l(!b.idleFrame||b.needsUpdate,"needsUpdate has to be specified if idleFrame is specified");this._idleFrameWorkers.push({client:a,callbacks:b});this._isIdle()&&(this._idleUpdatesStartFired&&b.idleBegin)&&
b.idleBegin.call(a)},deregisterIdleFrameWorker:function(a){for(var b=this._idleFrameWorkers,c=0;c<b.length;c++){var d=b[c];if(d.client===a){this._idleUpdatesStartFired&&d.callbacks.idleEnd&&d.callbacks.idleEnd.call(a);b[c]=b[b.length-1];b.pop();break}}},registerFrameWorker:function(a){l(!this._frameWorker,"Only one (non-idle) per-frame worker supported at the moment");this._frameWorker=a},deregisterFrameWorker:function(){this._frameWorker=null},_targetChanged:function(a){this._lastTargetChangeTime=
h.performance.now();this._targetReached=!1;this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._callWorkersNoScheduling("idleEnd"))},_targetReached:function(a){this._targetReached=!0},_frameUpdate:function(a){var b=this._isIdle();this._budget.reset((b?this.idleFrameWorkerBudget:this.animatingFrameTimeBudget)-a.spendInFrame);this._view.navigation&&this._view.navigation.step(a.deltaTime);this._frameWorker&&(this._frameWorker(this._budget),this.stats.frameUpdateTime.addSample(this._budget.elapsed()));
b&&(this._idleUpdatesStartFired||(this._callWorkersNoScheduling("idleBegin"),this._idleUpdatesStartFired=!0),this._budget.reset(this.idleFrameTimeBudget-this._budget.elapsed()),3<this._budget.remaining()&&(this._callWorkersStrictScheduling("idleFrame",this._budget),this.stats.idleUpdateTime.addSample(this._budget.elapsed())))},_isIdle:function(){return this._budget.now()-this._lastTargetChangeTime>this.navigationTimeout&&this._targetReached},_callWorkersNoScheduling:function(a){for(var b=this._idleFrameWorkers,
c=0;c<b.length;c++){var d=b[c];d.callbacks[a]&&d.callbacks[a].call(d.client)}},_callWorkersStrictScheduling:function(a,b){var c=this._idleFrameWorkers,d=c.length,e,g,h;m.clear();g=0;for(h=this._idleFrameWorkerRobin;g<d;g++)e=c[h++%d],e.callbacks.needsUpdate&&e.callbacks.needsUpdate.call(e.client)&&(0===m.length&&(this._idleFrameWorkerRobin=h),m.push(e));e=b.now();for(c=e+b.remaining();0<m.length&&e<c;)b.reset((c-e)/m.length),e=m.pop(),e.callbacks[a].call(e.client,b),e=b.now()}});n.ClientType=g;var q=
function(){this.addSample=function(a){this.min=Math.min(this.min,a);this.max=Math.max(this.max,a);this.total+=a;this.numSamples++};this.getAverage=function(){return this.total/this.numSamples};this.reset=function(){this.numSamples=this.total=0;this.min=Number.MAX_VALUE;this.max=-Number.MAX_VALUE};this.reset()};return n})},"esri/views/3d/support/StreamDataSupplier":function(){define(["require","exports"],function(n,k){return function(){function a(a,c,f){this._clientType=a;this._loader=c;this._activeRequests=
null;this._addUrlToken=f&&f.addUrlToken;f&&f.trackRequests&&(this._activeRequests=new Map)}a.prototype.request=function(a,c,f){var e=this;c=this._loader.request(a,c,this._clientType,f,this._addUrlToken);this._activeRequests&&(this._activeRequests.set(a,c),f=function(){e._activeRequests.delete(a)},c.then(f,f));return c};a.prototype.isRequested=function(a){return this._loader.isRequested(a)};a.prototype.cancelRequest=function(a){this._loader.cancel(a)};a.prototype.cancelAll=function(){var a=this;this._activeRequests&&
(this._activeRequests.forEach(function(c){a._loader.cancel(c)}),this._activeRequests.clear())};return a}()})},"esri/views/3d/support/StreamDataLoader":function(){define("../../../core/declare ../../../request ../../../core/urlUtils ./PromiseLightweight ./AsyncQuotaRoundRobinQueue ../webgl-engine/lib/Util".split(" "),function(n,k,a,b,c,f){var e=f.assert,h={QUEUED:1,DOWNLOADING:2,CANCELLED:4};n=n(null,{constructor:function(a){this.alreadyLoading={};this.loadQueue=new c(l,this._doneLoadingCallback,this,
a);this._urlInfo={hasSameOrigin:{},canUseXhr:{}}},destroy:function(){for(var a in this.alreadyLoading){for(var b=this.alreadyLoading[a],c=0;c<b.clientPromises.length;c++){var d=b.clientPromises[c];d.isRejected()||d.reject(b.url.url,null,b.docType,b.clientMetadata[c])}this._cancelTask(b)}this.loadQueue.clear();this.alreadyLoading=this.loadQueue=null},request:function(a,c,d,e,f){e=e||{};var l=new b.Promise;l.requestURL=a;var k=this.alreadyLoading[a];k?(k.clientPromises.push(l),k.clientMetadata.push(e.metadata)):
(k={url:{url:null,normalized:null,normalizedWithToken:null,hasSameOrigin:!1,canUseXhr:!1},docType:c,clientType:d,status:h.QUEUED,clientMetadata:[e.metadata],clientPromises:[l],downloadObj:null,_cancelledInQueue:!1},this._prepareUrl(k,a,f),this.alreadyLoading[a]=k,this.loadQueue.push(k));return l},isRequested:function(a){return void 0!==this.alreadyLoading[a]},cancel:function(a){var b=this.alreadyLoading[a.requestURL];b&&this._removeRequestPromiseFromTask(b,a)},hasPendingDownloads:function(){return!f.objectEmpty(this.alreadyLoading)},
_prepareUrl:function(b,c,d){b.url.url=c;b.url.isData=a.isDataProtocol(c);if(b.url.isData||"image"!==b.docType)b.url.normalized=c,!b.url.isData&&d&&(b.url.normalizedWithToken=d(c));else{c=a.normalize(c);b.url.normalized=c;var e=a.getOrigin(c);d&&(b.url.normalizedWithToken=d(c));c=this._urlInfo.hasSameOrigin[e];void 0!==c?b.url.hasSameOrigin=c:(b.url.hasSameOrigin=a.hasSameOrigin(e,window.location.href),this._urlInfo.hasSameOrigin[e]=b.url.hasSameOrigin);b.url.hasSameOrigin||(c=this._urlInfo.canUseXhr[e],
void 0!==c?b.url.canUseXhr=c:(b.url.canUseXhr=a.canUseXhr(e),this._urlInfo.canUseXhr[e]=b.url.canUseXhr))}},_removeRequestPromiseFromTask:function(a,b){var c=a.clientPromises.length;if(1<c){var d=a.clientPromises.indexOf(b);e(-1<d,"request to be cancelled is already cancelled or invalid");a.clientPromises[d]=a.clientPromises[c-1];a.clientPromises.pop();a.clientMetadata[d]=a.clientMetadata[c-1];a.clientMetadata.pop()}else e(a.clientPromises[0]===b,"request to be cancelled is already cancelled or invalid"),
this._cancelTask(a)},_cancelTask:function(a){if(a.status===h.DOWNLOADING){this.loadQueue.workerCancelled(a);if("image"===a.docType&&a.url.isData){var b=a.downloadObj;b.removeAttribute("onload");b.removeAttribute("onerror");b.removeAttribute("src")}else a.status=h.CANCELLED,a.downloadObj.cancel();a.downloadObj=null}a.status=h.CANCELLED;a.clientPromise=void 0;a.metadata=void 0;delete this.alreadyLoading[a.url.url]},_doneLoadingCallback:function(a,b){var c;e(a.status===h.DOWNLOADING);delete this.alreadyLoading[a.url.url];
if(b)for(c=0;c<a.clientPromises.length;c++)a.clientPromises[c].isRejected()||a.clientPromises[c].reject(a.url.url,b,a.docType,a.clientMetadata[c]);else for(c=0;c<a.clientPromises.length;c++)a.clientPromises[c].done(a.url.url,a.result,a.docType,a.clientMetadata[c])}});var d=function(a,b,c){a.onload=function(){b.status!==h.CANCELLED&&(b.result=a,a.removeAttribute("onload"),a.removeAttribute("onerror"),c(b))};a.onerror=function(){b.status!==h.CANCELLED&&(a.removeAttribute("onload"),a.removeAttribute("onerror"),
c(b,{status:404}))}},l=function(a,b){if(a.status===h.CANCELLED)return!1;a.status=h.DOWNLOADING;if("image"===a.docType&&a.url.isData){var c=new Image;d(c,a,b);c.src=a.url.normalized;a.downloadObj=c;return!0}var e;switch(a.docType){case "binary":e="array-buffer";c=0;break;case "image":e="image";break;default:e="json"}a.downloadObj=k(a.url.normalizedWithToken||a.url.normalized,{responseType:e,timeout:c,failOk:!0,crossOrigin:!a.url.hasSameOrigin||a.url.canUseXhr,allowImageDataAccess:"image"===a.docType});
a.downloadObj.then(function(c){a.duration=f.performance.now()-a.startTime;a.size=0;a.result=c.data;b(a)},function(c){a.downloadObj.isCanceled()||b(a,c)});return!0};n.TaskStatus=h;return n})},"esri/views/3d/support/AsyncQuotaRoundRobinQueue":function(){define(["../../../core/arrayUtils","../webgl-engine/lib/Util"],function(n,k){return function(a,b,c,f,e){function h(){return"workers: "+m+", queues: "+g.map(function(a){return a.length})}var d=0,l={},g=[],m=[],q=[],p=[],r=0,t=0,s;for(s in f)g[d]=[],m[d]=
0,p[d]={requests:0,size:0,duration:0,speed:0},q[d]=f[s],l[s]=d++,t+=f[s];var u=g.length,d=0;this.setWorkerQuota=function(a){k.assert(n.equals(Object.keys(this.typeWorkerAllication),Object.keys(a)));this.typeWorkerAllication=a;t=0;for(var b in a)q[l[b]]=a[b],t+=a[b]};this.setWorkerFunc=function(b){a=b};this.push=function(b){var c=l[b.clientType];r<t?(m[c]++,r++,e&&console.log("queue start type "+c+", "+h()),a(b,x)):(g[c].push(b),e&&console.log("queue push type "+c+", "+h()))};this._getStatsForType=
function(a){a=l[a];return{quota:q[a],workers:m[a],queueSize:g[a].length,requestStats:p[a]}};this.removeTasks=function(a,b){for(var c=[],d=g[l[b]],e=0;e<d.length;e++){var h=d[e];-1<a.indexOf(h)||c.push(h)}g[l[b]]=c};this.workerCancelled=function(a){v(a);a._cancelledInQueue=!0};this.clear=function(){for(var a=0;a<g.length;a++)g[a]=[]};var v=function(a){var b=l[a.clientType];m[b]--;r--;p[b].requests++;p[b].size+=a.size||0;p[b].duration+=a.duration||0;p[b].speed=0<p[b].duration?p[b].size/p[b].duration:
0;k.assert(0<=m[b]);a=d;b=!1;do m[a]<q[a]&&w(a)&&(b=!0),a=(a+1)%u;while(!b&&a!=d);if(!b){do w(a)&&(b=!0),a=(a+1)%u;while(!b&&a!=d)}!b&&e&&console.log("queue sink, "+h());d=a},w=function(b){for(;0<g[b].length;){if(a(g[b].shift(),x))return e&&console.log("queue startqueued clientType "+b+", "+h()),m[b]++,r++,!0;e&&console.log("queue task cancelled, "+h())}return!1},x=function(a){a._cancelledInQueue||(b.apply(c,arguments),v(a))}}})},"esri/core/arrayUtils":function(){define([],function(){function n(a,
b){return-1===a.indexOf(b)}function k(a,b,c){return!a.some(b.bind(null,c))}return{findIndex:function(a,b,c){for(var f=a.length,e,h=0;h<f;h++)if(e=a[h],b.call(c,e,h,a))return h;return-1},find:function(a,b,c){for(var f=a.length,e,h=0;h<f;h++)if(e=a[h],b.call(c,e,h,a))return e},equals:function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;if(c)for(var f=0;f<a.length;f++){if(!c(a[f],b[f]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},difference:function(a,b,
c){var f;c?(f=b.filter(k.bind(null,a,c)),a=a.filter(k.bind(null,b,c))):(f=b.filter(n.bind(null,a)),a=a.filter(n.bind(null,b)));return{added:f,removed:a}},range:function(a,b){null==b&&(b=a,a=0);for(var c=Array(b-a),f=a;f<b;f++)c[f-a]=f;return c}}})},"esri/views/3d/support/PreallocArray":function(){define(["../../../core/declare","./HeapSort"],function(n,k){return n([],{constructor:function(a,b){this.data=Array(a);this.length=0;if(b){for(var c=0;c<a;c++)this.data[c]=b(c);this._allocator=b;this._hasAllocator=
!0}else this._allocator=this._nullAllocator,this._hasAllocator=!1},_nullAllocator:function(){return null},grow:function(a){for(;this.data.length<a;)this.data.push(this._allocator(this.data.length))},next:function(){if(!this._hasAllocator)return null;this.data.length===this.length&&this.grow(2*this.length);return this.data[this.length++]},swap:function(a,b){var c=this.data[a];this.data[a]=this.data[b];this.data[b]=c},push:function(a){this.data.length===this.length&&this.grow(2*this.length);this.data[this.length++]=
a},pushArray:function(a){var b=this.length+a.length;b>=this.data.length&&this.grow(Math.max(2*this.length,b));for(b=0;b<a.length;b++)this.data[this.length++]=a[b]},pushEither:function(a){Array.isArray(a)?this.pushArray(a):this.push(a)},pop:function(){if(0===this.length)return null;var a=this.data[--this.length];this._hasAllocator||(this.data[this.length]=null);return a},slice:function(a,b){void 0===b&&(b=this.length);return this.data.slice(a,b)},clear:function(){if(!this._hasAllocator)for(var a=0;a<
this.length;a++)this.data[a]=null;this.length=0},peek:function(){return 0===this.length?null:this.data[this.length-1]},sort:function(a){k.sort(this.data,0,this.length,a);return this}})})},"esri/views/3d/support/HeapSort":function(){define([],function(){function n(a,b,c,f){for(var e=b,h=c>>>1,d=a[e-1];b<=h;){b=e<<1;b<c&&0>f(a[b-1],a[b])&&++b;var l=a[b-1];if(0>=f(l,d))break;a[e-1]=l;e=b}a[e-1]=d}function k(a,b){return a<b?-1:a>b?1:0}return{sort:function(a,b,c,f){void 0===b&&(b=0);void 0===c&&(c=a.length);
void 0===f&&(f=k);for(var e=c>>>1;e>b;e--)n(a,e,c,f);for(var h=b+1,e=c-1;e>b;e--)c=a[b],a[b]=a[e],a[e]=c,n(a,h,e,f);return a}}})},"esri/views/3d/support/DisplayQualityProfile":function(){define(["require","exports","../../../core/sniff"],function(n,k,a){var b={low:{sceneService:{"3dObject":{lodFactor:0.2},point:{lodFactor:1},integratedMesh:{lodFactor:0.6},pointCloud:{lodFactor:0.5}},tiledSurface:{lodBias:-1,angledSplitBias:0.5},antialiasingEnabled:!1},high:{sceneService:{"3dObject":{lodFactor:1},
point:{lodFactor:1},integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1}},tiledSurface:{lodBias:0,angledSplitBias:1},antialiasingEnabled:!0}};return function(){function c(){}c.isValidProfile=function(a){return a in b};c.getDefaultProfile=function(){return a("trident")||a("safari")?"low":"high"};c.apply=function(a,c){var h=b[a];c.qualitySettings.sceneService["3dObject"].lodFactor=h.sceneService["3dObject"].lodFactor;c.qualitySettings.sceneService.point.lodFactor=h.sceneService.point.lodFactor;c.qualitySettings.sceneService.integratedMesh.lodFactor=
h.sceneService.integratedMesh.lodFactor;c.qualitySettings.sceneService.pointCloud.lodFactor=h.sceneService.pointCloud.lodFactor;c.qualitySettings.tiledSurface.lodBias=h.tiledSurface.lodBias;c.qualitySettings.tiledSurface.angledSplitBias=h.tiledSurface.angledSplitBias;c.qualitySettings.antialiasingEnabled=h.antialiasingEnabled};return c}()})},"esri/views/3d/support/QualitySettings":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/typescript ../../../core/Accessor".split(" "),
function(n,k,a,b,c,f){var e=function(d){function e(){d.apply(this,arguments)}a(e,d);b([c.property({value:1})],e.prototype,"lodFactor",void 0);return e=b([c.subclass()],e)}(f),h=function(d){function g(){d.apply(this,arguments)}a(g,d);g.prototype.getDefaults=function(){return{"3dObject":new e,point:new e,integratedMesh:new e,pointCloud:new e}};b([c.property()],g.prototype,"3dObject",void 0);b([c.property()],g.prototype,"point",void 0);b([c.property()],g.prototype,"integratedMesh",void 0);b([c.property()],
g.prototype,"pointCloud",void 0);return g=b([c.subclass()],g)}(f),d=function(d){function e(){d.apply(this,arguments)}a(e,d);b([c.property({value:0})],e.prototype,"lodBias",void 0);b([c.property({value:1})],e.prototype,"angledSplitBias",void 0);return e=b([c.subclass()],e)}(f);return function(e){function g(){e.apply(this,arguments)}a(g,e);g.prototype.getDefaults=function(){return{sceneService:new h,tiledSurface:new d,antialiasingEnabled:!0}};b([c.property()],g.prototype,"sceneService",void 0);b([c.property()],
g.prototype,"tiledSurface",void 0);b([c.property()],g.prototype,"antialiasingEnabled",void 0);return g=b([c.subclass()],g)}(f)})},"esri/core/accessorSupport/typescript":function(){define(["../declare","../typescript","../JSONSupport","dojo/_base/lang"],function(n,k,a,b){function c(a,b){if(!a)return b;if(!b)return a;for(var h in b){var d=a[h],l=b[h];Array.isArray(l)&&Array.isArray(d)?a[h]=d.concat(l):a[h]="object"===typeof l&&"object"===typeof d?c(d,l):l}return a}return{subclass:function(f,e){return function(e){e=
k.declareDefinition(e,f);d&&(e.instanceMembers.properties=c(d,e.instanceMembers.properties));var d=e.instanceMembers.properties;if(d)for(var l in d){var g=d[l];g&&(!g.reader&&g.type)&&(g.type===Date?g.reader=function(a){return null!=a?new Date(a):null}:-1!==g.type._meta.bases.indexOf(a)&&(g.reader=function(a){return function(b){return a.fromJSON(b)}}(g.type)))}return b.mixin(n(e.bases,e.instanceMembers),e.classMembers)}},shared:k.shared,property:function(a){return function(b,c){var d=Object.getPrototypeOf(b),
d=d&&d.properties;if(!b.properties||b.properties===d)b.properties={};b.properties=b.properties||{};b.properties[c]=a||{}}}}})},"esri/core/typescript":function(){define(["./declare","dojo/_base/lang"],function(n,k){var a={declareDefinition:function(a,c){var f=[],e=Object.getPrototypeOf(a.prototype),h;if(e!==Object.prototype){var d=e.constructor;h=d.prototype;f.push(d)}c&&(f=f.concat(c));for(var d={},l=Object.getOwnPropertyNames(a.prototype),g=0;g<l.length;g++){var m=l[g];if("constructor"!==m){var q=
m;"dojoConstructor"===m&&(q="constructor");if(!h||a.prototype[m]!==h[m])d[q]=a.prototype[m]}}l=Object.getOwnPropertyNames(a);e=Object.getOwnPropertyNames(e.constructor);h={};for(g=0;g<l.length;g++)m=l[g],-1===e.indexOf(m)&&(h[m]=a[m]);return{bases:f,instanceMembers:d,classMembers:h}},subclass:function(b){return function(c){c=a.declareDefinition(c,b);return k.mixin(n(c.bases,c.instanceMembers),c.classMembers)}},shared:function(a){return function(c,f){c[f]=a}}};return a})},"esri/views/3d/support/SharedSymbolResources":function(){define("require exports dojo/io-query ./TextureCollection ./ResourceController ../../../identity/IdentityManager".split(" "),
function(n,k,a,b,c,f){return function(){function e(a,d){var e=this;this.streamDataSupplier=this.textures=null;this.tokens={};var g=c.ClientType.SYMBOLOGY;this.resourceController=d;this.streamDataSupplier=d.registerClient(this,g,{addUrlToken:function(a){return e.addUrlToken(a)}});this.textures=new b(this.streamDataSupplier,a,{wrapClamp:!0})}e.prototype.destroy=function(){this.resourceController.deregisterClient(this);this.streamDataSupplier=this.textures=null};e.prototype.addUrlToken=function(b){if(0===
b.indexOf("data:"))return b;var c=b.match(/^(((?:https?:)?\/\/[^\/]+).*?)(?:\?(.*))?$/);if(!c)return b;var e=c[1],g=c[2],c=a.queryToObject(c[3]||"");"token"in c||(null==this.tokens[g]&&(b=f.findCredential(b),this.tokens[g]=b&&b.token||""),this.tokens[g]&&(c.token=this.tokens[g]));return(g=a.objectToQuery(c))?e+"?"+g:e};return e}()})},"esri/views/3d/support/TextureCollection":function(){define("../../../core/declare dojo/Deferred dojo/_base/lang ../webgl-engine/Stage ../webgl-engine/lib/Texture ../webgl-engine/lib/Util".split(" "),
function(n,k,a,b,c,f){var e=f.assert;return n(null,{constructor:function(a,b,c){this._streamDataSupplier=a;this._stage=b;this._textureRecords={};this._loadedHandler=this._loadedHandler.bind(this);this._errorHandler=this._errorHandler.bind(this);this._textureOptions=c||{}},acquire:function(a,c){var e;if(e=this._textureRecords[a])return e.referenceCount++,e.texture||e.clientDfd;if(c){var g=c(a);this._stage.add(b.ModelContentType.TEXTURE,g);e={texture:g,referenceCount:1};this._textureRecords[a]=e;return g}e=
new k;g=this._streamDataSupplier.request(a,"image");this._textureRecords[a]={clientDfd:e,loaderDfd:g,texture:null,referenceCount:1};g.then(this._loadedHandler,this._errorHandler);return e.promise},release:function(a){var c=this._textureRecords[a];c?(1>c.referenceCount&&console.warn("TextureCollection: reference count is \x3c 1 for "+a),c.referenceCount--,1>c.referenceCount&&(c.texture?(this._stage.remove(b.ModelContentType.TEXTURE,c.texture.getId()),c.texture=null):this._streamDataSupplier.cancelRequest(c.loaderDfd),
delete this._textureRecords[a])):console.warn("TextureCollection: texture doesn't exist: "+a)},isInUse:function(a){a=this._textureRecords[a];e(!a||0<a.referenceCount,"texture record with zero reference count");return!!a},_loadedHandler:function(h,d,f){h=this._textureRecords[h];e(h&&!h.texture);f=a.mixin({width:d.width,height:d.height},this._textureOptions);d=new c(d,"symbol",f);this._stage.add(b.ModelContentType.TEXTURE,d);h.texture=d;h.clientDfd.resolve(d)},_errorHandler:function(a){a=this._textureRecords[a];
e(a&&!a.texture);a.clientDfd.reject()}})})},"esri/views/3d/terrain/TerrainSurface":function(){define("../../../core/declare ../../../core/Accessor ../../../core/arrayUtils ../../../core/Logger ../../../core/watchUtils ../../../core/CollectionFlattener dojo/Evented dojo/on ../lib/glMatrix ../support/projectionUtils ../support/ResourceController ../support/PromiseLightweight ../../../geometry/support/webMercatorUtils ./TerrainRenderer ./OverlayManager ./SurfaceExtentHelper ./SurfaceTilingSchemeLogic ./terrainUtils ./TileUtils ./TerrainConst ./TileGeometryFactory ./SphericalTile ./PlanarTile ./TilemapOnlyTile ./MapTileAgent ./ElevationTileAgent ../support/PreallocArray ../../../core/ObjectPool ../support/aaBoundingRect ../support/mathUtils".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D,I,A,z,E,C){function J(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}var F=d.vec3d,G=d.vec4d,K=d.mat4d,N=u.weakAssert,V=b.getLogger("esri.views.3d.terrain"),U=w.MAX_ROOT_TILES,ha=80/180*Math.PI,Q=w.TileUpdateTypes,S=G.create(),Y=[0,0,0],ia=Array(10),X=[null],aa={spatialReference:null,tile:null},ba={spatialReference:null,extent:null},R={spatialReference:null,extent:null,scale:0},M=[-Infinity,-Infinity,Infinity,Infinity],T=function(a){a.remove()},
Z=n([k,e],{properties:{ready:{readOnly:!0,get:function(){return!!this.rootTiles}},rootTiles:{readOnly:!0},manifold:{readOnly:!0},tilingScheme:{readOnly:!0},tilingSchemeLogic:{readOnly:!0},tilingSchemeLocked:{readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeLocked"},spatialReference:{readOnly:!0,dependsOn:["tilingScheme"],aliasOf:"tilingScheme.spatialReference"},overlayManager:{value:null},wireframe:{value:!1},opacity:1,cullBackFaces:!1,renderOrder:1,skirts:!0,frontMostTransparent:!1,tileBackground:"data:image/png;base64,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",
velvetOverground:!0,extent:{},loaded:!1},defaultTileBackground:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA2JJREFUeNrs3d1O20AQgFFvRJInQLQBhHj/h0JVW34El1yQ2F73DVq3jTys55zrqUBbPrErZUSZ+vcOsto4AjK76Lqu1vr8+G3mPzjc3D/+eJj/Bcz/cd75R80fbu79BsAVCAQAAgABgABAACAAEAAIAAQAAgABQPOKfQAy83Ho+HnnHzXv49B4A4AAQAAgABAACAAEAAIAAYAAQAAgABAANM4+AKnZB4ifd/5R8/YB8AYAAYAAQAAgABAACAAEAAIAAYAAQAAgAGicfQBSsw8QP+/8o+btA+ANAAIAAYAAQAAgABAACAAEAAIAAYAAQADQOPsApGYfIH7e+UfN2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAXA201QdggAggH0AUrMPED8/jsPL03fns/y8fQC8AUAAIAAQAAgABAACAAGAAEAAIAAQAAgAGmcfgNTsA8TP2weImrcPgDcACAAEAAIAAYAAQAAgABAACAAEAAIAAUDj7AOQmn2A+Hn7AFHz9gHwBgABgABAACAAEAAIAAQAAgABgABgNS4cAf9pu9u3O1+m/n2aplKK/0j+TX86/tVP5+eZ3+729gFIfwWyDxA7bx8gat4+ANkJAAGAAEAAIAAQAAgABAACAAGAAEAAIABonn0AUrMPED9vHyBq3j4A3gAgABAACAAEAAIAAYAAQAAgABAA51VrdQgCAAHAsuwDkJp9gPj5vj+9vvx0PsvP2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAYAAoHH2AUjNPkD8vH2AqHn7AHgDgABAACAAEAAIAAQAAgABgABAACAAEAA0zj4AqdkHiJ+3DxA1bx8AbwAQACQ0DL0AyKuOowBwBYKUSikCIHUBAsAVCAQAAgABgABAALBy9gFIzT5A/Lx9gKj5y6trVyC8AUAAIAAQAAgAVq90Pg5N5gA2AsAVCAQAAgABgABAALB29gFIzT5A/Lx9gKj5q6+3rkB4A4AAQAAgABAACADWzB/IIHsCAsAVCARAlKlWhyAAEAAIABZjH4DU7APEz5+OH2+vT85n+fkvhztXILwBQAAgABAACAAEAGtWigBIHcBGALgCgQBAACAAyPMO9nHosxuHodZx5vB2t691HIdh/nx/Os7/Zsz/fvgXAAAA//8DAF1P1hM2ICMfAAAAAElFTkSuQmCC",
constructor:function(){this._set("rootTiles",null);this._iteratorPool=new z(v.IteratorPreorder,function(){},!1);this._postorderIterator=new v.IteratorPostorder;this._topLevelTilemapOnlyTiles=Array(w.TILEMAP_SIZE_EXP+1);for(a=0;a<this._topLevelTilemapOnlyTiles.length;a++)this._topLevelTilemapOnlyTiles[a]=new H([a-w.TILEMAP_SIZE_EXP,0,0]);this._dataExtent=this._clippingExtent=null;this._rootExtent=[0,0,0,0];this.notifyChange("extent");this._elevationBounds=[0,0];this._frameUpdateLowerPrio=new A(500);
this.maxTextureScale=1.2;this._stage=this._view._stage;this._updateNextFrame=this._lvPendingUpdates=this._pendingUpdates=this.suspended=this.visible=!1;this._curOverlayOpacity=1;this._curEyePos=F.create();this._curSplitLimits=[0,0,0,0,0,0];this._curFrustumPlanes=Array(6);this._viewProjectionMatrix=K.identity();for(var a=0;6>a;++a)this._curFrustumPlanes[a]=G.create();this.tilemapStats={tilemapRequestsSent:0,tilemapRequestsPending:0,tilemapRequestErrors:0,fullTilemaps:0,emptyTilemaps:0,tilesRequested:0,
tileRequestsSent:0,tileRequestErrors:0,tilesNotPresent:0};this._layerViews=[[],[]];this._layerIndexByLayerViewId=[{},{}];this._basemapLayerViewHandles={};this._groupLayerViewHandles={};this._layerViewChangesHandle=null;this.hideSkirtsDistanceFromExtentMargin=1.2;this.hideSkirtsMinimumCameraTilt=ha},normalizeCtorArgs:function(a,b){this._view=a;this._set("manifold",b);this.TileClass="planar"===b?B:y;return{}},initialize:function(){this._renderer=new p(this.manifold);this._renderer.loaded=this._setLoaded.bind(this);
this._renderer.updateTileBackground(this.tileBackground);this._renderer.install(this._view._stage);this.overlayManager=new r(this,this._view);this.extentHelper=new ("spherical"===this.manifold?t.SurfaceExtentHelperGlobal:t.SurfaceExtentHelperLocal)({layers:this._view.map.allLayers,layerViews:this._view.allLayerViews,spatialReference:this._view.spatialReference});var a;a=this._view.defaultsFromMap?new f({root:this._view.map,rootCollectionNames:this._view.defaultsFromMap.mapCollectionPaths,getChildrenFunction:function(a){return a.layers}}):
this._view.map.allLayers;this._set("tilingSchemeLogic",new s({layers:a,extentHelper:this.extentHelper,manifold:this.manifold,viewSpatialReference:this._view.spatialReference}));this.tilingSchemeLogic.watch("tilingScheme",this._updateTilingSchemeAndExtent.bind(this),!0);this.tilingSchemeLogic.watch("extent",this._updateTilingSchemeAndExtent.bind(this),!0);this._updateTilingSchemeAndExtent();this._streamDataSupplier=this._view.resourceController.registerClient(this,g.ClientType.TERRAIN);this._idleWorkers=
{needsUpdate:this._needsIdleUpdate,idleFrame:this._idleUpdate};this._view.resourceController.registerFrameWorker(this._frameUpdate.bind(this));this._view.resourceController.registerIdleFrameWorker(this,this._idleWorkers);this._viewChangeListenerHandles=[];this._viewChangeUpdate=this._viewChangeUpdate.bind(this);this._viewChangeListenerHandles.push(this._view.on("resize",this._viewChangeUpdate));this._viewChangeListenerHandles.push(c.on(this._view,"navigation","currentViewChanged",this._viewChangeUpdate));
this._viewChangeListenerHandles.push(this._view.watch("qualitySettings.tiledSurface.lodBias",this._viewChangeUpdate));this._layerViewChangesHandle=this._view.allLayerViews.on("change",this._handleLayerViewChanges.bind(this));this._handleLayerViewChanges({added:this._view.allLayerViews.toArray(),removed:[],moved:[]});this._clippingChangedHandle=this._view.watch("clippingArea",this._clippingChanged.bind(this));this._updateClippingExtent()},destroy:function(){this._removeAllTiles();this.tilingSchemeLogic.destroy();
this._set("tilingSchemeLogic",null);this.extentHelper.destroy();this.extentHelper=null;for(var a in this._basemapLayerViewHandles)this._unregisterTiledLayerView(a);this._view.resourceController.deregisterFrameWorker(this);this._view.resourceController.deregisterIdleFrameWorker(this);this._view.resourceController.deregisterClient(this);this._viewChangeListenerHandles.forEach(T);for(var b in this._groupLayerViewHandles)this._groupLayerViewHandles[b].forEach(T);this._layerViewChangesHandle.remove();
this._clippingChangedHandle.remove();this.overlayManager&&(this.overlayManager.destroy(),this.overlayManager=null);this._renderer.uninstall(this._stage);this._streamDataSupplier=this._stage=this._view=this._renderer=null},setVisibility:function(a){a!==this.visible&&(this.visible=a,this._renderer.setVisibility(a),this.setUpdatesDisabled(!a),a&&this._viewChangeUpdate())},isVisible:function(){return this.visible&&this.ready},setUpdatesDisabled:function(a){(this.suspended=a)||this._viewChangeUpdate()},
getElevation:function(a){return!this.ready||0===this.rootTiles[0].layerInfo[w.LayerClass.ELEVATION].length?null:Array.isArray(a)?this._getElevation(a):!l.pointToVector(a,S,this.tilingScheme.spatialReference)?(V.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null):this._getElevation(S)},_getElevation:function(a){var b=w.LayerClass.ELEVATION,c=this.rootTiles[0].layerInfo[b].length,d;ia.length<c&&(ia.length=c);for(var e=0;e<this.rootTiles.length;e++){var g=
this.rootTiles[e];if(v.isPosWithinTile(g,a))for(;g;){var h=g.layerInfo[b];for(d=0;d<c;d++)h[d].data&&(ia[d]=h[d].data.samplerData);if(!g.children[0])break;d=0;a[0]>g.children[0].extent[2]&&(d+=1);a[1]<g.children[0].extent[1]&&(d+=2);g=g.children[d]}}a=x.elevationSampler(a[0],a[1],ia);for(d=0;d<c;d++)ia[d]=void 0;return a},getElevationBounds:function(){return this._elevationBounds},getScale:function(a){if(this.tilingScheme){if(!l.pointToVector(a,S,this.spatialReference))return V.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),
null;if(this.rootTiles)for(var b=0;b<this.rootTiles.length;b++)if(a=this.rootTiles[b],v.isPosWithinTile(a,S)){for(;a.children[0];)b=0,S[0]>a.children[0].extent[2]&&(b+=1),S[1]<a.children[0].extent[1]&&(b+=2),a=a.children[b];return this._getLodBiasCorrectedScale(a.lij[0])}}return 1E100},queryVisibleScaleRange:function(a,b,c,d){b=b?this.tilingScheme.levelAtScale(b):0;c=c?this.tilingScheme.levelAtScale(c):Infinity;var e=this._getLodBias();this._renderer.queryVisibleLevelRange(a,b+e,c+e,d)},_setLoaded:function(){this.loaded||
(this.loaded=!0,this.emit("load"))},_updateTilingSchemeAndExtent:function(){var a=this.tilingSchemeLogic.extent,b=this.tilingSchemeLogic.tilingScheme,c=!1;a&&!E.equals(a,this._dataExtent)&&(c=!0,this._dataExtent?E.set(this._dataExtent,a):this._dataExtent=E.create(a));b!=this.tilingScheme&&(N(b,"tiling scheme cannot be reset to undefined"),c=!0,this.tilingScheme&&this._removeAllTiles(),this._set("tilingScheme",b),this._updateClippingExtent(),b&&(this._updateTiledLayers(),this._renderer.setTileSize(b.pixelSize[0]),
this.overlayManager.setSpatialReference(b.spatialReference,"spherical"===this.manifold)));c&&this._updateRootTiles()},_acquireTile:function(a,b,c,d){var e=this.TileClass.Pool.acquire();Y[0]=a;Y[1]=b;Y[2]=c;e.init(Y,d,this,this.tilingScheme);return e},_releaseTile:function(a){a.dispose();a.parent=null;a.parentSurface=null;this.TileClass.Pool.release(a)},_updateRootTiles:function(){var b=this._clippingExtent||this._dataExtent,c=this.tilingScheme;if(b&&c){var d=c.rootTilesInExtent(b,S,Infinity);if(this.rootTiles){if(d.length>
U){V.warn(Z.TOO_MANY_ROOT_TILES_AFTER_CHANGE);return}var b=this.rootTiles.map(function(a){return a.lij}),e=a.difference(b,d,J);if(0<e.removed.length||0<e.added.length){var g=this.rootTiles.filter(function(b){return-1<a.findIndex(e.removed,J.bind(null,b.lij))?(this._purgeChildTiles(b),this._purgeTile(b),!1):!0}.bind(this));e.added.forEach(function(a){a=this._acquireTile(0,a[1],a[2],null);g.push(a);this._loadTile(a)}.bind(this));this._set("rootTiles",g);this._renderer.setRootTiles(this.rootTiles)}}else d.length>
U&&(V.warn(Z.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR),d=c.rootTilesInExtent(b,S,U)),this._set("rootTiles",d.map(function(a){a=this._acquireTile(0,a[1],a[2],null);this._loadTile(a);return a}.bind(this))),this._renderer.setRootTiles(this.rootTiles);a.equals(S,this._rootExtent)||(this._rootExtent=G.create(S),this._hasFixedExtent()||this.notifyChange("extent"));this.setVisibility(!0);this._viewChangeUpdate();this.notifyChange("ready")}},_viewChangeUpdate:function(){this._stage&&(!this.suspended&&this.tilingScheme&&
this.visible)&&(this._updateViewDependentParameters(),this._updateOverlayOpacity(this._curEyePos),this._updateTiles(this.rootTiles),this.overlayManager&&this.overlayManager.setOverlayDirty())},_hasVisibleSiblings:function(a){Array.isArray(a)||(X[0]=a,a=X);for(var b=0;b<a.length;b++){var c=a[b],d=c.parent;if(d)for(var e=0;4>e;e++){var g=d.children[e];if(g&&g!==c&&g.visible)return!0}}return!1},_updateTiles:function(a){var b=this._iteratorPool.acquire();b.reset(a);var c=this._curSplitLimits,d=this._curFrustumPlanes,
e=this._curEyePos,g;this._hasVisibleSiblings(a)?(a=this._elevationBounds[0],g=this._elevationBounds[1]):(a=Infinity,g=-Infinity);for(;!b.done;){var f=b.next();f.updateClippingStatus(this._clippingExtent);var l=!0;if(f.updateVisibility(d,e)){f.updateScreenDepth(this._viewProjectionMatrix);f.renderData&&(a=Math.min(f.elevationBounds[0],a),g=Math.max(f.elevationBounds[1],g));var m=f.shouldSplit(c,e);m===Q.SPLIT?(f.pendingUpdates&=~Q.MERGE,f.renderData?(l=!1,f.pendingUpdates|=Q.SPLIT,b.skip()):l=!1):
(f.pendingUpdates&=~Q.SPLIT,m===Q.VSPLITMERGE&&f.updateAgents(w.LayerClass.ELEVATION),b.skip())}else b.skip();if(l&&!f.renderData){f.pendingUpdates|=Q.MERGE;f.pendingUpdates&=~Q.SPLIT;l=this._iteratorPool.acquire();for(l.reset(f);!l.done;)m=l.next(),m.updateVisibility(d,e),m.visible&&m.updateScreenDepth(this._viewProjectionMatrix);this._iteratorPool.release(l)}0!==f.pendingUpdates&&(this._pendingUpdates=!0)}this._iteratorPool.release(b);if(isFinite(a)&&isFinite(g)&&(this._elevationBounds[0]!==a||
this._elevationBounds[1]!==g))this._elevationBounds[0]=a,this._elevationBounds[1]=g,h.emit(this,"elevation-bounds-change")},_viewParamSelector:{projectionMatrix:!0,fovX:!0,viewport:!0},_updateViewDependentParameters:function(){var a=this._view.navigation.currentCamera,b=Math.tan(0.5*a.fovX),c=Math.tan(0.5*a.fovY),d=this.tilingScheme.pixelSize,e=Math.pow(2,-this._getLodBias());this._curSplitLimits[0]=b;this._curSplitLimits[1]=d[0]/a.width*this.maxTextureScale*e;this._curSplitLimits[2]=c;this._curSplitLimits[3]=
d[1]/a.height*this.maxTextureScale*e;this._curSplitLimits[4]=this.tilingScheme.getMaxLod();this._curSplitLimits[5]=this._view.qualitySettings.tiledSurface.angledSplitBias;a.copyFrustumPlanes(this._curFrustumPlanes);K.multiply(a.projectionMatrix,a.viewMatrix,this._viewProjectionMatrix);F.set(a.eye,this._curEyePos);u.autoUpdateSkirtsVisibility(this,this._curEyePos)},_setLayerViewsUpdating:function(){for(var a=0;a<w.LayerClass.LAYER_CLASS_COUNT;a++)for(var b=this._layerViews[a],c=0;c<b.length;c++)b[c]._evaluateUpdatingState(this._pendingUpdates)},
_frameUpdateTraversal:function(a){if(!this.suspended){this._frameUpdateLowerPrio.clear();var b=this._renderer.resourceCounter.numTileTexturesComposited,c=this._iteratorPool.acquire();c.reset(this.rootTiles);for(var d=!1,e=!1;!c.done&&(1<a.remaining()||!d)&&12>this._renderer.resourceCounter.numTileTexturesComposited-b;){var g=c.next();g.pendingUpdates&Q.MERGE?(this._mergeTile(g),g.pendingUpdates&=~Q.MERGE,d=!0,c.skip()):g.pendingUpdates&Q.SPLIT?(this._splitTile(g),g.pendingUpdates&=~Q.SPLIT,d=!0,c.skip()):
0<g.pendingUpdates&&this._frameUpdateLowerPrio.push(g);0!==g.pendingUpdates&&(e=!0)}this._pendingUpdates=e||!c.done;this._iteratorPool.release(c);return d}},_updateTileGeometry:function(a){this._renderer._updateTileGeometry(a);aa.spatialReference=this.spatialReference;aa.tile=a;h.emit(this,"elevation-change-tile",aa)},_updateTileTexture:function(a){this._renderer.updateTileTexture(a)},_frameUpdate:function(a){if(this.rootTiles){for(var b=this._frameUpdateTraversal(a);(1<a.remaining()||!b)&&0<this._frameUpdateLowerPrio.length;){var c=
this._frameUpdateLowerPrio.pop();c.pendingUpdates&Q.DECODE_LERC?(this._decodeLERC(c),c.pendingUpdates&=~Q.DECODE_LERC,b=!0):c.pendingUpdates&Q.UPDATE_GEOMETRY?(this._renderer.updateTileGeometryNeedsUpdate(c),this._updateTileGeometry(c),b=!0,c.pendingUpdates&=~Q.UPDATE_GEOMETRY):c.pendingUpdates&Q.UPDATE_TEXTURE&&(this._updateTileTexture(c),c.pendingUpdates&=~Q.UPDATE_TEXTURE,b=!0);0!==c.pendingUpdates&&(this._pendingUpdates=!0)}0<this._frameUpdateLowerPrio.length&&(this._pendingUpdates=!0);this._streamDataSupplier._loader.hasPendingDownloads()&&
(this._pendingUpdates=!0);if(this._pendingUpdates!==this._lvPendingUpdates&&(this._pendingUpdates||20===++this._updateNextFrame))this._setLayerViewsUpdating(),this._lvPendingUpdates=this._pendingUpdates,this._updateNextFrame=0}},_needsIdleUpdate:function(){return this.isVisible()&&this.overlayManager&&this.overlayManager.overlaysNeedUpdate()},_idleUpdate:function(a){this.overlayManager.updateOverlay();this._updateOverlayOpacity(this._curEyePos)},_updateClippingExtent:function(){if(!this.spatialReference)return!1;
var b=[],c=null;l.extentToBoundingRect(this._view.clippingArea,b,this.spatialReference)&&(c=b);if(a.equals(c,this._clippingExtent))return!1;this._clippingExtent=c;this._renderer.clippingExtent=c;this.notifyChange("extent");return!0},_clippingChanged:function(){this._updateClippingExtent()&&this._updateRootTiles()},_getLodBias:function(){return Math.round(this._view.qualitySettings.tiledSurface.lodBias)},_getLodBiasCorrectedScale:function(a){var b=this.tilingScheme.levels;a=C.clamp(a-this._getLodBias(),
0,b.length-1);return b[a].scale},_cancelTilemapRequests:function(a){for(var b=0;b<w.LayerClass.LAYER_CLASS_COUNT;b++){var c=a.layerInfo[b];if(c)for(var d=0;d<c.length;d++){var e=c[d];e.tilemapRequest&&(e.tilemapRequest.cancel(),e.tilemapRequest=null)}}},_removeAllTiles:function(){this.rootTiles&&(this.rootTiles.forEach(function(a){this._purgeChildTiles(a);this._purgeTile(a)}.bind(this)),this._set("rootTiles",null),this.notifyChange("ready"));for(var a=0;a<this._topLevelTilemapOnlyTiles.length;a++)this._cancelTilemapRequests(this._topLevelTilemapOnlyTiles[a]);
this.setVisibility(!1)},_purgeChildTiles:function(a){var b=this._postorderIterator;for(b.reset(a);!b.done;){for(var c=b.next(),d=0;4>d;d++)c.children[d]=null;c!==a&&this._purgeTile(c)}},_purgeTile:function(a){a.unload(this._renderer);this._cancelTilemapRequests(a);a.parent=null;a.releaseLayerResources();this._releaseTile(a)},_splitTile:function(a){var b=a.lij[0]+1,c=2*a.lij[1],d=2*a.lij[2];a.children[0]=this._createTile(b,c,d,a);a.children[1]=this._createTile(b,c,d+1,a);a.children[2]=this._createTile(b,
c+1,d,a);a.children[3]=this._createTile(b,c+1,d+1,a);a.unload(this._renderer);R.spatialReference=this.spatialReference;R.extent=a.extent;R.scale=this._getLodBiasCorrectedScale(b);h.emit(this,"scale-change",R)},_createTile:function(a,b,c,d){N(d,"_createTile sanity check");a=this._acquireTile(a,b,c,d);a.updateClippingStatus(this._clippingExtent);a.updateVisibility(this._curFrustumPlanes,this._curEyePos);a.visible&&(a.updateScreenDepth(this._viewProjectionMatrix),a.shouldSplit(this._curSplitLimits,this._curEyePos)===
Q.SPLIT&&(a.pendingUpdates|=Q.SPLIT,this._pendingUpdates=!0));this._loadTile(a);return a},_mergeTile:function(a){N(!a.renderData,"_mergeTile sanity check");this._loadTile(a);this._purgeChildTiles(a);R.spatialReference=this.spatialReference;R.extent=a.extent;R.scale=this._getLodBiasCorrectedScale(a.lij[0]);h.emit(this,"scale-change",R)},_loadTile:function(a){a.load(this._renderer);this.overlayManager&&this.overlayManager.hasOverlays()&&this.overlayManager.setOverlayParamsOfTile(a,a.renderData,this._curOverlayOpacity)},
_decodeLERC:function(a){var b=w.LayerClass.ELEVATION,c=a.layerInfo[b];if(c)for(var d=0;d<c.length;d++){var e=c[d];e.pendingUpdates&=~Q.DECODE_LERC;if(e.rawData){var g=a.createElevationDataFromLERC(e.rawData);e.rawData=null;if(g){e.data=g;var e=a.lij[0],h=this._iteratorPool.acquire();for(h.reset(a);!h.done;){var f=h.next();f.findElevationBoundsForLayer(d,e);f.computeElevationBounds()}this._iteratorPool.release(h);a.dataArrived(d,b,g);this._updateTiles(a);ba.spatialReference=this.spatialReference;ba.extent=
a.extent;this._emitElevationChange(ba)}}}},_handleLayerViewChanges:function(a){var b=!1;a.added.forEach(function(a){var c=a.layer;if(u.isTiledLayerView(a))this._registerTiledLayer(c,a),c.loaded&&(b=!0);else if(a.supportsDraping&&this.overlayManager)this.overlayManager.registerLayerView(a);else if("IntegratedMeshLayer"===c.operationalLayerType&&!this._renderer.isStencilEnabledLayerExtent(a.uid)){var d=c.fullExtent,c=d.spatialReference,e=[d.xmax,d.ymax,d.zmax],g=Array(6);(d=(d=l.bufferToBuffer([d.xmin,
d.ymin,d.zmin],c,0,g,this.spatialReference,0))&&l.bufferToBuffer(e,c,0,g,this.spatialReference,3))&&this._renderer.addStencilEnabledLayerExtent(a.uid,g)}}.bind(this));a.removed.forEach(function(a){u.isTiledLayerView(a)?(b=!0,this._unregisterTiledLayerView(a.uid)):a.supportsDraping&&this.overlayManager?this.overlayManager.unregisterLayerView(a):this._renderer.isStencilEnabledLayerExtent(a.uid)&&this._renderer.removeStencilEnabledLayerExtent(a.uid)}.bind(this));(b=b||0<a.moved.filter(u.isTiledLayerView).length)&&
this._updateTiledLayers()},_registerTiledLayer:function(a,b){var c=[];c.push(b.watch("suspended",function(){this._updateTiledLayers()}.bind(this)));c.push(b.watch("fullOpacity",this._updateTileTextures.bind(this)));this._basemapLayerViewHandles[b.uid]=c},_unregisterTiledLayerView:function(a){var b=this._basemapLayerViewHandles[a];if(b){for(var c=0;c<b.length;c++)b[c].remove();delete this._basemapLayerViewHandles[a]}},_updateTiledLayers:function(){if(this.tilingScheme){var a=this._view.allLayerViews,
b=[[],[]],c=w.LayerClass,d=null,e=E.create(E.NEGATIVE_INFINITY),g=function(a){var g=a.layer;if(g&&a&&!a.suspended&&u.isTiledLayerView(a)){var h=g.fullExtent;if(h){var f=u.isVectorTileLayerView(a)&&256===this.tilingScheme.pixelSize[0]?g.tileInfo256:g.tileInfo;if(this.tilingScheme.compatibleWith(f))if(E.expand(e,h),u.isElevationLayerView(a))b[c.ELEVATION].push(a);else{if(Infinity!==a.maxDataLevel&&(null===d||a.maxDataLevel>d))d=a.maxDataLevel;b[c.MAP].push(a)}else V.warn("Terrain: tiling scheme of layer "+
g.id+" is incompatible with other tiled layers, will not be drawn")}else V.warn("Terrain: Map or elevation layer does not have fullExtent: "+g.id)}}.bind(this);a.forEach(g,this);for(var h=0;h<c.LAYER_CLASS_COUNT;h++){var f=this._layerViews[h],a=b[h];a.reverse();var g=f.length!==a.length,l=a.length,m=Array(l),q=Array(f.length);this._layerIndexByLayerViewId[h]={};for(var r=0;r<l;r++){this._layerIndexByLayerViewId[h][a[r].uid]=r;var p=f.indexOf(a[r]);m[r]=p;r!==p&&(g=!0);-1<p&&(q[p]=r)}if(g){this._layerViews[h]=
a;this._topLevelTilemapOnlyTiles.forEach(function(a){a.modifyLayers(q,m,h,f)});if(this.rootTiles){a=this._postorderIterator;for(a.reset(this.rootTiles);!a.done;)a.next().modifyLayers(q,m,h,f);for(a.reset(this.rootTiles);!a.done;)g=a.next(),g.restartAgents(h),h===c.ELEVATION&&g.computeElevationBounds();this._updateTiles(this.rootTiles)}h===c.ELEVATION&&this.tilingScheme&&(ba.spatialReference=this.tilingScheme.spatialReference,ba.extent=M,this._emitElevationChange(ba))}}this.tilingScheme.levels.length-
1<d&&(this.tilingScheme.ensureMaxLod(d),this._viewChangeUpdate())}},_emitElevationChange:function(a){h.emit(this,"elevation-change",a);if(Z.UPDATE_OVERLAY_MANAGER_BY_ELEVATION_UPDATES_DEFAULT)this.overlayManager.onElevationChange(a)},_getLayerExtentUnion:function(a){var b=this._view.allLayerViews,c=E.create(E.NEGATIVE_INFINITY);b.forEach(function(b){var d=b.layer;(b=b.fullExtentInViewSpatialReference||d.fullExtent)&&!b.spatialReference.equals(a)&&(b=q.canProject(b.spatialReference,a)?q.project(b,
a):null);b&&E.expand(c,b)});return E.allFinite(c)?c:null},layerViewByIndex:function(a,b){return this._layerViews[b][a]},agentTypeByLayerIndex:function(a,b){return b===w.LayerClass.ELEVATION?I:D},numLayers:function(a){return this._layerViews[a].length},numTotalLayers:function(){return this._layerViews.reduce(function(a,b){return b.length+a},0)},_updateTileTextures:function(){var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;)a.next().updateTexture();this._iteratorPool.release(a)},
requestTileData:function(a,b,c){this.tilemapStats.tilesRequested++;var d=this.layerViewByIndex(b,c);if(d.layer.tilemapCache){var e=this.getTilemapTile(a),g=e.layerInfo[c][b];if(g.tilemap){if(!e.tileDataAvailable(a,b,c))return this.tilemapStats.tilesNotPresent++,this._dispatchDataEvent(a,"dataMissing",c,d,{notInTilemap:!0}),b=new m.Promise,b.reject(),b}else{var h=new m.Promise;h.actualTileRequestPromise=null;g.tilemapRequest||(g.tilemapRequest=this.requestTilemap(e,b,c,d));g.tilemapRequest.then(function(){g.tilemapRequest=
null;if(!h.isCancelled()){var b=this._layerIndexByLayerViewId[c][d.uid];null!=b&&(e.tileDataAvailable(a,b,c)?(h.actualTileRequestPromise=this._requestTileData(a,b,c,d),h.actualTileRequestPromise.then(function(){h.resolve()})):(this.tilemapStats.tilesNotPresent++,this._dispatchDataEvent(a,"dataMissing",c,d,{notInTilemap:!0}),h.reject()))}}.bind(this));return h}}return this._requestTileData(a,b,c,d)},_requestTileData:function(a,b,c,d){this.tilemapStats.tileRequestsSent++;b=d.getTileUrl(a.lij[0],a.lij[1],
a.lij[2]);var e=this;if(c===w.LayerClass.ELEVATION)b=this._streamDataSupplier.request(b,"binary"),b.then(function(b,g){var h=e._layerIndexByLayerViewId[c][d.uid];null!=h?(h=a.layerInfo[c][h],g.url=b,h.rawData=g,a.pendingUpdates|=Q.DECODE_LERC,h.pendingUpdates|=Q.DECODE_LERC,e._pendingUpdates=!0):V.warn("TerrainSurface: received data from unknown layer %d %s",c,a.lij.toString())},function(b){e.tilemapStats.tileRequestErrors++;e._dispatchDataEvent(a,"dataMissing",c,d,b)});else if(u.isVectorTileLayerView(d)){b=
d.tileHandler;var g=d.schemeHelper.getCompatibleLevelRowCol(a.lij);b=b.getVectorTileWithLRC(g[0],g[1],g[2],0);b.then(function(b){e._dispatchDataEvent(a,"dataArrived",c,d,b)}).otherwise(function(b){"cancel"!==b&&(e._dispatchDataEvent(a,"dataMissing",c,d,b),e.tilemapStats.tileRequestErrors++)})}else b=this._streamDataSupplier.request(b,"image"),b.then(function(b,g){e._dispatchDataEvent(a,"dataArrived",c,d,g)},function(b){e.tilemapStats.tileRequestErrors++;e._dispatchDataEvent(a,"dataMissing",c,d,b)});
return b},requestTilemap:function(a,b,c,d){var e,g=new m.Promise(function(){e.cancel()}),h=a.lij[0]+w.TILEMAP_SIZE_EXP,f=a.lij[1]<<w.TILEMAP_SIZE_EXP,l=a.lij[2]<<w.TILEMAP_SIZE_EXP;this.tilemapStats.tilemapRequestsSent++;this.tilemapStats.tilemapRequestsPending++;var q=this;e=d.layer.tilemapCache.fetchTilemap(h,f,l,{timeout:6E3});e.then(function(e){q.tilemapStats.tilemapRequestsPending--;b=this._layerIndexByLayerViewId[c][d.uid];null!=b&&(a.layerInfo[c][b].tilemap=e);g.resolve()}.bind(this),function(){q.tilemapStats.tilemapRequestErrors++;
g.resolve()});return g},getTilemapTile:function(a){var b=a.lij[0];return b>w.TILEMAP_SIZE_EXP?v.getTileNLevelsUp(a,w.TILEMAP_SIZE_EXP):this._topLevelTilemapOnlyTiles[b]},_dispatchDataEvent:function(a,b,c,d,e){d=this._layerIndexByLayerViewId[c][d.uid];if(null!=d)a[b](d,c,e);else V.warn("TerrainSurface: received data from unknown layer")},cancelRequest:function(a){var b=a.actualTileRequestPromise;void 0!==b?(null!==b&&this._streamDataSupplier.cancelRequest(b),a.cancel()):this._streamDataSupplier.cancelRequest(a)},
_updateTileOverlayParams:function(){if(this.rootTiles){var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;){var b=a.next();b.renderData&&this.overlayManager&&this.overlayManager.setOverlayParamsOfTile(b,b.renderData,this._curOverlayOpacity)}this._iteratorPool.release(a);this._renderer.setNeedsRender()}},_updateOverlayOpacity:function(a){if(this.overlayManager&&(a=this.overlayManager.updateOpacity(a),!isNaN(a))){if(a!==this._curOverlayOpacity&&this.rootTiles){var b=this._iteratorPool.acquire();
for(b.reset(this.rootTiles);!b.done;){var c=b.next();c.renderData&&c.renderData.overlayTexId&&(c.renderData.overlayOpacity=a)}this._iteratorPool.release(b)}this._curOverlayOpacity=a;this._renderer.setNeedsRender()}},getStats:function(){var a=0,b=0,c=0,d=[],e=this._iteratorPool.acquire();for(e.reset(this.rootTiles);!e.done;){var g=e.next();a++;g.renderData&&(b++,g.visible&&(c++,g=g.lij[0],d[g]=null!=d[g]?d[g]+1:1))}this._iteratorPool.release(e);return{numNodes:a,numLeaves:b,numVisible:c,numVisiblePerLevel:d}},
getTile:function(a){var b=a.split("/").map(JSON.parse);if(0===b[0])return this.rootTiles.forEach(function(a){if(a.lij[1]===b[1]&&a.lij[2]===b[2])return a}),null;var c=Math.pow(2,b[0]),d=Math.floor(b[1]/c),e=Math.floor(b[2]/c),g;this.rootTiles.some(function(a){return a.lij[1]===d&&a.lij[2]===e?(g=a,!0):!1});if(g){for(c=1<<b[0]-1;g.lij[0]<b[0];){var h=b[1]&c?2:0;0<(b[2]&c)&&h++;if(!g.children[h])return console.log("Tile "+a+" doesn't exist, smallest ancestor is "+v.tile2str(g)),null;g=g.children[h];
c>>=1}N(g.lij[0]===b[0]&&g.lij[1]===b[1]&&g.lij[2]===b[2],"not the right tile?");return g}return null},hasPendingUpdates:function(){if(this._streamDataSupplier._loader.hasPendingDownloads())return!0;var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;)if(0<a.next().pendingUpdates)return this._iteratorPool.release(a),!0;this._iteratorPool.release(a);return!1},setBorders:function(a){this._renderer.setBorders(a)},setDisableRendering:function(a){this._renderer.setDisableRendering(a)},
_extentGetter:function(){return this._clippingExtent||this._rootExtent},_hasFixedExtent:function(){return!!this._clippingExtent},_wireframeSetter:function(a){this._renderer.setWireframe(a);this._set("wireframe",a);this._view._stage.setRenderParams({earlyOcclusionPixelDraw:a})},_opacitySetter:function(a){this._renderer.setOpacity(a);this._set("opacity",a)},_skirtsSetter:function(a){this._renderer.setDrawSkirts(!!a);this._set("skirts",a)},_cullBackFacesSetter:function(a){this._renderer.setCullBackFaces(a);
this._set("cullBackFaces",a)},_renderOrderSetter:function(a){this._renderer.setRenderOrder(a);this._set("renderOrder",a)},_frontMostTransparentSetter:function(a){this._renderer.setFrontMostTransparent(!!a);this._set("frontMostTransparent",a)},_tileBackgroundSetter:function(a){a!==this.tileBackground&&this._renderer.updateTileBackground(a);this._set("tileBackground",a)},_velvetOvergroundSetter:function(a){a!==this.velvetOverground&&this._renderer.setVelvetOverground(a);this._set("velvetOverground",
a)}});Z.TOO_MANY_ROOT_TILES_INITIALLY="Maximum number of root tiles exceeded, only a part of the map will be visible.";Z.TOO_MANY_ROOT_TILES_AFTER_CHANGE="Cannot extend surface to encompass all layers because it would result in too many root tiles.";Z.UPDATE_OVERLAY_MANAGER_BY_ELEVATION_UPDATES_DEFAULT=!1;return Z})},"esri/views/3d/terrain/TerrainRenderer":function(){define("dojo/Deferred dojo/when ./TileUtils ./TerrainConst ./TileGeometryFactory ./TileRenderData ./ResourceCounter ./TileRenderer ../support/PreallocArray ../../../core/ObjectPool ../webgl-engine/lib/ShaderVariations dojo/text!./TerrainMaterial.xml ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/lib/Util ../lib/glMatrix ../webgl-engine/lib/RenderPass ../webgl-engine/lib/RenderSlot ../webgl-engine/lib/tracer ../../webgl/Texture ../../webgl/VertexArrayObject ../../webgl/BufferObject ../../webgl/Program ../webgl-engine/lib/DefaultVertexAttributeLocations ../webgl-engine/lib/DefaultVertexBufferLayouts ../../webgl/Util".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D){var I=p.assert;p=r.vec2d;var A=r.vec3d,z=r.vec4d,E=r.mat4d.identity(),C=[2,2],J=s.OPAQUE_TERRAIN,F=s.TRANSPARENT_TERRAIN,G=A.create(),K,N=p.create();r=function(r,p){function s(a,b){var c=a.screenDepth,d=b.screenDepth;return c<d?-ma:c>d?ma:0}function Q(a,b){return 0===a.tiles.length?-ma:0===b.tiles.length?ma:s(a.tiles.data[0],b.tiles.data[0])}function S(a,b){void 0===b&&(b=ca.subdivisionReduceLevels);return 0===b?a:0>b?Math.floor((a-1)*(1<<
-b))+1:Math.floor((a-1)/(1<<b))+1}p=p||256;var Y,ia=!1,X=null,aa=null,ba=null,R={},M,T,Z=new l(f,function(){},!1),L=new d(10,function(){return{root:null,tiles:new d(300)}}),P=new a.IteratorPreorder,W,O,ea,$=!0,da=1,fa=!0,ca={mode:"none",width:1.5,falloff:1.5,wireOpacity:1,surfaceOpacity:0,color:[1,1,1,0],subdivision:"geometry",subdivisionReduceLevels:0},ja=!1,ka=!1,ga=!1,ma=1,pa=!0,sa=!0,oa=null,la=null,qa=null,Aa=null,ra=[];this.updateTileBackground=function(a){var b=new n;qa&&qa.reject(b.promise);
Aa=a;qa=b;if(a){var c=new Image;c.src=a instanceof Image?a.src:a;c.complete?b.resolve(c):c.onload=function(){b.isFulfilled()||b.resolve(c)}}else b.resolve(null);this.renderTileBackground();return b.promise};var va=0,ta=0,xa=0,ya=0;this.resourceCounter=new e;this.castShadows=!1;this.clippingExtent=null;this.loaded=function(){};var Ba=!1;this.needsRender=!0;this.receiveShadows=this.didRender=!1;var na=new d(10),ua=0,wa=new d(30),Ca=new l(function(){this.extent=z.create();this.maxLevel=this.minLevel=
0;this.callback=null},function(){},!1);this.renderTileBackground=function(){if(M&&qa&&la)return qa.then(function(b){la.setGridImage(b);X&&a.traverseTilesPreorder(X,function(a){la.updateTileTexture(a)}.bind(this))}.bind(this))};this.initializeRenderContext=function(a){M=a.rctx;T=a.rctx.gl;O=M.extensions.textureFilterAnisotropic;I(!K||K===O.TEXTURE_MAX_ANISOTROPY_EXT,"contexts have different definitions afExt.TEXTURE_MAX_ANISOTROPY_EXT");null!=O&&(K=O.TEXTURE_MAX_ANISOTROPY_EXT,ea=M.parameters.maxMaxAnisotropy,
Math.min(8,ea));c.setSupportsUintIndices(!!M.extensions.elementIndexUint);var b=function(a){k(a).then(function(){ia=!0;this.setNeedsRender()}.bind(this)).otherwise(b)}.bind(this);b(this.renderTileBackground());Y=a.textureRep;var d=a.shaderSnippets,e=a.shaderRep;a=a.programRep;d.vsTerrain||d._parse(m);M.extensions.standardDerivatives;var f=new g("terrain",["vsTerrain","fsTerrain"],null,a,e,d,M);f.addDefine("Spherical","SPHERICAL");f.addDefine("Overlay","OVERLAY");f.addDefine("Atmosphere","ATMOSPHERE");
f.addDefine("Wireframe","WIREFRAME");f.addDefine("TileBorders","TILE_BORDERS");f.addBinaryShaderSnippetSuffix("Wireframe","Wireframe",[!1,!0]);f.addDefine("ReceiveShadows","RECEIVE_SHADOWS");e=new g("terrainNormal",["vsTerrainNormal","fsNormal"],null,a,e,d,M);e.addDefine("Spherical","SPHERICAL");e.addDefine("AlphaZero","ALPHA_ZERO");ba={depth:a.get("depth"),depthShadowMap:a.get("depthShadowMap"),depthOnly:new y(M,d.vsTerrainDepthOnly,d.fsTerrainDepthOnly,B.Default3D)};aa={color:f,normal:e};this._updatePrograms();
la=new h(M,p,a,this.resourceCounter,this.setNeedsRender.bind(this));qa&&qa.then(function(a){la.setGridImage(a)});oa=new v(M,{target:T.TEXTURE_2D,pixelFormat:T.RGBA,dataType:T.UNSIGNED_BYTE,samplingMode:T.NEAREST,width:4,height:4})};this.uninitializeRenderContext=function(a){null!=oa&&(oa.dispose(),oa=null);la&&(la.dispose(),la=null)};this._updatePrograms=function(){var a="spherical"===r,b="shader"===ca.mode;ba.color=aa.color.getProgram([a,!0,a&&sa,b,ja,b||ja,this.receiveShadows]);ba.normal=aa.normal.getProgram([a,
!0])};this.install=function(a){a.addExternalRenderer([J,F],this)};this.uninstall=function(a){a.removeExternalRenderer(this)};this.setRootTiles=function(a){X=a};this.isStencilEnabledLayerExtent=function(a){return ra.some(function(b){return a===b.id})};this.addStencilEnabledLayerExtent=function(a,b){ra.push({id:a,extent:[b[0],b[1],b[3],b[4]]})};this.removeStencilEnabledLayerExtent=function(a){for(var b=0;b<ra.length;b++)if(a===ra[b].id){ra.splice(b,1);break}};this.setTileSize=function(a){p=a;la&&(la.tileSize=
a)};this.loadTile=function(a){I(null===a.renderData);a.renderData=Z.acquire();a.renderData.init();var b=this.getLocalOriginOfTile(a),c=a.createGeometry(a.renderData.updateGeometryState(a),b,"debug"===ca.mode,a.renderData.geometryInfo);a.renderData.localOrigin=b;this._setTileGeometry(a,c);la.updateTileTexture(a)};this.queryVisibleLevelRange=function(a,b,c,d){var e=Ca.acquire();z.set(a,e.extent);e.minLevel=b?b:-Number.MAX_VALUE;e.maxLevel=null!=c?c:Number.MAX_VALUE;e.callback=d;wa.push(e);this.setNeedsRender()};
this.updateTileTexture=function(a){la&&la.updateTileTexture(a)};this.updateTileGeometryNeedsUpdate=function(a){return a.renderData.updateGeometryState(a).needsUpdate};this._updateTileGeometry=function(a){for(var c=a.renderData.geometryState,d=a.layerInfo[b.LayerClass.ELEVATION],e=0;e<d.length;e++)d[e].pendingUpdates&=~b.TileUpdateTypes.UPDATE_GEOMETRY;return c.needsUpdate?(a.renderData.vao&&this._releaseTileGeometry(a),c=a.createGeometry(c,a.renderData.localOrigin,"debug"===ca.mode,a.renderData.geometryInfo),
this._setTileGeometry(a,c),!0):!1};this.updateTileGeometry=function(a){a.renderData.updateGeometryState(a);return this._updateTileGeometry(a)};this.unloadTile=function(a){this._releaseTileGeometry(a);a.renderData.texture&&a.renderData.texture.dispose();Z.release(a.renderData);a.renderData=null};this.getLocalOriginOfTile=function(a){if(10<=a.lij[0]){for(;7<a.lij[0];)a=a.parent;return a.centerAtSeaLevel}if("spherical"===r)return G;for(;a.parent;)a=a.parent;return a.centerAtSeaLevel};this.setVisibility=
function(a){$=a;this.setNeedsRender()};this.getStats=function(){return{numTilesRendered:ta,numTilesCulled:xa,numTrianglesRendered:va,numOriginsRendered:ya}};this.setDisableRendering=function(a){ka=!!a;this.setNeedsRender()};this.getOpacity=function(){return da};this.getWireframeEnabled=function(){return"shader"===ca.mode};this.setWireframe=function(b){if(!b||!0===b)b={mode:b?"shader":"none"};if(void 0!==b.mode&&ca.mode!==b.mode){var c="debug"===ca.mode,d="debug"===b.mode;ca.mode=b.mode;this._updatePrograms();
c!==d&&X&&a.traverseTilesPreorder(X,function(a){if(a.renderData){a.renderData.vao&&this._releaseTileGeometry(a);var b=a.createGeometry(a.renderData.updateGeometryState(a),a.renderData.localOrigin,d,a.renderData.geometryInfo);this._setTileGeometry(a,b)}}.bind(this));this.setNeedsRender()}for(var e in b)ca.hasOwnProperty(e)&&(ca[e]=b[e]),this.setNeedsRender()};this.setOpacity=function(a){da=a;this.setNeedsRender()};this.setDrawSkirts=function(a){fa=a;this.setNeedsRender()};this.setCullBackFaces=function(a){ga=
a;this.setNeedsRender()};this.setRenderOrder=function(a){ma=a;this.setNeedsRender()};this.setBorders=function(a){ja!==a&&(ja=a,"none"===ca.mode&&(ca.transitionTime=0),this._updatePrograms(),this.setNeedsRender())};this.setFrontMostTransparent=function(a){pa!==a&&(pa=a,this.setNeedsRender())};this.setVelvetOverground=function(a){sa!==a&&(sa=a,this._updatePrograms(),this.setNeedsRender())};this.setNeedsRender=function(){this.needsRender=!0;this.didRender=!1};this.resetNeedsRender=function(){this.didRender&&
(this.needsRender=0!==wa.length,this.didRender=!1)};var za=A.create();this.isTransparent=function(){return 1>da||"shader"===ca.mode&&(1>ca.wireOpacity||1>ca.surfaceOpacity)||!Aa};this.render=function(a){if(ia&&!ka&&$&&X){var b=this.isTransparent();if(a.slot===(b?F:J)){u.trace("# BEGIN RENDER TERRAIN");L.clear();W=null;this._renderCollectOrigins();if(0!==ma){for(var c=0;c<L.length;c++)this._sortFrontToBack(L.data[c].tiles,s);this._sortFrontToBack(L,Q)}var d,e=!1,g=!1;d=a.pass;var h=a.camera;M.setBlendFunctionSeparate(T.SRC_ALPHA,
T.ONE_MINUS_SRC_ALPHA,T.ONE,T.ONE_MINUS_SRC_ALPHA);M.setFaceCullingEnabled(ga);if(d===t.MATERIAL){if(g=b,e=a.shadowMap&&a.shadowMap.getEnableState(),this.receiveShadows!=e&&(this.receiveShadows=e,this._updatePrograms()),b&&pa&&(e=ba.depthOnly,M.bindProgram(e),M.setColorMask(!1,!1,!1,!1),M.setDepthTestEnabled(!0),this._renderTilesDepthOnly(h,M,e),M.setColorMask(!0,!0,!0,!0),M.setDepthFunction(T.EQUAL),M.setDepthWriteEnabled(!1)),d=ba.color,e=!0,M.bindProgram(d),d.setUniform1f("opacity",da),M.setBlendingEnabled(g),
"shader"===ca.mode||ja)d.setUniform1f("wireframe.width",ca.width),d.setUniform1f("wireframe.falloff",Math.min(ca.width,ca.falloff)),d.setUniform1f("wireframe.wireOpacity",ca.wireOpacity*da),d.setUniform1f("wireframe.surfaceOpacity",ca.surfaceOpacity*da),d.setUniform4fv("wireframe.color",ca.color),d.setUniform1f("wireframe.near",h.near),d.setUniform1f("wireframe.far",h.far),"geometry"!==ca.subdivision&&"constant"!==ca.subdivision&&d.setUniform1f("wireframe.subdivision",S(ca.subdivision))}else if(d===
t.MATERIAL_DEPTH_SHADOWMAP&&this.castShadows||d===t.MATERIAL_DEPTH)d=d===t.MATERIAL_DEPTH_SHADOWMAP?ba.depthShadowMap:ba.depth,M.bindProgram(d),d.setUniformMatrix4fv("model",E),N[0]=h.near,N[1]=h.far,d.setUniform2fv("nearFar",N);else if(d===t.MATERIAL_NORMAL)d=ba.normal,M.bindProgram(d);else return;a.shadowMap&&a.shadowMap.bind(d);a.ssaoHelper&&a.ssaoHelper.setUniforms(d);e&&(d.setUniform1i("tex",4),d.setUniform1i("overlayTex",5));d.setUniformMatrix4fv("viewNormal",h.viewInverseTransposeMatrix);d.setUniformMatrix4fv("proj",
h.projectionMatrix);d.setUniform3fv("lightDirection",a.lightingData.direction);h=h.viewMatrix;A.set3(h[12],h[13],h[14],za);A.normalize(za);d.setUniform3fv("viewDirection",za);for(ya=va=xa=ta=0;na.length<na.data.length&&0<wa.length;)c=wa.pop(),na.push(c);ua=na.length;for(c=0;c<L.length;c++){var f=L.data[c];d.setUniform3fv("origin",f.origin);q.bindView(f.origin,h,d);a.shadowMap&&a.shadowMap.bindView(d,f.origin);ya++;this._renderTiles(f.tiles,d,e,a)}g&&M.setBlendingEnabled(!1);b&&pa&&(M.setDepthFunction(T.LESS),
M.setDepthWriteEnabled(!0));ga&&M.setFaceCullingEnabled(!1);a.stencilRenderingHelper&&a.stencilRenderingHelper.getEnableState()&&a.stencilRenderingHelper.prepareStencilDisabledPass();for(a=0;a<na.length;a++)b=na.data[a],Ca.release(b),b.callback(a>=ua),b.callback=null;na.clear();0<ta&&!Ba&&(Ba=!0,this.loaded&&this.loaded());u.trace("# END RENDER TERRAIN");return!0}}};this._renderCollectOrigins=function(){for(var a=0;a<X.length;a++){var b=X[a],c=L.next();c.root=b;c.origin="spherical"===r?G:b.centerAtSeaLevel;
c.tiles.clear();this._renderCollectOriginsForRoot(c)}};this._renderCollectOriginsForRoot=function(a){for(P.reset(a.root);!P.done;){var b=P.next(),c=b.renderData;if(c&&!b.visible)xa++,P.skip();else{var d=L.peek();if(7===b.lij[0]){if(d===a||0!==d.tiles.length)d=L.next(),d.tiles.clear();d.root=b;d.origin=b.centerAtSeaLevel}if(c){c=b.lij[0];10<=c?L.peek().tiles.push(b):a.tiles.push(b);if(null===W||W.lij[0]<c)W=b;P.skip()}}}};this._sortFrontToBack=function(a,b){a.sort(b)};this._renderTilesDepthOnly=function(a,
b,c){var d=a.viewMatrix;c.setUniformMatrix4fv("proj",a.projectionMatrix);for(a=0;a<L.length;a++){var e=L.data[a];c.setUniform3fv("origin",e.origin);q.bindView(e.origin,d,c);for(var g=0;g<e.tiles.length;g++){var h=e.tiles.data[g].renderData;b.bindVAO(h.vao);D.assertCompatibleVertexAttributeLocations(h.vao,c);var f=h.vao.indexBuffer.size;fa||(f=h.geometryInfo.numWithoutSkirtIndices);b.drawElements(T.TRIANGLES,f,h.vao.indexBuffer.indexType,0)}}b.bindVAO(null)};this._renderTiles=function(a,b,c,d){if(0!==
a.length){var e=T.TRIANGLES;"debug"===ca.mode&&(e=T.LINES);var g="geometry"===ca.subdivision,h="constant"===ca.subdivision,f=W,l,m=!1;f?(l=f.lij[0],f=S(f.renderData.geometryInfo.numVertsPerRow)):f=l=16;M.setDepthTestEnabled(!0);M.setBlendingEnabled(this.isTransparent());for(var q=0;q<a.length;q++){var r=a.data[q],p=r.renderData;if(d.stencilRenderingHelper&&d.stencilRenderingHelper.getEnableState()){for(var k=!1,t=0;t<ra.length;t++)if(r.intersectsExtent(ra[t].extent)){k=!0;break}k&&!m?(d.stencilRenderingHelper.prepareStencilReadPass(),
m=!0):!k&&m&&(d.stencilRenderingHelper.prepareStencilDisabledPass(),m=!1)}u.trace("# RENDER TILE "+r.lij[0]+"/"+r.lij[1]+"/"+r.lij[2]+", screenDepth:"+r.screenDepth);if(c){b.setUniform2fv("texOffset",p.texOffset);b.setUniform1f("texScale",p.texScale);M.bindTexture(p.textureReference||p.texture,4);if(p.overlayTexId){var k=b,t=p,s=t.overlayTexId,x=R[s];x||(x=Y.aquire(s).getGLTexture(),I(x),R[s]=x);k.setUniform2fv("overlayTexOffset",t.overlayTexOffset);k.setUniform2fv("overlayTexScale",t.overlayTexScale);
k.setUniform1f("overlayOpacity",t.overlayOpacity);M.bindTexture(x,5)}else b.setUniform2fv("overlayTexOffset",C),M.bindTexture(oa,5);if(("shader"===ca.mode||ja)&&(g||h))g?b.setUniform1f("wireframe.subdivision",S(p.geometryInfo.numVertsPerRow)):(k=S(f,r.lij[0]-l),b.setUniform1f("wireframe.subdivision",k))}k=p.vao.indexBuffer.size;fa||(k=p.geometryInfo.numWithoutSkirtIndices);M.bindVAO(p.vao);D.assertCompatibleVertexAttributeLocations(p.vao,b);M.drawElements(e,k,p.vao.indexBuffer.indexType,0);r.renderOrder=
ta;ta++;va+=k/3;p=r.extent;r=r.lij[0];for(k=0;k<ua;)t=na.data[k],s=t.extent,r>=t.minLevel&&r<=t.maxLevel&&s[0]<=p[2]&&s[2]>=p[0]&&s[1]<=p[3]&&s[3]>=p[1]?(na.swap(k,ua-1),ua--):k++}M.bindVAO(null)}};var Da=A.create(),Ea=A.create(),Fa=A.create(),Ga=this.clippingExtent;this.intersect=function(b,c,d,e){if(X&&(!b.isSelection||!this.isTransparent())){A.subtract(d,c,Da);var g=b.getMinResult(),h=b.getMaxResult();for(P.reset(X);!P.done;){var f=P.next();if(null!==f.renderData){if(b.enableInvisibleTerrain){if(!f.visible&&
Ga&&!f.intersectsExtent(Ga))continue}else if(!f.visible)continue;e=f.renderData.geometryInfo.geometry;var l=f.renderData.localOrigin;A.subtract(c,l,Ea);A.subtract(d,l,Fa);q.intersectTriangleGeometry(e,0,void 0,b,Ea,Fa,function(c,d,e){if(fa||!(3*e>=f.renderData.geometryInfo.numWithoutSkirtIndices))if(0<=c&&(b.enableBackfacesTerrain||0>A.dot(d,Da))){if(void 0===g.dist||c<g.dist)e=a.lij2str(f.lij[0],f.lij[1],f.lij[2]),g.set(void 0,e,c,d,void 0),g.setIntersector("terrain");if(void 0===h.dist||c>h.dist)e=
a.lij2str(f.lij[0],f.lij[1],f.lij[2]),h.set(void 0,e,c,d,void 0),h.setIntersector("terrain")}})}}}};this._setTileGeometry=function(a,b){var d=a.renderData,e=b.geometry.getData(),g=e.getVertexAttr().terrain.data,e=e.getFaces()[0].indices.terrain;d.vao=new w(M,B.Default3D,{geometry:H.Pos3Tex},{geometry:x.createVertex(M,T.STATIC_DRAW,g)},x.createIndex(M,T.STATIC_DRAW,e));d.geometryInfo.geometry&&c.releaseGeometry(d.geometryInfo.geometry);d.geometryInfo=b;this.setNeedsRender()};this._releaseTileGeometry=
function(a){a=a.renderData;a.vao.dispose(!0);a.vao=null;a.geometryInfo.geometry&&c.releaseGeometry(a.geometryInfo.geometry);a.geometryInfo.geometry=null;this.setNeedsRender()}};r.TileRenderData=f;return r})},"esri/views/3d/terrain/TileUtils":function(){define(["./UpsampleInfo","../support/PreallocArray"],function(n,k){function a(a){this.q=new k(a||100);this._last=null;this.done=!0}function b(a){this.q=new k(a||100);this.done=!0}var c=12756274*Math.PI;a.prototype.reset=function(a){this.q.clear();a&&
this.q.pushEither(a);this._last=null;this.done=0===this.q.length};a.prototype.skip=function(){this._last=null;0===this.q.length&&(this.done=!0)};a.prototype.next=function(){if(this.done)return null;if(null!==this._last){var a=this._last.children;if(a[0])for(var b=4;0<=b;b--){var c=a[b];c&&this.q.push(c)}this._last=null}this._last=this.q.pop();0===this.q.length&&!this._last.children[0]&&(this.done=!0);return this._last};b.prototype.reset=function(a){this.q.clear();this.q.pushEither(a);for(a=0;a<this.q.length;)for(var b=
this.q.data[a++],c=0;4>c;c++){var f=b.children[c];f&&this.q.push(f)}this.done=0===this.q.length};b.prototype.next=function(){var a=this.q.pop();this.done=0===this.q.length;return a};var f={li2lat:function(a,b){return 2*Math.atan(Math.exp(-Math.PI+2*Math.PI*b/(1<<a)))-0.5*Math.PI},lj2lon:function(a,b){return-Math.PI+2*Math.PI*b/(1<<a)},lij2webMerc:function(a,b,d){return[-0.5*c+c*d/(1<<a),-0.5*c+c*b/(1<<a)]},lij2str:function(a,b,c){return a+"/"+b+"/"+c},tile2str:function(a){return a.lij[0]+"/"+a.lij[1]+
"/"+a.lij[2]},latLon2WebMercator:function(a,b,c){1.570796<a?a=1.570796:-1.570796>a&&(a=-1.570796);c[0]=6378137*b;c[1]=3189068.5*Math.log((1+Math.sin(a))/(1-Math.sin(a)))},traverseTilesPreorder:function(a,b,c,l){if(Array.isArray(a))for(var g=0;g<a.length;g++)f._traverseTilesPreorder(a[g],b,c,l);else f._traverseTilesPreorder(a,b,c,l)},_traverseTilesPreorder:function(a,b,c,l){l=b.call(c,a,l);for(var g=0;4>g;g++){var m=a.children[g];m&&f.traverseTilesPreorder(m,b,c,l)}},traverseTilesPostorder:function(a,
b,c){if(Array.isArray(a))for(var l=0;l<a.length;l++)f._traverseTilesPostorder(a[l],b,c);else f._traverseTilesPostorder(a,b,c)},_traverseTilesPostorder:function(a,b,c){for(var l=0;4>l;l++){var g=a.children[l];g&&f.traverseTilesPostorder(g,b,c)}b.call(c,a)},IteratorPreorder:a,IteratorPostorder:b,fallsWithinLayer:function(a,b,c){b=b.layer;var f=b.fullExtent,g=a.extent;if(c){if(g[0]<f.xmin||g[1]<f.ymin||g[2]>f.xmax||g[3]>f.ymax)return!1}else if(f.xmin>g[2]||f.ymin>g[3]||f.xmax<g[0]||f.ymax<g[1])return!1;
a=a.parentSurface.tilingScheme.levels[a.lij[0]].scale;return 0<b.minScale&&a>1.00000001*b.minScale?!1:a>=0.99999999*b.maxScale},isPosWithinTile:function(a,b){var c=a.extent;return b[0]>=c[0]&&b[1]>=c[1]&&b[0]<=c[2]&&b[1]<=c[3]},getTileNLevelsUp:function(a,b){for(;0<b;)a=a.parent,b--;return a},nextTileInAncestry:function(a,b){var c=a.lij[0]-b.lij[0]-1,f=a.lij[2]>>c,g=0;a.lij[1]>>c&1&&(g+=2);f&1&&(g+=1);return b.children[g]},computeUpsampleInfoForAncestor:function(a,b){for(var c=1,f=0,g=0;a!==b;)if(c*=
0.5,f*=0.5,g*=0.5,a.lij[2]&1&&(f+=0.5),0===(a.lij[1]&1)&&(g+=0.5),a=a.parent,null==a)throw Error("tile was not a descendant of ancestorTile");var m=n.Pool.acquire();m.init(b,f,g,c);return m}};return f})},"esri/views/3d/terrain/UpsampleInfo":function(){define(["require","exports","../lib/glMatrix","../../../core/ObjectPool"],function(n,k,a,b){var c=a.vec2d;return function(){function a(b,h,d,f){this.scale=0;this.tile=null;this.offset=c.create();void 0!==b&&this.init(b,h,d,f)}a.prototype.init=function(a,
b,c,f){this.tile=a;this.offset[0]=b;this.offset[1]=c;this.scale=f};a.prototype.dispose=function(){this.tile=null;this.offset[0]=0;this.scale=this.offset[1]=0};a.Pool=new b(a,function(){},!1);return a}()})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","./TilingScheme","../support/aaBoundingRect"],function(n,k,a,b){(function(a){a[a.MAP=0]="MAP";a[a.ELEVATION=1]="ELEVATION";a[a.LAYER_CLASS_COUNT=2]="LAYER_CLASS_COUNT"})(k.LayerClass||(k.LayerClass={}));(function(a){a[a.NONE=
0]="NONE";a[a.SPLIT=1]="SPLIT";a[a.VSPLITMERGE=2]="VSPLITMERGE";a[a.MERGE=4]="MERGE";a[a.DECODE_LERC=8]="DECODE_LERC";a[a.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY";a[a.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"})(k.TileUpdateTypes||(k.TileUpdateTypes={}));k.TILE_LOADING_DEBUGLOG=!1;k.MAX_ROOT_TILES=64;k.MAX_TILE_TESSELATION=512;k.ELEVATION_NODATA_VALUE=3.40282347E38/10;k.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;k.TILEMAP_SIZE_EXP=5;k.TILEMAP_SIZE=1<<k.TILEMAP_SIZE_EXP;k.WEBMERCATOR_WORLD_EXTENT=b.create([0,0,0,
0]);a.WebMercatorAuxiliarySphere.getExtent(0,0,0,k.WEBMERCATOR_WORLD_EXTENT);k.GEOGRAPHIC_WORLD_EXTENT=b.create([-180,-90,180,90])})},"esri/views/3d/terrain/TilingScheme":function(){define(["../../../geometry/SpatialReference","../../../geometry/support/scaleUtils","../support/projectionUtils","../support/mathUtils"],function(n,k,a,b){function c(a,b){var c=Error(b);c.name=a;return c}var f=a.webMercator.x2lon,e=a.webMercator.y2lat,h=[0,0,0,0],d=function(a){var b=d._checkUnsupported(a);if(b)throw b;
this.spatialReference=a.spatialReference;this._isWebMercator=this.spatialReference.isWebMercator;this._isWGS84=this.spatialReference.isWGS84;this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];var c=a.lods.reduce(function(a,b,c){b.level<a.min&&(a.min=b.level,a.minIndex=c);a.max=Math.max(a.max,b.level);return a},{min:Infinity,minIndex:0,max:-Infinity}),e=a.lods[c.minIndex],h=Math.pow(2,e.level),b=e.resolution*h,e=e.scale*h;this.levels=Array(c.max+1);for(c=0;c<this.levels.length;c++)this.levels[c]=
{resolution:b,scale:e,tileSize:[b*a.size[0],b*a.size[1]]},b/=2,e/=2};d.prototype={getExtent:function(a,c,d,h,p){h=h||Array(4);var r=this.levels[a];a=r.tileSize[0];r=r.tileSize[1];h[0]=this.origin[0]+d*a;h[2]=h[0]+a;h[3]=this.origin[1]-c*r;h[1]=h[3]-r;p&&(this._isWebMercator?(p[0]=f(h[0]),p[1]=e(h[1]),p[2]=f(h[2]),p[3]=e(h[3])):this._isWGS84&&(p[0]=b.deg2rad(h[0]),p[1]=b.deg2rad(h[1]),p[2]=b.deg2rad(h[2]),p[3]=b.deg2rad(h[3])))},ensureMaxLod:function(a){for(;this.levels.length<=a;){var b=this.levels[this.levels.length-
1],c=b.resolution/2;this.levels.push({resolution:c,scale:b.scale/2,tileSize:[c*this.pixelSize[0],c*this.pixelSize[1]]})}},capMaxLod:function(a){this.levels.length>a+1&&(this.levels.length=a+1)},getMaxLod:function(){return this.levels.length-1},scaleAtLevel:function(a){return this.levels[0].scale/Math.pow(2,a)},levelAtScale:function(a){var b=this.levels[0].scale;return a>=b?0:Math.log(b/a)*Math.LOG2E},compatibleWith:function(a){if(!(a instanceof d)){if(d._checkUnsupported(a))return!1;a=new d(a)}if(!a.spatialReference.equals(this.spatialReference)||
a.pixelSize[0]!==this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var c=Math.min(this.levels.length,a.levels.length)-1,e=this.levels[c].resolution,h=b.floatEqualAbsolute,f=0.5*e;if(!h(a.origin[0],this.origin[0],f)||!h(a.origin[1],this.origin[1],f))return!1;var f=Math.max(this.pixelSize[0],this.pixelSize[1]),r=Math.pow(2,c);return h(e,a.levels[c].resolution,12*(0.5*e/r/f))},rootTilesInExtent:function(a,b,c){var e=this.levels[0].tileSize;d.computeRowColExtent(a,e,this.origin,h);a=h[1];
var f=h[3],r=h[0],k=h[2],s=k-r,u=f-a;s*u>c&&(c=Math.floor(Math.sqrt(c)),u>c&&(a=a+Math.floor(0.5*u)-Math.floor(0.5*c),f=a+c),s>c&&(r=r+Math.floor(0.5*s)-Math.floor(0.5*c),k=r+c));c=Array((k-r)*(f-a));s=0;for(u=a;u<f;u++)for(var v=r;v<k;v++)c[s++]=[0,u,v];b&&(b[0]=this.origin[0]+r*e[0],b[1]=this.origin[1]-f*e[1],b[2]=this.origin[0]+k*e[0],b[3]=this.origin[1]-a*e[1]);return c}};d.computeRowColExtent=function(a,b,c,d){var e=0.001*(a[2]-a[0]+(a[3]-a[1]));d[0]=Math.floor((a[0]+e-c[0])/b[0]);d[2]=Math.ceil((a[2]-
e-c[0])/b[0]);d[1]=Math.floor((c[1]-a[3]+e)/b[1]);d[3]=Math.ceil((c[1]-a[1]-e)/b[1])};d.isPowerOfTwo=function(a){a=a.lods;var c=a[0].resolution*Math.pow(2,a[0].level);return!a.some(function(a){return!b.floatEqualRelative(a.resolution,c/Math.pow(2,a.level))})};d.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,b){return a-b});for(var b=1;b<a.length;b++)if(a[b]!==a[0]+b)return!0;return!1};d.tileSizeSupported=function(a){var b=a.size[1];return b===a.size[0]&&0===
(b&b-1)&&128<=b&&512>=b};d._checkUnsupported=function(a){return!a?c("tilingscheme:tile-info-missing","Tiling scheme must have tiling information"):1>a.lods.length?c("tilingscheme:generic","Tiling scheme must have at least one level"):!d.isPowerOfTwo(a)?c("tilingscheme:power-of-two","Tiling scheme must be power of two"):null};d.checkUnsupported=function(a){var b=d._checkUnsupported(a);return b?b:d.hasGapInLevels(a)?c("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):
!d.tileSizeSupported(a)?c("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):null};d.fromExtent=function(a,b){var c=a[2]-a[0],e=a[3]-a[1],h=k.getUnitValueForSR(b),f=1.2*Math.max(c,e),c=new d({size:[256,256],origin:{x:a[0]-0.5*(f-c),y:a[3]+0.5*(f-e)},lods:[{level:0,resolution:f/256,scale:1/(0.0254*(256/96)/(f*h))}],spatialReference:b});c.ensureMaxLod(20);return c};d.WebMercatorAuxiliarySphereTileInfo={size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7},
spatialReference:n.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]};d.makeWebMercatorAuxiliarySphere=function(a){a=a||19;var b=new d(d.WebMercatorAuxiliarySphereTileInfo);b.ensureMaxLod(a);return b};d.WebMercatorAuxiliarySphere=d.makeWebMercatorAuxiliarySphere(19);d.makeWGS84WithTileSize=function(a,b){b=b||16;var c=256/a,c=new d({size:[a,a],origin:{x:-180,y:90},spatialReference:n.WGS84,lods:[{level:0,resolution:0.703125*c,scale:2.95497598570834E8*c}]});c.ensureMaxLod(b);
return c};return d})},"esri/views/3d/terrain/TileGeometryFactory":function(){define("../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryData ../lib/glMatrix ../support/earthUtils ../support/mathUtils ./TerrainConst".split(" "),function(n,k,a,b,c,f){function e(a,b,c,d,e){a<d[0]&&(d[0]=a);a>e[0]&&(e[0]=a);b<d[1]&&(d[1]=b);b>e[1]&&(e[1]=b);c<d[2]&&(d[2]=c);c>e[2]&&(e[2]=c)}function h(a,b,d){for(var e=0;e<d.length;e++){var g=d[e];if(g){var h=g.safeWidth,l=g.width,m=g.pixelData,q=c.clamp(g.dy*(g.y1-
b),0,h),g=c.clamp(g.dx*(a-g.x0),0,h),h=Math.floor(q),r=Math.floor(g),p=h*l+r,k=p+l,t=m[p],l=m[k],p=m[p+1],m=m[k+1];if(t+l+p+m<0.5*f.ELEVATION_NODATA_VALUE)return q-=h,g-=r,a=t+(p-t)*g,a+(l+(m-l)*g-a)*q}}return null}function d(a){q||a*a+4*(a-1)>y&&(a=1<<Math.floor(c.log2(0.5*(-4+Math.sqrt(16+4*(4+y))))));return a}var l=b.earthRadius,g=a.vec3d,m=c.lerp,q=!1,p=function(){var a=g.create(),b=g.create(),c=g.create(),d,e,h;this.init=function(f,l){e=f;h=l;g.subtract(c,b,a);d=0.5*g.length(a);g.lerp(b,c,0.5,
a)};this.getCenter=function(){return a};this.getBSRadius=function(){return d};this.getBBMin=function(){return b};this.getBBMax=function(){return c};this.getPosition=function(){return e};this.getIndices=function(){return h};this.getPrimitiveIndices=function(){};this.getChildren=function(){}},r=function(a,b,c,d){a*=l;for(var e=0;e<=b;e++)c[5*d]=0,c[5*d+1]=0,c[5*d+2]=a,d++},t=new function(){var a=Array(50),b=0,c={};this.get=function(e){var g=c[e];g||(g={ptr:0,data:Array(50)},c[e]=g);0<g.ptr?(d.vertexArrayHits++,
e=g.data[--g.ptr],g.data[g.ptr]=null):(d.vertexArrayMisses++,e=new Float32Array(e));if(0<b)return d.geometryHits++,g=a[--b],a[b]=null,g.getData().getVertexAttr().terrain.data=e,g;d.geometryMisses++;g={};g.terrain={size:5,data:e};e=new p;return new n(new k([{type:"triangle",indices:{terrain:null},positionKey:"terrain"}],g),"tile",[e])};this.put=function(d){var e=d.getData(),g=e.getVertexAttr(),h=g.terrain.data,f=c[h.length];50>f.ptr&&(f.data[f.ptr++]=h);g.terrain.data=null;e.getFaces()[0].indices.terrain=
null;50>b&&(a[b++]=d)};var d={geometryHits:0,geometryMisses:0,vertexArrayHits:0,vertexArrayMisses:0};this.stats=d;this._pools={geometry:a,vertexArray:c}},s=[],u=Array(f.MAX_TILE_TESSELATION+1),v=Array(f.MAX_TILE_TESSELATION+1),w=Array(f.MAX_TILE_TESSELATION+1),x=Array(f.MAX_TILE_TESSELATION+1),y=65536,B={values:null,numSurfaceIndices:0,numSkirtIndices:0},H=function(a,b,c){c||(a.values=b.values);a.numSurfaceIndices=b.numSurfaceIndices;a.numSkirtIndices=b.numSkirtIndices;return a},D=function(a,b,c,
d,e){var g;g=B;var h=c&2,f=b+(d?1024:0)+(h?2048:0),l=s[f];g||(g={});if(l)H(g,l);else{var l=b-1,m=b-1,r=b*b,p=2*l+2*m,k=6*l*m,t=6*p,x=6*(2*l+m-1);d&&(k*=2,t*=2,x*=2);for(var p=q&&r+p>y?new Uint32Array(k+t):new Uint16Array(k+t),v=0,u=0,w=k,D,n,R,M,T=0,Z=0;Z<=m;Z++){h&&(T=0===Z?x:Z===m?-x:0);for(var w=w+T,L=0;L<=l;L++)M=n=-1,0===Z&&(n=r+L,L!==l&&(M=v+1)),L===l&&(n=r+l+Z,Z<m&&(M=v+l+1)),Z===m&&(n=r+l+m+(l-L),0<L&&(M=v-1)),0===L&&0<Z&&(n=r+2*l+m+(m-Z),M=v-(l+1)),-1<n&&(R=0===L&&1===Z?r:n+1,-1<M&&(D=v,
d?(p[w+0]=D,p[w+1]=n,p[w+2]=n,p[w+3]=R,p[w+4]=R,p[w+5]=D,p[w+6]=R,p[w+7]=M,p[w+8]=M,p[w+9]=D,p[w+10]=D,p[w+11]=R,w+=12):(p[w+0]=D,p[w+1]=n,p[w+2]=R,p[w+3]=R,p[w+4]=M,p[w+5]=D,w+=6))),++v,L<l&&Z<m&&(D=Z*(l+1)+L,n=D+1,R=n+(l+1),M=R-1,d?(p[u+0]=D,p[u+1]=n,p[u+2]=n,p[u+3]=R,p[u+4]=R,p[u+5]=D,p[u+6]=R,p[u+7]=M,p[u+8]=M,p[u+9]=D,p[u+10]=D,p[u+11]=R,u+=12):(p[u+0]=D,p[u+1]=n,p[u+2]=R,p[u+3]=R,p[u+4]=M,p[u+5]=D,u+=6));w-=T}g.values=p;g.numSurfaceIndices=k;g.numSkirtIndices=t;s[f]=H({},g)}h=a.getData();f=
h.getVertexAttr();h.getFaces()[0].indices.terrain=g.values;a.getBoundingInfo(0).init(f.terrain,g.values);e||(e={});e.geometry=a;e.numWithoutSkirtIndices=g.numSurfaceIndices+(c?6*(b-1)*(d?2:1):0);e.numVertsPerRow=b;return H(e,g,!0)};return{createPlanarGlobeTile:function(a,b,c,f,l,m,q){var p=b[0],r=b[1],k=b[2]-p;b=b[3]-r;var s=0.1*k;a=d(a);var x=a-1,y=a-1,v=a*a,u=t.get(5*(v+(2*x+2*y))),w=u.getData().getVertexAttr().terrain.data,B,n,H=0;B=u.getBoundingInfo(0);var ba=B.getBBMin(),R=B.getBBMax();g.set3(1E7,
1E7,1E7,ba);g.set3(-1E7,-1E7,-1E7,R);for(n=0;n<=y;n++){var M=n/y,T=r+M*b;m&&(T<m[1]?(T=m[1],M=(T-r)/b):T>m[3]&&(T=m[3],M=(T-r)/b));for(B=0;B<=x;B++){var Z=B/x,L=p+Z*k;m&&(L<m[0]?(L=m[0],Z=(L-p)/k):L>m[2]&&(L=m[2],Z=(L-p)/k));var P=c?h(L,T,c)||0:0,L=L-f[0],W=T-f[1],P=P-f[2];e(L,W,P,ba,R);w[5*H]=L;w[5*H+1]=W;w[5*H+2]=P;w[5*H+3]=Z;w[5*H+4]=M;var O=-1;0===n&&(O=v+B);B===x&&(O=v+x+n);n===y&&(O=v+x+y+(x-B));0===B&&0<n&&(O=v+2*x+y+(y-n));-1<O&&(w[5*O]=L,w[5*O+1]=W,w[5*O+2]=P-s,w[5*O+3]=Z,w[5*O+4]=M,e(L,
W-s,P,ba,R));++H}}return D(u,a,0,l,q)},createSphericalGlobeTile:function(a,b,c,f,q,p,k,s,y){var B=c[0],n=c[1],H=c[2],ha=c[3],Q=Math.max(0.9,1-0.5*(H-B));a=d(a);c=a-1;var S=a-1,Y=a*a,ia=t.get(5*(Y+(2*c+2*S))),X=ia.getData().getVertexAttr().terrain.data,aa=b[2]-b[0],ba=b[3]-b[1],R=H-B,H=p[0],M=p[1];p=p[2];var T=ia.getBoundingInfo(0),Z=T.getBBMin(),T=T.getBBMax();g.set3(1E7,1E7,1E7,Z);g.set3(-1E7,-1E7,-1E7,T);var L;for(L=0;L<=c;L++){var P=L/c,W=B+P*R;u[L]=Math.sin(W);v[L]=Math.cos(W);w[L]=P;x[L]=b[0]+
P*aa}for(B=aa=0;B<=S;B++){R=B/S;L=m(n,ha,R);var W=Math.cos(L),O=Math.sin(L),ea;f?(ea=l/2*Math.log((1+O)/(1-O)),R=(ea-b[1])/ba):ea=180*L/Math.PI;for(L=0;L<=c;L++){var P=w[L],$=u[L],da=v[L],fa=l;q&&(fa+=h(x[L],ea,q)||0);var da=da*W*fa,$=$*W*fa,fa=O*fa,ca=da-H,ja=$-M,ka=fa-p;e(ca,ja,ka,Z,T);var ga=5*aa;X[ga+0]=ca;X[ga+1]=ja;X[ga+2]=ka;X[ga+3]=P;X[ga+4]=R;ga=-1;0===B&&(ga=Y+L);L===c&&(ga=Y+c+B);B===S&&(ga=Y+c+S+(c-L));0===L&&0<B&&(ga=Y+2*c+S+(S-B));-1<ga&&(da=da*Q-H,$=$*Q-M,fa=fa*Q-p,e(da,$,fa,Z,T),ga*=
5,X[ga+0]=da,X[ga+1]=$,X[ga+2]=fa,X[ga+3]=P,X[ga+4]=R);++aa}}f&&(b=!!(k&2),k&1&&r(-1,c,X,Y),b&&r(1,c,X,Y+c+S));return D(ia,a,f?k:0,s,y)},releaseGeometry:t.put,elevationSampler:h,_geometryObjectPool:t,supportedNumVertsPerRow:d,setSupportsUintIndices:function(a){q=a}}})},"esri/views/3d/terrain/TileRenderData":function(){define(["require","exports","../lib/glMatrix"],function(n,k,a){var b=a.vec2d;return function(){function a(){this.overlayTexOffset=b.create();this.texOffset=b.create();this.geometryInfo=
{geometry:null,numSurfaceIndices:0,numSkirtIndices:0,numWithoutSkirtIndices:0,numVertsPerRow:0};this.init()}a.prototype.init=function(){this.geometryInfo.geometry=null;this.geometryInfo.numSurfaceIndices=0;this.geometryInfo.numSkirtIndices=0;this.geometryInfo.numWithoutSkirtIndices=0;this.geometryInfo.numVertsPerRow=0;this.textureReference=this.texture=this.vao=this.geometryState=null;b.set2(0,0,this.texOffset);this.texScale=1;this.overlayTexId=null;this.overlayTexScale=[1,1];this.overlayOpacity=
1;this.localOrigin=null};a.prototype.updateGeometryState=function(a){return this.geometryState=a.geometryState(this.geometryState)};return a}()})},"esri/views/3d/terrain/ResourceCounter":function(){define(["require","exports"],function(n,k){return function(){function a(){this._numTileTexturesComposited=0}Object.defineProperty(a.prototype,"numTileTexturesComposited",{get:function(){return this._numTileTexturesComposited},enumerable:!0,configurable:!0});a.prototype.incrementNumTileTexturesComposited=
function(){this._numTileTexturesComposited++};a.prototype.resetNumTileTexturesComposited=function(){this._numTileTexturesComposited=0};return a}()})},"esri/views/3d/terrain/TileRenderer":function(){define("require exports ../lib/glMatrix ../../webgl/FramebufferObject ../../webgl/VertexArrayObject ../../webgl/Texture ../../webgl/BufferObject ../../webgl/Util ../webgl-engine/lib/DefaultVertexAttributeLocations ../webgl-engine/lib/DefaultVertexBufferLayouts ../../vectorTiles/VectorTileDisplayObject ../../vectorTiles/tileRendererHelper3D ./TerrainConst".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q){var p=a.vec2d,r=Array(20),t=[0,0];return function(){function a(b,g,h,f,m){this._gridTex=null;this.tileSize=256;this._context=b;this.tileSize=g;this._resourceCounter=f;this._setNeedsRender=m;b.extensions.textureFilterAnisotropic&&(this._maxAnisotropy=Math.min(8,b.parameters.maxMaxAnisotropy));g=new Float32Array(20);g[0]=-1;g[1]=-1;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=-1;g[7]=0;g[8]=1;g[9]=0;g[10]=-1;g[11]=1;g[12]=0;g[13]=0;g[14]=1;g[15]=1;g[16]=1;g[17]=0;g[18]=1;g[19]=
1;this._vaoQuad=new c(b,d.Default3D,{geometry:l.Pos3Tex},{geometry:e.createVertex(b,35044,g)});this._blendLayersProgram=h.get("blendLayers")}a.prototype.dispose=function(){this._fbo&&(this._fbo.dispose(),this._fbo=null);this._vaoQuad&&(this._vaoQuad.dispose(),this._vaoQuad=null);this._gridTex&&(this._gridTex.dispose(),this._gridTex=null);this._blendLayersProgram&&(this._blendLayersProgram.dispose(),this._blendLayersProgram=null);this._context=null};a.prototype.updateTileTexture=function(a){for(var b=
q.LayerClass.MAP,c=a.layerInfo[b],d=0;d<c.length;d++)c[d].pendingUpdates&=~q.TileUpdateTypes.UPDATE_TEXTURE;if(a.renderData){var e,d=a.renderData,g,h=0,f=!0;for(g=0;g<c.length;g++){e=c[g];var l=a.parentSurface.layerViewByIndex(g,b);r[g]=l.fullOpacity;if(e.data||e.upsampleFromTile)if(h++,!l.isTransparent){f=!1;break}}g===c.length&&g--;0===h&&this._gridTex?(d.textureReference=this._gridTex,p.set2(0,0,d.texOffset),d.texScale=1):1===h&&!f?(e=c[g],e.data?(b=e,p.set2(0,0,d.texOffset),d.texScale=1):(a=e.upsampleFromTile,
b=a.tile.layerInfo[b][g],p.set(a.offset,d.texOffset),d.texScale=a.scale),b&&(b.data instanceof HTMLImageElement&&(b.data=this._buildTexture(b.data)),d.textureReference=b.data)):(this._composeMapLayers(a,c,g,f,r),d.textureReference=null,p.set2(0,0,d.texOffset),d.texScale=1);this._setNeedsRender()}};a.prototype.setGridImage=function(a){this._gridTex=this._buildTexture(a)};a.prototype._buildTexture=function(a){var b={target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,maxAnisotropy:this._maxAnisotropy,
flipped:!0,hasMipmap:!0},c=this._context,d;if(a)try{d=new f(c,b,a)}catch(e){b.width=b.height=this.tileSize,d=new f(c,b),console.warn("TerrainRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.")}else b.width=b.height=this.tileSize,d=new f(c,b);c.bindTexture(d);d.generateMipmap();return d};a.prototype._drawVectorData=function(a,b,c,d,e,g,h,f){void 0===f&&(f=1);m(this._context,c,a,b.renderer,b.schemeHelper,c[0],d,e,0,g,h,f)};a.prototype._drawRasterData=function(a,b,c,d){void 0===
d&&(d=1);var e=this._context,g=this._blendLayersProgram,f=this._vaoQuad;e.bindProgram(g);e.bindVAO(f);h.assertCompatibleVertexAttributeLocations(f,g);e.bindTexture(a,0);g.setUniform1i("tex",0);g.setUniform1f("scale",b);g.setUniform2f("offset",c[0],c[1]);g.setUniform1f("opacity",d);e.drawArrays(5,0,h.vertexCount(f,"geometry"))};a.prototype._composeMapLayers=function(a,c,d,e,h){var f=q.LayerClass.MAP,l=this._context;a.renderData.texture||(a.renderData.texture=this._buildTexture());var m=a.renderData.texture,
p=this._fbo;if(!p||p.width!==m.descriptor.width||p.height!==m.descriptor.height)this._fbo=p=b.create(l,{colorTarget:0,depthStencilTarget:1,width:m.descriptor.width,height:m.descriptor.height});var r=l.gl;l.bindFramebuffer(p);l.setViewport(0,0,this.tileSize,this.tileSize);l.setClearColor(0,0,0,0);l.setClearDepth(1);l.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);l.setDepthTestEnabled(!1);l.setBlendFunctionSeparate(1,771,1,771);l.setBlendEquation(32774);l.setBlendingEnabled(!0);var k,s;for(e&&this._gridTex&&
this._drawRasterData(this._gridTex,1,t);0<=d;d--)e=null,p=c[d],p.data?(e=p,k=t,s=1):p.upsampleFromTile&&(s=p.upsampleFromTile,e=s.tile.layerInfo[f][d],k=s.offset,s=s.scale),e&&(e.data instanceof HTMLImageElement&&(e.data=this._buildTexture(e.data)),e.data instanceof g?(p=a.parentSurface.layerViewByIndex(d,f),this._drawVectorData(e.data,p,a.lij,m.descriptor.width,m.descriptor.height,s,k,h[d])):this._drawRasterData(e.data,s,k,h[d]));l.bindTexture(m);r.copyTexImage2D(l.gl.TEXTURE_2D,0,m.descriptor.pixelFormat,
0,0,m.descriptor.width,m.descriptor.height,0);m.generateMipmap();l.bindFramebuffer(null);l.setBlendFunctionSeparate(770,771,1,771);l.setBlendingEnabled(!1);this._resourceCounter.incrementNumTileTexturesComposited()};return a}()})},"esri/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../webgl/BufferObject ../2d/engine/DisplayObject ../../core/libs/gl-matrix/vec2 ../../core/libs/gl-matrix/mat4 ./RenderBucket".split(" "),function(n,k,
a,b,c,f,e,h){return function(c){function l(a,b,h,l,r,k,s,u,v,w,x){c.call(this);this._renderBuckets=[];this._symbolUpdateData=this._vectorTileData=null;this.topLeft=[0,0];this.bottomRight=[0,0];this.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};this.stencilData={mask:0,reference:0};this.key=a;this.refKey=b;this.topLeft[0]=h[0];this.topLeft[1]=h[1];this.bottomRight[0]=h[2];this.bottomRight[1]=h[3];this.widthInPixels=l;this.coordRange=r;this.rotation=k;this._vectorTileData=
s;this.styleLayers=u;this._glyphsMosaic=v;this.workerID=w;this._connection=x;this.id=a.id;this.status=3;this.tileTransform.transform=e.create();this.tileTransform.displayCoord=f.create()}a(l,c);l.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())};l.prototype.dispose=function(){-1!==this.workerID&&(this._connection&&6!==this.status&&7!==this.status)&&this._connection.broadcast("destructTileData",{key:this.id,worker:this.workerID},[]);this.polygonTrianglesVertexArrayObject&&
(this.polygonTrianglesVertexArrayObject.dispose(),this.polygonTrianglesVertexArrayObject=null);this.polygonOutlineVertexArrayObject&&(this.polygonOutlineVertexArrayObject.dispose(),this.polygonOutlineVertexArrayObject=null);this.lineTrianglesVertexArrayObject&&(this.lineTrianglesVertexArrayObject.dispose(),this.lineTrianglesVertexArrayObject=null);this.lineJoinsVertexArrayObject&&(this.lineJoinsVertexArrayObject.dispose(),this.lineJoinsVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),
this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.polygonTrianglesVertexBuffer&&(this.polygonTrianglesVertexBuffer.dispose(),this.polygonTrianglesVertexBuffer=null);this.polygonTrianglesIndexBuffer&&(this.polygonTrianglesIndexBuffer.dispose(),this.polygonTrianglesIndexBuffer=null);this.polygonOutlinesVertexBuffer&&(this.polygonOutlinesVertexBuffer.dispose(),this.polygonOutlinesVertexBuffer=null);this.polygonOutlinesIndexBuffer&&
(this.polygonOutlinesIndexBuffer.dispose(),this.polygonOutlinesIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineTrianglesIndexBuffer&&(this.lineTrianglesIndexBuffer.dispose(),this.lineTrianglesIndexBuffer=null);this.lineJoinVertexBuffer&&(this.lineJoinVertexBuffer.dispose(),this.lineJoinVertexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),
this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this._renderBuckets=[];this.status=7};l.prototype.attach=function(a){this.status=3;if(!this._vectorTileData)return!1;if(0===this._renderBuckets.length)for(var c=new Uint32Array(this._vectorTileData.bucketDataInfo),d=c.length,e=0;e<d;){var f=c[e],l=c[e+1];0===l?(l=new h.BackgroundRenderBucket,l.layerID=f,this._renderBuckets.push(l),
e+=2):1===l?(l=new h.FillRenderBucket,l.layerID=f,l.triangleElementStart=c[e+2],l.triangleElementCount=c[e+3],l.outlineElementStart=c[e+4],l.outlineElementCount=c[e+5],this._renderBuckets.push(l),e+=6):2===l?(l=new h.LineRenderBucket,l.layerID=f,l.triangleElementStart=c[e+2],l.triangleElementCount=c[e+3],l.joinStart=c[e+4],l.joinCount=c[e+5],this._renderBuckets.push(l),e+=6):3===l?(l=new h.SymbolRenderBucket,l.layerID=f,l.markerElementStart=c[e+2],l.marketElementCount=c[e+3],l.textElementStart=c[e+
4],l.textElementCount=c[e+5],l.isSDF=0!==c[e+6],this._renderBuckets.push(l),e+=7):console.error("Bad bucket type!")}c=a.context;a=a.budget;d=new Uint32Array(this._vectorTileData.bufferDataInfo);e=d.length;for(l=f=0;l<e;l+=2,f++){var k=d[l],u=d[l+1];if(!(0>=u||0===this._vectorTileData.bufferData[f].byteLength)){if(a&&a.done)return!1;switch(k){case 2:this.polygonTrianglesVertexBuffer||(this.polygonTrianglesVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 6:this.polygonTrianglesIndexBuffer||
(this.polygonTrianglesIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,u/4)));break;case 3:this.polygonOutlinesVertexBuffer||(this.polygonOutlinesVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 7:this.polygonOutlinesIndexBuffer||(this.polygonOutlinesIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,u/4)));break;case 0:this.lineVertexBuffer||(this.lineVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));
break;case 8:this.lineTrianglesIndexBuffer||(this.lineTrianglesIndexBuffer=b.createIndex(c,35044,this._vectorTileData.bufferData[f]));break;case 1:this.lineJoinVertexBuffer||(this.lineJoinVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 4:this.iconVertexBuffer||(this.iconVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 9:this.iconIndexBuffer||(this.iconIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],
0,u/4)));break;case 5:this.textVertexBuffer||(this.textVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 10:this.textIndexBuffer||(this.textIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,u/4)))}}}this.status=4;return!0};l.prototype.detach=function(a){};l.prototype.render=function(a){if(this.visible&&4===this.status){var b=a.context,c=a.renderer;if(b&&c){var d=a.drawphase;this._symbolUpdateData&&this._updateSymbolData(a);b.setStencilFunction(514,
this.stencilData.reference,this.stencilData.mask);var e=this.styleLayers,h=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==h){var f,l=this._renderBuckets.length,k=0;if(0===d)for(k=l-1;0<=k;k--)f=this._renderBuckets[k],3!==f.type&&f.hasData()&&c.renderBucket(b,f,a.displayLevel,a.requiredLevel,d,this,e.layers[f.layerID],h);else for(k=0;k<l;k++)f=this._renderBuckets[k],f.hasData()&&c.renderBucket(b,f,a.displayLevel,a.requiredLevel,d,this,e.layers[f.layerID],h)}}}};l.prototype._updateSymbolData=function(a){var c=
new Uint32Array(this._symbolUpdateData.bucketDataInfo),d=c.length;if(0===d)return this._symbolUpdateData=null,!0;if(1>a.budget.remaining)return this.requestRender(),!1;a=a.context;a.bindVAO(null);for(var e=new Uint32Array(this._symbolUpdateData.bufferDataInfo),f=e.length,l=0,k=0;k<f;k+=2,l++){var u=e[k],v=e[k+1];if(!(0>=v||0===this._symbolUpdateData.bufferData[l].byteLength))switch(u){case 4:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=
b.createVertex(a,35044,this._symbolUpdateData.bufferData[l]);break;case 9:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=b.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[l],0,v/4));break;case 5:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=b.createVertex(a,35044,this._symbolUpdateData.bufferData[l]);break;case 10:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),
this.textIndexBuffer=null),this.textIndexBuffer=b.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[l],0,v/4))}}a=0;for(e=this._renderBuckets.length;a<e;a++)this._renderBuckets[a]instanceof h.SymbolRenderBucket&&(f=this._renderBuckets[a],f.markerElementStart=0,f.marketElementCount=0,f.textElementStart=0,f.textElementCount=0);for(f=0;f<d;){k=c[f];l=-1;a=0;for(e=this._renderBuckets.length;a<e;a++)if(this._renderBuckets[a].layerID===k){l=a;break}-1===l&&console.log("bucket not found");
if(a=this._renderBuckets[l])a.markerElementStart=c[f+2],a.marketElementCount=c[f+3],a.textElementStart=c[f+4],a.textElementCount=c[f+5];f+=7}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this._symbolUpdateData=null;return!0};return l}(c)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],
function(n,k,a){var b=0;return function(){function a(){this.attached=!1;this._opacity=1;this._visible=!0;Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-do-"+b++})}Object.defineProperty(a.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==
a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.requestRender=function(){this.parent&&this.parent.requestChildRender(this)};a.prototype.dispose=function(){};return a}()})},"esri/core/libs/gl-matrix/vec2":function(){define(["./common"],function(n){var k={create:function(){var a=new n.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new n.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new n.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c},
copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};k.sub=k.subtract;k.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};k.mul=k.multiply;k.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};k.div=k.divide;k.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};k.floor=function(a,b){a[0]=Math.floor(b[0]);
a[1]=Math.floor(b[1]);return a};k.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};k.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};k.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};k.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};k.scaleAndAdd=function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;return a};k.distance=function(a,b){var c=b[0]-a[0],f=b[1]-a[1];return Math.sqrt(c*c+f*f)};k.dist=k.distance;
k.squaredDistance=function(a,b){var c=b[0]-a[0],f=b[1]-a[1];return c*c+f*f};k.sqrDist=k.squaredDistance;k.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};k.len=k.length;k.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};k.sqrLen=k.squaredLength;k.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};k.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};k.normalize=function(a,b){var c=b[0],f=b[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};k.dot=
function(a,b){return a[0]*b[0]+a[1]*b[1]};k.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};k.lerp=function(a,b,c,f){var e=b[0];b=b[1];a[0]=e+f*(c[0]-e);a[1]=b+f*(c[1]-b);return a};k.random=function(a,b){b=b||1;var c=2*n.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};k.transformMat2=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[2]*b;a[1]=c[1]*f+c[3]*b;return a};k.transformMat2d=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[2]*b+c[4];a[1]=c[1]*f+c[3]*
b+c[5];return a};k.transformMat3=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[3]*b+c[6];a[1]=c[1]*f+c[4]*b+c[7];return a};k.transformMat4=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[4]*b+c[12];a[1]=c[1]*f+c[5]*b+c[13];return a};k.forEach=function(){var a=k.create();return function(b,c,f,e,h,d){c||(c=2);f||(f=0);for(e=e?Math.min(e*c+f,b.length):b.length;f<e;f+=c)a[0]=b[f],a[1]=b[f+1],h(a,a,d),b[f]=a[0],b[f+1]=a[1];return b}}();k.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};k.exactEquals=
function(a,b){return a[0]===b[0]&&a[1]===b[1]};k.equals=function(a,b){var c=a[0],f=a[1],e=b[0],h=b[1];return Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(f-h)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))};return k})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var n={EPSILON:1E-6};n.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;n.RANDOM=Math.random;n.ENABLE_SIMD=!1;n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this;n.USE_SIMD=
n.ENABLE_SIMD&&n.SIMD_AVAILABLE;n.setMatrixArrayType=function(a){n.ARRAY_TYPE=a};var k=Math.PI/180;n.toRadian=function(a){return a*k};n.equals=function(a,b){return Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return n})},"esri/core/libs/gl-matrix/mat4":function(){define(["./common"],function(n){var k={scalar:{},SIMD:{},create:function(){var a=new n.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;
return a},clone:function(a){var b=new n.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,c,f,e,h,d,l,g,m,q,p,r,k,s,u){var v=new n.ARRAY_TYPE(16);
v[0]=a;v[1]=b;v[2]=c;v[3]=f;v[4]=e;v[5]=h;v[6]=d;v[7]=l;v[8]=g;v[9]=m;v[10]=q;v[11]=p;v[12]=r;v[13]=k;v[14]=s;v[15]=u;return v},set:function(a,b,c,f,e,h,d,l,g,m,q,p,r,k,s,u,v){a[0]=b;a[1]=c;a[2]=f;a[3]=e;a[4]=h;a[5]=d;a[6]=l;a[7]=g;a[8]=m;a[9]=q;a[10]=p;a[11]=r;a[12]=k;a[13]=s;a[14]=u;a[15]=v;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};k.scalar.transpose=function(a,b){if(a===b){var c=
b[1],f=b[2],e=b[3],h=b[6],d=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=f;a[9]=h;a[11]=b[14];a[12]=e;a[13]=d;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};k.SIMD.transpose=function(a,b){var c,f,e,h,d,l,g;c=SIMD.Float32x4.load(b,0);f=SIMD.Float32x4.load(b,4);e=SIMD.Float32x4.load(b,8);h=SIMD.Float32x4.load(b,12);d=SIMD.Float32x4.shuffle(c,
f,0,1,4,5);l=SIMD.Float32x4.shuffle(e,h,0,1,4,5);g=SIMD.Float32x4.shuffle(d,l,0,2,4,6);d=SIMD.Float32x4.shuffle(d,l,1,3,5,7);SIMD.Float32x4.store(a,0,g);SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.shuffle(c,f,2,3,6,7);l=SIMD.Float32x4.shuffle(e,h,2,3,6,7);c=SIMD.Float32x4.shuffle(d,l,0,2,4,6);f=SIMD.Float32x4.shuffle(d,l,1,3,5,7);SIMD.Float32x4.store(a,8,c);SIMD.Float32x4.store(a,12,f);return a};k.transpose=n.USE_SIMD?k.SIMD.transpose:k.scalar.transpose;k.scalar.invert=function(a,b){var c=b[0],f=
b[1],e=b[2],h=b[3],d=b[4],l=b[5],g=b[6],m=b[7],q=b[8],p=b[9],r=b[10],k=b[11],s=b[12],u=b[13],v=b[14],w=b[15],x=c*l-f*d,y=c*g-e*d,B=c*m-h*d,n=f*g-e*l,D=f*m-h*l,I=e*m-h*g,A=q*u-p*s,z=q*v-r*s,E=q*w-k*s,C=p*v-r*u,J=p*w-k*u,F=r*w-k*v,G=x*F-y*J+B*C+n*E-D*z+I*A;if(!G)return null;G=1/G;a[0]=(l*F-g*J+m*C)*G;a[1]=(e*J-f*F-h*C)*G;a[2]=(u*I-v*D+w*n)*G;a[3]=(r*D-p*I-k*n)*G;a[4]=(g*E-d*F-m*z)*G;a[5]=(c*F-e*E+h*z)*G;a[6]=(v*B-s*I-w*y)*G;a[7]=(q*I-r*B+k*y)*G;a[8]=(d*J-l*E+m*A)*G;a[9]=(f*E-c*J-h*A)*G;a[10]=(s*D-u*
B+w*x)*G;a[11]=(p*B-q*D-k*x)*G;a[12]=(l*z-d*C-g*A)*G;a[13]=(c*C-f*z+e*A)*G;a[14]=(u*y-s*n-v*x)*G;a[15]=(q*n-p*y+r*x)*G;return a};k.SIMD.invert=function(a,b){var c,f,e,h,d,l,g,m,q;l=SIMD.Float32x4.load(b,0);g=SIMD.Float32x4.load(b,4);m=SIMD.Float32x4.load(b,8);q=SIMD.Float32x4.load(b,12);d=SIMD.Float32x4.shuffle(l,g,0,1,4,5);f=SIMD.Float32x4.shuffle(m,q,0,1,4,5);c=SIMD.Float32x4.shuffle(d,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,d,1,3,5,7);d=SIMD.Float32x4.shuffle(l,g,2,3,6,7);h=SIMD.Float32x4.shuffle(m,
q,2,3,6,7);e=SIMD.Float32x4.shuffle(d,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,d,1,3,5,7);d=SIMD.Float32x4.mul(e,h);d=SIMD.Float32x4.swizzle(d,1,0,3,2);l=SIMD.Float32x4.mul(f,d);g=SIMD.Float32x4.mul(c,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,d),l);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);d=SIMD.Float32x4.mul(f,e);d=SIMD.Float32x4.swizzle(d,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),l);q=SIMD.Float32x4.mul(c,
d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(h,d));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),h);d=SIMD.Float32x4.swizzle(d,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),l);m=SIMD.Float32x4.mul(c,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,d));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,
d),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);d=SIMD.Float32x4.mul(c,f);d=SIMD.Float32x4.swizzle(d,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),m);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),q);d=SIMD.Float32x4.swizzle(d,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),m);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(e,d));d=SIMD.Float32x4.mul(c,h);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,d));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),m);d=SIMD.Float32x4.swizzle(d,
2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),g);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.mul(c,e);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),g);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(f,d));d=SIMD.Float32x4.swizzle(d,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(h,d));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),q);c=SIMD.Float32x4.mul(c,l);c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c);c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,
1,0,3,2),c);d=SIMD.Float32x4.reciprocalApproximation(c);c=SIMD.Float32x4.sub(SIMD.Float32x4.add(d,d),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(d,d)));c=SIMD.Float32x4.swizzle(c,0,0,0,0);if(!c)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(c,l));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(c,g));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(c,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(c,q));return a};k.invert=n.USE_SIMD?k.SIMD.invert:k.scalar.invert;k.scalar.adjoint=function(a,b){var c=b[0],
f=b[1],e=b[2],h=b[3],d=b[4],l=b[5],g=b[6],m=b[7],q=b[8],p=b[9],k=b[10],t=b[11],s=b[12],u=b[13],v=b[14],w=b[15];a[0]=l*(k*w-t*v)-p*(g*w-m*v)+u*(g*t-m*k);a[1]=-(f*(k*w-t*v)-p*(e*w-h*v)+u*(e*t-h*k));a[2]=f*(g*w-m*v)-l*(e*w-h*v)+u*(e*m-h*g);a[3]=-(f*(g*t-m*k)-l*(e*t-h*k)+p*(e*m-h*g));a[4]=-(d*(k*w-t*v)-q*(g*w-m*v)+s*(g*t-m*k));a[5]=c*(k*w-t*v)-q*(e*w-h*v)+s*(e*t-h*k);a[6]=-(c*(g*w-m*v)-d*(e*w-h*v)+s*(e*m-h*g));a[7]=c*(g*t-m*k)-d*(e*t-h*k)+q*(e*m-h*g);a[8]=d*(p*w-t*u)-q*(l*w-m*u)+s*(l*t-m*p);a[9]=-(c*
(p*w-t*u)-q*(f*w-h*u)+s*(f*t-h*p));a[10]=c*(l*w-m*u)-d*(f*w-h*u)+s*(f*m-h*l);a[11]=-(c*(l*t-m*p)-d*(f*t-h*p)+q*(f*m-h*l));a[12]=-(d*(p*v-k*u)-q*(l*v-g*u)+s*(l*k-g*p));a[13]=c*(p*v-k*u)-q*(f*v-e*u)+s*(f*k-e*p);a[14]=-(c*(l*v-g*u)-d*(f*v-e*u)+s*(f*g-e*l));a[15]=c*(l*k-g*p)-d*(f*k-e*p)+q*(f*g-e*l);return a};k.SIMD.adjoint=function(a,b){var c,f,e,h,d,l,g,m,q;c=SIMD.Float32x4.load(b,0);f=SIMD.Float32x4.load(b,4);e=SIMD.Float32x4.load(b,8);h=SIMD.Float32x4.load(b,12);g=SIMD.Float32x4.shuffle(c,f,0,1,4,
5);l=SIMD.Float32x4.shuffle(e,h,0,1,4,5);d=SIMD.Float32x4.shuffle(g,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,g,1,3,5,7);g=SIMD.Float32x4.shuffle(c,f,2,3,6,7);f=SIMD.Float32x4.shuffle(e,h,2,3,6,7);c=SIMD.Float32x4.shuffle(g,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,g,1,3,5,7);g=SIMD.Float32x4.mul(c,f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);e=SIMD.Float32x4.mul(l,g);h=SIMD.Float32x4.mul(d,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,g),e);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
g),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);g=SIMD.Float32x4.mul(l,c);g=SIMD.Float32x4.swizzle(g,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),e);q=SIMD.Float32x4.mul(d,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,g));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);c=SIMD.Float32x4.swizzle(c,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,
g),e);m=SIMD.Float32x4.mul(d,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(c,g));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);g=SIMD.Float32x4.mul(d,l);g=SIMD.Float32x4.swizzle(g,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),m);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),q);g=SIMD.Float32x4.swizzle(g,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),m);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(c,g));g=SIMD.Float32x4.mul(d,
f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,g));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,g),m);g=SIMD.Float32x4.swizzle(g,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,g),h);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,g));g=SIMD.Float32x4.mul(d,c);g=SIMD.Float32x4.swizzle(g,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(l,g));g=SIMD.Float32x4.swizzle(g,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,
g));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,g),q);SIMD.Float32x4.store(a,0,e);SIMD.Float32x4.store(a,4,h);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,q);return a};k.adjoint=n.USE_SIMD?k.SIMD.adjoint:k.scalar.adjoint;k.determinant=function(a){var b=a[0],c=a[1],f=a[2],e=a[3],h=a[4],d=a[5],l=a[6],g=a[7],m=a[8],q=a[9],p=a[10],k=a[11],t=a[12],s=a[13],u=a[14];a=a[15];return(b*d-c*h)*(p*a-k*u)-(b*l-f*h)*(q*a-k*s)+(b*g-e*h)*(q*u-p*s)+(c*l-f*d)*(m*a-k*t)-(c*g-e*d)*(m*u-p*t)+(f*g-e*l)*(m*s-q*t)};
k.SIMD.multiply=function(a,b,c){var f=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),h=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.load(c,0),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,0,d);d=SIMD.Float32x4.load(c,
4);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.load(c,8);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,8,d);c=SIMD.Float32x4.load(c,12);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,12,f);return a};k.scalar.multiply=function(a,b,c){var f=b[0],e=b[1],
h=b[2],d=b[3],l=b[4],g=b[5],m=b[6],q=b[7],p=b[8],k=b[9],t=b[10],s=b[11],u=b[12],v=b[13],w=b[14];b=b[15];var x=c[0],y=c[1],B=c[2],n=c[3];a[0]=x*f+y*l+B*p+n*u;a[1]=x*e+y*g+B*k+n*v;a[2]=x*h+y*m+B*t+n*w;a[3]=x*d+y*q+B*s+n*b;x=c[4];y=c[5];B=c[6];n=c[7];a[4]=x*f+y*l+B*p+n*u;a[5]=x*e+y*g+B*k+n*v;a[6]=x*h+y*m+B*t+n*w;a[7]=x*d+y*q+B*s+n*b;x=c[8];y=c[9];B=c[10];n=c[11];a[8]=x*f+y*l+B*p+n*u;a[9]=x*e+y*g+B*k+n*v;a[10]=x*h+y*m+B*t+n*w;a[11]=x*d+y*q+B*s+n*b;x=c[12];y=c[13];B=c[14];n=c[15];a[12]=x*f+y*l+B*p+n*u;
a[13]=x*e+y*g+B*k+n*v;a[14]=x*h+y*m+B*t+n*w;a[15]=x*d+y*q+B*s+n*b;return a};k.multiply=n.USE_SIMD?k.SIMD.multiply:k.scalar.multiply;k.mul=k.multiply;k.scalar.translate=function(a,b,c){var f=c[0],e=c[1];c=c[2];var h,d,l,g,m,q,p,k,t,s,u,v;b===a?(a[12]=b[0]*f+b[4]*e+b[8]*c+b[12],a[13]=b[1]*f+b[5]*e+b[9]*c+b[13],a[14]=b[2]*f+b[6]*e+b[10]*c+b[14],a[15]=b[3]*f+b[7]*e+b[11]*c+b[15]):(h=b[0],d=b[1],l=b[2],g=b[3],m=b[4],q=b[5],p=b[6],k=b[7],t=b[8],s=b[9],u=b[10],v=b[11],a[0]=h,a[1]=d,a[2]=l,a[3]=g,a[4]=m,
a[5]=q,a[6]=p,a[7]=k,a[8]=t,a[9]=s,a[10]=u,a[11]=v,a[12]=h*f+m*e+t*c+b[12],a[13]=d*f+q*e+s*c+b[13],a[14]=l*f+p*e+u*c+b[14],a[15]=g*f+k*e+v*c+b[15]);return a};k.SIMD.translate=function(a,b,c){var f=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),h=SIMD.Float32x4.load(b,8),d=SIMD.Float32x4.load(b,12);c=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(c,
0,0,0,0));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(c,1,1,1,1));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(c,2,2,2,2));b=SIMD.Float32x4.add(f,SIMD.Float32x4.add(e,SIMD.Float32x4.add(h,d)));SIMD.Float32x4.store(a,12,b);return a};k.translate=n.USE_SIMD?k.SIMD.translate:k.scalar.translate;k.scalar.scale=function(a,b,c){var f=c[0],e=c[1];c=c[2];a[0]=b[0]*f;a[1]=b[1]*f;a[2]=b[2]*f;a[3]=b[3]*f;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=
b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};k.SIMD.scale=function(a,b,c){var f;c=SIMD.Float32x4(c[0],c[1],c[2],0);f=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(c,0,0,0,0)));f=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(c,1,1,1,1)));f=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(c,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};
k.scale=n.USE_SIMD?k.SIMD.scale:k.scalar.scale;k.rotate=function(a,b,c,f){var e=f[0],h=f[1];f=f[2];var d=Math.sqrt(e*e+h*h+f*f),l,g,m,q,p,k,t,s,u,v,w,x,y,B,H,D,I,A,z,E;if(Math.abs(d)<n.EPSILON)return null;d=1/d;e*=d;h*=d;f*=d;l=Math.sin(c);g=Math.cos(c);m=1-g;c=b[0];d=b[1];q=b[2];p=b[3];k=b[4];t=b[5];s=b[6];u=b[7];v=b[8];w=b[9];x=b[10];y=b[11];B=e*e*m+g;H=h*e*m+f*l;D=f*e*m-h*l;I=e*h*m-f*l;A=h*h*m+g;z=f*h*m+e*l;E=e*f*m+h*l;e=h*f*m-e*l;h=f*f*m+g;a[0]=c*B+k*H+v*D;a[1]=d*B+t*H+w*D;a[2]=q*B+s*H+x*D;a[3]=
p*B+u*H+y*D;a[4]=c*I+k*A+v*z;a[5]=d*I+t*A+w*z;a[6]=q*I+s*A+x*z;a[7]=p*I+u*A+y*z;a[8]=c*E+k*e+v*h;a[9]=d*E+t*e+w*h;a[10]=q*E+s*e+x*h;a[11]=p*E+u*e+y*h;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};k.scalar.rotateX=function(a,b,c){var f=Math.sin(c);c=Math.cos(c);var e=b[4],h=b[5],d=b[6],l=b[7],g=b[8],m=b[9],q=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+g*f;a[5]=h*c+m*f;a[6]=d*c+q*f;a[7]=l*c+k*f;a[8]=g*c-
e*f;a[9]=m*c-h*f;a[10]=q*c-d*f;a[11]=k*c-l*f;return a};k.SIMD.rotateX=function(a,b,c){var f=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(e,f)));
return a};k.rotateX=n.USE_SIMD?k.SIMD.rotateX:k.scalar.rotateX;k.scalar.rotateY=function(a,b,c){var f=Math.sin(c);c=Math.cos(c);var e=b[0],h=b[1],d=b[2],l=b[3],g=b[8],m=b[9],q=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-g*f;a[1]=h*c-m*f;a[2]=d*c-q*f;a[3]=l*c-k*f;a[8]=e*f+g*c;a[9]=h*f+m*c;a[10]=d*f+q*c;a[11]=l*f+k*c;return a};k.SIMD.rotateY=function(a,b,c){var f=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));
b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,f),SIMD.Float32x4.mul(b,c)));return a};k.rotateY=n.USE_SIMD?k.SIMD.rotateY:k.scalar.rotateY;k.scalar.rotateZ=function(a,b,c){var f=Math.sin(c);c=Math.cos(c);var e=b[0],h=b[1],d=b[2],l=b[3],
g=b[4],m=b[5],q=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+g*f;a[1]=h*c+m*f;a[2]=d*c+q*f;a[3]=l*c+k*f;a[4]=g*c-e*f;a[5]=m*c-h*f;a[6]=q*c-d*f;a[7]=k*c-l*f;return a};k.SIMD.rotateZ=function(a,b,c){var f=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,
4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(e,f)));return a};k.rotateZ=n.USE_SIMD?k.SIMD.rotateZ:k.scalar.rotateZ;k.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};k.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=
0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromRotation=function(a,b,c){var f=c[0],e=c[1];c=c[2];var h=Math.sqrt(f*f+e*e+c*c),d;if(Math.abs(h)<n.EPSILON)return null;h=1/h;f*=h;e*=h;c*=h;h=Math.sin(b);b=Math.cos(b);d=1-b;a[0]=f*f*d+b;a[1]=e*f*d+c*h;a[2]=c*f*d-e*h;a[3]=0;a[4]=f*e*d-c*h;a[5]=e*e*d+b;a[6]=c*e*d+f*h;a[7]=0;a[8]=f*c*d+e*h;a[9]=e*c*d-f*h;a[10]=c*c*d+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromXRotation=function(a,b){var c=Math.sin(b),
f=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromYRotation=function(a,b){var c=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.fromZRotation=function(a,b){var c=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a};k.fromRotationTranslation=function(a,b,c){var f=b[0],e=b[1],h=b[2],d=b[3],l=f+f,g=e+e,m=h+h;b=f*l;var q=f*g,f=f*m,k=e*g,e=e*m,h=h*m,l=d*l,g=d*g,d=d*m;a[0]=1-(k+h);a[1]=q+d;a[2]=f-g;a[3]=0;a[4]=q-d;a[5]=1-(b+h);a[6]=e+l;a[7]=0;a[8]=f+g;a[9]=e-l;a[10]=1-(b+k);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};k.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};k.getRotation=function(a,b){var c=b[0]+b[5]+b[10],f=0;0<c?(f=2*Math.sqrt(c+1),a[3]=0.25*f,
a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=0.25*f,a[1]=(b[1]+b[4])/f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=0.25*f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=0.25*f);return a};k.fromRotationTranslationScale=function(a,b,c,f){var e=b[0],h=b[1],d=b[2],l=b[3],g=e+e,m=
h+h,q=d+d;b=e*g;var k=e*m,e=e*q,r=h*m,h=h*q,d=d*q,g=l*g,m=l*m,l=l*q,q=f[0],t=f[1];f=f[2];a[0]=(1-(r+d))*q;a[1]=(k+l)*q;a[2]=(e-m)*q;a[3]=0;a[4]=(k-l)*t;a[5]=(1-(b+d))*t;a[6]=(h+g)*t;a[7]=0;a[8]=(e+m)*f;a[9]=(h-g)*f;a[10]=(1-(b+r))*f;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};k.fromRotationTranslationScaleOrigin=function(a,b,c,f,e){var h=b[0],d=b[1],l=b[2],g=b[3],m=h+h,q=d+d,k=l+l;b=h*m;var r=h*q,h=h*k,t=d*q,d=d*k,l=l*k,m=g*m,q=g*q,g=g*k,k=f[0],s=f[1];f=f[2];var u=e[0],v=e[1];e=e[2];
a[0]=(1-(t+l))*k;a[1]=(r+g)*k;a[2]=(h-q)*k;a[3]=0;a[4]=(r-g)*s;a[5]=(1-(b+l))*s;a[6]=(d+m)*s;a[7]=0;a[8]=(h+q)*f;a[9]=(d-m)*f;a[10]=(1-(b+t))*f;a[11]=0;a[12]=c[0]+u-(a[0]*u+a[4]*v+a[8]*e);a[13]=c[1]+v-(a[1]*u+a[5]*v+a[9]*e);a[14]=c[2]+e-(a[2]*u+a[6]*v+a[10]*e);a[15]=1;return a};k.fromQuat=function(a,b){var c=b[0],f=b[1],e=b[2],h=b[3],d=c+c,l=f+f,g=e+e,c=c*d,m=f*d,f=f*l,q=e*d,k=e*l,e=e*g,d=h*d,l=h*l,h=h*g;a[0]=1-f-e;a[1]=m+h;a[2]=q-l;a[3]=0;a[4]=m-h;a[5]=1-c-e;a[6]=k+d;a[7]=0;a[8]=q+l;a[9]=k-d;a[10]=
1-c-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};k.frustum=function(a,b,c,f,e,h,d){var l=1/(c-b),g=1/(e-f),m=1/(h-d);a[0]=2*h*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*g;a[6]=0;a[7]=0;a[8]=(c+b)*l;a[9]=(e+f)*g;a[10]=(d+h)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*(d*h)*m;a[15]=0;return a};k.perspective=function(a,b,c,f,e){b=1/Math.tan(b/2);var h=1/(f-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+f)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*f*h;a[15]=0;return a};k.perspectiveFromFieldOfView=
function(a,b,c,f){var e=Math.tan(b.upDegrees*Math.PI/180),h=Math.tan(b.downDegrees*Math.PI/180),d=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var l=2/(d+b),g=2/(e+h);a[0]=l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=-(0.5*(d-b)*l);a[9]=0.5*(e-h)*g;a[10]=f/(c-f);a[11]=-1;a[12]=0;a[13]=0;a[14]=f*c/(c-f);a[15]=0;return a};k.ortho=function(a,b,c,f,e,h,d){var l=1/(b-c),g=1/(f-e),m=1/(h-d);a[0]=-2*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*g;a[6]=0;a[7]=0;a[8]=0;a[9]=
0;a[10]=2*m;a[11]=0;a[12]=(b+c)*l;a[13]=(e+f)*g;a[14]=(d+h)*m;a[15]=1;return a};k.lookAt=function(a,b,c,f){var e,h,d,l,g,m,q,p,r=b[0],t=b[1];b=b[2];d=f[0];l=f[1];h=f[2];q=c[0];f=c[1];e=c[2];if(Math.abs(r-q)<n.EPSILON&&Math.abs(t-f)<n.EPSILON&&Math.abs(b-e)<n.EPSILON)return k.identity(a);c=r-q;f=t-f;q=b-e;p=1/Math.sqrt(c*c+f*f+q*q);c*=p;f*=p;q*=p;e=l*q-h*f;h=h*c-d*q;d=d*f-l*c;(p=Math.sqrt(e*e+h*h+d*d))?(p=1/p,e*=p,h*=p,d*=p):d=h=e=0;l=f*d-q*h;g=q*e-c*d;m=c*h-f*e;(p=Math.sqrt(l*l+g*g+m*m))?(p=1/p,l*=
p,g*=p,m*=p):m=g=l=0;a[0]=e;a[1]=l;a[2]=c;a[3]=0;a[4]=h;a[5]=g;a[6]=f;a[7]=0;a[8]=d;a[9]=m;a[10]=q;a[11]=0;a[12]=-(e*r+h*t+d*b);a[13]=-(l*r+g*t+m*b);a[14]=-(c*r+f*t+q*b);a[15]=1;return a};k.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],
2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};k.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};k.subtract=function(a,
b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a};k.sub=k.subtract;k.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=
b[14]*c;a[15]=b[15]*c;return a};k.multiplyScalarAndAdd=function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;a[2]=b[2]+c[2]*f;a[3]=b[3]+c[3]*f;a[4]=b[4]+c[4]*f;a[5]=b[5]+c[5]*f;a[6]=b[6]+c[6]*f;a[7]=b[7]+c[7]*f;a[8]=b[8]+c[8]*f;a[9]=b[9]+c[9]*f;a[10]=b[10]+c[10]*f;a[11]=b[11]+c[11]*f;a[12]=b[12]+c[12]*f;a[13]=b[13]+c[13]*f;a[14]=b[14]+c[14]*f;a[15]=b[15]+c[15]*f;return a};k.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===
b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};k.equals=function(a,b){var c=a[0],f=a[1],e=a[2],h=a[3],d=a[4],l=a[5],g=a[6],m=a[7],q=a[8],k=a[9],r=a[10],t=a[11],s=a[12],u=a[13],v=a[14],w=a[15],x=b[0],y=b[1],B=b[2],H=b[3],D=b[4],I=b[5],A=b[6],z=b[7],E=b[8],C=b[9],J=b[10],F=b[11],G=b[12],K=b[13],N=b[14],V=b[15];return Math.abs(c-x)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-y)<=n.EPSILON*Math.max(1,Math.abs(f),
Math.abs(y))&&Math.abs(e-B)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(h-H)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(d-D)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(l-I)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(g-A)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(m-z)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(q-E)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(E))&&Math.abs(k-C)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&
Math.abs(r-J)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(J))&&Math.abs(t-F)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(F))&&Math.abs(s-G)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(G))&&Math.abs(u-K)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(K))&&Math.abs(v-N)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(w-V)<=n.EPSILON*Math.max(1,Math.abs(w),Math.abs(V))};return k})},"esri/views/vectorTiles/RenderBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],
function(n,k,a,b){n=function(){return function(a){this.type=a}}();k.RenderBucket=n;b=function(b){function f(){b.call(this,2);this.joinCount=this.joinStart=this.triangleElementCount=this.triangleElementStart=0}a(f,b);f.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.joinCount};return f}(n);k.LineRenderBucket=b;b=function(b){function f(){b.call(this,1);this.outlineElementCount=this.outlineElementStart=this.triangleElementCount=this.triangleElementStart=0}a(f,b);f.prototype.hasData=
function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return f}(n);k.FillRenderBucket=b;b=function(b){function f(){b.call(this,3);this.textElementCount=this.textElementStart=this.marketElementCount=this.markerElementStart=0;this.isSDF=!1}a(f,b);f.prototype.hasData=function(){return 0<this.marketElementCount||0<this.textElementCount};return f}(n);k.SymbolRenderBucket=b;n=function(b){function f(){b.call(this,0)}a(f,b);f.prototype.hasData=function(){return!0};return f}(n);k.BackgroundRenderBucket=
n})},"esri/views/vectorTiles/tileRendererHelper3D":function(){define(["require","exports","../../core/libs/gl-matrix/vec3","../../core/libs/gl-matrix/mat4"],function(n,k,a,b){var c={extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,isWrappable:!0},intersects:function(a){return!1}},center:[0,0],scale:1,resolution:1,rotation:0,width:1,height:1,size:[256,256],spatialReference:{wkid:102100,isWrappable:!0},worldScreenWidth:1,viewpoint:{},toMap:function(a,b){return[0,0]},toScreen:function(a,
b){return[0,0]},clone:function(){return null}},f=a.create();return function(a,h,d,l,g,m,q,k,r,t,s,u){r=[h[0],h[1],h[2]];for(var v=t;1>v;v*=2)r[0]--,r[1]>>=1,r[2]>>=1;h={context:a,budget:null,state:c,stationary:!0,devicePixelRatio:1,displayLevel:g.adjustLevel(m),requiredLevel:g.adjustLevel(h[0]),drawphase:0,renderer:l,layerOpacity:u};if(q!==k)throw Error("It is expected that tiles are square!");m=1/t;g=g.getSchemaShift(r,m);u=g[1];d.tileTransform.displayCoord[0]=-1-2*m*s[0]-g[0];d.tileTransform.displayCoord[1]=
1+2*m*(1-s[1]-t)+u;t=d.tileTransform.transform;b.identity(t);s=0.25*m/q;f.set([s,-s,1]);b.scale(t,t,f);a.setBlendFunctionSeparate(1,771,1,771);a.setClearDepth(1);a.clear(a.gl.DEPTH_BUFFER_BIT);h.state.size=[q,k];h.state.width=q;h.state.height=k;l.setStateParams(h.state,h.devicePixelRatio,r[0]);d.attach(h);a.setFaceCullingEnabled(!1);a.setDepthFunction(515);a.setBlendingEnabled(!1);a.setDepthTestEnabled(!0);a.setDepthWriteEnabled(!0);d.render(h);a.setDepthWriteEnabled(!1);a.setBlendingEnabled(!0);
h.drawphase=1;d.render(h);h.drawphase=2;d.render(h);a.setDepthWriteEnabled(!0);a.setDepthTestEnabled(!1);a.setFaceCullingEnabled(!0)}})},"esri/core/libs/gl-matrix/vec3":function(){define(["./common"],function(n){var k={create:function(){var a=new n.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new n.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,c){var f=new n.ARRAY_TYPE(3);f[0]=a;f[1]=b;f[2]=c;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];
a[2]=b[2];return a},set:function(a,b,c,f){a[0]=b;a[1]=c;a[2]=f;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}};k.sub=k.subtract;k.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a};k.mul=k.multiply;k.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a};k.div=k.divide;k.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);
a[2]=Math.ceil(b[2]);return a};k.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};k.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};k.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};k.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};k.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;
return a};k.scaleAndAdd=function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;a[2]=b[2]+c[2]*f;return a};k.distance=function(a,b){var c=b[0]-a[0],f=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+f*f+e*e)};k.dist=k.distance;k.squaredDistance=function(a,b){var c=b[0]-a[0],f=b[1]-a[1],e=b[2]-a[2];return c*c+f*f+e*e};k.sqrDist=k.squaredDistance;k.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};k.len=k.length;k.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};
k.sqrLen=k.squaredLength;k.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};k.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};k.normalize=function(a,b){var c=b[0],f=b[1],e=b[2],c=c*c+f*f+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};k.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};k.cross=function(a,b,c){var f=b[0],e=b[1];b=b[2];var h=c[0],d=c[1];c=c[2];a[0]=e*c-b*d;a[1]=b*h-f*c;a[2]=f*d-e*h;return a};k.lerp=function(a,b,c,f){var e=
b[0],h=b[1];b=b[2];a[0]=e+f*(c[0]-e);a[1]=h+f*(c[1]-h);a[2]=b+f*(c[2]-b);return a};k.hermite=function(a,b,c,f,e,h){var d=h*h,l=d*(2*h-3)+1,g=d*(h-2)+h,m=d*(h-1);h=d*(3-2*h);a[0]=b[0]*l+c[0]*g+f[0]*m+e[0]*h;a[1]=b[1]*l+c[1]*g+f[1]*m+e[1]*h;a[2]=b[2]*l+c[2]*g+f[2]*m+e[2]*h;return a};k.bezier=function(a,b,c,f,e,h){var d=1-h,l=d*d,g=h*h,m=l*d,l=3*h*l,d=3*g*d;h*=g;a[0]=b[0]*m+c[0]*l+f[0]*d+e[0]*h;a[1]=b[1]*m+c[1]*l+f[1]*d+e[1]*h;a[2]=b[2]*m+c[2]*l+f[2]*d+e[2]*h;return a};k.random=function(a,b){b=b||1;
var c=2*n.RANDOM()*Math.PI,f=2*n.RANDOM()-1,e=Math.sqrt(1-f*f)*b;a[0]=Math.cos(c)*e;a[1]=Math.sin(c)*e;a[2]=f*b;return a};k.transformMat4=function(a,b,c){var f=b[0],e=b[1];b=b[2];var h=c[3]*f+c[7]*e+c[11]*b+c[15],h=h||1;a[0]=(c[0]*f+c[4]*e+c[8]*b+c[12])/h;a[1]=(c[1]*f+c[5]*e+c[9]*b+c[13])/h;a[2]=(c[2]*f+c[6]*e+c[10]*b+c[14])/h;return a};k.transformMat3=function(a,b,c){var f=b[0],e=b[1];b=b[2];a[0]=f*c[0]+e*c[3]+b*c[6];a[1]=f*c[1]+e*c[4]+b*c[7];a[2]=f*c[2]+e*c[5]+b*c[8];return a};k.transformQuat=function(a,
b,c){var f=b[0],e=b[1],h=b[2];b=c[0];var d=c[1],l=c[2];c=c[3];var g=c*f+d*h-l*e,m=c*e+l*f-b*h,q=c*h+b*e-d*f,f=-b*f-d*e-l*h;a[0]=g*c+f*-b+m*-l-q*-d;a[1]=m*c+f*-d+q*-b-g*-l;a[2]=q*c+f*-l+g*-d-m*-b;return a};k.rotateX=function(a,b,c,f){var e=[],h=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];h[0]=e[0];h[1]=e[1]*Math.cos(f)-e[2]*Math.sin(f);h[2]=e[1]*Math.sin(f)+e[2]*Math.cos(f);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};k.rotateY=function(a,b,c,f){var e=[],h=[];e[0]=b[0]-c[0];e[1]=b[1]-
c[1];e[2]=b[2]-c[2];h[0]=e[2]*Math.sin(f)+e[0]*Math.cos(f);h[1]=e[1];h[2]=e[2]*Math.cos(f)-e[0]*Math.sin(f);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};k.rotateZ=function(a,b,c,f){var e=[],h=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];h[0]=e[0]*Math.cos(f)-e[1]*Math.sin(f);h[1]=e[0]*Math.sin(f)+e[1]*Math.cos(f);h[2]=e[2];a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};k.forEach=function(){var a=k.create();return function(b,c,f,e,h,d){c||(c=3);f||(f=0);for(e=e?Math.min(e*c+f,
b.length):b.length;f<e;f+=c)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],h(a,a,d),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2];return b}}();k.angle=function(a,b){var c=k.fromValues(a[0],a[1],a[2]),f=k.fromValues(b[0],b[1],b[2]);k.normalize(c,c);k.normalize(f,f);c=k.dot(c,f);return 1<c?0:Math.acos(c)};k.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};k.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};k.equals=function(a,b){var c=a[0],f=a[1],e=a[2],h=b[0],d=b[1],l=b[2];return Math.abs(c-
h)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(f-d)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))};return k})},"esri/views/3d/terrain/OverlayManager":function(){define("../../../core/declare dojo/on ../support/mathUtils ../support/earthUtils ../support/projectionUtils ../support/aaBoundingRect ../lib/glMatrix ../webgl-engine/Stage ../webgl-engine/lib/Texture ../webgl-engine/lib/Util".split(" "),function(n,k,a,b,c,f,e,h,d,
l){var g=e.vec2d,m=e.vec3d,q=e.vec4d,p=l.assert,r={width:0,height:0,pixelRatio:0,views:null},t=[{viewport:q.create(),extent:q.create()}],s=[t[0],{viewport:q.create(),extent:q.create()}],u=q.create(),v=m.create(),w=[q.create(),q.create()];return n(null,{constructor:function(a,b){this._view=b;this._stage=b._stage;this._renderSR=this._overlaySR=null;this._overlaySREqualsRenderSR=!0;this.terrainSurface=a;this._renderer=this._stage.getTextureGraphicsRenderer();this._connectedLayers={};this._overlays=void 0;
this._scale=0;this._dirty=!1},destroy:function(){for(var a in this._connectedLayers)this.unregisterLayerView(this._connectedLayers[a]);this._disposeOverlays()},hasOverlays:function(){return!!this._overlays},setSpatialReference:function(b,c){(this._overlaySR=b)?(this._renderSR=this._view.renderSpatialReference,this._overlaySREqualsRenderSR=this._overlaySR.equals(this._renderSR),this._longitudeCyclical=(this._isSpherical=c)?b.isWebMercator?new a.Cyclical(-2.0037508342788905E7,2.0037508342788905E7):
new a.Cyclical(-180,180):null):(this._disposeOverlays(),this._longitudeCyclical=null)},registerLayerView:function(a){var b=a.layer.uid;p(!this._connectedLayers[b],"layer already connected");var c=k(a,"draped-data-change",function(){this.setOverlayDirty()}.bind(this));this._connectedLayers[b]={eventHandles:[c],layerView:a};if(a.setDrapingExtent&&this._overlays)for(b=0;b<this._overlays.length;b++)a.setDrapingExtent(b,this._overlays[b].extent,this._overlaySR,2048);this.setOverlayDirty()},unregisterLayerView:function(a){for(var b in this._connectedLayers){var c=
this._connectedLayers[b];if(c.layerView===a){if(c.eventHandles)for(var d=0;d<c.eventHandles;d++)c.eventHandles[d].remove();delete this._connectedLayers[b];this.setOverlayDirty();a.destroyed||(a._overlayUpdating=!1,a._evaluateUpdatingState())}}},onElevationChange:function(a){var b=a.extent;this._view.renderCoordsHelper.fromRenderCoords(this._view.navigation.currentCamera.center,v,a.spatialReference);b[0]<=v[0]&&(b[1]<=v[1]&&b[2]>v[0]&&b[3]>v[1])&&this.setOverlayDirty()},setOverlayDirty:function(){this._dirty||
(this._setOverlayUpdating(!0),this._dirty=!0)},_setOverlayUpdating:function(a){for(var b in this._connectedLayers){var c=this._connectedLayers[b].layerView;if(!a||!c.suspended&&c.hasDraped)c._overlayUpdating=a,c._evaluateUpdatingState()}if(b=this._view._graphicsView)b._overlayUpdating=a,b._evaluateUpdatingState()},updateOverlay:function(){if(this._overlaySR){var a=this._computeOverlayExtents();if(a){this._overlays||this._initOverlays();for(var b=0;b<this._overlays.length;b++){var c;a:{c=a[b];for(var d=
this._overlays[b].extent,e=1E-5*Math.max(c[2]-c[0],c[3]-c[1],d[2]-d[0],d[3]-d[1]),g=0;4>g;g++)if(Math.abs(d[g]-c[g])>e){c=!0;break a}c=!1}if(c){q.set(a[b],this._overlays[b].extent);for(var h in this._connectedLayers)c=this._connectedLayers[h].layerView,c.setDrapingExtent&&c.setDrapingExtent(b,a[b],this._overlaySR,2048)}}this._setOverlayUpdating(!1);this._drawOverlays();this.terrainSurface._updateTileOverlayParams();this._dirty=!1}}},overlaysNeedUpdate:function(){return this._dirty&&this._overlaySR},
updateOpacity:function(b){var c=1;if(this._overlays){var d=this._scale;b=this._view.renderCoordsHelper.getAltitude(b);3.5*b<d&&(c=Math.sqrt(a.clamp((b-d/10)/(d/3.5-d/10),0,1)))}return c},setOverlayParamsOfTile:function(a,b,c){a=a.extent;var d=-1;this._rectInsideRect(a,this._overlays[0].extent)?d=0:this._rectanglesOverlap(a,this._overlays[1].extent)&&(d=1);if(0<=d){var e=this._overlays[d].extent;b.overlayTexScale[0]=(a[2]-a[0])/(e[2]-e[0]);b.overlayTexScale[1]=(a[3]-a[1])/(e[3]-e[1]);var h=a[0];if(this._longitudeCyclical){var h=
this._longitudeCyclical.minimalMonotonic(e[0],h),f=this._longitudeCyclical.minimalMonotonic(e[0],a[2]);h>f&&(h=f-(a[2]-a[0]))}g.set2((h-e[0])/(e[2]-e[0]),(a[1]-e[1])/(e[3]-e[1]),b.overlayTexOffset);b.overlayTexId=this._overlays[d].texture.getId();b.overlayOpacity=void 0!==c?c:1}else b.overlayTexId=null},overlayPixelSizeInMapUnits:function(a){var b;this._overlays&&(this._overlays[0]&&this._pointIsInExtent(a,this._overlays[0].extent)?b=this._overlays[0].extent:this._overlays[1]&&(b=this._overlays[1].extent));
return b?(b[2]-b[0])/2048:0},_initOverlays:function(){this._overlays=Array(2);for(var a=0;2>a;a++){var b=new d(null,"overlay",{wrapClamp:!0,mipmap:!0});this._stage.add(h.ModelContentType.TEXTURE,b);this._overlays[a]={texture:b,extent:q.create()}}},_disposeOverlays:function(){if(this._overlays){var a=this._stage;this._overlays.forEach(function(b){a.remove(h.ModelContentType.TEXTURE,b.texture.getId())});this._overlays=null}},_overlayExtentIncTable:[[0,-1,2,1],[0,-2,2,0],[-1,-2,1,0],[-2,-2,0,0],[-2,
-1,0,1],[-2,0,0,2],[-1,0,1,2],[0,0,2,2]],_computeOverlayExtents:function(){var d=this._view.navigation.currentCamera,e=this.terrainSurface.extent,h=m.create();m.set(d.center,h);this._scale=this._view.renderCoordsHelper.getAltitude(d.eye);var f=c.vectorToPoint(h,this._renderSR,this.terrainSurface.spatialReference);(f=this.terrainSurface.getElevation(f))?this._view.renderCoordsHelper.setAltitude(f,h):this._view.navigation.getCenterIntersectManifold(d.eye,d.center,h);var l=m.dist(d.eye,h),f=d.angleOfElevation;
if(!isNaN(f)){this._overlaySREqualsRenderSR||c.vectorToVector(h,this._renderSR,h,this._overlaySR);var l=2*1024*d.perPixelRatio*l,k=!1,p=Infinity;this._isSpherical&&(this._overlaySR.isWebMercator?(l/=Math.cos(c.webMercator.y2lat(h[1])),p=this.terrainSurface.extent[3],p*=0.999):(k=!0,l/=b.metersPerDegree,p=90),l>=p&&(l=p,h[1]=0,this._overlaySR.isWebMercator&&(h[0]=0)));var r=1;k&&(r=1/Math.max(0.2,Math.cos(Math.abs(a.deg2rad(h[1])))),180<l*r&&(r=180/l));var s=l*r,t=w[0];t[0]=h[0]-s;t[1]=h[1]-l;t[2]=
h[0]+s;t[3]=h[1]+l;this._isSpherical&&this._shiftExtentToFitBounds(t,Infinity,p);k=w[1];q.set(t,k);6*s>e[2]-e[0]?q.set(e,k):f>0.25*Math.PI?(k[0]-=s,k[1]-=l,k[2]+=s,k[3]+=l):(c.vectorToVector(d.eye,this._renderSR,v,this._overlaySR),g.subtract(h,v,u),d=-Math.atan2(u[1],u[0])+0.125*Math.PI,0>d&&(d+=2*Math.PI),q.scale(this._overlayExtentIncTable[Math.floor(d/(0.25*Math.PI))],2*l,u),u[0]*=r,u[2]*=r,q.add(k,u,k));this._isSpherical&&(k[0]=this._longitudeCyclical.clamp(k[0]),k[2]=this._longitudeCyclical.clamp(k[2]),
k[1]=Math.max(k[1],-p),k[3]=Math.min(k[3],p));this.opacity=1;return w}},_drawOverlays:function(){for(var a=this._overlays[0].extent[2]-this._overlays[0].extent[0],b=this._stage.getTextureGraphicsRenderer(),c=0;c<this._overlays.length;c++){var d=this._overlays[c].extent,e=this._longitudeCyclical?d[2]>this._longitudeCyclical.max:!1,g=this._longitudeCyclical?d[0]<this._longitudeCyclical.min:!1;if(e||g){r.views=s;var g=Math.round(2048*((e?this._longitudeCyclical.max-d[0]:this._longitudeCyclical.min-d[0])/
(d[2]-d[0]))),h=r.views[0];q.set4(0,0,g,2048,h.viewport);q.set4(d[0],d[1],this._longitudeCyclical.max,d[3],h.extent);e||(h.extent[0]+=this._longitudeCyclical.range);h=r.views[1];q.set4(g,0,2048-g,2048,h.viewport);q.set4(this._longitudeCyclical.min,d[1],d[2],d[3],h.extent);e&&(h.extent[2]-=this._longitudeCyclical.range)}else r.views=t,q.set(d,r.views[0].extent),q.set4(0,0,2048,2048,r.views[0].viewport);r.width=2048;r.height=2048;r.pixelRatio=a/(d[2]-d[0]);b.draw(this._overlays[c].texture,r)}},_rectanglesOverlap:function(a,
b){return this._longitudeCyclical?(this._longitudeCyclical.contains(b[0],b[2],a[0])||this._longitudeCyclical.contains(b[0],b[2],a[2]))&&!(a[1]>b[3]||a[3]<b[1]):!(a[0]>b[2]||a[2]<b[0]||a[1]>b[3]||a[3]<b[1])},_rectInsideRect:function(a,b){return this._longitudeCyclical?this._longitudeCyclical.contains(b[0],b[2],a[0])&&this._longitudeCyclical.contains(b[0],b[2],a[2])&&a[1]>b[1]&&a[3]<b[3]:a[0]>b[0]&&a[2]<b[2]&&a[1]>b[1]&&a[3]<b[3]},_pointIsInExtent:function(a,b){if(this._longitudeCyclical)return this._longitudeCyclical.contains(b[0],
b[2],a.x)&&a.y>=b[1]&&a.y<=b[3];var c=a.x,d=a.y;return c>b[0]&&c<b[2]&&d>b[1]&&d<b[3]},_shiftExtentToFitBounds:function(a,b,c){var d=0,e=0;a[0]<-b?d=a[0]+b:a[2]>b&&(d=b-a[2]);a[1]<-c?e=a[1]+c:a[3]>c&&(e=c-a[3]);f.offset(a,d,e)}})})},"esri/views/3d/terrain/SurfaceExtentHelper":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators dojo/_base/lang ../../../core/Accessor ../../../core/arrayUtils ../../../core/HandleRegistry ../../../geometry/support/webMercatorUtils ../../../views/3d/support/aaBoundingRect ./terrainUtils ./TerrainConst".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q){n=function(d){function e(){d.apply(this,arguments)}a(e,d);Object.defineProperty(e.prototype,"layerViewsExtent",{get:function(){return this._computeLayerViewsExtent()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"tiledLayersExtent",{get:function(){return this._computeTiledLayersExtent()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"spatialReference",{set:function(a){this.tilingScheme||this._set("spatialReference",a)},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"tilingScheme",{set:function(a){this._set("tilingScheme",a);this._set("spatialReference",a.spatialReference)},enumerable:!0,configurable:!0});e.prototype.normalizeCtorArgs=function(a){a=f.mixin({},a);this._layers=a.layers;delete a.layers;this._layerViews=a.layerViews;delete a.layerViews;return a};b([c.property({readOnly:!0})],e.prototype,"layerViewsExtent",null);b([c.property({readOnly:!0,dependsOn:["spatialReference","tilingScheme"]})],e.prototype,
"tiledLayersExtent",null);b([c.property()],e.prototype,"spatialReference",null);b([c.property()],e.prototype,"tilingScheme",null);b([c.property()],e.prototype,"defaultTiledLayersExtent",void 0);return e=b([c.subclass()],e)}(c.declared(e));e=function(d){function e(){d.apply(this,arguments)}a(e,d);e.prototype._computeLayerViewsExtent=function(){return this._getGlobalExtent()};e.prototype._computeTiledLayersExtent=function(){return this._getGlobalExtent()};e.prototype._getGlobalExtent=function(){return this.spatialReference.isWebMercator?
q.WEBMERCATOR_WORLD_EXTENT:q.GEOGRAPHIC_WORLD_EXTENT};b([c.property({dependsOn:["spatialReference"]})],e.prototype,"layerViewsExtent",void 0);return e=b([c.subclass()],e)}(c.declared(n));k.SurfaceExtentHelperGlobal=e;n=function(e){function f(){e.call(this);this._changeListeners=new d}a(f,e);f.prototype.initialize=function(){this._changeListeners.add(this._layers.on("change",this.notifyChange.bind(this,"tiledLayersExtent")));this._changeListeners.add(this._layerViews.on("change",this.notifyChange.bind(this,
"layerViewsExtent")))};f.prototype.destroy=function(){this._changeListeners.destroy();this._changeListeners=null};f.prototype._computeLayerViewsExtent=function(){var a=g.create(g.NEGATIVE_INFINITY),b=this.spatialReference;this._layerViews.forEach(function(c){c.isResolved()&&((c=c.fullExtentInViewSpatialReference||c.layer.fullExtent)&&!c.spatialReference.equals(b)&&(c=l.canProject(c.spatialReference,b)?l.project(c,b):null),c&&g.expand(a,c))});var c=g.allFinite(a)?a:null,d=this._get("layerViewsExtent");
return h.equals(c,d)?d:c};f.prototype._computeTiledLayersExtent=function(){var a=this.tilingScheme;if(!a)return null;var b=this.spatialReference,c=g.create(g.NEGATIVE_INFINITY);this._layers.forEach(function(d){m.isTiledLayer(d)&&a.compatibleWith(m.getTileInfo(d))&&(d.fullExtent&&d.fullExtent.spatialReference.equals(b))&&g.expand(c,d.fullExtent)});this.defaultTiledLayersExtent&&g.expand(c,this.defaultTiledLayersExtent);var d=g.allFinite(c)?c:null,e=this._get("tiledLayersExtent");return h.equals(d,
e)?e:d};return f=b([c.subclass()],f)}(c.declared(n));k.SurfaceExtentHelperLocal=n})},"esri/views/3d/terrain/terrainUtils":function(){define("require exports ./terrainUtilsPlanar ./terrainUtilsSpherical ../../../layers/TiledLayer ../../../layers/VectorTileLayer ../../../support/basemapDefinitions".split(" "),function(n,k,a,b,c,f,e){function h(a){return a&&a.isInstanceOf(f)}function d(a){return a&&"esri.views.3d.layers.TiledLayerView3D"===a.declaredClass}function l(a){return a&&"esri.views.3d.layers.VectorTileLayerView3D"===
a.declaredClass}function g(a){return a&&"esri.views.3d.layers.ElevationLayerView3D"===a.declaredClass}function m(){p={};for(var a in e)e[a].baseMapLayers.forEach(function(a){p[a.url]=19});p["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}var q={planar:a,spherical:b};k.weakAssert=function(a,b){a||console.warn("Terrain: "+b)};k.autoUpdateSkirtsVisibility=function(a,b){q[a.manifold].autoUpdateSkirtsVisibility(a,b)};k.isTiledLayer=function(a){return a&&a.isInstanceOf(c)};
k.isVectorTileLayer=h;k.isTiledMapLayerView=d;k.isVectorTileLayerView=l;k.isElevationLayerView=g;k.isTiledLayerView=function(a){return a&&(d(a)||g(a)||l(a))};var p=null;k.getKnownTiledServiceLevelCap=function(a){p||m();a=a&&a.replace(/https?:/,"");return a in p?p[a]:Infinity};k.prepareKnownTiledServiceLevelCaps=m;k.checkIfTileInfoSupportedForView=function(a,b,c,d){return q["local"===d||"planar"===d?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(a,b,c)};k.getTileInfo=function(a){return h(a)?
a.tileInfo256:a.tileInfo}})},"esri/views/3d/terrain/terrainUtilsPlanar":function(){define("require exports ./TilingScheme ./TerrainConst ../../../core/Error ../support/aaBoundingRect ../lib/glMatrix".split(" "),function(n,k,a,b,c,f,e){function h(a,b,c,d){l.set(c,g);g[d]=b[d];d=l.subtract(g,b);var e=l.subtract(a,b,m),e=l.dot(e,d),h=l.dot(d,d);b=0>=e?b:h<=e?c:l.add(b,l.scale(d,e/h),g);a=l.subtract(a,b,g);return Math.PI/2-Math.atan(a[2]/Math.sqrt(a[0]*a[0]+a[1]*a[1]))}function d(a,b){var c=a.getElevationBounds(),
d=a.extent,c=0.5*(c[0]+c[1]);q[0]=d[0];q[1]=d[1];q[2]=c;p[0]=d[2];p[1]=d[3];p[2]=c;c=d=Infinity;b[0]<q[0]?d=h(b,q,p,0):b[0]>p[0]&&(d=h(b,p,q,0));b[1]<q[1]?c=h(b,q,p,1):b[1]>p[1]&&(c=h(b,p,q,1));return Math.min(d,c)}var l=e.vec3d,g=l.create(),m=l.create(),q=l.create(),p=l.create();k.autoUpdateSkirtsVisibility=function(a,b){var c,e=!0,g=a.extent,h=f.contains(g,b);h?c=a.getElevation(b):(c=a.getElevationBounds(),c=0.5*(c[0]+c[1]));c>b[2]?e=!1:h||(h=Math.min(g[2]-g[0],g[3]-g[1]),f.containsWithMargin(g,
b,a.hideSkirtsDistanceFromExtentMargin*h)?d(a,b)>a.hideSkirtsMinimumCameraTilt&&(e=!1):e=!1);e!==a.skirts&&(a.skirts=e)};k.tiltOnEdge=h;k.tiltToExtentEdge=d;k.checkIfTileInfoSupportedForViewSR=function(d,e,g){if(d.spatialReference.isGeographic)return new c("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var h=a.checkUnsupported(d);if(h)return h;var l=d.lods,h=l[0].resolution*Math.pow(2,l[0].level),m=[h*d.size[0],h*d.size[1]],q=[d.origin.x,
d.origin.y];e=f.fromExtent(e);var k=f.create();a.computeRowColExtent(e,m,q,k);m=(k[2]-k[0])*(k[3]-k[1]);m>b.MAX_ROOT_TILES?(l=l[0].scale*Math.pow(2,l[0].level),h=Math.max((e[3]-e[1])/d.size[1],(e[2]-e[0])/d.size[0])*l/h,e=Math.floor(Math.log(h)/Math.log(10)),h=Math.ceil(h/Math.pow(10,e))*Math.pow(10,e),h=new c("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(l).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+
".",{level0Scale:l,suggestedLevel0Scale:h,requiredNumRootTiles:m,allowedNumRootTiles:b.MAX_ROOT_TILES})):h=null;return h?h:g&&!d.spatialReference.equals(g)?new c("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}})},"esri/views/3d/terrain/terrainUtilsSpherical":function(){define(["require","exports","./TilingScheme","../../../core/Error"],function(n,k,a,b){k.autoUpdateSkirtsVisibility=function(a,b){};k.checkIfTileInfoSupportedForViewSR=
function(c,f,e){f=c.lods.length-1;if(c.spatialReference.isWebMercator){if(!a.makeWebMercatorAuxiliarySphere(f).compatibleWith(c))return new b("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else if(c.spatialReference.isWGS84){if(!a.makeWGS84WithTileSize(c.size[1],f).compatibleWith(c))return new b("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}else return new b("tilingscheme:global-unsupported-spatial-reference",
"The tiling scheme spatial reference is not supported in global scenes");if(e&&!c.spatialReference.equals(e))return new b("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}})},"esri/layers/VectorTileLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/Error ../core/MultiOriginJSONSupport ../core/urlUtils ../core/promiseUtils ../core/lang ../request ../geometry/Extent ../geometry/SpatialReference ../portal/support/jsonContext ./TiledLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISCachedService ./support/TileInfo ./support/vectorTileLayerLoader ../views/vectorTiles/style/StyleRepository ../views/vectorTiles/SchemaHelper".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H){return function(h){function k(a,b){h.call(this);this.fullExtent=this.currentStyleInfo=null;this.operationalLayerType="VectorTileLayer";this.tileInfo=null;this.type="vector-tile";this.url=null}a(k,h);k.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?c.mixin({},{url:a},b):a};k.prototype.load=function(){var a=this,b=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var b=a.portalItem.itemUrl+"/resources/styles/root.json";return m(b,{query:{f:"json"}}).then(function(c){c.data&&a.read({url:b},r.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});this.addResolvingPromise(b);return this};Object.defineProperty(k.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo,a=a&&a.serviceUrl&&d.urlToObject(a.serviceUrl);return!a?null:this._getDefaultAttribution(a.path)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});k.prototype.writeStyleUrl=function(a,b){a&&d.isProtocolRelative(a)&&
(a="https:"+a);a&&!g.endsWith(a,"root.json")&&(a=d.join(a,"root.json"));b.styleUrl=a};k.prototype.readTileIndexType=function(a,b){return b.type};k.prototype.readTileIndexUrl=function(a,b){return d.join(this.serviceUrl,b.tileMap)};k.prototype.readTileServers=function(a,b){var c=this,e=b.tiles;this.serviceUrl&&e.forEach(function(a,b,e){e[b]=d.join(c.serviceUrl,a)});return e};k.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};k.prototype.readTileInfo256=
function(a,b){return new x(H.create256x256CompatibleTileInfo(this.tileInfo.toJSON()))};k.prototype.loadStyle=function(a){a=a||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};k.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,
b.toString()).replace(/\{x\}/gi,c.toString())};k.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new e("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};k.prototype._getSourceAndStyle=function(a){var b=this;return!a?l.reject(Error("invalid style!")):y.loadMetadata(a).then(function(a){b._set("currentStyleInfo",{serviceUrl:a.serviceUrl,
styleUrl:a.styleUrl,spriteUrl:a.spriteUrl,glyphsUrl:a.glyphsUrl,style:a.style,layerDefinition:a.layerDefinition});b._set("styleRepository",new B(a.style,a));b.read(a.layerDefinition)})};k.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);a=["World_Basemap"];if(b){var c=b[3]&&b[3].toLowerCase();if(c)for(var b=b[2]||"",e=0;e<a.length;e++){var g=a[e];if(-1<g.toLowerCase().indexOf(c))return d.normalize("//static.arcgis.com/attribution/Vector"+
b+"/"+g)}}};b([f.shared({"2d":"../views/2d/layers/VectorTileLayerView2D","3d":"../views/3d/layers/VectorTileLayerView3D"})],k.prototype,"viewModulePaths",void 0);b([f.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"attributionDataUrl",null);b([f.property({readOnly:!0})],k.prototype,"currentStyleInfo",void 0);b([f.property({type:q,readOnly:!0})],k.prototype,"fullExtent",void 0);b([f.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"serviceUrl",null);b([f.property({type:p,
dependsOn:["tileInfo"],readOnly:!0})],k.prototype,"spatialReference",null);b([f.property({readOnly:!0})],k.prototype,"styleRepository",void 0);b([f.property({readOnly:!0,dependsOn:["currentStyleInfo"],json:{writable:!0,writeAlways:!0}})],k.prototype,"styleUrl",null);b([f.write("styleUrl")],k.prototype,"writeStyleUrl",null);b([f.property({readOnly:!0})],k.prototype,"tileIndexType",void 0);b([f.read("tileIndexType",["tileIndexType","type"])],k.prototype,"readTileIndexType",null);b([f.property({readOnly:!0})],
k.prototype,"tileIndexUrl",void 0);b([f.read("tileIndexUrl",["tileIndexUrl","tileMap"])],k.prototype,"readTileIndexUrl",null);b([f.property({readOnly:!0,type:x})],k.prototype,"tileInfo",void 0);b([f.property({readOnly:!0})],k.prototype,"tileServers",void 0);b([f.read("tileServers",["tiles"])],k.prototype,"readTileServers",null);b([f.property({json:{readable:!1}})],k.prototype,"type",void 0);b([f.property({json:{origins:{webDocument:{readFrom:"styleUrl"},portalItem:{readFrom:"url"}},writable:!1,readable:!1}})],
k.prototype,"url",void 0);b([f.property({readOnly:!0})],k.prototype,"version",void 0);b([f.read("version",["version","currentVersion"])],k.prototype,"readVersion",null);b([f.property({readOnly:!0})],k.prototype,"tileInfo256",void 0);b([f.read("tileInfo256",["tileInfo"])],k.prototype,"readTileInfo256",null);return k=b([f.subclass("esri.layers.VectorTileLayer")],k)}(f.declared(t,s,u,v,h,w))})},"esri/portal/support/jsonContext":function(){define(["require","exports","../Portal","../../core/urlUtils"],
function(n,k,a,b){k.createForItem=function(c){return{origin:"portal-item",url:b.urlToObject(c.itemUrl),portal:c.portal||a.getDefault()}}})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(n,k,a,b,c,f,e,h){function d(a){if(a){var b=f.getOrigin(a);!f.canUseXhr(b)&&-1===t.indexOf(b)&&t.push(b);return a}}function l(a,b,c){if(null!=b.sources){c&&-1!==c.path.indexOf("root.json")&&
(c.path=c.path.substr(0,c.path.indexOf("root.json")),a.styleUrl=c.path);var d=q(b,c),e=b.sprite,h=b.glyphs;d&&d.url&&(d=c&&c.path?c.path:d.url,b.sprite&&!f.isAbsolute(b.sprite)&&(e=f.join(d,b.sprite)),b.glyphs&&!f.isAbsolute(b.glyphs)&&(h=f.join(d,b.glyphs)));a.style=b;a.spriteUrl=e;a.glyphsUrl=h;return m(a,b,c)}if(b.hasOwnProperty("tileInfo"))return a.layerDefinition=b,a.serviceUrl=c.path,g(a,b,c)}function g(a,b,c){if(r&&!b.hasOwnProperty("defaultStyles"))throw Error("Service definition must have 'defaultStyles' element!");
b=b.defaultStyles;f.isAbsolute(b)?a.styleUrl=f.normalize(b):a.styleUrl=f.normalize(f.join(c.path,b));d(a.styleUrl);return h(f.join(a.styleUrl,"root.json"),{responseType:"json"}).then(function(b){var c=b.data.sprite,d=b.data.glyphs;c&&!f.isAbsolute(c)&&(c=f.join(a.styleUrl,c));d&&!f.isAbsolute(d)&&(d=f.join(a.styleUrl,d));a.spriteUrl=c;a.glyphsUrl=d;return a.style=b.data})}function m(a,b,e){(b=q(b,e))||c.reject("Source isn't available in the syle object!");if(b.url)return a.serviceUrl=b.url,f.isAbsolute(a.serviceUrl)||
(a.serviceUrl=f.join(e.path,a.serviceUrl)),d(a.serviceUrl),h(a.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(b){a.layerDefinition=p(b.data);return a});a.layerDefinition=p(b);return c.resolve(a)}function q(a,b){if(!a.sources)return null;var c=a.sources,d=null;if(c.esri)d=c.esri,b&&(d.url&&!f.isAbsolute(d.url))&&(c=b.path.substring(0,b.path.lastIndexOf("/")),d.url=f.join(c,d.url));else{for(var e=0,g=Object.keys(c);e<g.length;e++){var h=g[e];if(-1!==h.toLocaleLowerCase().indexOf("street")&&
"vector"===d.type){d=c[h];break}}if(!d){e=0;for(g=Object.keys(c);e<g.length&&!(h=g[e],d=c[h],"vector"===d.type);e++);}}return d}function p(a){if(a.hasOwnProperty("tileInfo"))return a;for(var b={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},c=(b.xmax-b.xmin)/512,e=[],g=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,h=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;g<h;g++){var f=c/Math.pow(2,g);e.push({level:g,
scale:Math.floor(3779.527559055118*f),resolution:f})}a.tiles.forEach(d);return{capabilities:"TilesOnly",initialExtent:b,fullExtent:b,minScale:e[0].scale,maxScale:e[e.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:e,spatialReference:{wkid:102100}}}}var r=0,t=e.defaults&&e.defaults.io.corsEnabledServers||e.request.corsEnabledServers;k.loadMetadata=function(a){if(!a)return c.reject("invalid input URL!");var e={layerDefinition:null,
parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof a)return l(e,a,null).then(function(){return e});a=e.url=f.normalize(a);var g=e.parsedUrl=f.urlToObject(a);d(a);return h(g.path,{responseType:"json",query:b.mixin({f:"json"},g.query)}).then(function(a){return l(e,a.data,g)}).then(function(){return e})}})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(n,k,a){return function(){function b(a,
f){this.styleJSON=a;this.version=parseFloat(a.version);this.sprite=f?f.spriteUrl:a.sprite;this.glyphs=f?f.glyphsUrl:a.glyphs;this.layers=(a.layers||[]).map(b._create);this._identifyRefLayers()}b.prototype._identifyRefLayers=function(){for(var a=[],b=[],e=0,h=this.layers;e<h.length;e++){var d=h[e];if(1===d.type){var l=d.sourceLayer,l=l+("|"+JSON.stringify(d.minzoom)),l=l+("|"+JSON.stringify(d.maxzoom)),l=l+("|"+JSON.stringify(d.filter));a.push({key:l,layer:d})}2===d.type&&(l=d.sourceLayer,l+="|"+JSON.stringify(d.minzoom),
l+="|"+JSON.stringify(d.maxzoom),l+="|"+JSON.stringify(d.filter),l+="|"+JSON.stringify(d.layout["line-cap"]),l+="|"+JSON.stringify(d.layout["line-join"]),b.push({key:l,layer:d}))}this._assignRefLayers(a);this._assignRefLayers(b)};b.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,e,h=a.length,d=0;d<h;d++){var l=a[d];if(l.key===b)l.layer.refLayerId=e;else if(b=l.key,e=l.layer.id,1===l.layer.type&&!l.layer.hasPaintProperty("fill-outline-color"))for(var g=
d+1;g<h;g++){var m=a[g];if(m.key===b){if(m.layer.hasPaintProperty("fill-outline-color")){a[d]=m;a[g]=l;e=m.layer.id;break}}else break}}};b._create=function(b,f,e){f=1-(1+f)*(1/(e.length+1));switch(b.type){case "background":return new a.StyleLayer(0,b,f);case "fill":return new a.StyleLayer(1,b,f);case "line":return new a.StyleLayer(2,b,f);case "symbol":return new a.StyleLayer(3,b,f);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");
}throw Error("Unknown vector tile layer");};return b}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(n,k,a,b,c){n=function(){function f(b,c,d){this.type=b;this.id=c.id;this.source=c.source;this.sourceLayer=c["source-layer"];this.minzoom=c.minzoom;this.maxzoom=c.maxzoom;this.filter=c.filter;this.layout=c.layout;this.paint=c.paint;this.z=d;switch(b){case 0:this._layoutDefinition=a.StyleDefinition.backgroundLayoutDefinition;
this._paintDefinition=a.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=a.StyleDefinition.fillLayoutDefinition;this._paintDefinition=a.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=a.StyleDefinition.lineLayoutDefinition;this._paintDefinition=a.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=a.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=a.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}f.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=c.createFilter(this.filter)};f.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;return b&&b[a]?!0:!1};f.prototype.hasPaintProperty=function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1};f.prototype.getLayoutValue=function(a,b){var c,f=this._layoutProperties;f&&(f=f[a])&&(c=f.getValue(b));f=this._layoutDefinition[a];
void 0===c&&(c=f["default"]);"enum"===f.type&&(c=f.values.indexOf(c));return c};f.prototype.getPaintValue=function(a,b){var c,f=this._paintProperties;f&&(f=f[a])&&(c=f.getValue(b));f=this._paintDefinition[a];void 0===c&&(c=f["default"]);"enum"===f.type&&(c=f.values.indexOf(c));return c};f.prototype._parseLayout=function(a){var c={},d;for(d in a)c[d]=new b(this._layoutDefinition[d],a[d]);return c};f.prototype._parsePaint=function(a){var c={},d;for(d in a)c[d]=new b(this._paintDefinition[d],a[d]);return c};
return f}();k.StyleLayer=n;n=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=a.getLayoutValue("line-round-limit",b)}}();k.LineLayout=n;n=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=
a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.offset=a.getLayoutValue("icon-offset",b);c&&(1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment"))&&(this.rotationAlignment=0)}}();k.IconLayout=n;n=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",
b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=
a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",b);this.offset=a.getLayoutValue("text-offset",b);c&&(1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment"))&&(this.rotationAlignment=0)}}();k.TextLayout=n})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require",
"exports"],function(n,k){var a=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},
"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},
"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},
"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),
"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean",
"default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,
0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},
"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",
values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,
"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();k.StyleDefinition=a})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../Color","../GeometryUtils"],function(n,k,a,b){return function(){function c(a,b){var h;switch(a.type){case "number":h=!0;break;case "color":h=!0;b=c._parseColor(b);break;case "array":h="number"===a.value;break;default:h=!1}this.getValue=h?this._interpolate(b):this._piecewise(b)}c.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var c=b.length;if(0!==c){for(var f=0,g=0;g<c;g++)if(b[g][0]<=a)f=g;else break;return b[f][1]}}:function(){return a}};c.prototype._interpolate=
function(a){var c=a.stops;if(c){var h=a.base||1;return function(a){for(var f,g,m=c.length,q=0;q<m;q++){var k=c[q];if(k[0]<=a)f=k;else{g=k;break}}if(f&&g){q=g[0]-f[0];a-=f[0];a=1===h?a/q:(Math.pow(h,a)-1)/(Math.pow(h,q)-1);if(Array.isArray(f[1])){f=f[1];g=g[1];m=[];for(q=0;q<f.length;q++)m.push(b.interpolate(f[q],g[q],a));return m}return b.interpolate(f[1],g[1],a)}if(f)return f[1];if(g)return g[1]}}return function(){return a}};c._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){var e=
new a(b);if(e)return[e.r/255,e.g/255,e.b/255,e.a||1]}if(b&&b.stops)return b.stops=b.stops.map(function(a){return[a[0],c._parseColor(a[1])]}),b;throw Error("Incorrect color definition "+b);};return c}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(n,k){function a(a,b){a%=b;return 0<=a?a:a+b}k.C_INFINITY=Number.POSITIVE_INFINITY;k.C_PI=Math.PI;k.C_2PI=2*k.C_PI;k.C_PI_BY_2=k.C_PI/2;k.C_RAD_TO_256=128/k.C_PI;k.C_256_TO_RAD=k.C_PI/128;k.C_DEG_TO_256=256/360;
k.C_DEG_TO_RAD=k.C_PI/180;k.C_SQRT2=1.414213562;k.C_SQRT2_INV=1/k.C_SQRT2;var b=1/Math.LN2;k.positiveMod=a;k.radToByte=function(b){return a(b*k.C_RAD_TO_256,256)};k.degToByte=function(b){return a(b*k.C_DEG_TO_256,256)};k.log2=function(a){return Math.log(a)*b};k.sqr=function(a){return a*a};k.clamp=function(a,b,e){return Math.min(Math.max(a,b),e)};k.interpolate=function(a,b,e){return a*(1-e)+b*e};k.between=function(a,b,e){return a>=b&&a<=e||a>=e&&a<=b}})},"esri/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(n,k){return function(){function a(b,c,f){this._op=b;"$type"===c?(this._val=f instanceof Array?f.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(f),this._op+=11):(this._key=c,this._val=f)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var c=0,f=this._val;c<f.length;c++){var e=f[c];if(e.filter(a))return!0}return!1;case 10:c=0;for(f=this._val;c<f.length;c++)if(e=f[c],!e.filter(a))return!1;return!0;case 11:c=0;for(f=this._val;c<f.length;c++)if(e=f[c],e.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var c=b[0];if(1>=b.length)return new a(0,void 0,"any"!==c);switch(c){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,
b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+c);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require",
"exports","../../core/Error"],function(n,k,a){return function(){function b(a){this.lockedSchemaPixelSize=a}b.prototype.getCompatibleLevelRowCol=function(b){var f=b[0],e=b[1];b=b[2];if(256===this.lockedSchemaPixelSize&&0<f)f--,e>>=1,b>>=1;else if(0!==f&&512!==this.lockedSchemaPixelSize)throw new a("Cannot get a compatible tile key for the locked tiling scheme!");return[f,e,b]};b.prototype.getSchemaShift=function(a,b){var e=0,h=0;256===this.lockedSchemaPixelSize&&(a[2]%2&&(e=2*b),a[1]%2&&(h=2*b));return[e,
h]};b.prototype.adjustLevel=function(a){return 256===this.lockedSchemaPixelSize?0<a?a-1:0:a};b.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===a.rows&&256===a.cols)return a;for(var b=a.format,e=a.compressionQuality,h=a.dpi,d=a.origin,l=a.spatialReference,g=[],m,k,p=0,r=a.lods.length;p<r;p++){var t=a.lods[p];m=t.scale;k=2*t.resolution;g.push({level:t.level,scale:m,resolution:k})}return{rows:256,cols:256,dpi:h,format:b,compressionQuality:e,origin:d,spatialReference:l,lods:g}};
return b}()})},"esri/views/3d/terrain/SurfaceTilingSchemeLogic":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../core/HandleRegistry ./TilingScheme ./terrainUtils".split(" "),function(n,k,a,b,c,f,e,h,d){return function(f){function g(){f.call(this);this._changeHandles=new e}a(g,f);g.prototype.normalizeCtorArgs=function(a){this._layers=a.layers;this._extentHelper=
a.extentHelper;this._manifold=a.manifold;return{viewSpatialReference:a.viewSpatialReference}};g.prototype.initialize=function(){var a=this;this._changeHandles.add(this._layers.on("change",function(){return a._update()}));this._changeHandles.add(this._extentHelper.watch("layerViewsExtent",function(){return a._setAdHocTilingScheme()}));this._update();this.tilingSchemeLocked||this._setAdHocTilingScheme()};g.prototype.destroy=function(){this._changeHandles.destroy();this._changeHandles=null};g.prototype._update=
function(){var a=this;this._waitTask=null;if(!this.tilingSchemeLocked){var b=this._layers.find(function(b){if(d.isTiledLayer(b))return b.isResolved()&&!a._isTileInfoSupported(d.getTileInfo(b),b.fullExtent)?!1:!b.isRejected()});if(b)if(b.isResolved()){var c=new h(d.getTileInfo(b)),b=d.getKnownTiledServiceLevelCap(b.url);Infinity>b&&c.capMaxLod(b);this._lockTilingScheme(c)}else this._updateWhen(b)}};g.prototype._updateWhen=function(a){var b=this,c=a.always(function(){c===b._waitTask&&b._update()});
this._waitTask=c};g.prototype._lockTilingScheme=function(a){var b=this;if("spherical"===this._manifold){var c=a.levels.length-1;a=a.spatialReference.isWebMercator?h.makeWebMercatorAuxiliarySphere(c):h.makeWGS84WithTileSize(a.pixelSize[0],c)}this.tilingSchemeLocked=!0;this.tilingScheme=a;this._extentHelper.tilingScheme=this.tilingScheme;this._updateTiledLayerExtent();this._changeHandles.removeAll();this._changeHandles.add(this._extentHelper.watch("tiledLayersExtent",function(){return b._updateTiledLayerExtent()}))};
g.prototype._updateTiledLayerExtent=function(){this.extent=this._extentHelper.tiledLayersExtent};g.prototype._setAdHocTilingScheme=function(){if("spherical"===this._manifold)this.tilingScheme=this._extentHelper.spatialReference.isWebMercator?h.WebMercatorAuxiliarySphere:h.makeWGS84WithTileSize(256),this.extent=this._extentHelper.layerViewsExtent;else{var a=this._extentHelper.layerViewsExtent;a&&(this.tilingScheme=h.fromExtent(a,this._extentHelper.spatialReference),this.extent=a)}};g.prototype._isTileInfoSupported=
function(a,b){return null==d.checkIfTileInfoSupportedForView(a,b,this.viewSpatialReference,this._manifold)};b([c.property()],g.prototype,"tilingScheme",void 0);b([c.property()],g.prototype,"extent",void 0);b([c.property({value:!1})],g.prototype,"tilingSchemeLocked",void 0);b([c.property()],g.prototype,"viewSpatialReference",void 0);return g=b([c.subclass()],g)}(c.declared(f))})},"esri/views/3d/terrain/SphericalTile":function(){define("./TileBase ./TileGeometryFactory ../../../core/ObjectPool ../support/mathUtils ../support/earthUtils ../lib/glMatrix".split(" "),
function(n,k,a,b,c,f){var e=f.vec3d,h=c.earthRadius,d=function(a,b,c,d){c=h+c;var e=Math.cos(a);d[0]=Math.cos(b)*e*c;d[1]=Math.sin(b)*e*c;d[2]=Math.sin(a)*c};c=function(a,b,c,d){n.call(this);this.tileUp=e.create();this.obb=Array(8);this._isWebMercator=!1;for(var h=0;8>h;h++)this.obb[h]=e.create();void 0!==a&&this.init(a,b,c,d)};c.prototype=new n;c.prototype.constructor=c;c.prototype.init=function(a,c,f,k){n.prototype.init.call(this,a,c,f,k);this._isWebMercator=k.spatialReference.isWebMercator;c=this.extentWGS84Rad[0];
k=this.extentWGS84Rad[1];f=this.extentWGS84Rad[2];var p=this.extentWGS84Rad[3],r=a[0];a=b.lerp(k,p,0.5);var t=b.lerp(c,f,0.5);k=0===r?0:Math.min(Math.abs(k),Math.abs(p));this.edgeLen=(f-c)*Math.cos(k)*h;this.curvatureHeight=h-Math.sqrt(h*h-this.edgeLen*this.edgeLen/4);d(a,t,0,this.centerAtSeaLevel);e.set(this.centerAtSeaLevel,this.tileUp);e.normalize(this.tileUp);this._updateOBB();this.updateRadiusAndCenter()};c.prototype.isVisible=function(a,b){if(!this.intersectsClippingArea)return!1;if(9<this.lij[0])for(var c=
this.obb,d=0;6>d;d++){for(var e=0;8>e&&!(0>a[d][0]*c[e][0]+a[d][1]*c[e][1]+a[d][2]*c[e][2]+a[d][3]);e++);if(8===e)return!1}else if(c=this.radius,d=this.center,a[0][0]*d[0]+a[0][1]*d[1]+a[0][2]*d[2]+a[0][3]>c||a[1][0]*d[0]+a[1][1]*d[1]+a[1][2]*d[2]+a[1][3]>c||a[2][0]*d[0]+a[2][1]*d[1]+a[2][2]*d[2]+a[2][3]>c||a[3][0]*d[0]+a[3][1]*d[1]+a[3][2]*d[2]+a[3][3]>c||a[4][0]*d[0]+a[4][1]*d[1]+a[4][2]*d[2]+a[4][3]>c||a[5][0]*d[0]+a[5][1]*d[1]+a[5][2]*d[2]+a[5][3]>c)return!1;return!0};c.prototype.computeElevationBounds=
function(){n.prototype.computeElevationBounds.call(this);this._updateOBB()};c.prototype.updateRadiusAndCenter=function(){if(0===this.lij[0])e.set3(0,0,0,this.center),this.radius=h+this.elevationBounds[1];else{n.prototype.updateRadiusAndCenter.call(this);var a=Math.max(e.dist2(this.center,this.obb[0]),e.dist2(this.center,this.obb[1]));this.radius=Math.sqrt(a)}};c.prototype._numSubdivisionsAtLevel=[128,64,32,16,16,8,8,4];c.prototype.createGeometry=function(a,b,c){var d=this._isPole(this.lij[1],this.lij[0]);
a.needsUpdate=!1;return k.createSphericalGlobeTile(a.numVertsPerRow,this.extent,this.extentWGS84Rad,this._isWebMercator,a.samplerData,b,d,c)};c.prototype._updateOBB=function(){var a=this.extentWGS84Rad,b=this.obb,c;for(c=0;2>c;c++){var f=this.elevationBounds[c],k=4*c;d(a[1],a[0],f,b[k++]);d(a[3],a[0],f,b[k++]);d(a[3],a[2],f,b[k++]);d(a[1],a[2],f,b[k++])}this._isWebMercator&&(a=this._isPole(this.lij[1],this.lij[0]),2===a?(e.set3(0,0,h,b[1]),e.set3(0,0,h,b[2]),e.set3(0,0,h,b[5]),e.set3(0,0,h,b[6])):
1===a&&(e.set3(0,0,-h,b[0]),e.set3(0,0,-h,b[3]),e.set3(0,0,-h,b[4]),e.set3(0,0,-h,b[7])))};c.prototype._isPole=function(a,b){var c=0;a===(1<<b)-1&&(c+=1);0===a&&(c+=2);return c};c.Pool=new a(c,function(){},!1);return c})},"esri/views/3d/terrain/TileBase":function(){define("./terrainUtils ./TileUtils ./TerrainConst ./TileGeometryFactory ./UpsampleInfo ./ElevationData ./TilePerLayerInfo ../support/mathUtils ../lib/glMatrix ../../../core/arrayUtils".split(" "),function(n,k,a,b,c,f,e,h,d,l){var g=d.vec3d,
m=d.vec2d,q=d.vec4d,p=d.mat4d,r=n.weakAssert,t=g.create(),s=q.create(),u=q.create(),v=g.create(),w={},x=a.LayerClass.LAYER_CLASS_COUNT,y=a.LayerClass.MAP,B=a.LayerClass.ELEVATION,H=a.TileUpdateTypes;d=function(a,b,c){this.lij=[0,0,0];this.extent=q.create();this.extentWGS84Rad=q.create();this.centerAtSeaLevel=g.create();this.center=g.create();this.tileUp=v;this.elevationBounds=m.create();this.children=[null,null,null,null];this.layerInfo=Array(x);this.intersectsClippingArea=this.isWithinClippingArea=
!0;this.clippingArea=null;this._maxTesselation=0};d.prototype.init=function(b,c,d,g){this.lij[0]=b[0];this.lij[1]=b[1];this.lij[2]=b[2];g.getExtent(b[0],b[1],b[2],this.extent,this.extentWGS84Rad);this.intersectsClippingArea=this.isWithinClippingArea=!0;this.clippingArea=null;this.radius=this.edgeLen=0;this.vlevel=b?b[0]:0;c&&c.elevationBounds?m.set(c.elevationBounds,this.elevationBounds):m.set2(0,0,this.elevationBounds);this.parent=c;for(b=0;4>b;b++)this.children[b]=null;this.pendingUpdates=0;this.renderData=
null;this.renderOrder=this.screenDepth=0;this.visible=!1;this.parentSurface=d;for(b=0;b<x;b++)if(d){c=d.numLayers(b);var h;this.layerInfo[b]?(h=this.layerInfo[b],h.length=c):(h=Array(c),this.layerInfo[b]=h);for(var f=0;f<c;f++)h[f]=e.makeEmptyLayerInfo(b,h[f]),b==B&&this.findElevationBoundsForLayer(f,-1)}else this.layerInfo[b]=null;this.computeElevationBounds();this._maxTesselation=Math.min(g.pixelSize[0],a.MAX_TILE_TESSELATION)};d.prototype.dispose=function(){for(var a=0;a<x;a++)for(var b=this.layerInfo[a],
d=0;d<b.length;d++){var e=b[d];e.upsampleFromTile&&(c.Pool.release(e.upsampleFromTile),e.upsampleFromTile=null)}};d.prototype.releaseLayerResources=function(){for(var b=this.layerInfo[a.LayerClass.MAP],c=0;c<b.length;c++)b[c].releaseResources()};d.prototype.updateScreenDepth=function(a){g.set(this.center,u);u[3]=1;p.multiplyVec4(a,u,u);this.screenDepth=u[2]/u[3]};d.prototype.shouldSplit=function(a,b){var c=this.lij[0];if(1>c)return H.SPLIT;g.subtract(this.center,b,t);var d=g.length(t),e=this.edgeLen/
(2*a[0]*d),d=this.edgeLen/(2*a[2]*d),f=a[1],l=a[3],m=a[4],k=a[5];return e<f?this.vlevel!==this.lij[0]?(this.vlevel=this.lij[0],H.VSPLITMERGE):H.NONE:c>=m?(c+=Math.ceil(-h.log2(f/e)),c!==this.vlevel?(this.vlevel=c,H.VSPLITMERGE):H.NONE):6<c&&(g.scale(this.tileUp,g.dot(this.tileUp,t),s),g.subtract(s,t),g.length2(s)>this.radius*this.radius&&(g.scale(s,this.radius/g.length(s)),g.add(s,this.center),g.subtract(b,s,s),c=this.elevationBounds[1]-this.elevationBounds[0],Math.min(1,(Math.abs(g.dot(s,this.tileUp))+
0.5*c+this.curvatureHeight)/g.length(s))*d<0.1/k*l))?H.NONE:H.SPLIT};d.prototype.createElevationDataFromLERC=function(b){var c;try{c=f.createFromLERC(this.lij,this.extent,b,{noDataValue:a.ELEVATION_NODATA_VALUE})}catch(d){console.warn("Error decoding %s: %s",b.url,d.message)}return c};d.prototype.getWGS84Extent=function(){return this.extentWGS84Rad.map(h.rad2deg)};d.prototype.load=function(a){for(var b=0;b<x;b++)this.layerInfo[b]&&this._createOrUpdateAgents(0,b);a.loadTile(this)};d.prototype.unload=
function(b){this.renderData&&b.unloadTile(this);for(b=0;b<x;b++)for(var c=this.layerInfo[b],d=0;d<c.length;d++){var e=c[d];e.loadingAgent&&e.loadingAgent!==w&&(e.loadingAgent.dispose(),this.parentSurface.agentTypeByLayerIndex(d,b).Pool.release(e.loadingAgent),e.loadingAgent=null);e.pendingUpdates=0}this.pendingUpdates&=~a.TileUpdateTypes.UPDATE_GEOMETRY;this.pendingUpdates&=~a.TileUpdateTypes.UPDATE_TEXTURE};d.prototype.updateClippingStatus=function(a){l.equals(a,this.clippingArea)||(a?(this.intersectsClippingArea=
this.intersectsExtent(a),this.isWithinClippingArea=this.isWithinExtent(a)):this.isWithinClippingArea=this.intersectsClippingArea=!0,this.clippingArea=a,this.renderData&&this.updateGeometry())};d.prototype.updateVisibility=function(a,b,c){a=c||this.isVisible(a,b)&&this.intersectsClippingArea;if(a!==this.visible){this.visible=a;b=this.layerInfo[0];for(c=0;c<b.length;c++){var d=b[c];d.loadingAgent&&d.loadingAgent!==w&&d.loadingAgent.setSuspension(!a)}}return a};d.prototype.getLayerInfo=function(a,b){return this.layerInfo[b][a]};
d.prototype.hasLayerData=function(a,b){var c=this.layerInfo[b][a];return c&&c.data};d.prototype.tileDataAvailable=function(a,b,c){return(b=this.layerInfo[c][b].tilemap)?"unavailable"!==b.getAvailability(a.lij[1],a.lij[2]):!0};d.prototype.requestLayerData=function(b,c,d){a.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d requested by tile %s",this.lij.toString(),c,b,d.tile.lij.toString());var e=this.layerInfo[c][b];if(-1<e.waitingAgents.indexOf(d))return console.warn("agent already requested this piece of map data (tile %s, agent tile %s, layer: %d/%d)",
this.lij.toString(),d.tile.lij.toString(),c,b),!0;if(e.data)return console.warn("agent requested existing data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),d.tile.lij.toString(),c,b),e.waitingAgents.push(d),setTimeout(d.dataArrived.bind(d,this),0),!0;if(e.pendingUpdates&H.DECODE_LERC)return e.waitingAgents.push(d),!0;e.waitingAgents.push(d);if(!e.requestPromise){var g=this.parentSurface.requestTileData(this,b,c);b=function(){e.requestPromise===g&&(e.requestPromise=null)};e.requestPromise=
g;g.then(b,b)}return e.requestPromise?!0:!1};d.prototype.descendants=function(a){a||(a=[]);for(var b=0;4>b;b++){var c=this.children[b];c&&(c.descendants(a),a.unshift(this.children[b]))}return a};d.prototype.isLij=function(a){return this.lij[0]===a[0]&&this.lij[1]===a[1]&&this.lij[2]==a[2]};d.prototype.findByLij=function(a){if(this.isLij(a))return this;for(var b=0;4>b;b++){var c=this.children[b];if(c&&(c=c.findByLij(a)))return c}return null};d.prototype.unrequestLayerData=function(b,c,d,e){a.TILE_LOADING_DEBUGLOG&&
console.log("tile %s layer %d/%d canceled by tile %s",this.lij.toString(),c,b,d.tile.lij.toString());var g=this.layerInfo[c][b],h=g.waitingAgents;d=h.indexOf(d);r(-1<d,"agent has not requested this piece of map data");h[d]=h[h.length-1];h.length--;if(1>h.length){if(c===y&&(e=e?e[b]:this.parentSurface.layerViewByIndex(b,y),n.isVectorTileLayerView(e))){g.requestPromise&&g.requestPromise.cancel("cancel");return}r(g.requestPromise||g.rawData,"no pending operations on layerInfo that agents were waiting for");
g.requestPromise&&(this.parentSurface.cancelRequest(g.requestPromise),g.requestPromise=null);a.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d request/loading canceled",this.lij.toString(),c,b)}};d.prototype.dataArrived=function(a,b,c){a=this.layerInfo[b][a];a.data=c;for(c=0;c<a.waitingAgents.length;c++)a.waitingAgents[c].dataArrived(this);a.waitingAgents.length=0};d.prototype.dataMissing=function(a,b,c){c.notInTilemap||console.error("Tile %s layer %d/%d error",this.lij.toString(),b,a);a=
this.layerInfo[b][a];for(b=0;b<a.waitingAgents.length;b++)a.waitingAgents[b].dataMissing(this);a.waitingAgents.length=0};d.prototype.updateTexture=function(b){this.renderData&&(b?this.parentSurface._renderer.updateTileTexture(this):(this.pendingUpdates|=a.TileUpdateTypes.UPDATE_TEXTURE,this.parentSurface._pendingUpdates=!0))};d.prototype.computeElevationBounds=function(){m.set2(Number.MAX_VALUE,-Number.MAX_VALUE,this.elevationBounds);for(var a=this.layerInfo[B],b=!1,c=0;c<a.length;c++){var d=a[c];
d.elevationBounds&&(this.elevationBounds[0]=Math.min(this.elevationBounds[0],d.elevationBounds[0]),this.elevationBounds[1]=Math.max(this.elevationBounds[1],d.elevationBounds[1]),b=!0)}b||m.set2(0,0,this.elevationBounds);this.updateRadiusAndCenter()};d.prototype.updateRadiusAndCenter=function(){g.scale(this.tileUp,0.5*(this.elevationBounds[0]+this.elevationBounds[1]),s);g.add(this.centerAtSeaLevel,s,this.center)};d.prototype.findElevationBoundsForLayer=function(b,c){var d=this.layerInfo[B][b];if(!d.elevationBounds||
d.elevationBounds[2]<c){var e=this.parentSurface.layerViewByIndex(b,B);if(k.fallsWithinLayer(this,e,!1)){e=!1;if(d.data)m.set(d.data.bounds,s),s[2]=this.lij[0],e=!0;else{for(var h=this.parent,f=0,l=null,q=d.data;h&&(!q||f<a.ELEVATION_DESIRED_RESOLUTION_LEVEL);){f=this.vlevel-h.lij[0];l=q||l;q=h.layerInfo[B][b].data;if(!q&&l&&f>=a.ELEVATION_DESIRED_RESOLUTION_LEVEL)break;h=h.parent}if(q=q||l)q.computeMinMaxValue(this.lij[0],this.lij[1],this.lij[2],s),Infinity!==s[0]&&(s[2]=q.level,e=!0)}e&&(d.elevationBounds?
g.set(s,d.elevationBounds):d.elevationBounds=[s[0],s[1],s[2]])}}};d.prototype.updateGeometry=function(){this.pendingUpdates|=a.TileUpdateTypes.UPDATE_GEOMETRY;this.parentSurface._pendingUpdates=!0};d.prototype.modifyLayers=function(a,b,c,d){for(var g=b.length,h=this.layerInfo[c],f=Array(g),l=0;l<h.length;l++){var m=h[l];m.loadingAgent&&m.loadingAgent!==w&&(m.loadingAgent.dispose(d),this.parentSurface.agentTypeByLayerIndex(l,c).Pool.release(m.loadingAgent),m.loadingAgent=null);m.waitingAgents.length=
0}if(c===y)for(l=0;l<h.length;l++)void 0===a[l]&&h[l].releaseResources();for(l=0;l<g;l++)a=b[l],f[l]=-1<a?h[a]:e.makeEmptyLayerInfo(c);this.layerInfo[c]=f};d.prototype.restartAgents=function(b){if(this.renderData)if(this._createOrUpdateAgents(0,b),b===B){this.updateGeometry();b=this.layerInfo[b];for(var c=0;c<b.length;c++)b[c].pendingUpdates|=a.TileUpdateTypes.UPDATE_GEOMETRY;this.parentSurface._pendingUpdates=!0}else this.updateTexture(!0)};d.prototype.updateAgents=function(a){if(this.renderData){for(var b=
this.layerInfo[a],c=0;c<b.length;c++){var d=b[c];d.loadingAgent===w&&(d.loadingAgent=null)}this._createOrUpdateAgents(0,a)}};d.prototype.agentDone=function(a,b){var c=this.layerInfo[b],d=c[a];d.loadingAgent=w;!d.data&&!d.upsampleFromTile&&a<c.length-1&&this._createOrUpdateAgents(a+1,b)};d.prototype._createOrUpdateAgents=function(a,b){var c;c=b===B?!1:!this.visible;for(var d=a,e=this.layerInfo[b];d<e.length;){var g=e[d],h=!1,f=this.parentSurface.layerViewByIndex(d,b);if(null!==g.loadingAgent&&g.loadingAgent!==
w)h=g.loadingAgent.update();else if(g.loadingAgent!==w&&k.fallsWithinLayer(this,f,!1)){var l=this.parentSurface.agentTypeByLayerIndex(d,b),m=l.Pool.acquire();(h=m.init(this,d,b,c))?g.loadingAgent=m:(l.Pool.release(m),g.loadingAgent=w)}if(h&&!f.isTransparent)break;d++}};d.prototype.geometryState=function(c){var d,e=this._getElevationInfo(c?c.samplerData:null),g=this.lij[0],f=!1;e.samplerData?(d=this.vlevel-g,d=Math.max(g-e.maxTileLevel,a.ELEVATION_DESIRED_RESOLUTION_LEVEL-d),g=this._maxTesselation,
d=h.clamp((g>>d)+1,2,g+1)):d=8>g?this._numSubdivisionsAtLevel[g]+1:2;d=b.supportedNumVertsPerRow(d);g=this.clippingArea;if(!this.intersectsClippingArea||this.isWithinClippingArea)g=null;c?(c.numVertsPerRow!==d&&(c.numVertsPerRow=d,f=!0),e.changed&&(c.samplerData=e.samplerData,f=!0),l.equals(c.clippingArea,g)||(c.clippingArea=g,f=!0),c.needsUpdate=f):c={numVertsPerRow:d,samplerData:e.samplerData,needsUpdate:!0,clippingArea:g};return c};d.prototype._getElevationInfo=function(a){for(var b=this.layerInfo[B],
c=b.length,d=Array(c),e=0,g=0,h=!1,f=0;f<c;f++){var l=b[f];if(l.upsampleFromTile){var l=l.upsampleFromTile.tile,m=l.layerInfo[B][f].data;if(!a||a[e]!==m.samplerData)h=!0;d[e++]=m.samplerData;g=Math.max(g,l.lij[0])}else if(l.data&&(m=this.parentSurface.layerViewByIndex(f,B),k.fallsWithinLayer(this,m,!1))){if(!a||a[e]!==l.data.samplerData)h=!0;d[e++]=l.data.samplerData;g=this.lij[0]}}a&&a.length!==e&&(h=!0);0<e?d.length=e:d=null;return{changed:h,samplerData:d,maxTileLevel:g}};d.prototype.isWithinExtent=
function(a){var b=this.extent;return b[0]>=a[0]&&a[2]>=b[2]&&b[1]>=a[1]&&a[3]>=b[3]};d.prototype.intersectsExtent=function(a){var b=this.extent;return b[2]>=a[0]&&a[2]>=b[0]&&b[3]>=a[1]&&a[3]>=b[1]};return d})},"esri/views/3d/terrain/ElevationData":function(){define(["require","exports","../../../layers/support/rasterFormats/LercCodec","./TerrainConst","../support/mathUtils"],function(n,k,a,b,c){return function(){function f(a,b,c,f){this.samplerData=null;this.level=a;this.i=b;this.j=c;this.extent=
f}f.prototype.computeMinMaxValue=function(a,h,d,f){var g=Infinity,m=-Infinity;a-=this.level;var k=Math.pow(2,a);if(Math.floor(h/k)===this.i&&Math.floor(d/k)===this.j&&0<a){var p=this.samplerData.width,r=this.samplerData.pixelData,t=0.5*b.ELEVATION_NODATA_VALUE;a=(p-1)/k;d=(d-this.j*k)*a;h=(h-this.i*k)*a;if(1>a){var k=Math.floor(d),s=Math.floor(h),n=k+s*p,v=r[n],w=r[n+1],x=r[n+p],n=r[n+p+1];if(v+w+x+n<t)return g=c.bilerp(v,w,x,n,d-k,h-s),m=c.bilerp(v,w,x,n,d-k+a,h-s),p=c.bilerp(v,w,x,n,d-k,h-s+a),
a=c.bilerp(v,w,x,n,d-k+a,h-s+a),f[0]=Math.min(g,m,p,a),f[1]=Math.max(g,m,p,a),f;d=k;h=s;a=1}else d=Math.floor(d),h=Math.floor(h),a=Math.ceil(a);for(k=d;k<=d+a;k++)for(s=h;s<=h+a;s++)n=k+s*p,v=r[n],v<t?(g=Math.min(g,v),m=Math.max(m,v)):(g=0<g?0:g,m=0>m?0:m)}f[0]=g;f[1]=m;return f};f.createFromLERC=function(b,c,d,l){d=a.decode(d,l);b=new f(b[0],b[1],b[2],c);b.samplerData={pixelData:d.pixelData,width:d.width,height:d.height,minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,safeWidth:0.99999999*
(d.width-1),dx:(d.width-1)/(b.extent[2]-b.extent[0]),dy:(d.width-1)/(b.extent[3]-b.extent[1]),x0:b.extent[0],y1:b.extent[3]};b.bounds=[b.samplerData.minValue,-3E38<b.samplerData.maxValue?b.samplerData.maxValue:0];return b};return f}()})},"esri/views/3d/terrain/TilePerLayerInfo":function(){define(["require","exports","./TerrainConst","../../webgl/Texture","../../vectorTiles/VectorTileDisplayObject"],function(n,k,a,b,c){return function(){function f(a){this.waitingAgents=[];this.rawData=this.requestPromise=
this.loadingAgent=this.upsampleFromTile=this.tilemapRequest=this.tilemapData=this.data=null;this.pendingUpdates=0;this.elevationBounds=void 0;this.init(a)}f.prototype.init=function(b){this.waitingAgents.length=0;this.rawData=this.requestPromise=this.loadingAgent=this.upsampleFromTile=this.tilemapRequest=this.tilemapData=this.data=null;this.pendingUpdates=0;b===a.LayerClass.ELEVATION&&(this.elevationBounds=null)};f.prototype.releaseResources=function(){this.waitingAgents.length=0;this.rawData=this.requestPromise=
this.loadingAgent=this.upsampleFromTile=this.tilemapRequest=this.tilemapData=null;this.pendingUpdates=0;var a=this.data;a&&(a instanceof b?a.dispose():a instanceof c&&a.dispose())};f.makeEmptyLayerInfo=function(a,b){return b?(b.init(a),b):new f(a)};return f}()})},"esri/views/3d/terrain/PlanarTile":function(){define(["./TileBase","./TileGeometryFactory","../../../core/ObjectPool","../support/mathUtils","../lib/glMatrix"],function(n,k,a,b,c){var f=c.vec3d.createFrom(0,0,1);c=function(a,b,c,l){n.call(this);
this.tileUp=f;void 0!==a&&this.init(a,b,c,l)};c.prototype=new n;c.prototype.constructor=c;c.prototype.init=function(a,c,d,f){n.prototype.init.call(this,a,c,d,f);this.edgeLen=this.extent[2]-this.extent[0];this.curvatureHeight=0;this.centerAtSeaLevel[0]=b.lerp(this.extent[0],this.extent[2],0.5);this.centerAtSeaLevel[1]=b.lerp(this.extent[1],this.extent[3],0.5);this.centerAtSeaLevel[2]=0;this.updateRadiusAndCenter()};c.prototype.updateRadiusAndCenter=function(){n.prototype.updateRadiusAndCenter.call(this);
var a=(this.extent[2]-this.extent[0])*Math.SQRT1_2,b=0.5*(this.elevationBounds[0]-this.elevationBounds[1]);this.radius=Math.sqrt(a*a+b*b)};c.prototype.isVisible=function(a){if(!this.intersectsClippingArea)return!1;var b=this.extent[0],c=this.extent[1],f=this.elevationBounds[0],g=this.extent[2],m=this.extent[3],k=this.elevationBounds[1];return 0<a[0][0]*(0<a[0][0]?b:g)+a[0][1]*(0<a[0][1]?c:m)+a[0][2]*(0<a[0][2]?f:k)+a[0][3]||0<a[1][0]*(0<a[1][0]?b:g)+a[1][1]*(0<a[1][1]?c:m)+a[1][2]*(0<a[1][2]?f:k)+
a[1][3]||0<a[2][0]*(0<a[2][0]?b:g)+a[2][1]*(0<a[2][1]?c:m)+a[2][2]*(0<a[2][2]?f:k)+a[2][3]||0<a[3][0]*(0<a[3][0]?b:g)+a[3][1]*(0<a[3][1]?c:m)+a[3][2]*(0<a[3][2]?f:k)+a[3][3]||0<a[4][0]*(0<a[4][0]?b:g)+a[4][1]*(0<a[4][1]?c:m)+a[4][2]*(0<a[4][2]?f:k)+a[4][3]||0<a[5][0]*(0<a[5][0]?b:g)+a[5][1]*(0<a[5][1]?c:m)+a[5][2]*(0<a[5][2]?f:k)+a[5][3]?!1:!0};c.prototype._numSubdivisionsAtLevel=[2,2,2,2,2,2,2,2];c.prototype.createGeometry=function(a,b,c){a.needsUpdate=!1;return k.createPlanarGlobeTile(a.numVertsPerRow,
this.extent,a.samplerData,b,c,a.clippingArea)};c.Pool=new a(c,function(){},!1);return c})},"esri/views/3d/terrain/TilemapOnlyTile":function(){define(["./TerrainConst","./TileBase"],function(n,k){var a=function(a){this.lij=a;this.layerInfo=Array(n.LayerClass.LAYER_CLASS_COUNT)};a.prototype.tileDataAvailable=k.prototype.tileDataAvailable;a.prototype.modifyLayers=function(a,c,f){a=c.length;for(var e=this.layerInfo[f],h=Array(a),d=0;d<a;d++){var l=c[d];h[d]=-1<l?e[l]:{tilemap:null,tilemapRequest:null,
pendingUpdates:0}}this.layerInfo[f]=h};return a})},"esri/views/3d/terrain/MapTileAgent":function(){define(["./TileAgentBase","./TileUtils","./UpsampleInfo","../../../core/ObjectPool"],function(n,k,a,b){var c=function(){n.apply(this,arguments)};c.prototype=new n;c.prototype.constructor=c;c.prototype.dataArrived=function(a){a!==this.tile?this._setUpsamplingTile(a):this.tile.updateTexture();this._dataRequested=null;a!==this.tile&&this._requestNext()};c.prototype._findNextDownload=function(){var a,b=
this.layerIdx,c=this.layerClass,d=this.tile.parentSurface.layerViewByIndex(b,c),l=d.minDataLevel,g=d.maxDataLevel;if(this._tileLayerInfo.data||l>this.tile.lij[0])a=null;else{for(var m=0,q=this.tile,p=this.tile.parentSurface,r=p.getTilemapTile(q),p=p.tilemapStats,t=!1;q&&4>=m&&k.fallsWithinLayer(q,d,!1)&&q.lij[0]>=l;){if(q.layerInfo[c][b].data){this._setUpsamplingTile(q);break}r&&!r.tileDataAvailable(q,b,c)?t=!0:q.lij[0]<=g&&(a=q);q=q.parent;r=r?r.parent:null;m++}!a&&t&&p.tilesNotPresent++}return a};
c.prototype._setUpsamplingTile=function(b){this._tileLayerInfo.upsampleFromTile&&this._tileLayerInfo.upsampleFromTile.tile===b||(this._tileLayerInfo.upsampleFromTile&&a.Pool.release(this._tileLayerInfo.upsampleFromTile),this._tileLayerInfo.upsampleFromTile=k.computeUpsampleInfoForAncestor(this.tile,b),this.tile.updateTexture())};c.Pool=new b(c,function(){},!1);return c})},"esri/views/3d/terrain/TileAgentBase":function(){define(["./UpsampleInfo"],function(n){var k=Error("Abstract method called on TileAgentBase"),
a=function(){};a.prototype.init=function(a,b,e,h){this.tile=a;this.layerIdx=b;this.layerClass=e;this._tileLayerInfo=a.getLayerInfo(b,e);this._dataRequested=null;this.suspended=h;if(!a.data)return(a=this._findAncestorWithData())?(this._setUpsamplingTile(a.tile),n.Pool.release(a)):(this._tileLayerInfo.upsampleFromTile&&n.Pool.release(this._tileLayerInfo.upsampleFromTile),this._tileLayerInfo.upsampleFromTile=null),this._requestNext(!0)};a.prototype.dispose=function(a){this._dataRequested&&(this._dataRequested.unrequestLayerData(this.layerIdx,
this.layerClass,this,a),this._dataRequested=null);this._tileLayerInfo=this.tile=null};a.prototype.setSuspension=function(a){a!==this.suspended&&((this.suspended=a)?this._dataRequested&&(this._dataRequested.unrequestLayerData(this.layerIdx,this.layerClass,this),this._dataRequested=null):this._tileLayerInfo.data||this.update())};a.prototype.update=function(){var a=this._findAncestorWithData();a&&this._tileLayerInfo.upsampleFromTile&&a.tile!==this._tileLayerInfo.upsampleFromTile.tile?this._setUpsamplingTile(a.tile):
a&&n.Pool.release(a);return this._requestNext()};a.prototype.dataArrived=function(a){throw k;};a.prototype.dataMissing=function(a){this._dataRequested=null;this._agentDone()};a.prototype._agentDone=function(){this.tile.agentDone(this.layerIdx,this.layerClass);this.dispose()};a.prototype._requestNext=function(a){if(this.suspended)return!0;var b=this._findNextDownload();if(this._dataRequested){if(b===this._dataRequested)return!0;this._dataRequested.unrequestLayerData(this.layerIdx,this.layerClass,this);
this._dataRequested=null}b?b.requestLayerData(this.layerIdx,this.layerClass,this)&&(this._dataRequested=b):a||this._agentDone();return!!this._dataRequested};a.prototype._findAncestorWithData=function(){return b(this.tile,this.layerIdx,this.layerClass,1,0,0,0)};var b=function(a,f,e,h,d,l,g){if(!a.parent||6<g)return null;h*=0.5;d*=0.5;l*=0.5;a.lij[2]&1&&(d+=0.5);0===(a.lij[1]&1)&&(l+=0.5);return a.parent.hasLayerData(f,e)?(f=n.Pool.acquire(),f.init(a.parent,d,l,h),f):b(a.parent,f,e,h,d,l,g+1)};a.prototype._findNextDownload=
function(){throw k;};return a})},"esri/views/3d/terrain/ElevationTileAgent":function(){define(["./TileAgentBase","./TerrainConst","./UpsampleInfo","../../../core/ObjectPool"],function(n,k,a,b){var c=function(){n.apply(this,arguments)};c.prototype=new n;c.prototype.constructor=c;c.prototype.dataArrived=function(a){a!==this.tile?this._setUpsamplingTile(a):this.updateGeometry();this._dataRequested=null;this._requestNext()};c.prototype.updateGeometry=function(){this._tileLayerInfo.pendingUpdates|=k.TileUpdateTypes.UPDATE_GEOMETRY;
this.tile.updateGeometry()};c.prototype._findAncestorWithData=function(){for(var b=this.layerClass,c=this.layerIdx,h=this.tile,d=h.vlevel,l;h&&(!h.layerInfo[b][c].data||!(l=h,d-h.lij[0]>=k.ELEVATION_DESIRED_RESOLUTION_LEVEL));)h=h.parent;return l?(b=a.Pool.acquire(),b.init(l,0,0,1),b):null};c.prototype._findNextDownload=function(){var a,b=this.layerIdx,c=this.layerClass,d=this.tile.parentSurface.layerViewByIndex(b,c),l=d.minDataLevel,d=d.maxDataLevel,g=k.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-
this.tile.lij[0]),m=4+g;if(this._tileLayerInfo.data||this.tile.lij[0]<l)a=null;else{for(var q=this.tile,p=q.lij[0],r=0,t=this._tileLayerInfo.upsampleFromTile?this._tileLayerInfo.upsampleFromTile.tile.lij[0]:-1,s=this.tile.parentSurface,n=s.getTilemapTile(q),s=s.tilemapStats,v=!1;q&&r<=m&&q.lij[0]>=l;){if(q.layerInfo[this.layerClass][this.layerIdx].data&&p-q.lij[0]>=g){q.lij[0]>t&&this._setUpsamplingTile(q);break}n&&!n.tileDataAvailable(q,b,c)?(v=!0,a=null):q.lij[0]<=d&&(a=q);q=q.parent;n=n?n.parent:
null;r++}a&&(p-a.lij[0]<g&&this._tileLayerInfo.upsampleFromTile)&&(a=null);!a&&v&&s.tilesNotPresent++}return a};c.prototype._setUpsamplingTile=function(b){this._tileLayerInfo.upsampleFromTile&&a.Pool.release(this._tileLayerInfo.upsampleFromTile);var c=a.Pool.acquire();c.init(b,0,0,1);this._tileLayerInfo.upsampleFromTile=c;this.updateGeometry()};c.Pool=new b(c,function(){},!1);return c})},"esri/views/3d/layers/graphics/LabelManager":function(){define("../../../../core/declare ../../../../core/watchUtils ../../support/PreallocArray ../../lib/glMatrix ../../webgl-engine/lib/Util ../../webgl-engine/materials/HUDMaterial".split(" "),
function(n,k,a,b,c,f){function e(a,b){return b.posView-a.posView}var h=b.mat4d,d=b.vec3d,l=b.vec2d,g=b.vec4d,m=c.lerp,q=c.VertexAttrConstants,p=[[-1,-1],[1,-1],[1,1],[-1,1]],r=g.create(),t=g.create(),s=g.create(),u=g.create(),v=l.create(),w=l.create(),x=g.create(),y=g.create(),B=g.create(),H=d.create(),D=l.create(),I=g.create(),A=d.create(),z=d.create(),E=h.create(),C=d.create(),J=g.create(),F=new a(100);b=function(a,b){this.constructor=a;this.releaser=b;this.list=[];this.currentIndex=0};b.prototype.alloc=
function(){this.currentIndex>=this.list.length&&this.list.push(this.constructor.apply(this,arguments));return this.list[this.currentIndex++]};b.prototype.freeAll=function(a){a=this.currentIndex;for(var b=this.releaser,c=this.list;0<=--a;)b(c[a]);this.currentIndex=0};var G=new b(function(){return{labelGraphics:null,c3dGraphic:null,positions:[l.create(),l.create(),l.create(),l.create()],xMin:0,xMax:0,yMin:0,yMax:0,posView:0,layerView:null,labelId:0}},function(a){a.layerGraphics=null;a.c3dGraphic=null;
a.layerView=null});return n(null,{constructor:function(a){this.layerViews=[];this.view=a;this.stage=a._stage;this._deconflictTimeoutId=0;this._cameraListener=k.on(a,"navigation","targetViewChanged",this._targetViewChanged.bind(this));this._viewReadyWatcher=a.watch("ready",function(a){!a&&this._deconflictTimeoutId&&(clearTimeout(this._deconflictTimeoutId),this._deconflictTimeoutId=0)}.bind(this))},destroy:function(){this._cameraListener.remove();0!==this._deconflictTimeoutId&&(clearTimeout(this._deconflictTimeoutId),
this._deconflictTimeoutId=0);this._viewReadyWatcher.remove()},addSceneServiceLayerView:function(a){this.layerViews.push(a)},setDirty:function(){this._deconflictLabelsTimeout(10)},setInitialLabelGraphicState:function(a){a.setVisibilityFlag("VISIBILITY_LABELMANAGER",!1)},removeSceneServiceLayerView:function(a){a=this.layerViews.indexOf(a);0<=a&&this.layerViews.splice(a,1)},_drawPoly:function(a,b,c){a.beginPath();a.lineWidth="1";a.strokeStyle=c;a.moveTo(b[0][0],b[0][1]);for(c=1;4>c;c++)a.lineTo(b[c][0],
b[c][1]),a.stroke();a.lineTo(b[0][0],b[0][1]);a.stroke();a.closePath()},_tmp_vec:l.create(),_doesIntersectExistingPoly:function(a){var b=this._tmp_vec,c=a.positions,d={},e,g,h,f,m,k,q,p,r,s,t,x,v,y;for(e=Math.floor(a.xMin/this._accBinsSizeX);e<=Math.floor(a.xMax/this._accBinsSizeX);e++)if(!(0>e||e>=this._accBinsNumX))for(g=Math.floor(a.yMin/this._accBinsSizeY);g<=Math.floor(a.yMax/this._accBinsSizeY);g++)if(!(0>g||g>=this._accBinsNumY)){h=this._accBins[e][g];f=0;a:for(;f<h.length;f++)if(m=h.data[f],
null==d[m.labelId]){d[m.labelId]=!0;m=m.positions;this._accNumTests++;for(p=0;2>p;p++){k=0===p?c:m;q=0===p?m:c;v=0;b:for(;4>v;v++){r=k[v];s=k[(v+1)%4];t=k[(v+2)%4];b[0]=s[0]-r[0];b[1]=s[1]-r[1];s=l.normalize(b);x=s[1];s[1]=s[0];s[0]=-x;x=s[0]*r[0]+s[1]*r[1];y=s[0]*t[0]+s[1]*t[1]<x;for(r=0;4>r;r++)if(t=q[r],t=s[0]*t[0]+s[1]*t[1],y&&t<x||!y&&t>x)continue b;continue a}}return!0}}return!1},_accBinsNumX:15,_accBinsNumY:20,_accBinsSizeX:0,_accBinsSizeY:0,_accBins:null,_accNumTests:0,_initBins:function(b,
c){var d,e,g;if(null==this._accBins){this._accBins=[];for(d=0;d<this._accBinsNumX;d++){this._accBins.push([]);g=this._accBins[this._accBins.length-1];for(e=0;e<this._accBinsNumY;e++)g.push(new a(10))}}for(d=0;d<this._accBinsNumX;d++)for(e=0;e<this._accBinsNumY;e++)this._accBins[d][e].clear();this._accBinsSizeX=b/this._accBinsNumX;this._accBinsSizeY=c/this._accBinsNumY;this._accNumTests=0},_addToBins:function(a){var b,c;for(b=Math.floor(a.xMin/this._accBinsSizeX);b<=Math.floor(a.xMax/this._accBinsSizeX);b++)if(!(0>
b||b>=this._accBinsNumX))for(c=Math.floor(a.yMin/this._accBinsSizeY);c<=Math.floor(a.yMax/this._accBinsSizeY);c++)0>c||c>=this._accBinsNumY||this._accBins[b][c].push(a)},_accDrawDebug:function(a){var b=[l.create(),l.create(),l.create(),l.create()],c=0,d,e,g,h,f,m,k;for(d=0;d<this._accBinsNumX;d++)for(e=0;e<this._accBinsNumY;e++)g=this._accBins[d][e],c+=g.length,h=d*this._accBinsSizeX,f=(d+1)*this._accBinsSizeX,m=e*this._accBinsSizeY,k=(e+1)*this._accBinsSizeY,b[0][0]=h,b[0][1]=m,b[1][0]=f,b[1][1]=
m,b[2][0]=f,b[2][1]=k,b[3][0]=h,b[3][1]=k,a.fillText(g.length.toFixed(),h+5,m+15),this._drawPoly(a,b,"blue");a.fillText("total totalShownLabels: "+c,70,40)},_targetViewChanged:function(){this._deconflictLabelsTimeout()},_deconflictLabelsTimeout:function(a){0===this._deconflictTimeoutId&&(this._deconflictTimeoutId=setTimeout(this._deconflictLabels.bind(this),a||200))},_deconflictLabels:function(){var a=this.view;clearTimeout(this._deconflictTimeoutId);this._deconflictTimeoutId=0;G.freeAll();var b=
a.navigation.targetCamera,c=b.viewMatrix,k=1/Math.tan(b.fovX/2),n=b.projectionMatrix,Q=b.fullWidth,S=b.fullHeight;F.clear();for(var Y={},ia=!1,X=0;X<this.layerViews.length;X++){var aa=this.layerViews[X];if(null!=aa.layerLabelsEnabled&&aa.layerLabelsEnabled()&&!(null==aa.getGraphics3DGraphics||null==aa.getGraphics3DGraphicsKeys)){ia||(this._initBins(Q,S),ia=!0);for(var ba=aa.getGraphics3DGraphics(),R=aa.getGraphics3DGraphicsKeys(),M=0;M<R.length;M++){var T=ba[R[M]];if(!(null==T._labelGraphics||1>T._labelGraphics.length)&&
T.areVisibilityFlagsSet(void 0,"VISIBILITY_LABELMANAGER")){var Z=T._labelGraphics[0],L=Z.stageObject,P=L.getGeometryRecord(0);if(null!=P){var W=P.materials[0];if(!(null==W||!(W instanceof f)||null==P.origin)){var a=c,L=L.getCenter(),O=P.origin.vec3;g.set4(L[0]-O[0],L[1]-O[1],L[2]-O[2],1,r);h.translate(a,O,E);a=E;h.multiplyVec4(a,r,t);for(var ea=P.geometry.getData().getVertexAttr()[q.AUXPOS1],O=0;3>O;O++)t[O]+=ea.data[O];h.multiplyVec4(n,t,s);g.scale(s,1/Math.abs(s[3]),u);l.set2(m(0,Q,0.5+0.5*u[0]),
m(0,S,0.5+0.5*u[1]),D);if(-1>u[0]||-1>u[1]||-1>u[2]||1<=u[0]||1<=u[1]){a=!1;for(P=0;P<T._labelGraphics.length;P++)a=a||T._labelGraphics[P].setVisibilityFlag("VISIBILITY_LABELMANAGER",!1);a&&(Y[aa]=!0)}else{O=W.getParams();W=P.geometry.getData().getVertexAttr()[q.SIZE].data;l.subtract(O.anchorPos,[0.5,0.5],v);l.scale(O.screenOffset,0.5,w);P=G.alloc();if(O.direction){var $=d.set3(Z.geometry.normal[0],Z.geometry.normal[1],Z.geometry.normal[2],A),ea=d.normalize(d.subtract(b.eye,b.center,x),x),da=d.normalize(d.set(O.direction,
z)),fa,Z=0;d.scale(da,d.dot(da,ea),H);d.subtract(ea,H,H);d.normalize(H);fa=Math.abs(d.dot(H,$));0.985>Math.abs(d.dot(ea,da))&&0.5>fa?0.422>fa?(ea=da,fa=$,Z=0.5):(ea=da,fa=C,d.cross(da,H,fa),Z=d.dot(fa,$)/2):(ea=da,fa=d.normalize(d.cross($,da)));$=2*(d.dist(b.eye,L)/k/b.width);L=$*O.screenMinMaxSize[0];da=$*O.screenMinMaxSize[1];O.worldScale?($=1,0<L&&L>W[1]&&($=L/W[1]),0<da&&W[1]>da&&($=da/W[1])):$=0.5*s[3]/Q;for(O=0;4>O;O++)g.set(r,J),d.add(J,d.scale(ea,p[O][0]*W[0]*$,y)),d.add(J,d.scale(fa,(p[O][1]+
Z)*W[1]*$,B)),h.multiplyVec4(a,J,x),L=h.multiplyVec4(n,x,y),g.scale(L,1/Math.abs(L[3]),L),P.positions[O][0]=m(0,Q,0.5+0.5*L[0]),P.positions[O][1]=S-m(0,S,0.5+0.5*L[1])}else if(O.worldScale){$=2*(d.dist(b.eye,L)/k/b.width);L=$*O.screenMinMaxSize[0];da=$*O.screenMinMaxSize[1];$=1;0<L&&L>W[1]&&($=L/W[1]);0<da&&W[1]>da&&($=da/W[1]);for(O=0;4>O;O++)I[0]=t[0]+(0.5*p[O][0]-v[0])*W[0]*$,I[1]=t[1]+(0.5*p[O][1]-v[1])*W[1]*$,L=h.multiplyVec4(n,I,x),g.scale(L,1/Math.abs(L[3]),L),P.positions[O][0]=m(0,Q,0.5+0.5*
L[0])+w[0],P.positions[O][1]=S-m(0,S,0.5+0.5*L[1])-w[1]}else{a=d.dist(b.eye,r);for(O=0;4>O;O++)P.positions[O][0]=D[0]+(0.5*p[O][0]-v[0])*W[0]+w[0],P.positions[O][1]=S-D[1]+(0.5*p[O][1]+v[1])*W[1]-w[1]}a=t[2];T.areVisibilityFlagsSet("VISIBILITY_LABELMANAGER",void 0)&&(a*=0.7);P.labelId=F.length;P.xMin=Number.MAX_VALUE;P.yMin=Number.MAX_VALUE;P.xMax=-Number.MAX_VALUE;P.yMax=-Number.MAX_VALUE;for(W=0;4>W;W++)P.xMin=Math.min(P.positions[W][0],P.xMin),P.yMin=Math.min(P.positions[W][1],P.yMin),P.xMax=Math.max(P.positions[W][0],
P.xMax),P.yMax=Math.max(P.positions[W][1],P.yMax);P.labelGraphics=T._labelGraphics;P.c3dGraphic=T;P.posView=a;P.layerView=aa;F.push(P)}}}}}}}F.sort(e);for(X=0;X<F.length;X++){b=F.data[X];a=!1;aa=b.layerView;if(this._doesIntersectExistingPoly(b))for(O=0;O<b.labelGraphics.length;O++)a=a||b.labelGraphics[O].setVisibilityFlag("VISIBILITY_LABELMANAGER",!1);else{this._addToBins(b);for(O=0;O<b.labelGraphics.length;O++)a=a||b.labelGraphics[O].setVisibilityFlag("VISIBILITY_LABELMANAGER",!0)}a&&b.c3dGraphic.isDraped()&&
(Y[aa]=!0);Object.keys(Y).forEach(function(a){a.emit&&a.emit("draped-data-change")})}}})})},"esri/views/3d/layers/GraphicsView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../layers/GraphicsView ./graphics/Graphics3DCore ./graphics/Graphics3DSpatialIndex ./graphics/Graphics3DElevationAlignment ../support/PromiseLightweight ../../../core/promiseUtils".split(" "),function(n,k,a,b,
c,f,e,h,d,l,g){return function(f){function k(){f.apply(this,arguments);this.elevation=this.spatialIndex=this.graphicsCore=null;this.supportsDraping=!0;this._overlayUpdating=!1;this._eventHandles=[]}a(k,f);Object.defineProperty(k.prototype,"graphics",{set:function(a){a!==this.loadedGraphics&&(this.loadedGraphics=a);this._set("graphics",a)},enumerable:!0,configurable:!0});k.prototype.initialize=function(){var a=this;this.mockLayerId="__sceneView.graphics-"+Date.now().toString(16);this.spatialIndex=
new h;this.spatialIndex.whenLoaded().then(function(){return a.deferredInitialize()})};k.prototype.deferredInitialize=function(){var a=this;if(!this.destroyed){this.loadedGraphics=this.graphics;this.graphicsCore=new e;this.elevation=new d;var b={id:this.mockLayerId};this.spatialIndex.initialize(this,b,this.view.spatialReference,this.graphicsCore);this.elevation.initialize(this,function(b,c,d){a.spatialIndex.intersects(b,c,d)},this.graphicsCore,this.view.basemapTerrain);this.graphicsCore.initialize(this,
b,this.elevation,null,this.spatialIndex,null,null,null,this.view.basemapTerrain);this._eventHandles.push(this.view.watch("clippingArea",function(){return a.updateClippingExtent()}));this.updateClippingExtent();this.view.resourceController.registerIdleFrameWorker(this,{needsUpdate:this._needsIdleUpdate,idleFrame:this._idleUpdate})}};k.prototype.destroy=function(){this._eventHandles.forEach(function(a){return a.remove()});this._eventHandles=null;this.view.resourceController.deregisterIdleFrameWorker(this);
this.spatialIndex&&(this.spatialIndex.destroy(),this.spatialIndex=null);this.elevation&&(this.elevation.destroy(),this.elevation=null);this.graphicsCore&&(this.graphicsCore.destroy(),this.graphicsCore=null);this.loadedGraphics=null};k.prototype.getGraphicsFromStageObject=function(a,b){var c=a.getMetadata().graphicId,d=null;this.loadedGraphics&&this.loadedGraphics.some(function(a){return a.uid===c?(d=a,!0):!1});var e=new l.Promise;null!==d?e.done(d):e.reject();return e};k.prototype.whenGraphicBounds=
function(a){var b=this;return!this.spatialIndex?g.reject():this.spatialIndex.whenLoaded().then(function(){return b.graphicsCore?b.graphicsCore.whenGraphicBounds(a):g.reject()})};k.prototype._needsIdleUpdate=function(){return this.elevation.needsIdleUpdate()};k.prototype._idleUpdate=function(a){this.elevation.idleUpdate(a)};k.prototype._notifySuspendedChange=function(){};k.prototype._notifyDrapedDataChange=function(){this.view.basemapTerrain&&this.view.basemapTerrain.overlayManager.setOverlayDirty()};
k.prototype._evaluateUpdatingState=function(){if(this.elevation){var a;a=0+this.elevation.numNodesUpdating();a+=this.graphicsCore.numNodesUpdating();this.updating=a=(a=(a=0<a||this._overlayUpdating)||this.spatialIndex.isUpdating())||this.graphicsCore.needsIdleUpdate()}else this.updating=!1};k.prototype.updateClippingExtent=function(){this.graphicsCore.setClippingExtent(this.view.clippingArea,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()};b([c.property()],k.prototype,"graphics",
null);b([c.property()],k.prototype,"loadedGraphics",void 0);b([c.property({value:!0})],k.prototype,"updating",void 0);b([c.property({value:!1})],k.prototype,"suspended",void 0);return k=b([c.subclass("esri.views.3d.layers.GraphicsView3D")],k)}(c.declared(f))})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(n,k,a,b,c,f,e,h){return function(d){function f(){d.apply(this,arguments);this.view=this.renderer=this.graphics=null}a(f,d);b([c.property({type:e.ofType(h)})],f.prototype,"graphics",void 0);b([c.property()],f.prototype,"renderer",void 0);b([c.property()],f.prototype,"view",void 0);return f=b([c.subclass("esri.views.layers.GraphicsView")],f)}(c.declared(f))})},"esri/views/3d/layers/graphics/Graphics3DCore":function(){define("require exports ../../../../core/watchUtils ../../../../core/arrayUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../support/projectionUtils ../../../../renderers/support/rendererConversion ../../../../renderers/support/diffUtils ../../../../geometry/Point ../../../../geometry/Extent ../../webgl-engine/Stage ../../webgl-engine/lib/Util ../../webgl-engine/lib/Layer ../../webgl-engine/lib/FloatingBoxLocalOriginFactory ../../../../symbols/WebStyleSymbol ../../../../symbols/support/symbolConversion ../../lib/glMatrix ./Graphics3DGraphic ./Graphics3DSymbol ./Graphics3DWebStyleSymbol ./graphicUtils ./Graphics3DOwner ../../support/aaBoundingBox ../../support/mathUtils dojo/Deferred".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D,I,A){n=v.vec3d;var z=new g,E=n.create(),C=f.getLogger("esri.views.3d.LayerView3D");return function(){function g(){this.graphics={};this.graphicsDrapedIds={};this.graphicsBySymbol={};this.graphicsKeys=[];this.symbols={};this.graphicsWithoutSymbol={};this.computedExtent=null;this.symbolCreationContext=new H.Graphics3DSymbolCreationContext;this.hasDraped=!1;this.updatingGraphicIds={};this.graphicTransformFunc=this.onComputedExtentChange=this.stage=
this.labelStageLayer=this.stageLayer=this.tilingSchemeHandle=this.lastFastUpdate=null;this.eventHandles=[];this.labeling=this.spatialIndex=this.scaleVisibility=this.elevation=this.layer=this.layerView=this.viewSR=null;this.whenGraphics3DGraphicRequests={}}g.prototype.initialize=function(b,c,d,e,h,f,l,m,k){var q=this;this.layerView=b;this.layer=c;this.viewSR=b.view.spatialReference;this.elevation=d;this.scaleVisibility=e;this.spatialIndex=h;this.labeling=f;this.onComputedExtentChange=l;this.graphicTransformFunc=
m;this.initializeStage(this.layerView.view,this.layer.id);this.symbolCreationContext.sharedResources=this.layerView.view.sharedSymbolResources;this.symbolCreationContext.renderer=this.layer.renderer;this.symbolCreationContext.stage=this.stage;this.symbolCreationContext.streamDataSupplier=this.layerView.view.sharedSymbolResources.streamDataSupplier;this.symbolCreationContext.renderSpatialReference=this.layerView.view.renderSpatialReference;this.symbolCreationContext.renderCoordsHelper=this.layerView.view.renderCoordsHelper;
this.symbolCreationContext.layer=this.layer;this.symbolCreationContext.layerView=this.layerView;this.symbolCreationContext.layerOrder=0;this.symbolCreationContext.localOriginFactory=g.createLocalOriginFactory();this.symbolCreationContext.elevationProvider=k;this.tilingSchemeHandle=a.when(k,"tilingScheme",function(a){a.spatialReference.equals(q.symbolCreationContext.overlaySR)||(q.symbolCreationContext.overlaySR=k.spatialReference,q.recreateAllGraphics())});this.eventHandles.push(this.layerView.watch("suspended",
function(){return q.suspendedChange()}));this.eventHandles.push(a.on(b,"loadedGraphics","change",function(a){return q.graphicsCollectionChanged(a)},function(){q.clearSymbolsAndGraphics();q.graphicsCollectionChanged({added:q.layerView.loadedGraphics.toArray(),removed:[]})}));this.validateRenderer(this.layer.renderer)};g.prototype.destroy=function(){var a=this;this.clear();if(this.stage){var b=[this.stageLayer.getId()];this.labelStageLayer&&b.push(this.labelStageLayer.getId());this.stage.removeFromViewContent(b);
b.forEach(function(b){return a.stage.remove(q.ModelContentType.LAYER,b)});this.stage=this.labelStageLayer=this.stageLayer=null}this.tilingSchemeHandle&&(this.tilingSchemeHandle.remove(),this.tilingSchemeHandle=null);this.eventHandles.forEach(function(a){return a.remove()});this.layerView=this.labeling=this.scaleVisibility=this.viewSR=this.onComputedExtentChange=this.eventHandles=null;for(var d in this.whenGraphics3DGraphicRequests)this.whenGraphics3DGraphicRequests[d].reject(new c("graphic:layer-destroyed",
"Layer has been destroyed"));this.whenGraphics3DGraphicRequests=null};g.prototype.clear=function(){var a=!1,b;for(b in this.graphics){var c=this.graphics[b];c&&(a=a||c.isDraped(),c.destroy())}this.graphics={};this.graphicsKeys=null;for(var d in this.symbols)(b=this.symbols[d])&&b.destroy();this.symbols={};this.graphicsBySymbol={};this.graphicsWithoutSymbol={};this.hasDraped=!1;a&&this.layerView._notifyDrapedDataChange()};g.prototype.initializeStage=function(a,b){this.stage=a._stage;this.stageLayer=
new r(b,{state:this.layerView.suspended?"HIDDEN":"VISIBLE"},b);this.stage.add(q.ModelContentType.LAYER,this.stageLayer);var c=[this.stageLayer.getId()];this.labeling&&(this.labelStageLayer=new r(b,{state:this.layerView.suspended?"HIDDEN":"IGNORED"},b+"_labels"),this.stage.add(q.ModelContentType.LAYER,this.labelStageLayer),c.push(this.labelStageLayer.getId()));this.stage.addToViewContent(c)};g.prototype.setDrawingOrder=function(a){this.symbolCreationContext.layerOrder=a;var b={},c={},d;for(d in this.graphics){var e=
this.graphics[d];e&&e.setDrawOrder(a,b,c)}for(var g in c)(c=this.symbols[g])&&c.setDrawOrder(a,b);p.objectEmpty(b)||(this.stage.getTextureGraphicsRenderer().updateRenderOrder(b),this.layerView._notifyDrapedDataChange())};g.prototype.suspendedChange=function(){!0===this.layerView.suspended?(this.stageLayer.setState("HIDDEN"),this.labelStageLayer&&this.labelStageLayer.setState("HIDDEN"),this.hideAllGraphics()):!1===this.layerView.suspended&&(this.stageLayer.setState("VISIBLE"),this.labelStageLayer&&
this.labelStageLayer.setState("IGNORED"),this.updateAllGraphicsVisibility())};g.prototype.getGraphics3DGraphics=function(){return this.graphics};g.prototype.getGraphics3DGraphicById=function(a){return this.graphics[a]};g.prototype.getGraphics3DGraphicsKeys=function(){null===this.graphicsKeys&&(this.graphicsKeys=Object.keys(this.graphics));return this.graphicsKeys};g.prototype.numNodesUpdating=function(){return Object.keys(this.updatingGraphicIds).length};g.prototype.needsIdleUpdate=function(){return this.lastFastUpdate&&
500<performance.now()-this.lastFastUpdate};g.prototype.idleUpdate=function(a){a.done()||(this.lastFastUpdate&&(this.labeling&&this.labeling.updateLabelingInfo(),this.lastFastUpdate=null),this.layerView._evaluateUpdatingState())};g.prototype.whenGraphics3DGraphic=function(a){var b=this.graphics[a.uid];if(b)return e.resolve(b);b=this.whenGraphics3DGraphicRequests[a.uid];b||(b=new A,this.whenGraphics3DGraphicRequests[a.uid]=b);return b.promise};g.prototype.boundsForGraphics3DGraphic=function(a,b){void 0===
b&&(b=D.create());var c=this.layerView.view.spatialReference,d=this.layerView.view.renderSpatialReference,e=this.layerView.view.basemapTerrain.spatialReference,g=a.getProjectedBoundingBox(function(a,b,e){return h.bufferToBuffer(a,d,b,a,c,b,e)},function(a,b,d){return h.bufferToBuffer(a,e,b,a,c,b,d)},b);if(!g)return null;var f=a.isDraped(),l=this.symbolCreationContext.elevationProvider;f&&l&&(D.center(g,E),z.x=E[0],z.y=E[1],z.z=void 0,z.spatialReference=c,f=l.getElevation(z)||0,g[2]=Math.min(g[2],f),
g[5]=Math.max(g[5],f));return g};g.prototype.whenGraphicBounds=function(b){var d=this;return a.whenOnce(this.layerView,"loadedGraphics").then(function(){if(d.layerView.loadedGraphics.some(function(a){return a===b}))return d.whenGraphics3DGraphic(b);throw new c("internal:graphic-not-part-of-view","Graphic is not part of this view");}).then(function(a){return d.boundsForGraphics3DGraphic(a)})};g.prototype.graphicsCollectionChanged=function(a){var b=this.graphicTransformFunc?this.graphicTransformFunc(a.added):
a.added;this.add(b);this.remove(a.removed)};g.prototype.graphicUpdateHandler=function(a){var b=this.graphics[a.graphic.uid];if(b)switch(a.property){case "visible":b.setVisibilityFlag("VISIBILITY_GRAPHIC",a.newValue)&&(b.isDraped()&&this.layerView._notifyDrapedDataChange(),this.labeling&&this.layerView.view.labelManager.setDirty())}};g.prototype.beginGraphicUpdate=function(a){this.updatingGraphicIds[a.uid]=!0;this.layerView.get("symbols-updating")||this.layerView.set("symbols-updating",!0);this.layerView._evaluateUpdatingState()};
g.prototype.endGraphicUpdate=function(a){a&&delete this.updatingGraphicIds[a.uid];this.layerView.get("symbols-updating")&&p.objectEmpty(this.updatingGraphicIds)&&(this.layerView.view.flushDisplayModifications(),this.layerView.set("symbols-updating",!1));this.layerView._evaluateUpdatingState()};g.prototype.expandComputedExtent=function(a){var b,c,d,e,f,l;if("point"===a.type)b=c=a.x,d=e=a.y,a.z&&(f=l=a.z);else if("polygon"===a.type||"polyline"===a.type||"multipoint"===a.type){l=a.extent;if(!l)return;
b=l.xmin;c=l.xmax;d=l.ymin;e=l.ymax;f=l.zmin;l=l.zmax}var k=this.viewSR,q=g.tmpVec;!a.spatialReference.equals(k)&&h.xyzToVector(b,d,0,a.spatialReference,q,k)&&(b=q[0],d=q[1],h.xyzToVector(c,e,0,a.spatialReference,q,k),c=q[0],e=q[1]);I.isFinite(b)&&(I.isFinite(c)&&I.isFinite(d)&&I.isFinite(e))&&((k=this.computedExtent)?(k.xmin=Math.min(b,k.xmin),k.xmax=Math.max(c,k.xmax),k.ymin=Math.min(d,k.ymin),k.ymax=Math.max(e,k.ymax)):this.computedExtent=k=new m(b,d,c,e,a.spatialReference),I.isFinite(f)&&!I.isFinite(l)&&
(k.zmin=null!=k.zmin?Math.min(f,k.zmin):f,k.zmax=null!=k.zmax?Math.max(l,k.zmax):l),this.onComputedExtentChange&&this.onComputedExtentChange())};g.prototype.updateHasDraped=function(){this.hasDraped=!1;for(var a in this.graphicsDrapedIds)if(this.graphicsDrapedIds.hasOwnProperty(a)){this.hasDraped=!0;break}};g.prototype.elevationInfoChange=function(){this.labeling&&this.labeling.elevationInfoChange();for(var a in this.graphicsBySymbol){var b=this.symbols[a],c=this.graphicsBySymbol[a];if(!b||!b.layerPropertyChanged("elevationInfo",
c))this.recreateSymbol(a);else for(var d in c)for(var e=c[d],b=e.graphic,e=e._labelGraphics,g=0;g<e.length;g++){var h=e[g];h.graphics3DSymbolLayer.updateGraphicElevationInfo(b,h)}}};g.prototype.clearSymbolsAndGraphics=function(){this.clear();this.elevation&&this.elevation.clear();this.labeling&&this.labeling.clear()};g.prototype.recreateAllGraphics=function(){this.clearSymbolsAndGraphics();this.computedExtent=null;this.onComputedExtentChange&&this.onComputedExtentChange();this.layerView.loadedGraphics&&
this.layerView.view.basemapTerrain.tilingScheme&&this.add(this.layerView.loadedGraphics.toArray())};g.prototype.recreateSymbol=function(a){var b=this.graphicsBySymbol[a],c=[],d=!1,e;for(e in b){var g=b[e];g.isDraped()&&(delete this.graphicsDrapedIds[e],d=!0);c.push(g.graphic);g.destroy();this.graphics[e]=null}this.graphicsBySymbol[a]={};(b=this.symbols[a])&&b.destroy();this.symbols[a]=void 0;this.updateHasDraped();d&&this.layerView._notifyDrapedDataChange();this.add(c)};g.prototype.add=function(a){if(this.layerView.view.basemapTerrain&&
this.layerView.view.basemapTerrain.tilingScheme){for(var b=a.length,c=Array(b),d=Array(b),e=Array(b),g=0;g<b;g++){var h=a[g],f=h.geometry;f&&(this.expandComputedExtent(f),(f=this.layerView.getRenderingInfo?this.layerView.getRenderingInfo(h):{symbol:h.symbol})&&f.symbol?(d[g]=f.symbol,e[g]=f,(f=this.getOrCreateGraphics3DSymbol(d[g],f.renderer))?(c[g]=f,this.beginGraphicUpdate(h)):this.graphicsWithoutSymbol[h.uid]=!0):this.graphicsWithoutSymbol[h.uid]=!0)}for(g=0;g<b;g++)this.waitForSymbol(c[g],d[g],
a[g],e[g])}};g.prototype.waitForSymbol=function(a,b,c,d){var e=this;a&&a.then(function(){e.graphicsBySymbol[b.id]||(e.graphicsBySymbol[b.id]={});e.createGraphics3DGraphic(a,c,d);e.endGraphicUpdate(c);e.labeling&&e.layerView.view.labelManager.setDirty()},function(){e.endGraphicUpdate(c)})};g.prototype.remove=function(a){for(var b=!1,c=a.length,d=0;d<c;d++){var e=a[d].uid,g=this.graphics[e];if(g){g.isDraped()&&(delete this.graphicsDrapedIds[e],b=!0);var h=g.graphics3DSymbol.symbol.id;g.destroy();delete this.graphics[e];
delete this.graphicsBySymbol[h][e];delete this.graphicsWithoutSymbol[e];this.graphicsKeys=null}}this.updateHasDraped();b&&this.layerView._notifyDrapedDataChange();this.labeling&&this.layerView.view.labelManager.setDirty()};g.prototype.createGraphics3DSymbol=function(a,b){var c=u.to3D(a,!0,!1);if(c.symbol){var d=void 0;if(b&&b.backgroundFillSymbol){var e=u.to3D(b.backgroundFillSymbol,!1,!0);e.symbol&&(d=e.symbol.symbolLayers)}return new x(c.symbol,this.symbolCreationContext,d)}return null};g.prototype.getOrCreateGraphics3DSymbol=
function(a,b){var c=this,d=this.symbols[a.id];void 0===d&&(d=a instanceof s?new y(a,function(a){return c.createGraphics3DSymbol(a,b)}):this.createGraphics3DSymbol(a,b),this.symbols[a.id]=d);return d};g.prototype.createGraphics3DGraphic=function(a,b,c){if(!this.graphics[b.uid]&&(c=a.createGraphics3DGraphic(b,c),this.labeling&&this.labeling.layerLabelsEnabled()&&this.labeling.createLabelsForGraphic(b,c),this.graphics[b.uid]=c,this.graphicsKeys=null,this.graphicsBySymbol[a.symbol.id][b.uid]=c,c.initialize(this.stageLayer,
this.stage),c.isDraped()&&(this.hasDraped=this.graphicsDrapedIds[b.uid]=!0,this.layerView._notifyDrapedDataChange()),c.centroid=null,"point"!==b.geometry.type&&c instanceof w&&(c.centroid=B.computeCentroid(b.geometry,this.viewSR)),a=this.scaleVisibility&&this.scaleVisibility.scaleRangeActive(),this.spatialIndex&&this.spatialIndex.shouldAddToSpatialIndex(b,c,a)&&this.spatialIndex.addGraphicToSpatialIndex(b,c),a&&this.scaleVisibility.updateGraphicScaleVisibility(b,c),c.setVisibilityFlag("VISIBILITY_GRAPHIC",
b.visible&&!this.layerView.suspended),a=this.whenGraphics3DGraphicRequests[b.uid]))a.resolve(c),delete this.whenGraphics3DGraphicRequests[b.uid]};g.prototype.rendererChange=function(a){var b=this.symbolCreationContext.renderer;this.validateRenderer(a);this.symbolCreationContext.renderer=a;(b=l.diff(b,a))&&("complete"===b.type?this.recreateAllGraphics():"partial"===b.type&&(this.applyRendererDiff(b,a)?this.volatileGraphicsUpdated():this.recreateAllGraphics()))};g.prototype.diffHasSymbolChange=function(a){for(var b in a.diff)switch(b){case "visualVariables":break;
default:return!0}return!1};g.prototype.applyRendererDiff=function(a,b){var c=!1;if(this.diffHasSymbolChange(a))return!1;for(var d in this.graphicsBySymbol){var e=this.symbols[d];if(e){var g=this.graphicsBySymbol[d];if(!e.applyRendererDiff(a,b,g))return!1;if(!c)for(var h in g)if(g[h].isDraped()){this.layerView._notifyDrapedDataChange();c=!0;break}}}return!0};g.prototype.opacityChange=function(){var a=!1,b;for(b in this.graphicsBySymbol){var c=this.symbols[b];if(c){var d=this.graphicsBySymbol[b];c.layerPropertyChanged("opacity");
if(!a)for(var e in d)if(d[e].isDraped()){this.layerView._notifyDrapedDataChange();a=!0;break}}}};g.prototype.setClippingExtent=function(a,c){var d=this.symbolCreationContext.clippingExtent,e=[];h.extentToBoundingRect(a,e,c)?this.symbolCreationContext.clippingExtent=[e[0],e[1],-Infinity,e[2],e[3],Infinity]:this.symbolCreationContext.clippingExtent=null;return!b.equals(this.symbolCreationContext.clippingExtent,d)};g.prototype.updateAllGraphicsVisibility=function(){var a=this;if(this.layerView.loadedGraphics){var b=
!1;this.layerView.loadedGraphics.forEach(function(c){var d=a.getGraphics3DGraphicById(c.uid);if(d){var e=d.setVisibilityFlag("VISIBILITY_GRAPHIC",c.visible);a.scaleVisibility&&(c=a.scaleVisibility.updateGraphicScaleVisibility(c,d),e=e||c);e&&d.isDraped()&&(b=!0)}});b&&this.layerView._notifyDrapedDataChange();this.layerView.view.labelManager.setDirty()}};g.prototype.hideAllGraphics=function(){var a=this;if(this.layerView.loadedGraphics){var b=!1;this.layerView.loadedGraphics.forEach(function(c){(c=
a.getGraphics3DGraphicById(c.uid))&&c.setVisibilityFlag("VISIBILITY_GRAPHIC",!1)&&c.isDraped()&&(b=!0)});b&&this.layerView._notifyDrapedDataChange();this.layerView.view.labelManager.setDirty()}};g.prototype.validateRenderer=function(a){(a=d.validateTo3D(a))&&C.warn("Renderer for layer '"+(this.layer.title?this.layer.title+", ":"")+", id:"+this.layer.id+"' is not supported in a SceneView",a.message)};g.prototype.volatileGraphicsUpdated=function(){this.labeling&&(this.lastFastUpdate=performance.now());
this.stageLayer.invalidateSpatialQueryAccelerator();this.layerView._evaluateUpdatingState()};g.createLocalOriginFactory=function(){return new t(5E6,16)};g.tmpVec=v.vec3d.create();return g}()})},"esri/renderers/support/rendererConversion":function(){define(["require","exports","../../core/Error","../../symbols/support/symbolConversion"],function(n,k,a,b){function c(b,c){if(!c)return null;var e;e=Array.isArray(c)?c:[c];if(0<e.length){var g=e.map(function(a){return a.details.symbol.type||a.details.symbol.declaredClass}).filter(function(a){return!!a});
g.sort();var f=[];g.forEach(function(a,b){(0===b||a!==g[b-1])&&f.push(a)});return new a("renderer-conversion-3d:unsupported-symbols","Renderer contains symbols ("+f.join(", ")+") which are not supported in 3D",{renderer:b,symbolErrors:e})}return null}function f(a){var d=a.uniqueValueInfos.map(function(a){return b.to3D(a.symbol).error}).filter(function(a){return!!a}),e=b.to3D(a.defaultSymbol);e.error&&d.unshift(e.error);return c(a,d)}function e(a){var d=a.classBreakInfos.map(function(a){return b.to3D(a.symbol).error}).filter(function(a){return!!a}),
e=b.to3D(a.defaultSymbol);e.error&&d.unshift(e.error);return c(a,d)}k.validateTo3D=function(h){return!h?null:"simple"===h.type?c(h,b.to3D(h.symbol).error):"uniqueValue"===h.type?f(h):"classBreaks"===h.type?e(h):new a("renderer-conversion-3d:unsupported-renderer","Unsupported renderer of type '"+(h.type||h.declaredClass)+"'",{renderer:h})}})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(n,k,a,b,c,f){function e(a){return a instanceof c?Object.keys(a.items):a instanceof b?f.getProperties(a).keys():a?Object.keys(a):[]}function h(a,b){return a instanceof c?a.items[b]:a[b]}function d(a){return a?a.declaredClass:null}function l(b,c){var f=b.diff;if(f&&a.isFunction(f))return f.call(b,c);var k=e(b),t=e(c);if(!(0===k.length&&0===t.length)){if(!k.length||!t.length||Array.isArray(b)&&Array.isArray(c)&&b.length!==c.length)return{type:"complete",oldValue:b,newValue:c};var f=t.filter(function(a){return-1===
k.indexOf(a)}),s=k.filter(function(a){return-1===t.indexOf(a)}),f=k.filter(function(a){return-1<t.indexOf(a)&&h(b,a)!==h(c,a)}).concat(f,s).sort();if((s=d(b))&&-1<g.indexOf(s)&&f.length)return{type:"complete",oldValue:b,newValue:c};var n,v;for(v in f){var s=f[v],w=h(b,s),x=h(c,s),y=void 0;if(!a.isFunction(w)&&!a.isFunction(x)&&w!==x&&(y="object"===typeof w&&"object"===typeof x&&d(w)===d(x)?l(w,x):{type:"complete",oldValue:w,newValue:x}))n=n||{type:"partial",diff:{}},n.diff[s]=y}return n}}var g=["esri.Color"];
k.diff=function(b,c){return a.isFunction(b)||a.isFunction(c)||!b&&!c?void 0:!b||!c?{type:"complete",oldValue:b,newValue:c}:l(b,c)}})},"esri/views/3d/webgl-engine/lib/Layer":function(){define("require exports dojo/has ./IdGen ./Octree ./PerformanceTimer ./Util ./gl-matrix ./ModelContentType".split(" "),function(n,k,a,b,c,f,e,h,d){var l=h.vec3d;return function(){function a(b,c,d){this._parentStages=[];this._children=[];this.id=a._idGen.gen(d);this.name=b;c=c||{};this.group=c.group||"";this.state=c.state||
"VISIBLE";this.interaction=c.interaction||"PICKABLE";this.translation=l.create(c.translation);this._extent=[l.createFrom(0,0,0),l.createFrom(1E3,1E3,1E3)];this._extentDirty=!0}a.prototype.getId=function(){return this.id};a.prototype.getParentStages=function(){return this._parentStages};a.prototype.addParentStage=function(a){-1===this._parentStages.indexOf(a)&&this._parentStages.push(a)};a.prototype.removeParentStage=function(a){a=this._parentStages.indexOf(a);-1<a&&this._parentStages.splice(a,1)};
a.prototype.getName=function(){return this.name};a.prototype.getGroup=function(){return this.group};a.prototype.getState=function(){return this.state};a.prototype.getInteraction=function(){return this.interaction};a.prototype.getTranslation=function(){return this.translation};a.prototype.getObjectIds=function(){return this._children.map(function(a){return a.getId()})};a.prototype.getObjects=function(){return this._children};a.prototype.setState=function(a){this.state=a};a.prototype.getExtent=function(){this._updateExtent();
return this._extent};a.prototype.addObject=function(a){this._children.push(a);a.addParentLayer(this);this.notifyDirty("layObjectAdded",a);this._invalidateExtent();this._spatialAccelerator&&this._spatialAccelerator.add(a)};a.prototype.hasObject=function(a){return-1<this._children.indexOf(a)};a.prototype.removeObject=function(a){return null!=e.arrayRemove(this._children,a)?(a.removeParentLayer(this),this.notifyDirty("layObjectRemoved",a),this._invalidateExtent(),this._spatialAccelerator&&this._spatialAccelerator.remove(a),
!0):!1};a.prototype.replaceObject=function(a,b){var c=this._children.indexOf(a);e.assert(-1<c,"Layer.replaceObject: layer doesn't contain specified object");this._children[c]=b;a.removeParentLayer(this);b.addParentLayer(this);this.notifyDirty("layObjectReplaced",[a,b]);this._invalidateExtent();this._spatialAccelerator&&(this._spatialAccelerator.remove(a),this._spatialAccelerator.add(b))};a.prototype.notifyObjectBBChanged=function(a,b){this._spatialAccelerator&&this._spatialAccelerator.update(a,b)};
a.prototype.getCenter=function(){this._updateExtent();var a=l.create();return l.lerp(this._extent[0],this._extent[1],0.5,a)};a.prototype.getBSRadius=function(){this._updateExtent();return 0.5*l.dist(this._extent[0],this._extent[1])};a.prototype.getSpatialQueryAccelerator=function(){if(this._spatialAccelerator)return this._spatialAccelerator;if(50<this._children.length)return this._createOctree(),this._spatialAccelerator};a.prototype.invalidateSpatialQueryAccelerator=function(){this._spatialAccelerator=
null};a.prototype.notifyDirty=function(a,b,c,e){c=c||d.LAYER;e=e||this;for(var g=0;g<this._parentStages.length;g++)this._parentStages[g].notifyDirty(c,e,a,b)};a.prototype._createOctree=function(){for(var a=this.getExtent(),b=0,d=0;3>d;d++)b=Math.max(b,a[1][d]-a[0][d]);d=l.create();l.lerp(a[0],a[1],0.5,d);this._spatialAccelerator=new c(d,1.2*b);this._spatialAccelerator.add(this._children)};a.prototype._invalidateExtent=function(){this._extentDirty=!0};a.prototype._updateExtent=function(){if(this._extentDirty)if(0===
this._children.length)this._extent=[[0,0,0],[0,0,0]];else{var a=this._children[0];this._extent=[l.create(a.getBBMin()),l.create(a.getBBMax())];for(a=0;a<this._children.length;++a)for(var b=this._children[a],c=b.getBBMin(),b=b.getBBMax(),d=0;3>d;++d)this._extent[0][d]=Math.min(this._extent[0][d],c[d]),this._extent[1][d]=Math.max(this._extent[1][d],b[d]);this._extentDirty=!1}};a._idGen=new b;return a}()})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("require exports ./gl-matrix ./Util dojo/has ./PerformanceTimer".split(" "),
function(n,k,a,b,c,f){function e(a,b,c){c=c||a;c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c}var h=a.vec3d;n=function(){function a(b,c,e){this._maximumObjectsPerNode=10;this._maximumDepth=20;this._autoResize=!0;this._outsiders=[];e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth),void 0!==e.autoResize&&(this._autoResize=e.autoResize));isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(c)?this._root=new d(null,
h.createFrom(0,0,0),0.5):this._root=new d(null,b,c/2)}Object.defineProperty(a.prototype,"center",{get:function(){return this._root.center},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return 2*this._root.halfSize},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"root",{get:function(){return this._root.node},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"outsiders",{get:function(){return this._outsiders.slice()},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"maximumObjectsPerNode",{get:function(){return this._maximumObjectsPerNode},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maximumDepth",{get:function(){return this._maximumDepth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"autoResize",{get:function(){return this._autoResize},enumerable:!0,configurable:!0});a.prototype.add=function(a){a=this._objectOrObjectsArray(a);this._grow(a);for(var b=d.acquire(),c=
0;c<a.length;c++){var e=a[c];b.init(this._root);0===e.getBSRadius()||isNaN(e.getBSRadius())||!this._autoResize&&!this._fitsInsideTree(this._boundingSphereFromObject(e,t))?this._outsiders.push(e):this._add(e,b)}d.release(b)};a.prototype.remove=function(a,c){for(var e=this._objectOrObjectsArray(a),g=d.acquire(),h=!0,f=0;f<e.length;f++){var h=e[f],l=this._boundingSphereFromObject(c||h,t);0===l.radius||isNaN(l.radius)||!this._autoResize&&!this._fitsInsideTree(l)?h=null!=b.arrayRemove(this._outsiders,
h):(g.init(this._root),h=this._remove(h,l,g))}d.release(g);this._shrink();return h};a.prototype.update=function(a,b){this.remove(a,b);this.add(a)};a.prototype.forEachAlongRay=function(a,c,d){this._forEachTest(function(d){e(d.center,2*-d.halfSize,q);e(d.center,2*d.halfSize,p);return b.rayBoxTest(a,c,q,p)},d)};a.prototype.forEachInBoundingBox=function(a,b,c){this._forEachTest(function(c){for(var d=2*c.halfSize,e=0;3>e;e++)if(c.center[e]+d<a[e]||c.center[e]-d>b[e])return!1;return!0},c)};a.prototype.forEachNode=
function(a){this._forEachNode(this._root,function(b){return a(b.node,b.center,2*b.halfSize)})};a.prototype._forEachTest=function(a,b){this._outsiders.forEach(b);this._forEachNode(this._root,function(c){return a(c)?(c=c.node,c.terminals.forEach(b),null!==c.residents&&c.residents.forEach(b),!0):!1})};a.prototype._forEachNode=function(a,b){for(var c=d.acquire().init(a),e=[c];0!==e.length;){c=e.pop();if(b(c)&&!c.isLeaf())for(var g=0;g<c.node.children.length;g++)c.node.children[g]&&e.push(d.acquire().init(c).advance(g));
d.release(c)}};a.prototype._objectOrObjectsArray=function(a){Array.isArray(a)||(g[0]=a,a=g);return a};a.prototype._remove=function(a,c,d){r.length=0;d.advanceTo(c,function(a,b){r.push(a.node,b)})?(a=null!=b.arrayRemove(d.node.terminals,a),d=0===d.node.terminals.length):(a=null!=b.arrayRemove(d.node.residents,a),d=0===d.node.residents.length);if(d)for(d=r.length-2;0<=d&&this._purge(r[d],r[d+1]);d-=2);return a};a.prototype._nodeIsEmpty=function(a){if(0!==a.terminals.length)return!1;if(null!==a.residents)return 0===
a.residents.length;for(var b=0;b<a.children.length;b++)if(a.children[b])return!1;return!0};a.prototype._purge=function(a,b){0<=b&&(a.children[b]=null);return this._nodeIsEmpty(a)?(null===a.residents&&(a.residents=[]),!0):!1};a.prototype._add=function(a,b){b.advanceTo(this._boundingSphereFromObject(a,t))?b.node.terminals.push(a):(b.node.residents.push(a),b.node.residents.length>this._maximumObjectsPerNode&&b.depth<this._maximumDepth&&this._split(b))};a.prototype._split=function(a){var b=a.node.residents;
a.node.residents=null;for(var c=0;c<b.length;c++){var e=d.acquire().init(a);this._add(b[c],e);d.release(e)}};a.prototype._grow=function(a){if(0!==a.length&&this._autoResize&&(a=this._boundingSphereFromObjects(a,this._boundingSphereFromObject,s),!isNaN(a.radius)&&!(0===a.radius||this._fitsInsideTree(a))))if(this._nodeIsEmpty(this._root.node))h.set(a.center,this._root.center),this._root.halfSize=1.25*a.radius;else{var b=d.acquire();this._rootBoundsForRootAsSubNode(a,b);this._placingRootViolatesMaxDepth(b)?
this._rebuildTree(a,b):this._growRootAsSubNode(b);d.release(b)}};a.prototype._rebuildTree=function(a,b){var c=this;h.set(b.center,u.center);u.radius=b.halfSize;var e=this._boundingSphereFromObjects([a,u],function(a){return a},v),g=d.acquire().init(this._root);this._root.initFrom(null,e.center,1.25*e.radius);this._forEachNode(g,function(a){c.add(a.node.terminals);null!==a.node.residents&&c.add(a.node.residents);return!0});d.release(g)};a.prototype._placingRootViolatesMaxDepth=function(a){var b=0;this._forEachNode(this._root,
function(a){b=Math.max(b,a.depth);return!0});return b+Math.log(a.halfSize/this._root.halfSize)*Math.LOG2E>this._maximumDepth};a.prototype._rootBoundsForRootAsSubNode=function(a,b){for(var c=a.radius,d=a.center,e=-Infinity,g=this._root.center,h=this._root.halfSize,f=0;3>f;f++){var l=d[f]+c-(g[f]+h),k=Math.max(0,Math.ceil((g[f]-h-(d[f]-c))/(2*h))),l=Math.max(0,Math.ceil(l/(2*h)))+1,q=Math.pow(2,Math.ceil(Math.log(k+l)*Math.LOG2E)),e=Math.max(e,q);w[f].min=k;w[f].max=l}for(f=0;3>f;f++)k=w[f].min,l=w[f].max,
c=(e-(k+l))/2,k+=Math.ceil(c),l+=Math.floor(c),m[f]=g[f]-h-2*k*h+(l+k)*h;return b.initFrom(null,m,e*h,0)};a.prototype._growRootAsSubNode=function(a){var b=this._root.node;h.set(this._root.center,s.center);s.radius=this._root.halfSize;this._root.init(a);a.advanceTo(s,null,!0);a.node.children=b.children;a.node.residents=b.residents;a.node.terminals=b.terminals};a.prototype._shrink=function(){if(this._autoResize)for(;;){var a=this._findShrinkIndex();if(-1===a)break;this._root.advance(a);this._root.depth=
0}};a.prototype._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var a=null,b=this._root.node.children,c=0,d=0;d<b.length&&null==a;)c=d++,a=b[c];for(;d<b.length;)if(b[d++])return-1;return c};a.prototype._fitsInsideTree=function(a){var b=this._root.center,c=this._root.halfSize,d=a.center;return a.radius<=c&&d[0]>=b[0]-c&&d[0]<=b[0]+c&&d[1]>=b[1]-c&&d[1]<=b[1]+c&&d[2]>=b[2]-c&&d[2]<=b[2]+c};a.prototype._boundingSphereFromObject=function(a,b){h.set(a.getCenter(),
b.center);b.radius=a.getBSRadius();return b};a.prototype._boundingSphereFromObjects=function(a,b,c){if(1===a.length){var d=b(a[0],s);h.set(d.center,c.center);c.radius=d.radius}else{q[0]=Infinity;q[1]=Infinity;q[2]=Infinity;p[0]=-Infinity;p[1]=-Infinity;p[2]=-Infinity;for(var e=0;e<a.length;e++){var d=b(a[e],s),g=q,f=d.center,l=d.radius;g[0]=Math.min(g[0],f[0]-l);g[1]=Math.min(g[1],f[1]-l);g[2]=Math.min(g[2],f[2]-l);g=p;f=d.center;d=d.radius;g[0]=Math.max(g[0],f[0]+d);g[1]=Math.max(g[1],f[1]+d);g[2]=
Math.max(g[2],f[2]+d)}h.scale(h.add(q,p,c.center),0.5);c.radius=Math.max(p[0]-q[0],p[1]-q[1],p[2]-q[2])/2}return c};return a}();var d=function(){function a(b,c,d,e){void 0===d&&(d=0);this.center=h.create();this.initFrom(b,c,d,0)}a.prototype.init=function(a){return this.initFrom(a.node,a.center,a.halfSize,a.depth)};a.prototype.initFrom=function(b,c,d,e){void 0===b&&(b=null);void 0===d&&(d=this.halfSize);void 0===e&&(e=this.depth);this.node=b||a.createEmptyNode();c&&h.set(c,this.center);this.halfSize=
d;this.depth=e;return this};a.prototype.advance=function(b){var c=this.node.children[b];c||(c=a.createEmptyNode(),this.node.children[b]=c);this.node=c;this.halfSize/=2;this.depth++;b=l[b];this.center[0]+=b[0]*this.halfSize;this.center[1]+=b[1]*this.halfSize;this.center[2]+=b[2]*this.halfSize;return this};a.prototype.advanceTo=function(a,b,c){for(void 0===c&&(c=!1);;){if(this.isTerminalFor(a))return b&&b(this,-1),!0;if(this.isLeaf()&&!c)return b&&b(this,-1),!1;this.isLeaf()&&(this.node.residents=null);
var d=this._childIndex(a);b&&b(this,d);this.advance(d)}};a.prototype.isLeaf=function(){return null!=this.node.residents};a.prototype.isTerminalFor=function(a){return a.radius>this.halfSize/2};a.prototype._childIndex=function(a){a=a.center;for(var b=this.center,c=0,d=0;3>d;d++)b[d]<a[d]&&(c|=1<<d);return c};a.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:[],residents:[]}};a.acquire=function(){if(0===this._pool.length)return new a;var b=this._pool[this._pool.length-
1];this._pool.length--;return b};a.release=function(a){this._pool.push(a)};a._pool=[];return a}(),l=[[-1,-1,-1],[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]],g=[null],m=h.create(),q=h.create(),p=h.create(),r=[],t={center:h.create(),radius:0},s={center:h.create(),radius:0},u={center:h.create(),radius:0},v={center:h.create(),radius:0},w=[{min:0,max:0},{min:0,max:0},{min:0,max:0}];return n})},"esri/views/3d/webgl-engine/lib/FloatingBoxLocalOriginFactory":function(){define(["require",
"exports","./gl-matrix"],function(n,k,a){var b=a.vec3d;n=function(){function a(b,c){this._origins=[];this._boxSize=b;this._maxNumOrigins=c}a.prototype.getOrigin=function(e){for(var h=this._origins.length,d,l=!1,g=Number.MAX_VALUE,m=0;m<h;m++){var k=this._origins[m];b.subtract(e,k.vec3,c);c[0]=Math.abs(c[0]);c[1]=Math.abs(c[1]);c[2]=Math.abs(c[2]);var p=c[0]+c[1]+c[2];p<g&&(d=k,g=p,l=c[0]<this._boxSize&&c[1]<this._boxSize&&c[2]<this._boxSize)}if(!l&&(!d||null==this._maxNumOrigins||this._origins.length<
this._maxNumOrigins))h=a.OFFSET,d={vec3:[e[0]+h,e[1]+h,e[2]+h],id:a.ORIGIN_PREFIX+this._origins.length},this._origins.push(d);return d};a.OFFSET=1.11;a.ORIGIN_PREFIX="fb_";return a}();var c=b.create();return n})},"esri/views/3d/layers/graphics/Graphics3DGraphic":function(){define(["require","exports","../../support/aaBoundingBox","../../support/aaBoundingRect"],function(n,k,a,b){var c=a.create(),f=b.create();return function(){function e(a,b,c){this.graphics3DSymbol=b;this.graphic=a;this._graphics=
c;this._labelGraphics=[];this.addedToSpatialIndex=!1}e.prototype.initialize=function(a,b){this._graphics.forEach(function(c){c&&c.initialize(a,b)})};e.prototype.clearLabelGraphics=function(){this._labelGraphics.forEach(function(a){return a.destroy()});this._labelGraphics.length=0};e.prototype.addLabelGraphic=function(a,b,c){this._labelGraphics.push(a);a.initialize(b,c)};e.prototype.isDraped=function(){for(var a=0;a<this._graphics.length;a++){var b=this._graphics[a];if(b&&b.isDraped())return!0}return!1};
e.prototype.areVisibilityFlagsSet=function(a,b){for(var c=!0,e=0;e<this._graphics.length;e++){var f=this._graphics[e];f&&(c=c&&f.areVisibilityFlagsSet(a,b))}for(e=0;e<this._labelGraphics.length;e++)(f=this._labelGraphics[e])&&(c=c&&f.areVisibilityFlagsSet(a,b));return c};e.prototype.setVisibilityFlag=function(a,b){var c=!1,e=function(e){e&&(c=e.setVisibilityFlag(a,b)||c)};this._graphics.forEach(e);this._labelGraphics.forEach(e);return c};e.prototype.destroy=function(){var a=function(a){a&&a.destroy()};
this._graphics.forEach(a);this._graphics.length=0;this._labelGraphics.forEach(a);this._labelGraphics.length=0};e.prototype.getBSRadius=function(){return this._graphics.reduce(function(a,b){return Math.max(a,b.getBSRadius())},0)};e.prototype.getCenterObjectSpace=function(){return this._graphics[0].getCenterObjectSpace()};e.prototype.getProjectedBoundingBox=function(e,d,l){l?a.set(l,a.NEGATIVE_INFINITY):l=a.create(a.NEGATIVE_INFINITY);for(var g=0;g<this._graphics.length;g++){var m=this._graphics[g];
if(m){var k=m.isDraped()?d:e;m&&m.getProjectedBoundingBox(k,c)&&a.expand(l,m.isDraped()?a.toRect(c,f):c)}}return a.allFinite(l)||b.allFinite(a.toRect(l,f))?l:null};e.prototype.mustAlignToTerrain=function(){for(var a=this._graphics.length,b=0;b<a;b++){var c=this._graphics[b];if(c&&c.mustAlignToTerrain())return!0}a=this._labelGraphics.length;for(b=0;b<a;b++)if((c=this._labelGraphics[b])&&c.mustAlignToTerrain())return!0;return!1};e.prototype.alignWithElevation=function(a,b){for(var c=this._graphics.length,
e=0;e<c;e++){var f=this._graphics[e];f&&f.alignWithElevation(a,b)}c=this._labelGraphics.length;for(e=0;e<c;e++)(f=this._labelGraphics[e])&&this._labelGraphics[e].alignWithElevation(a,b)};e.prototype.setDrawOrder=function(a,b,c){c[this.graphics3DSymbol.symbol.id]=!0;for(var e=this._graphics.length,f=0;f<e;f++){var k=this._graphics[f];k&&k.setDrawOrder(a+(1-(1+f)/e),b,c)}};return e}()})},"esri/views/3d/layers/graphics/Graphics3DSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../support/PromiseLightweight ./Graphics3DGraphic ./Graphics3DSymbolLayerFactory".split(" "),
function(n,k,a,b,c,f){return function(b){function h(a,c,g){b.call(this);this.symbol=a;a=a.symbolLayers;g&&(a=g.concat(a));g=a.length;this.childGraphics3DSymbols=Array(a.length);this.childGraphics3DSymbolPromises=Array(a.length);for(var h=c.layerOrder,k=0,p=0,r=!1,t=function(a,b){b&&(this.childGraphics3DSymbols[a]=b,p++);k--;!this.isRejected()&&(r&&1>k)&&(0<p?this.resolve():this.reject())},s=0;s<g;s++){var n=a.getItemAt(s);if(!1!==n.enabled&&(c.layerOrder=h+(1-(1+s)/g),c.layerOrderDelta=1/g,n=f.make(n,
c,n._ignoreDrivers)))k++,this.childGraphics3DSymbolPromises[s]=n,n.then(t.bind(this,s,n),t.bind(this,s,null))}c.layerOrder=h;r=!0;!this.isRejected()&&1>k&&(0<p?this.resolve():this.reject())}a(h,b);h.prototype.createGraphics3DGraphic=function(a,b,e){for(var f=Array(this.childGraphics3DSymbols.length),h=0;h<this.childGraphics3DSymbols.length;h++){var k=this.childGraphics3DSymbols[h];k&&(f[h]=k.createGraphics3DGraphic(a,b))}return new c(a,e||this,f)};h.prototype.layerPropertyChanged=function(a,b){for(var c=
this.childGraphics3DSymbols.length,e=0;e<c;e++){var f=this.childGraphics3DSymbols[e];if(f&&!f.layerPropertyChanged(a,b,e))return!1}return!0};h.prototype.applyRendererDiff=function(a,b,c){return!this.isResolved()?!1:this.childGraphics3DSymbols.reduce(function(e,f,h){return e&&(!f||f.applyRendererDiff(a,b,c,h))},!0)};h.prototype.setDrawOrder=function(a,b){for(var c=this.childGraphics3DSymbols.length,e=1/c,f=0;f<c;f++){var h=this.childGraphics3DSymbols[f];h&&h.setDrawOrder(a+(1-(1+f)/c),e,b)}};h.prototype.destroy=
function(){this.isFulfilled()||this.reject();for(var a=0;a<this.childGraphics3DSymbolPromises.length;a++)this.childGraphics3DSymbolPromises[a]&&this.childGraphics3DSymbolPromises[a].destroy()};return h}(b.Promise)})},"esri/views/3d/layers/graphics/Graphics3DSymbolLayerFactory":function(){define("./Graphics3DIconSymbolLayer ./Graphics3DObjectSymbolLayer ./Graphics3DLineSymbolLayer ./Graphics3DPathSymbolLayer ./Graphics3DFillSymbolLayer ./Graphics3DExtrudeSymbolLayer ./Graphics3DTextSymbolLayer ../../webgl-engine/lib/Util".split(" "),
function(n,k,a,b,c,f,e,h){var d=h.assert,l={Icon:n,Object:k,Line:a,Path:b,Fill:c,Extrude:f,Text:e};return{make:function(a,b,c){var e=l[a.type];d(e,"unknown symbol type "+a.type);return new e(a,b,c)}}})},"esri/views/3d/layers/graphics/Graphics3DLineSymbolLayer":function(){define("../../../../core/declare ./Graphics3DSymbolLayer ./Graphics3DGraphicLayer ./Graphics3DDrapedGraphicLayer ./ElevationAligners ./Graphics3DSymbolCommonCode ./lineUtils ../../../../core/screenUtils ../../../../geometry/Polygon ../../lib/glMatrix ../../webgl-engine/Stage ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/RenderGeometry".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p){var r=l.vec3d,t=l.mat4d;return n([k],{_prepareResources:function(){var a=this.symbol,b=this._isPropertyDriven("size")||this._isPropertyDriven("color")||this._isPropertyDriven("opacity"),c={idHint:this._getStageIdHint(),width:this._getWidth(a),color:this._getMaterialOpacityAndColor()};if(b||1.5<=c.width)this._isPropertyDriven("size")&&(c.width=0),c.miterLimit=a.miterLimit,c.join=a.join,this._isNativeLineMaterial=!1,this._material=e.createRibbonMaterial(c);else if(0<
c.width)this._isNativeLineMaterial=!0,this._material=e.createNativeMaterial(c);else{this.reject();return}this._context.stage.add(g.ModelContentType.MATERIAL,this._material);this.resolve()},_getWidth:function(a){return null!=a.size?h.pt2px(a.size):1},destroy:function(){this.isFulfilled()||this.reject();this._material&&(this._context.stage.remove(g.ModelContentType.MATERIAL,this._material.getId()),this._material=null)},createGraphics3DGraphic:function(a,b){var c=a.geometry;if("polyline"!==c.type&&"polygon"!==
c.type&&"extent"!==c.type)return this._logWarning("unsupported geometry type for line symbol: "+c.type),null;var c="polygon"===c.type||"extent"===c.type?"rings":"paths",d="graphic"+a.uid,e=this._getVertexOpacityAndColor(b,Float32Array,255),g=0;b.size&&this._isPropertyDriven("size")&&(g=f.getSingleSizeDriver(b.size),g=h.pt2px(g));var l=this._getGraphicElevationInfo(a);return l.mode===f.ELEV_MODES.ON_THE_GROUND?this._createAsOverlay(a,c,e,g,l,d):this._createAs3DShape(a,c,e,g,l,d,a.uid)},layerPropertyChanged:function(a,
b,d){if("opacity"===a)return this._isNativeLineMaterial?(b=this._material.getColor(),b[3]=this._getMaterialOpacity(),this._material.setColor(b)):(b=this._material.getParameterValues(),b.color[3]=this._getMaterialOpacity(),this._material.setParameterValues({color:b.color})),!0;if("elevationInfo"===a){a=this._elevationInfo.mode;this._updateElevationInfo();var e=this._elevationInfo.mode;if(null==a||null==e)return!1;var g=f.ELEV_MODES;if(a===g.ON_THE_GROUND&&e===g.ON_THE_GROUND)return!0;if(a!==e&&(a===
g.ON_THE_GROUND||e===g.ON_THE_GROUND))return!1;a=e===g.RELATIVE_TO_GROUND?c.perVertexElevationAligner:null;var e=this._context.elevationProvider,g=this._context.renderCoordsHelper,h;for(h in b){var l=b[h],m=l._graphics[d];m&&(l=l.graphic,m.elevationAligner=a,m.elevationInfo.set(this._getGraphicElevationInfo(l)),c.perVertexElevationAligner(m,e,g))}return!0}return!1},_getOutlineGeometry:function(a,b){return a._outlineSegments?e.createOutlineGeometryFromSegments(b,a._outlineSegments):b},_getGeometry:function(a){a=
a.geometry;"extent"===a.type&&(a=d.fromExtent(a));return a},_createAs3DShape:function(b,d,g,h,l,k,p){var n=this._getGeometry(b),D=n.hasZ,I=this._getOutlineGeometry(n,n[d]);if(0<I.length){b=[];for(var A=[],z=[],E=r.create(),C=Array(6),I=f.getGeometryVertexData3D(I,D,n.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,l),n=I.geometryData.outlines,D=I.eleVertexData,I=I.vertexData,J=0;J<n.length;++J){var F=n[J],G=F.index,K=F.count;if(this._context.clippingExtent&&(f.computeBoundingBox(D,
G,K,C),f.boundingBoxClipped(C,this._context.clippingExtent)))continue;f.chooseOrigin(I,G,K,E);f.subtractCoordinates(I,G,K,E);F=new Float64Array(D.buffer,3*G*D.BYTES_PER_ELEMENT,3*K);G=new Float64Array(I.buffer,3*G*I.BYTES_PER_ELEMENT,3*K);G=e.createPolylineGeometry(G,F,"rings"===d,g,h,!1);G=new q(G,k+"path"+J);G.singleUse=!0;b.push(G);A.push([this._material]);G=t.identity();t.translate(G,E,G);z.push(G)}if(0<b.length)return d=new m({geometries:b,materials:A,transformations:z,castShadow:!1,metadata:{layerId:this._context.layer.id,
graphicId:p},idHint:k}),g=null,l.mode===f.ELEV_MODES.RELATIVE_TO_GROUND&&(g=c.perVertexElevationAligner),new a(this,d,b,null,null,g,l)}return null},_createAsOverlay:function(a,c,d,g,h,l){var m=this._getGeometry(a);this._material.setRenderPriority(this._symbolLayerOrder);var k=this._getOutlineGeometry(m,m[c]);if(0<k.length){a=[];h=Array(6);for(var q=r.create(),k=f.getGeometryVertexDataDraped(k,m.spatialReference,this._context.overlaySR),m=k.vertexData,k=k.geometryData.outlines,n=0;n<k.length;++n){var A=
k[n],z=A.index,A=A.count;f.computeBoundingBox(m,z,A,h);if(!f.boundingBoxClipped(h,this._context.clippingExtent)){f.chooseOrigin(m,z,A,q);f.subtractCoordinates(m,z,A,q);f.setZ(m,z,A,this._getDrapedZ());A=new Float64Array(m.buffer,3*z*m.BYTES_PER_ELEMENT,3*A);z=t.identity();t.translate(z,q,z);var A=e.createPolylineGeometry(A,null,"rings"===c,d,g,!0),E=new p(A);E.material=this._material;E.center=[0.5*(h[0]+h[3]),0.5*(h[1]+h[4]),0];E.bsRadius=0.5*Math.sqrt((h[3]-h[0])*(h[3]-h[0])+(h[4]-h[1])*(h[4]-h[1]));
E.transformation=z;E.name=l;E.uniqueName=l+"#"+A.id;a.push(E)}}return new b(this,a,null,null,h)}return null}})})},"esri/views/3d/layers/graphics/lineUtils":function(){define("require exports ../../webgl-engine/materials/RibbonLineMaterial ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Util".split(" "),function(n,k,a,b,c,f){function e(a){var b=a.length;return a[0]===a[b-3]&&a[1]===a[b-2]&&a[2]===a[b-1]}var h=f.VertexAttrConstants;k.createRibbonMaterial=
function(b){var c={width:b.width,color:b.color,miterLimit:b.miterLimit,polygonOffset:!0};"miter"===b.join||"bevel"===b.join?c.join=b.join:(c.join="miter",b.join&&console.warn("unsupported join type for line symbol: "+b.join));return new a(c,b.idHint+"_ribbonlinemat")};k.createNativeMaterial=function(a){return new b(a.width,a.color,a.idHint+"_nativelinemat")};k.createOutlineGeometryFromSegments=function(a,b){for(var c=0;c<b.length;c++)for(var e=a[c],f=0;f<b[c].length;f++){for(var h=b[c][f],k=[],t=
h[0];t<h[1];t++)k.push(e[t]);0<k.length&&(void 0).push(k)}};k.isClosed=e;k.createPolylineGeometry=function(a,b,g,f,k,p){var r,t,s;if(g=g&&!e(a)){g=new Float32Array(a.length+3);for(t=0;t<a.length;t++)g[t]=a[t];t=g.length;g[t-3]=a[0];g[t-2]=a[1];g[t-1]=a[2];r=a.length/3+1;t=new Uint32Array(2*(r-1));s=new Uint32Array(2*(r-1))}else r=a.length/3,t=new Uint32Array(2*(r-1)),s=new Uint32Array(2*(r-1)),g=a;a=new Float32Array(1);a[0]=k;for(var n=k=0,v=0;v<r-1;v++)t[k++]=v,t[k++]=v+1,s[n++]=0,s[n++]=0;r={};
k={};r[h.POSITION]=t;r[h.COLOR]=s;r[h.SIZE]=s;k[h.POSITION]={size:3,data:g};k[h.COLOR]={size:4,data:f};k[h.SIZE]={size:1,data:a};b&&(r.mapPos=t,k.mapPos={size:3,data:b});b=[{type:"line",indices:r,positionKey:h.POSITION}];return p?{faces:b[0],vertexAttr:k,id:c.getNewId().toString()}:new c(b,k)}})},"esri/views/3d/webgl-engine/materials/NativeLineMaterial":function(){define("./internal/MaterialUtil ../lib/Util ../lib/gl-matrix ../lib/RenderSlot ../lib/DefaultVertexBufferLayouts ../../../webgl/Util".split(" "),
function(n,k,a,b,c,f){var e=a.vec3d,h=a.vec2d,d=a.mat4d,l=k.VertexAttrConstants,g=e.create(),m=e.create(),q=e.create(),p=e.create(),r=h.create(),t=h.create(),s=e.create(),u=e.create(),v=function(a,b,h,H){"string"===typeof h&&(H=h,h=void 0);n.basicMaterialConstructor(this,H);this.lineType=h||v.LINES;var D=c.Pos3,I=f.getStride(D)/4;this.canBeMerged=this.lineType===v.LINES;this.setColor=function(a){b=a;this.notifyDirty("matChanged")};this.getColor=function(){return b};this.dispose=function(){};this.getOutputAmount=
function(a){a=a/2+1;if(this.lineType===v.STRIP)return a*I;if(this.lineType===v.LINES)return(2*a-2)*I};this.getVertexBufferLayout=function(){return D};this.fillInterleaved=function(a,b,c,d,e,g){a=a.vertexAttr[l.POSITION].data;if(b||this.lineType===v.LINES){d=a.length/3;for(c=0;c<d;c++){var f=3*c,h=a[f],m=a[f+1],k=a[f+2];if(b)var f=h,q=m,h=b[0]*f+b[4]*q+b[8]*k+b[12],m=b[1]*f+b[5]*q+b[9]*k+b[13],k=b[2]*f+b[6]*q+b[10]*k+b[14];e[g++]=h;e[g++]=m;e[g++]=k;this.lineType===v.LINES&&(0!==c&&c!==d-1)&&(e[g++]=
h,e[g++]=m,e[g++]=k)}}else for(c=0;c<a.length;c++)e[g++]=a[c]};this.intersect=function(a,b,c,f,h,l,n){if(f.isSelection){b=a.getData().getVertexAttr("position").position.data;a=Number.MAX_VALUE;var v,x;h=f.camera;l=f.point;for(var w=0;w<b.length-5;w+=3){g[0]=b[w];g[1]=b[w+1];g[2]=b[w+2];d.multiplyVec3(c,g);m[0]=b[w+3];m[1]=b[w+4];m[2]=b[w+5];d.multiplyVec3(c,m);h.projectPoint(g,r);h.projectPoint(m,t);if(0>r[2]&&0<t[2])e.subtract(g,m,q),v=h.frustumPlanes,x=-(e.dot(v[4],g)+v[4][3]),v=x/e.dot(q,v[4]),
e.scale(q,v,q),e.add(g,q,g),h.projectPoint(g,r);else if(0<r[2]&&0>t[2])e.subtract(m,g,q),v=h.frustumPlanes,x=-(e.dot(v[4],m)+v[4][3]),v=x/e.dot(q,v[4]),e.scale(q,v,q),e.add(m,q,m),h.projectPoint(m,t);else if(0>r[2]&&0>t[2])continue;v=k.projectVectorVector2D(r,t,l);v<a&&(a=v,e.set(g,s),e.set(m,u))}c=f.p0;f=f.p1;2>a&&(a=k.linelineDistance3D(s,u,c,f),b=Number.MAX_VALUE,a[0]&&(e.subtract(a[2],c,p),a=e.length(p),e.scale(p,1/a),b=0.98*a/e.dist(c,f)),n(b,p))}};this.getGLMaterials=function(){return{color:w,
depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:void 0}};this.getAllTextureIds=function(){return[]}};v.STRIP=1;v.LINES=2;var w=function(a,c){n.basicGLMaterialConstructor(this,a);var d=c.get("simple"),e=a.getColor();this.beginSlot=function(a){return a===b.OPAQUE_MATERIAL};this.getProgram=function(){return d};this.bind=function(a,b){a.bindProgram(d);d.setUniform4fv("color",e);1>e[3]&&a.setBlendingEnabled(!0)};this.release=function(a){1>e[3]&&a.setBlendingEnabled(!1)};this.bindView=function(a,
b){n.bindView(b.origin,b.view,d)};this.bindInstance=function(a,b){d.setUniformMatrix4fv("model",b.transformation)};this.getDrawMode=function(b){b=b.gl;return a.lineType===v.STRIP?b.LINE_STRIP:b.LINES}};return v})},"esri/views/3d/layers/graphics/Graphics3DPathSymbolLayer":function(){define("../../../../core/declare ./Graphics3DSymbolLayer ./Graphics3DGraphicLayer ./Graphics3DSymbolCommonCode ../../support/projectionUtils ../../../../views/3d/lib/glMatrix ../../webgl-engine/Stage ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/Material ../../webgl-engine/lib/Util".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m){var q=f.vec3d,p=f.mat4d,r=m.assert,t=q.create(),s={};n=n([k],{_prepareResources:function(){var a="c3dsymbol"+this.symbol.id,b=this._getMaterialOpacityAndColor(),c=q.create(b),b=b[3],c={diffuse:c,ambient:c,opacity:b,transparent:1>b||this._isPropertyDriven("opacity"),vertexColors:this._isPropertyDriven("color")||this._isPropertyDriven("opacity")};this._material=new g(c,a+"_3dlinemat");this._context.stage.add(e.ModelContentType.MATERIAL,this._material);this.resolve()},
destroy:function(){this.isFulfilled()||this.reject();this._material&&(this._context.stage.remove(e.ModelContentType.MATERIAL,this._material.getId()),this._material=null)},createGraphics3DGraphic:function(a,b){var c=a.geometry;if("polyline"!==c.type)return this._logWarning("unsupported geometry type for path symbol: "+c.type),null;var c="polygon"===c.type?"rings":"paths",d="graphic"+a.uid,e=this._getGraphicElevationInfo(a);return this._createAs3DShape(a,c,b,e,d,a.uid)},layerPropertyChanged:function(a,
c,d){if("opacity"===a)return c=this._getMaterialOpacity(),d=1>c||this._isPropertyDriven("opacity"),this._material.setParameterValues({opacity:c,transparent:d}),!0;if("elevationInfo"===a){this._updateElevationInfo();a=this._context.elevationProvider;var e=this._context.renderCoordsHelper,g=b.ELEV_MODES.ABSOLUTE_HEIGHT,f;for(f in c){var h=c[f],l=h._graphics[d];l&&(h=this._getGraphicElevationInfo(h.graphic),l.elevationAligner=h.mode!==g?v:null,l.elevationInfo.set(h),v(l,a,e))}return!0}return!1},_getPathSize:function(a,
c){var d=a.size&&this._isPropertyDriven("size")?b.getSingleSizeDriver(a.size):this.symbol.size||this.symbol.width||1;return d/=this._context.renderCoordsHelper.unitInMeters},_createAs3DShape:function(e,g,f,m,k,r){var t=e.geometry,s=t.hasZ,n=t[g];if(0<n.length){g=[];e=[];for(var u=[],C=q.create(),J=this._context.renderSpatialReference===c.SphericalRenderSpatialReference,F=Array(6),G=this._getPathSize(f,this.symbol),n=b.getGeometryVertexData3D(n,s,t.spatialReference,this._context.renderSpatialReference,
this._context.elevationProvider,m),t=n.geometryData.outlines,s=n.eleVertexData,n=n.vertexData,K=0;K<t.length;++K){var N=t[K],V=N.index,U=N.count;if(this._context.clippingExtent&&(b.computeBoundingBox(s,V,U,F),b.boundingBoxClipped(F,this._context.clippingExtent)))continue;b.chooseOrigin(n,V,U,C);b.subtractCoordinates(n,V,U,C);N=new Float64Array(s.buffer,3*V*s.BYTES_PER_ELEMENT,3*U);V=b.flatArrayToArrayOfArrays(n,V,U);V=l.createTubeGeometry(V,0.5*G,10,J,C);V.getVertexAttr().mapPos={size:3,data:N};this._material.getParams().vertexColors&&
(N=this._getVertexOpacityAndColor(f),V=l.addVertexColors(V,N,!0));N=new d(V,k+"path"+K);N.singleUse=!0;g.push(N);e.push([this._material]);N=p.identity();p.translate(N,C,N);u.push(N)}if(0<g.length)return f=new h({geometries:g,materials:e,transformations:u,castShadow:!0,metadata:{layerId:this._context.layer.id,graphicId:r},idHint:k}),k=null,m.mode!==b.ELEV_MODES.ABSOLUTE_HEIGHT&&(k=v),new a(this,f,g,null,null,k,m)}return null}});var u=m.VertexAttrConstants,v=function(a,c,d){var e=a.stageObject;a=a.elevationInfo;
for(var g=e.getGeometryRecords(),f=g.length,h=0;h<f;h++){var l=g[h].geometry,m=[g[h].transformation[12],g[h].transformation[13],g[h].transformation[14]],k=l.getData().getVertexAttr(),q=k[u.POSITION].data,p=k.zOffset.data,k=k.mapPos.data,n=k.length/3;r(q.length/3===10*n+2,"unexpected tube geometry");var v=0,K=0;s.spatialReference=c.spatialReference;for(var N=0;N<n;N++){s.x=k[3*N];s.y=k[3*N+1];s.z=k[3*N+2];var V=b.computeElevation(c,s,a),U=10;(0===N||N===n-1)&&U++;for(var ha=0;ha<U;ha++)t[0]=q[v]+m[0],
t[1]=q[v+1]+m[1],t[2]=q[v+2]+m[2],d.setAltitude(V+p[K],t,0),q[v]=t[0]-m[0],q[v+1]=t[1]-m[1],q[v+2]=t[2]-m[2],v+=3,K+=1;l.invalidateBoundingInfo()}e.geometryVertexAttrsUpdated(h)}};return n})},"esri/views/3d/layers/graphics/Graphics3DFillSymbolLayer":function(){define("../../../../core/declare ../../../../core/screenUtils ./Graphics3DSymbolLayer ./Graphics3DGraphicLayer ./Graphics3DDrapedGraphicLayer ./ElevationAligners ./Graphics3DSymbolCommonCode ./lineUtils ./graphicUtils ../../../../geometry/Polygon ../../../../Color ../../lib/glMatrix ../../support/aaBoundingBox ../../webgl-engine/Stage ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/lib/Util ./earcut/earcut".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x){var y=w.VertexAttrConstants;w=m.vec3d;var B=m.mat4d;n=n([a],{_prepareResources:function(){this._prepareFillResources();this._prepareOutlineResources();this.resolve()},_prepareFillResources:function(){var a=this._getStageIdHint(),b=this._getMaterialOpacityAndColor(),b={color:b,transparent:1>b[3]||this._isPropertyDriven("opacity"),polygonOffset:!1,vertexColors:!0};this._material=new v(b,a+"_colormat");this._context.stage.add(p.ModelContentType.MATERIAL,
this._material)},_prepareOutlineResources:function(){var a=this.symbol.outline;if(this._hasOutline=!(!a||!a.size||!a.color))a={idHint:this._getStageIdHint()+"_outline",color:this._getOutlineColor(),width:k.pt2px(this.symbol.outline.size)},2<a.width?(this._outlineMaterial=h.createRibbonMaterial(a),this._isOutlineNativeLineMaterial=!1):(this._outlineMaterial=h.createNativeMaterial(a),this._isOutlineNativeLineMaterial=!0),this._context.stage.add(p.ModelContentType.MATERIAL,this._outlineMaterial)},destroy:function(){this.isFulfilled()||
this.reject();this._material&&(this._context.stage.remove(p.ModelContentType.MATERIAL,this._material.getId()),this._material=null);this._outlineMaterial&&(this._context.stage.remove(p.ModelContentType.MATERIAL,this._outlineMaterial.getId()),this._outlineMaterial=null)},createGraphics3DGraphic:function(a,b){var c=a.geometry;if("polyline"!==c.type&&"polygon"!==c.type&&"extent"!==c.type)return this._logWarning("unsupported geometry type for fill symbol: "+c.type),null;var c="graphic"+a.uid,d=this._getVertexOpacityAndColor(b,
Uint8Array,255),g=this._getGraphicElevationInfo(a);return g.mode===e.ELEV_MODES.ON_THE_GROUND?this._createAsOverlay(a,d,g,c):this._createAs3DShape(a,d,g,c,a.uid)},layerPropertyChanged:function(a,b,c){if("opacity"===a)return b=this._material.getColor(),b[3]=this._getMaterialOpacity(),this._material.setColor(b),this._material.setTransparent(1>b[3]),this._outlineMaterial&&(this._isOutlineNativeLineMaterial?(b=this._outlineMaterial.getColor(),b[3]=this._getOutlineOpacity(),this._outlineMaterial.setColor(b)):
(b=this._outlineMaterial.getParameterValues(),b.color[3]=this._getOutlineOpacity(),this._outlineMaterial.setParameterValues({color:b.color}))),!0;if("elevationInfo"===a){a=this._elevationInfo.mode;this._updateElevationInfo();var d=this._elevationInfo.mode;if(null==a||null==d)return!1;var g=e.ELEV_MODES;if(a===g.ON_THE_GROUND&&d===g.ON_THE_GROUND)return!0;if(a!==d&&(a===g.ON_THE_GROUND||d===g.ON_THE_GROUND))return!1;a=d===g.RELATIVE_TO_GROUND?f.perVertexElevationAligner:null;var d=this._context.elevationProvider,
g=this._context.renderCoordsHelper,h;for(h in b){var l=b[h],m=l._graphics[c];m&&(l=l.graphic,m.elevationAligner=a,m.elevationInfo.set(this._getGraphicElevationInfo(l)),f.perVertexElevationAligner(m,d,g))}return!0}return!1},setDrawOrder:function(a,b,c){this._material&&(this._material.setRenderPriority(a+b/2),c[this._material.getId()]=!0);this._outlineMaterial&&(this._outlineMaterial.setRenderPriority(a),c[this._outlineMaterial.getId()]=!0)},_createAs3DShape:function(a,c,d,g,h){var l=this._getPolyGeometry(a),
m=l.hasZ;a=!1;var k;null!=l.rings?(a=!0,k=l.rings):k=l.paths;if(0===k.length)return this._logWarning("no paths found for line symbol"),null;k=this._getOutlineGeometry(l,k);l=e.getGeometryVertexData3D(k,m,l.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,d);A.idHint=g;A.color=c;A.isRings=a;A.data=l;var q;this._hasOutline&&(q=new l.vertexData.constructor(l.vertexData));A.outNum=0;A.outGeometries=[];A.outTransforms=[];A.outMaterials=[];this._createAs3DShapeFill(A);
A.data.vertexData=q;this._createAs3DShapeOutline(A);if(0===A.outNum)return null;c=new r({geometries:A.outGeometries,materials:A.outMaterials,transformations:A.outTransforms,castShadow:!1,metadata:{layerId:this._context.layer.id,graphicId:h},idHint:g});g=null;d.mode===e.ELEV_MODES.RELATIVE_TO_GROUND&&(g=f.perVertexElevationAligner);return new b(this,c,A.outGeometries,null,null,g,d)},_createAs3DShapeFill:function(a){for(var b=a.data.geometryData.polygons,c=a.data.eleVertexData,d=a.data.vertexData,g=
0;g<b.length;++g){var f=b[g],h=f.count,l=f.index;if(this._context.clippingExtent&&(e.computeBoundingBox(c,l,h,H),e.boundingBoxClipped(H,this._context.clippingExtent)))continue;var m=new Float64Array(c.buffer,3*l*c.BYTES_PER_ELEMENT,3*h),k=new Float64Array(d.buffer,3*l*d.BYTES_PER_ELEMENT,3*h),f=f.holeIndices.map(function(a){return a-l}),f=x(m,f,3);0!==f.length&&(e.chooseOrigin(d,l,h,D),e.subtractCoordinates(d,l,h,D),h=this._createFillGeometry(f,0,k,m,a.color,!1),h=new t(h,a.idHint),h.singleUse=!0,
m=B.identity(),B.translate(m,D,m),a.outGeometries.push(h),a.outMaterials.push([this._material]),a.outTransforms.push(m),a.outNum++)}},_createAs3DShapeOutline:function(a){if(this._hasOutline)for(var b=a.data.geometryData.outlines,c=a.data.eleVertexData,d=a.data.vertexData,g=0;g<b.length;++g){var f=b[g],l=f.index,m=f.count;if(this._context.clippingExtent&&(e.computeBoundingBox(c,l,m,H),e.boundingBoxClipped(H,this._context.clippingExtent)))continue;e.chooseOrigin(d,l,m,D);e.subtractCoordinates(d,l,m,
D);f=new Float64Array(c.buffer,3*l*c.BYTES_PER_ELEMENT,3*m);l=new Float64Array(d.buffer,3*l*d.BYTES_PER_ELEMENT,3*m);l=h.createPolylineGeometry(l,f,a.isRings,I,0,!1);l=new t(l,a.idHint+"outline"+g);l.singleUse=!0;f=B.identity();B.translate(f,D,f);a.outGeometries.push(l);a.outMaterials.push([this._outlineMaterial]);a.outTransforms.push(f);a.outNum++}},_createAsOverlay:function(a,b,d,g){d=this._getPolyGeometry(a);a=!1;var f;null!=d.rings?(a=!0,f=d.rings):f=d.paths;f=this._getOutlineGeometry(d,f);if(0===
f.length)return null;this._material.setRenderPriority(this._symbolLayerOrder+this._symbolLayerOrderDelta/2);this._hasOutline&&this._outlineMaterial.setRenderPriority(this._symbolLayerOrder);d=e.getGeometryVertexDataDraped(f,d.spatialReference,this._context.overlaySR);A.idHint=g;A.color=b;A.isRings=a;A.data=d;var h;this._hasOutline&&(h=new d.vertexData.constructor(d.vertexData));A.outNum=0;A.outGeometries=[];A.outBoundingBox=q.create(q.NEGATIVE_INFINITY);this._createAsOverlayFill(A);A.data.vertexData=
h;this._createAsOverlayOutline(A);return 0<A.outNum?new c(this,A.outGeometries,null,null,A.outBoundingBox):null},_createAsOverlayFill:function(a){for(var b=a.data.vertexData,c=a.data.geometryData.polygons,d=0;d<c.length;++d){var g=c[d],f=g.count,h=g.index,l=new Float64Array(b.buffer,3*h*b.BYTES_PER_ELEMENT,3*f),g=g.holeIndices.map(function(a){return a-h}),l=x(l,g,3);if(0!==l.length&&(e.computeBoundingBox(b,h,f,H),!e.boundingBoxClipped(H,this._context.clippingExtent))){q.expand(a.outBoundingBox,H);
e.chooseOrigin(b,h,f,D);e.subtractCoordinates(b,h,f,D);e.setZ(b,h,f,this._getDrapedZ());f=B.identity();B.translate(f,D,f);l=this._createFillGeometry(l,h,b,null,a.color,!0);g=new u(l);g.material=this._material;var m=H;g.center=[0.5*(m[0]+m[3]),0.5*(m[1]+m[4]),0];g.bsRadius=0.5*Math.sqrt((m[3]-m[0])*(m[3]-m[0])+(m[4]-m[1])*(m[4]-m[1]));g.transformation=f;g.name=a.idHint;g.uniqueName=a.idHint+"#"+l.id;a.outGeometries.push(g);a.outNum++}}},_createAsOverlayOutline:function(a){if(this._hasOutline)for(var b=
a.data.vertexData,c=a.data.geometryData.outlines,d=0;d<c.length;++d){var g=c[d],f=g.index,g=g.count;e.computeBoundingBox(b,f,g,H);if(!e.boundingBoxClipped(H,this._context.clippingExtent)){q.expand(a.outBoundingBox,H);e.chooseOrigin(b,f,g,D);e.subtractCoordinates(b,f,g,D);e.setZ(b,f,g,this._getDrapedZ());g=new Float64Array(b.buffer,3*f*b.BYTES_PER_ELEMENT,3*g);f=B.identity();B.translate(f,D,f);var g=h.createPolylineGeometry(g,null,a.isRings,I,0,!0),l=new u(g);l.material=this._outlineMaterial;var m=
H;l.center=[0.5*(m[0]+m[3]),0.5*(m[1]+m[4]),0];l.bsRadius=0.5*Math.sqrt((m[3]-m[0])*(m[3]-m[0])+(m[4]-m[1])*(m[4]-m[1]));l.transformation=f;l.name=a.idHint+"outline";l.uniqueName=a.idHint+"outline#"+g.id;a.outGeometries.push(l);a.outNum++}}},_getOutlineGeometry:function(a,b){return a._outlineSegments?h.createOutlineGeometryFromSegments(b,a._outlineSegments):b},_getOutlineOpacity:function(){return this._getLayerOpacity()*this.symbol.outline.color.a},_getOutlineColor:function(){var a=this.symbol.outline.color,
b=this._getOutlineOpacity();return d.mixinColorAndOpacity(g.toUnitRGB(a),b)},_getPolyGeometry:function(a){a=a.geometry;"extent"===a.type&&(a=l.fromExtent(a));return a},_createFillGeometry:function(a,b,c,d,e,g){for(var f=a.length,h=new Uint32Array(f),l=new Uint32Array(f),m=0;m<f;m++)h[m]=a[m]+b,l[m]=0;b={};a={};b[y.POSITION]=h;b[y.COLOR]=l;a[y.POSITION]={size:3,data:c};a[y.COLOR]={size:4,data:e};d&&(a.mapPos={size:3,data:d},b.mapPos=h);c=[{type:"triangle",indices:b,positionKey:y.POSITION}];return g?
{faces:c[0],vertexAttr:a,id:s.getNewId().toString()}:new s(c,a)}});var H=q.create(),D=w.create(),I=new Float32Array([255,255,255,255]),A={idHint:null,color:null,isRings:!1,data:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};return n})},"esri/views/3d/layers/graphics/earcut/earcut":function(){define([],function(){function n(d,e,g){g=g||2;var l=e&&e.length,m=l?e[0]*g:d.length,q=k(d,0,m,g,!0),r=[];if(!q)return r;var t,s,n,u;if(l){var C=g,l=[],J,F,G;u=0;for(J=
e.length;u<J;u++)F=e[u]*C,G=u<J-1?e[u+1]*C:d.length,F=k(d,F,G,C,!1),F===F.next&&(F.steiner=!0),l.push(h(F));l.sort(c);for(u=0;u<l.length;u++){e=l[u];C=q;if(C=f(e,C))e=p(C,e),a(e,e.next);q=a(q,q.next)}}if(d.length>80*g){t=n=d[0];s=l=d[1];for(C=g;C<m;C+=g)u=d[C],e=d[C+1],u<t&&(t=u),e<s&&(s=e),u>n&&(n=u),e>l&&(l=e);n=Math.max(n-t,l-s)}b(q,r,g,t,s,n);return r}function k(a,b,c,d,e){var f;if(e===0<u(a,b,c,d))for(e=b;e<c;e+=d)f=r(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=r(e,a[e],a[e+1],f);f&&g(f,f.next)&&
(t(f),f=f.next);return f}function a(a,b){if(!a)return a;b||(b=a);var c=a,d;do if(d=!1,!c.steiner&&(g(c,c.next)||0===l(c.prev,c,c.next))){t(c);c=b=c.prev;if(c===c.next)return null;d=!0}else c=c.next;while(d||c!==b);return b}function b(c,f,h,k,r,s,n){if(c){if(!n&&s){var u=c,A=u;do null===A.z&&(A.z=e(A.x,A.y,k,r,s)),A.prevZ=A.prev,A=A.nextZ=A.next;while(A!==u);A.prevZ.nextZ=null;A.prevZ=null;var u=A,z,E,C,J,F,G,K=1;do{A=u;C=u=null;for(J=0;A;){J++;E=A;for(z=F=0;z<K&&!(F++,E=E.nextZ,!E);z++);for(G=K;0<
F||0<G&&E;)0===F?(z=E,E=E.nextZ,G--):0===G||!E?(z=A,A=A.nextZ,F--):A.z<=E.z?(z=A,A=A.nextZ,F--):(z=E,E=E.nextZ,G--),C?C.nextZ=z:u=z,z.prevZ=C,C=z;A=E}C.nextZ=null;K*=2}while(1<J)}for(u=c;c.prev!==c.next;){A=c.prev;E=c.next;if(s)a:{C=c;G=k;var N=r,V=s;J=C.prev;F=C;K=C.next;if(0<=l(J,F,K))C=!1;else{var U=J.x>F.x?J.x>K.x?J.x:K.x:F.x>K.x?F.x:K.x,ha=J.y>F.y?J.y>K.y?J.y:K.y:F.y>K.y?F.y:K.y;z=e(J.x<F.x?J.x<K.x?J.x:K.x:F.x<K.x?F.x:K.x,J.y<F.y?J.y<K.y?J.y:K.y:F.y<K.y?F.y:K.y,G,N,V);G=e(U,ha,G,N,V);for(N=C.nextZ;N&&
N.z<=G;){if(N!==C.prev&&N!==C.next&&d(J.x,J.y,F.x,F.y,K.x,K.y,N.x,N.y)&&0<=l(N.prev,N,N.next)){C=!1;break a}N=N.nextZ}for(N=C.prevZ;N&&N.z>=z;){if(N!==C.prev&&N!==C.next&&d(J.x,J.y,F.x,F.y,K.x,K.y,N.x,N.y)&&0<=l(N.prev,N,N.next)){C=!1;break a}N=N.prevZ}C=!0}}else a:if(C=c,J=C.prev,F=C,K=C.next,0<=l(J,F,K))C=!1;else{for(z=C.next.next;z!==C.prev;){if(d(J.x,J.y,F.x,F.y,K.x,K.y,z.x,z.y)&&0<=l(z.prev,z,z.next)){C=!1;break a}z=z.next}C=!0}if(C)f.push(A.i/h),f.push(c.i/h),f.push(E.i/h),t(c),u=c=E.next;else if(c=
E,c===u){if(n)if(1===n){n=f;u=h;A=c;do E=A.prev,C=A.next.next,!g(E,C)&&(m(E,A,A.next,C)&&q(E,C)&&q(C,E))&&(n.push(E.i/u),n.push(A.i/u),n.push(C.i/u),t(A),t(A.next),A=c=C),A=A.next;while(A!==c);c=A;b(c,f,h,k,r,s,2)}else{if(2===n)a:{n=c;do{for(u=n.next.next;u!==n.prev;){if(A=n.i!==u.i){A=n;E=u;C=void 0;if(C=A.next.i!==E.i)if(C=void 0,C=A.prev.i!==E.i){C=C=void 0;b:{C=A;do{if(C.i!==A.i&&C.next.i!==A.i&&C.i!==E.i&&C.next.i!==E.i&&m(C,C.next,A,E)){C=!0;break b}C=C.next}while(C!==A);C=!1}if(C=!C)if(C=void 0,
C=q(A,E))if(C=void 0,C=q(E,A)){C=A;J=!1;F=(A.x+E.x)/2;E=(A.y+E.y)/2;do C.y>E!==C.next.y>E&&F<(C.next.x-C.x)*(E-C.y)/(C.next.y-C.y)+C.x&&(J=!J),C=C.next;while(C!==A);C=J}}A=C}if(A){c=p(n,u);n=a(n,n.next);c=a(c,c.next);b(n,f,h,k,r,s);b(c,f,h,k,r,s);break a}u=u.next}n=n.next}while(n!==c)}}else b(a(c),f,h,k,r,s,1);break}}}}function c(a,b){return a.x-b.x}function f(a,b){var c=b,e=a.x,g=a.y,f=-Infinity,h;do{if(g<=c.y&&g>=c.next.y){var l=c.x+(g-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(l<=e&&l>f){f=l;if(l===
e){if(g===c.y)return c;if(g===c.next.y)return c.next}h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(e===f)return h.prev;for(var l=h,m=h.x,k=h.y,p=Infinity,r,c=h.next;c!==l;){if(e>=c.x&&c.x>=m&&d(g<k?e:f,g,m,k,g<k?f:e,g,c.x,c.y))if(r=Math.abs(g-c.y)/(e-c.x),(r<p||r===p&&c.x>h.x)&&q(c,a))h=c,p=r;c=c.next}return h}function e(a,b,c,d,e){a=32767*(a-c)/e;b=32767*(b-d)/e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&
858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function h(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function d(a,b,c,d,e,g,f,h){return 0<=(e-f)*(b-h)-(a-f)*(g-h)&&0<=(a-f)*(d-h)-(c-f)*(b-h)&&0<=(c-f)*(g-h)-(e-f)*(d-h)}function l(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function g(a,b){return a.x===b.x&&a.y===b.y}function m(a,b,c,d){return g(a,b)&&g(c,d)||g(a,d)&&g(c,b)?!0:0<l(a,b,c)!==0<l(a,b,d)&&0<l(c,d,a)!==0<l(c,d,b)}function q(a,b){return 0>l(a.prev,
a,a.next)?0<=l(a,b,a.next)&&0<=l(a,a.prev,b):0>l(a,b,a.prev)||0>l(a,a.next,b)}function p(a,b){var c=new s(a.i,a.x,a.y),d=new s(b.i,b.x,b.y),e=a.next,g=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;g.next=d;d.prev=g;return d}function r(a,b,c,d){a=new s(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function t(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function s(a,b,c){this.i=a;this.x=
b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function u(a,b,c,d){for(var e=0,g=c-d;b<c;b+=d)e+=(a[g]-a[b])*(a[b+1]+a[g+1]),g=b;return e}n.deviation=function(a,b,c,d){var e=b&&b.length,g=Math.abs(u(a,0,e?b[0]*c:a.length,c));if(e)for(var e=0,f=b.length;e<f;e++)g-=Math.abs(u(a,b[e]*c,e<f-1?b[e+1]*c:a.length,c));for(e=b=0;e<d.length;e+=3){var f=d[e]*c,h=d[e+1]*c,l=d[e+2]*c;b+=Math.abs((a[f]-a[l])*(a[h+1]-a[f+1])-(a[f]-a[h])*(a[l+1]-a[f+1]))}return 0===g&&0===b?0:Math.abs((b-
g)/g)};n.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var g=0;g<a[e].length;g++)for(var f=0;f<b;f++)c.vertices.push(a[e][g][f]);0<e&&(d+=a[e-1].length,c.holes.push(d))}return c};return n})},"esri/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer":function(){define("../../../../core/declare ./Graphics3DSymbolLayer ./Graphics3DGraphicLayer ./Graphics3DSymbolCommonCode ../../../../geometry/Polygon ../../support/projectionUtils ../../lib/glMatrix ../../webgl-engine/Stage ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/materials/Material ../../webgl-engine/lib/Util ./earcut/earcut".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p){function r(a,b,c,d,e,g,f,h,l,m,k,q,p,r){var t=c.length/3,n=0;k+=2*d.count;var u=d.index,x=d.count,w=l,ea=k;v.set(p,y);var I=0<q?1:-1,u=3*u,z=w;p=3*z;for(var E=w+x,w=3*E,G=0;G<x;++G)r&&(y[0]=a[u+0],y[1]=a[u+1],y[2]=a[u+2],v.normalize(y)),e[p+0]=a[u+0],e[p+1]=a[u+1],e[p+2]=a[u+2],g[p+0]=b[u+0],g[p+1]=b[u+1],g[p+2]=b[u+2],f[p+0]=-I*y[0],f[p+1]=-I*y[1],f[p+2]=-I*y[2],h[z]=0,e[w+0]=a[u+0]+q*y[0],e[w+1]=a[u+1]+q*y[1],e[w+2]=a[u+2]+q*y[2],g[w+0]=b[u+0],g[w+1]=b[u+1],
g[w+2]=b[u+2],f[w+0]=I*y[0],f[w+1]=I*y[1],f[w+2]=I*y[2],h[E]=q,p+=3,w+=3,u+=3,z+=1,E+=1;u=0;p=3*(ea+t);w=3*ea;a=B;b=H;0>q&&(a=H,b=B);for(G=0;G<t;++G)m[p+0]=c[u+a[0]],m[p+1]=c[u+a[1]],m[p+2]=c[u+a[2]],m[w+0]=c[u+b[0]]+x,m[w+1]=c[u+b[1]]+x,m[w+2]=c[u+b[2]]+x,p+=3,w+=3,u+=3;l+=2*d.count;k=k+2*t-(2*d.count+2*t);s(e,g,h,f,n,d.pathLengths[0],d.count,l,m,k,q);l+=4*d.pathLengths[0];k+=2*d.pathLengths[0];n+=d.pathLengths[0];for(c=1;c<d.pathLengths.length;++c)s(e,g,h,f,n,d.pathLengths[c],d.count,l,m,k,q),l+=
4*d.pathLengths[c],k+=2*d.pathLengths[c],n+=d.pathLengths[c]}function t(a,b,c,d,e,g,f){d[g]=d[f];f*=3;g*=3;a[g+0]=a[f+0];a[g+1]=a[f+1];a[g+2]=a[f+2];b[g+0]=b[f+0];b[g+1]=b[f+1];b[g+2]=b[f+2];c[g+0]=e[0];c[g+1]=e[1];c[g+2]=e[2]}function s(a,b,c,d,e,g,f,h,l,m,k){var q=e,p=e+1,r=e+f,s=e+f+1,n=h,u=h+1,x=h+2*g;h=h+2*g+1;0>k&&(q=e+f+1,s=e);m*=3;for(var y=0;y<g;++y){y===g-1&&(0<k?(p=e,s=e+f):(p=e,q=e+f));var w=a,B=q,H=p,G=r,F=I,B=3*B,H=3*H,G=3*G;v.set3(w[B++],w[B++],w[B++],A);v.set3(w[H++],w[H++],w[H++],
z);v.set3(w[G++],w[G++],w[G++],E);v.subtract(z,A,C);v.subtract(E,A,J);v.cross(J,C,F);v.normalize(F,F);t(a,b,d,c,I,n,q);t(a,b,d,c,I,u,p);t(a,b,d,c,I,x,r);t(a,b,d,c,I,h,s);l[m++]=n;l[m++]=x;l[m++]=h;l[m++]=n;l[m++]=h;l[m++]=u;q++;p++;r++;s++;n+=2;u+=2;x+=2;h+=2}}var u=q.VertexAttrConstants,v=e.vec3d,w=e.mat4d,x=v.create(),y=v.create(),B=[0,2,1],H=[0,1,2],D={};n=n([k],{_prepareResources:function(){var a=this._getStageIdHint(),b=this._getMaterialOpacityAndColor(),c=v.create(b),b=b[3],c={diffuse:c,ambient:c,
opacity:b,transparent:1>b||this._isPropertyDriven("opacity"),vertexColors:!0};this._material=new m(c,a+"_3dlinemat");this._context.stage.add(h.ModelContentType.MATERIAL,this._material);this.resolve()},destroy:function(){this.isFulfilled()||this.reject();this._material&&this._context.stage.remove(h.ModelContentType.MATERIAL,this._material.getId())},createGraphics3DGraphic:function(a,b){var c=a.geometry;if("polygon"!==c.type&&"extent"!==c.type)return this._logWarning("unsupported geometry type for extrude symbol: "+
c.type),null;var c="polygon"===c.type||"extent"===c.type?"rings":"paths",d="graphic"+a.uid,e=this._getVertexOpacityAndColor(b,Float32Array,255),g=this._getGraphicElevationInfo(a);return this._createAs3DShape(a,c,b,e,g,d,a.uid)},layerPropertyChanged:function(a,c,d){if("opacity"===a)return c=this._getMaterialOpacity(),d=1>c||this._isPropertyDriven("opacity"),this._material.setParameterValues({opacity:c,transparent:d}),!0;if("elevationInfo"===a){this._updateElevationInfo();a=this._context.elevationProvider;
var e=this._context.renderCoordsHelper,g=b.ELEV_MODES.ABSOLUTE_HEIGHT,f;for(f in c){var h=c[f],l=h._graphics[d];l&&(h=this._getGraphicElevationInfo(h.graphic),l.elevationAligner=h.mode!==g?K:null,l.elevationInfo.set(h),K(l,a,e))}return!0}return!1},_getExtrusionSize:function(a,c){var d=a.size&&this._isPropertyDriven("size")?b.getSingleSizeDriver(a.size):this.symbol.size||1;return d/=this._context.renderCoordsHelper.unitInMeters},_createAs3DShape:function(e,g,h,m,k,q,t){var s=e.geometry;"extent"===
s.type&&(s=c.fromExtent(s));var n=s[g],u=s.hasZ;if(0<n.length){g=[];e=[];var x=[],y=v.create(),B=Array(6),I=this._context.renderSpatialReference===f.SphericalRenderSpatialReference;h=this._getExtrusionSize(h,this.symbol.size);var z=v.create();I||this._context.renderCoordsHelper.worldUpAtPosition(null,z);for(var u=b.getGeometryVertexData3D(n,u,s.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,k),s=u.geometryData.polygons,n=u.eleVertexData,u=u.vertexData,H=u.length/
3,G=new Float64Array(18*H),E=new Float64Array(18*H),A=new Float64Array(18*H),H=new Float64Array(6*H),ea=0,F=0;F<s.length;++F){var C=s[F],D=C.count,J=C.index;if(this._context.clippingExtent&&(b.computeBoundingBox(n,J,D,B),b.boundingBoxClipped(B,this._context.clippingExtent)))continue;var ja=new Float64Array(n.buffer,3*J*G.BYTES_PER_ELEMENT,3*D),ka=C.holeIndices.map(function(a){return a-J}),ja=p(ja,ka,3);if(0<ja.length){b.chooseOrigin(u,J,D,y);var ka=new Uint32Array(6*D+2*ja.length),ga=6*D,ma=new Float64Array(G.buffer,
3*ea*G.BYTES_PER_ELEMENT,3*ga),pa=new Float64Array(E.buffer,3*ea*E.BYTES_PER_ELEMENT,3*ga),sa=new Float64Array(A.buffer,3*ea*A.BYTES_PER_ELEMENT,3*ga),oa=new Float64Array(H.buffer,1*ea*H.BYTES_PER_ELEMENT,1*ga);r(u,n,ja,C,ma,sa,pa,oa,0,ka,0,h,z,I);b.subtractCoordinates(ma,0,ga,y);ea+=6*D;C=this._createExtrudeGeometry(ka,{positions:ma,elevation:sa,normals:pa,heights:oa},m,!1);C=new l(C,q+"path"+F);C.singleUse=!0;g.push(C);e.push([this._material]);C=w.identity();w.translate(C,y,C);x.push(C)}}return 0<
g.length?(m=new d({geometries:g,materials:e,transformations:x,castShadow:!0,metadata:{layerId:this._context.layer.id,graphicId:t},idHint:q}),q=null,k.mode!==b.ELEV_MODES.ABSOLUTE_HEIGHT&&(q=K),new a(this,m,g,null,null,q,k)):null}this._logWarning("no paths found for extrusion symbol");return null},_createExtrudeGeometry:function(a,b,c,d){for(var e=a.length,f=new Uint32Array(e),h=0;h<e;h++)f[h]=0;h={};e={};h[u.POSITION]=a;h[u.NORMAL]=a;h[u.COLOR]=f;e[u.POSITION]={size:3,data:b.positions};e[u.NORMAL]=
{size:3,data:b.normals};e[u.COLOR]={size:4,data:c};e[u.SIZE]={size:1,data:b.heights};b.elevation&&(e.mapPos={size:3,data:b.elevation},h.mapPos=a);a=[{type:"triangle",indices:h,positionKey:u.POSITION}];return d?{faces:a[0],vertexAttr:e,id:g.getNewId().toString()}:new g(a,e)}});var I=v.create(),A=v.create(),z=v.create(),E=v.create(),C=v.create(),J=v.create(),F=v.create(),G=v.create(),K=function(a,c,d){var e=a.stageObject;a=a.elevationInfo;var g=d.setAltitude;D.spatialReference=c.spatialReference;for(var f=
e.getGeometryRecords(),h=f.length,l=0;l<h;l++){var m=f[l].geometry,k=f[l].transformation;G[0]=k[12];G[1]=k[13];G[2]=k[14];m.invalidateBoundingInfo();for(var q=m.getData().getVertexAttr(),m=q[u.POSITION].data,k=q[u.SIZE].data,q=q.mapPos.data,p=m.length/3,r=0,t=0,s=!1,n=0;n<p;n++){D.x=q[t];D.y=q[t+1];D.z=q[t+2];F[0]=m[r];F[1]=m[r+1];F[2]=m[r+2];var v=b.computeElevation(c,D,a);x[0]=m[r]+G[0];x[1]=m[r+1]+G[1];x[2]=m[r+2]+G[2];g(v+k[r/3],x,0);m[r]=x[0]-G[0];m[r+1]=x[1]-G[1];m[r+2]=x[2]-G[2];v=0.01/d.unitInMeters;
if(Math.abs(F[0]-m[r])>v||Math.abs(F[1]-m[r+1])>v||Math.abs(F[2]-m[r+2])>v)s=!0;t+=3;r+=3}s&&e.geometryVertexAttrsUpdated(l)}};return n})},"esri/views/3d/layers/graphics/Graphics3DTextSymbolLayer":function(){define("../../../../core/declare ../../../../core/screenUtils ../../../../Color ./Graphics3DSymbolLayer ./Graphics3DGraphicLayer ./ElevationAligners ./Graphics3DSymbolCommonCode ./Graphics3DIconSymbolLayer ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/TextTexture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m){var q=[1,1,1],p=[0,0,1],r=f.perObjectElevationAligner;n=n([b],{_prepareResources:function(){var a=this.symbol;this._anchor=-1<h.VALID_ANCHOR_STRINGS.indexOf(a.anchor)?a.anchor:"center";this.resolve()},destroy:function(){this.isFulfilled()||this.reject()},createGraphics3DGraphic:function(a,b,c,d){var g=a.geometry,f=!1;if("polyline"===g.type)g=e.placePointOnPolyline(g),f=!0;else if("polygon"===g.type)g=e.placePointOnPolygon(g);else if("extent"===g.type)g=g.get("center");
else if("point"!==g.type)return this._logWarning("unsupported geometry type for text symbol: "+g.type),null;var h=this._context.layer.id+"_label_"+a.uid,l=b.text||this.symbol.text;if(!l||1>l.length)return null;var m=this._getGraphicElevationInfo(a);return this._createAs3DShape(this.symbol,g,l,m,h,a.uid,b,c,d,f)},layerPropertyChanged:function(a,b,c){if("opacity"===a)console.warn("layer opacity change not yet implemented in Graphics3DTextSymbolLayer");else if("elevationInfo"===a){this._updateElevationInfo();
if(b)for(var d in b){a=b[d];var e=a._graphics[c];e&&this.updateGraphicElevationInfo(a.graphic,e)}return!0}return!1},updateGraphicElevationInfo:function(a,b){var c=this._context,d=this._getGraphicElevationInfo(a);b.elevationAligner=d.mode!==e.ELEV_MODES.ABSOLUTE_HEIGHT?r:null;b.elevationInfo.set(d);r(b,c.elevationProvider,c.renderCoordsHelper)},_defaultElevationInfoNoZ:function(){return t},_getGraphicElevationInfo:function(a){var b=this.inherited(arguments);b.mode===e.ELEV_MODES.ON_THE_GROUND?(b.mode=
e.ELEV_MODES.RELATIVE_TO_GROUND,b.offset=1/this._context.renderCoordsHelper.unitInMeters,b.featureExpression={value:0}):b.mode===e.ELEV_MODES.RELATIVE_TO_GROUND&&(0===b.offset&&!a.geometry.get("hasZ"))&&(b.offset=1/this._context.renderCoordsHelper.unitInMeters);return b},_createAs3DShape:function(b,h,r,t,n,y,B,H,D,I){var A=B.centerOffset||[0,0,0,1],z=B.screenOffset||[0,0],E=B.translation||[0,0,0,0],C=B.anchor||this._anchor||"center";this._anchor=C;var J=b.material?a.toUnitRGB(b.material.color):q,
F={shadowColor:0.35<0.299*J[0]+0.587*J[1]+0.114*J[2]?"black":"white",shadowBlur:1};B=null!=D;b=new g(r,{size:k.pt2px(b.size)||12,color:J,font:{family:b.font&&b.font.family?b.font.family:"Arial",weight:b.font&&b.font.weight?b.font.weight:"normal",style:b.font&&b.font.style?b.font.style:"normal"},canvasStyle:F},n,B);r=B?D.addTextTexture(b):null;J=this._getMaterialOpacity();z={textureId:B?r.texture.getId():b.getId(),texCoordScale:b.getTexcoordScale(),occlusionTest:!0,screenOffset:z,anchorPos:C,polygonOffset:!0,
color:[1,1,1,J],transparent:1>J};I&&(z.shaderPolygonOffset=1E-4);I=null;C=JSON.stringify(z);null!=H?(I=H.getMaterial(C),null==I?(I=new m(z,n),H.addMaterial(C,I)):B&&I.setTextureDirty()):I=new m(z,n);B=[I];I=[b.getTextWidth(),b.getTextHeight()];A=l.createPointGeometry(p,E,void 0,I,!1,A,r?r.uvMinMax:null);A=[new d(A,n)];n=e.createStageObjectForPoint.call(this,h,A,[B],null,null,t,n,this._context.layer.id,y,!0);y=null;t.mode!==e.ELEV_MODES.ABSOLUTE_HEIGHT&&(y=f.perObjectElevationAligner);t=new c(this,
n,A,null==H?B:null,null==D?[b]:null,y,t);e.extendPointGraphicElevationInfo(t,h,this._context.elevationProvider);return t}});var t={mode:e.ELEV_MODES.RELATIVE_TO_GROUND,offset:0};return n})},"esri/views/3d/webgl-engine/lib/TextTexture":function(){define("require exports ./Texture ./Util ../../../webgl/Texture ../../../webgl/enums".split(" "),function(n,k,a,b,c,f){return function(){function e(a,b,c){this._idHint=c;this._text=a;this._textLines=a.split(/\r?\n/);this._params=b||{color:[0,0,0]};this._params.size=
this._params.size||18;this._params.font=this._params.font||{family:"Arial"};this._params.font.family=this._params.font.family||"Arial";this._params.font.weight=this._params.font.weight||"normal";this._params.font.style=this._params.font.style||"normal";this._fillStyle="rgb("+this._params.color.map(function(a){return Math.floor(255*a)}).toString()+")"}e.prototype.getId=function(){null==this._id&&(this._id=a.idGen.gen(this._idHint));return this._id};e.prototype.getParams=function(){return this._params};
e.prototype.getString=function(){return this._text};e.prototype.initializeThroughRender=function(a,d){var e=this._create2DCanvas(),g=e.getContext("2d");g.save();var f=this.getTextWidth(),k=this.getTextHeight();e.setAttribute("width",f.toString());e.setAttribute("height",k.toString());d.samplingMode=9729;d.wrapMode=33071;d.flipped=!0;this._params.enableMipmapping&&(f=b.nextHighestPowerOfTwo(f),k=b.nextHighestPowerOfTwo(k),d.hasMipmap=!0,d.samplingMode=9985);this.renderText(1,f,k,g);e=new c(a,d,e);
this._params.enableMipmapping&&this._renderMipmap(e);g.restore();return e};e.prototype.getTextWidth=function(){var a=this._create2DCanvas().getContext("2d");this._setTextProperties(a,this._params.size);var b=0,c;for(c in this._textLines){var e=a.measureText(this._textLines[c]).width;e>b&&(b=e)}c=this._params.font;if("italic"===c.style||"oblique"===c.style||"string"===typeof c.weight&&("bold"===c.weight||"bolder"===c.weight)||"number"===typeof c.weight&&600<c.weight)b+=0.3*a.measureText("A").width;
return b};e.prototype.getTextHeight=function(){return this.getLineHeight()*this._textLines.length};e.prototype.getTexcoordScale=function(){if(this._params.enableMipmapping){var a=this.getTextHeight(),c=this.getTextWidth();return[c/b.nextHighestPowerOfTwo(c),a/b.nextHighestPowerOfTwo(a)]}return[1,1]};e.prototype.getLineHeight=function(){return Math.floor(1.275*this._params.size)};e.prototype.setUnloadFunc=function(a){this._unloadFunc=a};e.prototype.unload=function(){this._unloadFunc&&(this._unloadFunc(this._id),
this._unloadFunc=null)};e.prototype.renderText=function(a,b,c,e,f,k){void 0===f&&(f=0);void 0===k&&(k=0);c=this.getLineHeight()*a;this._setTextProperties(e,this._params.size*a);a="center"===e.textAlign?0.5*b:"right"===e.textAlign?b:0;a+=f;f=0+k;for(var p in this._textLines)e.fillText(this._textLines[p],a,f),f+=c};e.prototype._create2DCanvas=function(){null==e._textCanvas2D&&(e._textCanvas2D=document.createElement("canvas"),e._textCanvas2D.setAttribute("id","canvas2d"),e._textCanvas2D.setAttribute("width",
"1024"),e._textCanvas2D.setAttribute("height","1024"),e._textCanvas2D.setAttribute("style","display:none"));return e._textCanvas2D};e.prototype._setTextProperties=function(a,c){a.fillStyle=this._fillStyle;var e=this._params.font;a.font=e.style+" "+e.weight+" "+c+"px "+e.family;a.textAlign="left";a.textBaseline="top";this._params.canvasStyle&&b.mergeObjects(a,this._params.canvasStyle,a)};e.prototype._renderMipmap=function(a){var b=this._create2DCanvas(),c=b.getContext("2d"),e=parseInt(b.getAttribute("width"),
10)/2,f=parseInt(b.getAttribute("height"),10)/2,k=0.5,p=1;do b.setAttribute("width",e.toString()),b.setAttribute("height",f.toString()),this.renderText(k,e,f,c),a.updateData(p,0,0,e,f,b),k*=0.5,e*=0.5,f*=0.5,p++;while(1<e&&1<f)};return e}()})},"esri/views/3d/layers/graphics/Graphics3DWebStyleSymbol":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../support/PromiseLightweight"],function(n,k,a,b){return function(b){function f(a,f){var d=this;b.call(this);this.graphics3DSymbol=
this.symbol=null;this.symbol=a;a.fetchSymbol().then(function(a){if(d.isRejected())throw Error();d.graphics3DSymbol=f(a)}).then(function(){if(d.isRejected())throw Error();d.graphics3DSymbol.then(function(){d.isRejected()||d.resolve()},function(a){d.isRejected()||d.reject(a)})}).otherwise(function(a){d.isRejected()||d.reject(a)})}a(f,b);f.prototype.createGraphics3DGraphic=function(a,b){return this.graphics3DSymbol.createGraphics3DGraphic(a,b,this)};f.prototype.layerPropertyChanged=function(a,b){return this.graphics3DSymbol.layerPropertyChanged(a,
b)};f.prototype.applyRendererDiff=function(a,b,c){return this.graphics3DSymbol.applyRendererDiff(a,b,c)};f.prototype.setDrawOrder=function(a,b){return this.graphics3DSymbol.setDrawOrder(a,b)};f.prototype.destroy=function(){this.isFulfilled()||this.reject();this.graphics3DSymbol&&this.graphics3DSymbol.destroy()};return f}(b.Promise)})},"esri/views/3d/layers/graphics/Graphics3DOwner":function(){define(["require","exports"],function(n,k){var a=function(){return function(){this.localOriginFactory=this.layerView=
this.layer=this.overlaySR=this.renderCoordsHelper=this.renderSpatialReference=this.clippingExtent=this.layerOrderDelta=this.layerOrder=this.stage=this.renderer=this.elevationProvider=this.streamDataSupplier=this.sharedResources=null}}();k.Graphics3DSymbolCreationContext=a})},"esri/views/3d/layers/graphics/Graphics3DSpatialIndex":function(){define("require exports dojo/Deferred ../../../../processors/SpatialIndex ../../../../geometry/SpatialReference ../../../../geometry/support/webMercatorUtils".split(" "),
function(n,k,a,b,c,f){return function(){function e(){var c=this;this.spatialIndex=new b;this.spatialIndexNumPendingQueries=this.spatialIndexNumGraphics=0;this.graphicsCore=this.viewSR=this.layer=this.layerView=null;this._readyDfd=new a;var d=function(a){return a.workerClient&&a.workerClient.worker};if(d(this.spatialIndex))this._readyDfd.resolve();else this.spatialIndex.on("start",function(){d(c.spatialIndex)&&c._readyDfd.resolve()})}e.prototype.initialize=function(a,b,c,e){this.layerView=a;this.layer=
b;this.viewSR=c;this.graphicsCore=e};e.prototype.destroy=function(){this.spatialIndex&&(this.spatialIndex.destroy(),this.spatialIndex=null);this.graphicsCore=this.layerView=this.viewSR=null};e.prototype.numNodesUpdating=function(){return 0};e.prototype.isUpdating=function(){return 0<this.spatialIndexNumPendingQueries};e.prototype.hasGraphics=function(){return 0<this.spatialIndexNumGraphics};e.prototype.intersects=function(a,b,c){var e=this;this.hasGraphics()&&(this.spatialIndexNumPendingQueries++,
this.spatialIndex.intersects(a,void 0,void 0,!0).then(function(a){e.spatialIndexNumPendingQueries--;c(a.results,a.results.length);e.layerView._evaluateUpdatingState()}))};e.prototype.shouldAddToSpatialIndex=function(a,b,c){return c||b.mustAlignToTerrain()};e.prototype.addGraphicsToSpatialIndex=function(a){if(this.layerView.loadedGraphics)for(var b=this.layerView.loadedGraphics.toArray(),c=b.length,e=0;e<c;e++){var f=b[e],k=this.graphicsCore.getGraphics3DGraphicById(f.uid);k&&!k.addedToSpatialIndex&&
this.shouldAddToSpatialIndex(f,k,a)&&this.addGraphicToSpatialIndex(f,k)}};e.prototype.addGraphicToSpatialIndex=function(a,b){var e=a.geometry.spatialReference,g=this.viewSR,m={id:a.uid,geometry:null};if(e.equals(g))m.geometry=a.geometry.toJSON();else{var k=void 0;if(e.wkid===c.WGS84.wkid&&g.isWebMercator)k=f.geographicToWebMercator(a.geometry);else if(e.isWebMercator&&g.wkid===c.WGS84.wkid)k=f.webMercatorToGeographic(a.geometry);else return console.warn("Cannot convert graphic geometry to map spatial reference, elevation and scale updates are disabled"),
!1;m.geometry=k.toJSON()}this.spatialIndexNumGraphics++;this.spatialIndex.runProcess([m],this.layer.id);return b.addedToSpatialIndex=!0};e.prototype.whenLoaded=function(){return this._readyDfd.promise};return e}()})},"esri/processors/SpatialIndex":function(){define("../core/declare dojo/Deferred dojo/_base/lang ./Processor ../workers/WorkerClient ../layers/FeatureLayer".split(" "),function(n,k,a,b,c,f){return n([b],{declaredClass:"esri.processors.SpatialIndex",index:null,indexType:"rtree",autostart:!1,
constructor:function(b){b=b||{};var f=!1!==b.autostart;a.mixin(this,b);this.workerCallback=["./scripts/helpers","./scripts/indexInterface","./indexWorker"];if(!this.fetchWithWorker){var d=this;this.workerClient=new c("./mutableWorker",function(a){this.workerClient=a;this.workerCallback.push("./libs/"+this.indexType);this.workerClient.importScripts(this.workerCallback).then(function(){d._attachedSystem=!0;f&&d.start()})}.bind(this))}this._featCache={}},destroy:function(){this.workerClient&&this.workerClient.terminate()},
addLayer:function(a,b){if(a.graphics&&a.graphics.length||b||a.isInstanceOf(f)){var c=this.workerClient;if(!this._attachedSystem&&c.worker){var l=this;this.inherited(arguments,[a,!0]);c.importScripts("./libs/"+this.indexType).then(function(){l.runProcess(a.graphics,a.id);l._attachedSystem=!0})}else this.inherited(arguments,[a])}},unsetMap:function(){this.stop();this.workerClient.terminate();this.fetchWithWorker||(this.workerClient=new c(this.workerCallback,function(){}));this.inherited(arguments);
this.start()},removeLayer:function(a){this.inherited(arguments)},runProcess:function(a,b){if(a&&a.length){var c=this,f=this.workerClient,g=a[0]._graphicsLayer;!b&&0!==b&&(b=g?g.id:"rawFeatures_"+Object.keys(this._featCache).length);this._featCache[b]||(this._featCache[b]={});for(var m,k,p=[],r=a.length,t=g&&g.objectIdField;r--;)if(k=a[r],m=k.attributes&&t?k.attributes[t]:k.id,null==m||!this._featCache[b][m])this._featCache[b][m]=1,k.declaredClass?p.push({id:m,geometry:k.geometry.toJSON(!0),attributes:k.attributes}):
p.push(k);f.postMessage({insert:p,system:this.indexType,options:this.indexOptions,idField:g&&g.objectIdField,layerId:b}).then(function(a){g&&g.emit("process-end",{processor:c,results:{insert:a.insert}})});g&&g.emit("process-start",{processor:this})}},_sendFeaturesFromLayer:function(a,b){var c=b.graphic,f=this.workerClient,g=this,k=c.attributes[a.objectIdField];this._featCache[a.id]||(this._featCache[a.id]={});this._featCache[a.id][k]||(this._featCache[a.id][k]=1,f.postMessage({insert:[{attributes:c.attributes,
geometry:c.geometry.toJSON(!0)}],system:this.indexType,options:this.indexOptions,idField:a.objectIdField,layerId:a.id}).then(function(b){a.emit("process-end",{processor:g,results:{insert:b.insert}})}),a.emit("process-start",{processor:g}))},_notifyProcessStart:function(a,b){},_sendFeaturesFromTask:function(a,b){var c=b.featureSet.features,f=[],g=this.workerClient,k=this,q=c.length,p,r;for(this._featCache[a.id]||(this._featCache[a.id]={});q--;)r=c[q],p=r.attributes[a.objectIdField],this._featCache[a.id][p]||
(this._featCache[a.id][p]=1,f.push(r));g.postMessage({insert:f,system:this.indexType,options:this.indexOptions,idField:a.objectIdField,layerId:a.id}).then(function(b){a.emit("process-end",{processor:k,results:{insert:b.insert}})});a.emit("process-start",{processor:k})},get:function(){},intersects:function(a,b,c,f){return"rtree"!=this.indexType?(console.error("Index.intersects only works with rtree indexes"),a=new k,a.reject({message:"Index.intersects only works with rtree indexes"}),a.promise):this.workerClient.postMessage({search:a,
layerId:b,returnNode:c,onlyIds:f})},within:function(a,b,c){if("rtree"!=this.indexType)return console.error("Index.within only works with rtree indexes"),a=new k,a.reject({message:"Index.within only works with rtree indexes"}),a.promise},nearest:function(a){return"kdtree"!=this.indexType?(console.error("Index.nearest only works with kdtree indexes"),a=new k,a.reject({message:"Index.nearest only works with kdtree indexes"}),a.promise):this.workerClient.postMessage({search:a})}})})},"esri/processors/Processor":function(){define("../core/sniff ../core/declare dojo/_base/lang dojo/_base/array dojo/Evented ../workers/RequestClient ../layers/GraphicsLayer".split(" "),
function(n,k,a,b,c,f,e){return k([c],{declaredClass:"esri.processors.Processor",layers:null,results:null,passFeatures:!0,drawFeatures:!0,requireWorkerSupport:!0,fetchWithWorker:!1,workerCallback:null,workerClient:null,_started:null,_handlers:null,constructor:function(b){b=b||{};a.mixin(this,b);!n("esri-workers")&&(!1!==this.requireWorkerSupport||!1!==b.requireWorkerSupport)?(console.log("Browser doesn't support workers \x26 worker support is required for this processor"),this.addLayer=this.setMap=
this.start=this.runProcess=function(){},this._disabled=!0):(this._handlers={},this._notifyProcessStart=a.hitch(this,this._notifyProcessStart),this._sendFeaturesFromTask=a.hitch(this,this._sendFeaturesFromTask),this._sendFeaturesFromLayer=a.hitch(this,this._sendFeaturesFromLayer),!1!==b.autostart&&this.start())},addLayer:function(b,c){var e=b._task,g=this._handlers[b.id]=[],k="complete";!1===this.drawFeatures&&(b._params.drawMode=!1);this.fetchWithWorker?(this.workerClient||(this.workerClient=f.getClient(this.workerCallback)),
e.requestOptions={workerOptions:{worker:this.workerClient}},this.passFeatures&&g.push(e.on(k,a.partial(this._notifyProcessStart,b)))):this.passFeatures?(k=this.drawFeatures?"graphic-draw":"graphic-add",g.push(b.on(k,a.partial(this._sendFeaturesFromLayer,b)))):g.push(e.on(k,a.partial(this._sendFeaturesFromTask,b)));!0!==c&&b.graphics&&this.runProcess(b.graphics,b.id)},removeLayer:function(a){b.forEach(this._handlers[a.id],function(a){a.remove()});delete this._handlers[a.id]},setMap:function(a){if(this.map)if(a!=
this.map)this.unsetMap();else return;var c=this;b.forEach(this.layers,c.removeLayer);b.forEach(a.graphicsLayerIds,function(b){c.addLayer(a.findLayerById(b))});this._handlers.map=[a.on("layer-add",function(a){a=a.layer;a.isInstanceOf(e)&&c.addLayer(a)}),a.on("layer-remove",function(a){a=a.layer;a.isInstanceOf(e)&&c.removeLayer(a)})];this.map=a},unsetMap:function(){this.map&&(b.forEach(this._handlers.map,function(a){a.remove()}),delete this._handlers.map,b.forEach(this.layers,this.removeLayer),this.map=
null)},start:function(){this.map?this.setMap(this.map):this.layers&&(a.isArray(this.layers)||(this.layers=[this.layers]),b.forEach(this.layers,this.addLayer));this._started=!0;this.emit("start",{processor:this});console.log("processor started")},stop:function(){this._started=!1;for(var a in this._handlers)this._handlers.hasOwnProperty(a)&&(this._handlers[a].remove(),delete this._handlers[a]);this.emit("stop",{processor:this});console.log("processor stopped")},runProcess:function(a,b){},_sendFeaturesFromTask:function(){},
_sendFeaturesFromLayer:function(){},_notifyProcessStart:function(){}})})},"esri/workers/RequestClient":function(){define(["../core/declare","dojo/_base/xhr","../config","./WorkerClient"],function(n,k,a,b){function c(a,b){var c=new f;c.addWorkerCallback(a,b);e.unshift({id:b?a+"::"+b:a,client:c});e.length>h&&e.pop().client.terminate();return c}var f=n([b],{declaredClass:"esri.workers.RequestClient",constructor:function(){this.setWorker(["./mutableWorker","./requestWorker"],function(){})},get:function(a){return this._send("GET",
a)},post:function(a){return this._send("POST",a)},_send:function(a,b){var c=k._ioSetArgs(b);c.xhr=null;var d=c.ioArgs,e=d.url;delete d.url;delete d.args;this.postMessage({method:a,url:e,options:d}).then(this._getSuccessHandler(c),this._getErrorHandler(c),this._getProgressHandler(c));return c},_addHeaderFunctions:function(a){a.getResponseHeader=function(b){var c,d=a.headers;Object.keys(d).forEach(function(a){if(a.toLowerCase()==b.toLowerCase())return c=d[a],!1});return c};a.getAllResponseHeaders=function(){var b=
[],c=a.headers;Object.keys(c).forEach(function(a){b.push(a+": "+c[a])});return b=b.join("\n")};return a},_getSuccessHandler:function(a){var b=this,c=a.ioArgs;return function(d){a.xhr=b._addHeaderFunctions(d);d=a.xhr.getResponseHeader("content-type");if(("xml"==c.handleAs||-1<d.indexOf("xml"))&&"string"==typeof a.xhr.response)a.xhr.response=(new DOMParser).parseFromString(a.xhr.response,"text/xml");a.resolve(a.xhr.response,a.xhr)}},_getErrorHandler:function(a){return function(b){a.reject(b)}},_getProgressHandler:function(a){return function(b){a.progress(b)}}}),
e=[],h=a.request.maxWorkers,d=new f;f.getClient=function(a,b){if(a){var f;e.some(function(c){if(c.id==(b?a+"::"+b:a))f=c.client;return!0});return f||c(a,b)}return d};f.setLimit=function(b){h=a.request.maxWorkers=b};return f})},"esri/workers/WorkerClient":function(){define("dojo/Evented ../core/declare dojo/Deferred dojo/_base/lang dojo/request ../core/sniff ../core/urlUtils require".split(" "),function(n,k,a,b,c,f,e,h){var d=window.Blob||window.webkitBlob||window.mozBlob,l=window.URL||window.webkitURL||
window.mozURL;return k([n],{declaredClass:"esri.workers.WorkerClient",worker:null,_queue:null,constructor:function(a,c){this._isIE=f("ie");this._queue={};this._acceptMessage=b.hitch(this,this._acceptMessage);this._errorMessage=b.hitch(this,this._errorMessage);a&&this.setWorker(a,function(a){this.worker=a;c(this)}.bind(this))},setWorker:function(a,b){if(a instanceof Array){var c=a;a=c.shift()}var f=this._getUrl(a),h=!e.hasSameOrigin(e.makeAbsolute(f),location.href),k;if(!1===f)return console.log("Can not resolve worker path"),
!1;this.worker&&(k=this.worker,k.removeEventListener("message",this._acceptMessage,!1),k.removeEventListener("error",this._errorMessage,!1),k.terminate(),k=null);if(h){h=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(h,function(a){a=l.createObjectURL(new d([a],{type:"text/javascript"}));b(this._createWorker(a,f))}.bind(this))}catch(s){try{h=e.getProxyUrl(h).path+"?"+encodeURI(h),this._useProxy=!0,b(this._createWorker(h,c))}catch(n){return console.log("Can not create worker"),!1}}}else b(this._createWorker(f,
c))},_createWorker:function(a,b){var c=new Worker(a);c.addEventListener("message",this._acceptMessage,!1);c.addEventListener("error",this._errorMessage,!1);this.worker=c;b&&this.importScripts(b);return c},postMessage:function(b,c){if(b instanceof Array||"object"!=typeof b)b={data:b};var d=Math.floor(64E9*Math.random()).toString(36);b.msgId=d;d=this._queue[d]=new a;this.worker?(c?this.worker.postMessage(b,c):this.worker.postMessage(b),this.emit("start-message",{target:this,message:b})):d.reject({message:"No worker was set."});
return d.promise},terminate:function(){var a=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var b=a.length-1;0<=b;b--)this._queue[a[b]].cancel("terminated"),delete this._queue[a[b]]},addWorkerCallback:function(c,d){var e;e=this._getUrl(c,!0);return!1===e?(e=new a,e.reject({message:"Could not load text from "+c}),e.promise):this.postMessage({action:"add-callback",url:e,cbName:d||"main"}).then(b.hitch(this,function(a){a.target=this;this.emit("callback-added",a)}))},importScripts:function(a){Array.isArray(a)||
(a=[a]);a=a.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!e.hasSameOrigin(a,location.href)&&(a=e.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);return this.postMessage({action:"import-script",url:a}).then(b.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}))},_acceptMessage:function(a){var b=a.data,c=b.msgId;if(b.status&&"debug"==b.status)console[b.showAs||"debug"](b);else if(c&&c in this._queue){var d=this._queue[c];"progress"==b.status?d.progress(a.data):("error"==
b.status?d.reject(a.data):d.resolve(a.data),delete this._queue[c])}this.emit("message",{message:a.data,event:a,target:this})},_errorMessage:function(a){this.onerror||this.onError?this.onerror?this.onerror(a):this.onError(a):console.log("Worker Error: "+a.message+"\nIn "+a.filename+" on "+a.lineno)},_getUrl:function(a,b){if(!a)return console.error("can not resolve empty path"),!1;a.match(/\.js$/)||(a+=".js");var c=h.toUrl(a);return b?e.makeAbsolute(c):c},_getRemoteText:function(a,b){(a=this._getUrl(a))&&
c.get(a,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(a){b(a)})},_startBlobWorker:function(){var a=this._xdSource;a||(a=this._getUrl("./mutableWorker"),a=new d(["if(!self._mutable){importScripts('"+a+"');}"],{type:"text/javascript"}),a=this._xdSource=l.createObjectURL(a));try{return new Worker(a)}catch(b){return console.log(b.message),!1}}})})},"esri/layers/GraphicsLayer":function(){define("../core/Accessor ../core/Collection ../core/promiseUtils ./Layer ./mixins/ScaleRangeLayer ../Graphic dojo/_base/lang".split(" "),
function(n,k,a,b,c,f,e){var h=n.createSubclass({properties:{layer:null,layerView:null,graphics:null}});return b.createSubclass([c],{declaredClass:"esri.layers.GraphicsLayer",viewModulePaths:{"2d":"../views/2d/layers/GraphicsLayerView2D","3d":"../views/3d/layers/FeatureLayerView3D"},getDefaults:function(a){return e.mixin(this.inherited(arguments),{graphics:[]})},destroy:function(){this.removeAll()},_gfxHdl:null,properties:{elevationInfo:null,graphics:{type:k.ofType(f),set:function(a){var b=this._get("graphics");
b||(a.forEach(function(a){a.layer=this},this),this._gfxHdl=a.on("change",function(a){var b,c,d;d=a.added;for(b=0;c=d[b];b++)c.layer=this;d=a.removed;for(b=0;c=d[b];b++)c.layer=null}.bind(this)),this._set("graphics",a),b=a);b.removeAll();b.addMany(a)}},type:"graphics"},add:function(a){this.graphics.add(a);return this},addMany:function(a){this.graphics.addMany(a);return this},removeAll:function(){this.graphics.removeAll();return this},createGraphicsController:function(b){return a.resolve(new h({layer:this,
layerView:b.layerView,graphics:this.graphics}))},remove:function(a){this.graphics.remove(a)},removeMany:function(a){this.graphics.removeMany(a)},graphicChanged:function(a){this.emit("graphic-update",a)}})})},"esri/views/3d/layers/graphics/Graphics3DElevationAlignment":function(){define(["require","exports"],function(n,k){return function(){function a(){this.elevationDirtyGraphicsQueue=[];this.elevationDirtyGraphicsSet={};this.elevationUpdateEventHandle=null;this.eventHandles=[];this.updateElevation=
!1;this.graphicsCore=this.layerView=null}a.prototype.initialize=function(a,c,f,e){var h=this;this.layerView=a;this.graphicsCore=f;this.elevationChangedCallback=c;this.elevationUpdateEventHandle=e.on("elevation-change",function(a){return h.elevationUpdateHandler(a)});this.eventHandles.push(this.layerView.watch("suspended",function(){return h.suspendedChange()}))};a.prototype.destroy=function(){this.elevationDirtyGraphicsSet=this.elevationDirtyGraphicsQueue=null;this.elevationUpdateEventHandle&&(this.elevationUpdateEventHandle.remove(),
this.elevationUpdateEventHandle=null);this.eventHandles.forEach(function(a){return a.remove()});this.elevationChangedCallback=this.graphicsCore=this.layerView=this.eventHandles=null};a.prototype.clear=function(){this.elevationDirtyGraphicsSet={};this.elevationDirtyGraphicsQueue=[]};a.prototype.suspendedChange=function(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&this.markAllGraphicsElevationDirty()};a.prototype.isUpdating=function(){return 0<
this.elevationDirtyGraphicsQueue.length};a.prototype.numNodesUpdating=function(){return this.elevationDirtyGraphicsQueue.length};a.prototype.needsIdleUpdate=function(){return this.layerView.view.basemapTerrain&&0<this.elevationDirtyGraphicsQueue.length};a.prototype.idleUpdate=function(a){if(!a.done()){var c=this.layerView.view,f=this.elevationDirtyGraphicsQueue.length;if(0<f){for(var e=this.graphicsCore.stageLayer.getId(),h=this.graphicsCore.labelStageLayer?this.graphicsCore.labelStageLayer.getId():
null,d=0,l=0,l=0;l<f;l++){var g=this.elevationDirtyGraphicsQueue[l],k=this.graphicsCore.graphics[g];k&&k.alignWithElevation(c.basemapTerrain,c.renderCoordsHelper);delete this.elevationDirtyGraphicsSet[g];d++;if(20<=d){c._stage.processDirtyLayer(e);null!=h&&c._stage.processDirtyLayer(h);if(a.done())break;d=0}}c._stage.processDirtyLayer(e);null!=h&&c._stage.processDirtyLayer(h);this.elevationDirtyGraphicsQueue.splice(0,l+1);c.labelManager.setDirty();this.layerView._evaluateUpdatingState()}}};a.prototype.markAllGraphicsElevationDirty=
function(){for(var a in this.graphicsCore.graphics)this.markGraphicElevationDirty(this.graphicsCore.graphics[a].graphic.uid);this.layerView._evaluateUpdatingState()};a.prototype.markGraphicElevationDirty=function(a){this.elevationDirtyGraphicsSet[a]||(this.elevationDirtyGraphicsSet[a]=!0,this.elevationDirtyGraphicsQueue.push(a))};a.prototype.elevationUpdateHandler=function(a){var c=this,f=a.extent;if(this.layerView.suspended){if(!this.updateElevation&&(a=this.graphicsCore.computedExtent)&&f[2]>a.xmin&&
f[0]<a.xmax&&f[3]>a.ymin&&f[1]<a.ymax)this.updateElevation=!0}else-Infinity===f[0]?this.markAllGraphicsElevationDirty():this.elevationChangedCallback(f,a.spatialReference,function(a,b){for(var d=!1,f=0;f<b;f++){var g=a[f],k=c.graphicsCore.graphics[g];k&&k.mustAlignToTerrain()&&(c.markGraphicElevationDirty(g),d=!0)}d&&c.layerView._evaluateUpdatingState()})};return a}()})},"esri/views/3d/navigation/spherical/NavigationSpherical":function(){define("../Navigation ./ConstraintsSpherical ./AnimationSpherical ./actions/PanSpherical ./actions/ZoomSpherical ./actions/RotateSpherical ../../webgl-engine/lib/Camera ../../support/earthUtils ../../lib/glMatrix".split(" "),
function(n,k,a,b,c,f,e,h,d){var l=d.vec3d,g=d.mat4d,m=l.create(),q=l.create(),p=g.create();return n.createSubclass([k,a],{declaredClass:"esri.views.3d.navigation.spherical.NavigationSpherical",initialize:function(){this.pan=new b({navigation:this});this.zoom=new c({navigation:this});this.rotate=new f({navigation:this});this._intersectTerrainSelector.enableBackfacesTerrain=!1},getInitialCamera:function(){return new e(l.createFrom(4*h.earthRadius,0,0),l.createFrom(h.earthRadius,0,0),l.createFrom(0,
0,1))},fixTargetUpVector:function(){this.cameras.target.computeUpOnSphere()},setPoiAuto:function(a,b){var c=this.picker.pickAlongRay(this.cameras.target.eye,this.cameras.target.center,null,a);this.picker.pickedIntersectionPoint(c,m)&&(this.setCameraFromEyeAndCenter(this.cameras.target.eye,m,{animate:!1}),l.set(this.cameras.target.center,this.cameras.current.center),b&&this.setCurrentToTarget())},rotateCameraWithPointsOnSphere:function(a,b,c,d,e){var f;null==e&&(e=l.length(a));1E-4<=Math.abs(l.length(a)-
e)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere]: invalid radius for source point (got "+e+", but expected "+l.length(a)+", "+a+")"),f=l.length(a));1E-4<=Math.abs(l.length(b)-e)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere: invalid radius for target point (got "+e+", but expected "+l.length(b)+")"),void 0===f&&(f=l.length(b)));void 0!==f&&(e=f);a=this.rotationFromPointsOnSphere(a,b,e,q);g.identity(p);g.rotate(p,a,q);g.multiplyVec3(p,c.eye,d.eye);g.multiplyVec3(p,
c.center,d.center);g.multiplyVec3(p,c.up,d.up)},rotationFromPointsOnSphere:function(a,b,c,d){l.cross(a,b,d);return-Math.acos(1-l.dist2(a,b)/(2*c*c))}})})},"esri/views/3d/navigation/Navigation":function(){define(["../../../core/Accessor","../../../core/Evented","../../../core/watchUtils","./Picker","./mixins/CamerasMixin"],function(n,k,a,b,c){return n.createSubclass([c,k],{properties:{interacting:{get:function(){return this._interacting},readOnly:!0},renderCoordsHelper:{},renderUnitInMeters:{dependsOn:["renderCoordsHelper"],
get:function(){return this.renderCoordsHelper?this.renderCoordsHelper.unitInMeters:1}},picker:{},constraints:{},pan:{},zoom:{},rotate:{}},initialize:function(){this._mapCoordsHelperHandle=a.init(this.view,"mapCoordsHelper",function(a){this.mapCoordsHelper=a}.bind(this));this._renderCoordsHelperHandle=a.init(this.view,"renderCoordsHelper",this.updateRenderCoordsHelper.bind(this));this.picker=new b(this,this.view);this._interacting=!1},destroy:function(){this._mapCoordsHelperHandle.remove();this._renderCoordsHelperHandle.remove()},
updateRenderCoordsHelper:function(a){this.renderCoordsHelper=a;this.inherited(arguments)},begin:function(a){this.pan&&this.pan.continuous&&this.pan.continuous.stop();this._interacting=!0;this.notifyChange("interacting")},end:function(a){this._interacting=!1;this.notifyChange("interacting")}})})},"esri/views/3d/navigation/Picker":function(){define(["../../../core/declare","../support/RenderCoordsHelper","../lib/glMatrix","../webgl-engine/lib/Selector"],function(n,k,a,b){var c=a.vec3d,f=c.create(),
e=c.create();return n([],{constructor:function(a,c){this.navigation=a;this.pickAlongRay=c._pickRay.bind(c);this.createPickRay=c._pickRayWithBeginPoint.bind(c);this.selector=new b},pickPointInScreen:function(a,b){return this.pickedIntersectionPoint(this.pickInScreen(a,!1),b)},pickFreePointInScreen:function(a,b){this.createPickRay(a,void 0,this.navigation.currentCamera.viewMatrix,f,e);b||(b=c.create());c.subtract(e,f);c.normalize(e);var l=this.navigation.view.dataExtent,g=l.xmax-l.xmin,m=l.ymax-l.ymin,
q=8*Math.max(l.xmax-l.xmin,l.ymax-l.ymin),g=Math.max(g,m,q),m=this.navigation.currentCamera,q=Math.max(0,l.xmin-m.eye[0],m.eye[0]-l.xmax),l=Math.max(0,l.ymin-m.eye[1],m.eye[1]-l.ymax),l=Math.sqrt(q*q+l*l),q="global"==this.navigation.view.viewingMode?k.Spherical.prototype.getAltitude(m.eye):k.Planar.prototype.getAltitude(m.eye),m=this.navigation._getTerrainElevationBelowCamera(m),m=Math.abs(q-m)+Number.MIN_VALUE,m=Math.pow(Math.max(0,Math.log(g/m)),2),m=g/Math.max(1,m),m=Math.max(m,Math.min(l,g));
c.scale(e,m);c.add(f,e,b)},pickInScreen:function(a,b){this.createPickRay(a,void 0,this.navigation.currentCamera.viewMatrix,f,e);b&&c.set(this.navigation.currentCamera.eye,f);return this.pickAlongRay(f,e,a,a,null,null,this.selector)},pickedIntersectionPoint:function(a,b){if(!a)return!1;b||(b=c.create());return a.getMinResult().getIntersectionPoint(b)}})})},"esri/views/3d/navigation/mixins/CamerasMixin":function(){define("../../../../core/Accessor ../../../../core/Evented ../../webgl-engine/lib/Camera ../../support/mathUtils ../../lib/glMatrix dojo/on".split(" "),
function(n,k,a,b,c,f){var e=c.vec4d.create();return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.mixins.CamerasMixin",properties:{targetCamera:{get:function(){return this.cameras.target}},currentCamera:{get:function(){return this.cameras.current}},windowSize:{set:function(a){var b=a[0],c=a[1],e=!1,f=this.cameras.target.x-this.cameras.target.padding[3],k=this.cameras.target.y-this.cameras.target.padding[2];if(this.cameras.target.width+f!==b||this.cameras.target.height+k!==c)this.cameras.target.width=
b-f,this.cameras.target.height=c-k,this.targetChanged(),e=!0;f=this.cameras.current.x-this.cameras.current.padding[3];k=this.cameras.current.y-this.cameras.current.padding[2];if(this.cameras.current.width+f!==b||this.cameras.current.height+k!==c)this.cameras.current.width=b-f,this.cameras.current.height=c-k,this.currentChanged(),e=!0;e&&this.currentHasReachedTarget()&&this.currentReachedTarget();this._set("windowSize",a)}},padding:{set:function(a){var c=!1,f=!1;e[0]=a.top;e[1]=a.right;e[2]=a.bottom;
e[3]=a.left;b.vectorEquals(this.cameras.current.padding,e)||(this.cameras.current.padding=e,f=!0);b.vectorEquals(this.cameras.target.padding,e)||(this.cameras.target.padding=e,c=!0);c&&this.targetChanged();f&&this.currentChanged();this.currentHasReachedTarget()&&(c||f)&&this.currentReachedTarget()}}},initialize:function(){var a=this.getInitialCamera();this.cameras={current:a,target:a.copy()}},currentHasReachedTarget:function(){return this.cameras.current.equals(this.cameras.target)},currentHasAlmostReachedTarget:function(){return this.cameras.current.almostEquals(this.cameras.target,
5E-4/this.renderUnitInMeters)},setCamera:function(a,b){this.pan&&this.pan.continuous&&this.pan.continuous.stop();this.cameras.target.copyFrom(a);var c=!(b&&b.internalUpdate)||!this._targetCameraChangedByElevationUpdate;c&&this._targetCameraBeforeElevationUpdate.copyFrom(a);this._targetCameraAnimated.copyFrom(this.cameras.target);this.applyConstraints(this._targetCameraAnimated,!0);var e=!1;this.constrainTargetEyeByElevation()&&(e=!0);this.applyConstraints(this.cameras.target,!0)&&(e=!0);this.fixTargetUpVector();
this.currentHasReachedTarget()?(this.targetChanged(),e&&c&&(this._targetCameraChangedByElevationUpdate=!0),this.currentReachedTarget()):(void 0!==b&&void 0!==b.animate&&!b.animate?(this.targetAndCurrentChanged(!0),e=!0):this.targetAnimatedChanged(!1,b,!0),e&&c&&(this._targetCameraChangedByElevationUpdate=!0),this._autoUpdateTiltConstraint())},getTargetCamera:function(){console.warn("[Navigation.getTargetCamera()] deprecated; use .targetCamera instead");return this.targetCamera},getCurrentCamera:function(){console.warn("[Navigation.getCurrentCamera()] deprecated; use .currentCamera instead");
return this.currentCamera},_cameraFromEyeCenterUp:function(a,b,c){var e=this.cameras.target.copy();e.eye=a;e.center=b;e.up=c;return e},setCameraFromEyeAndCenter:function(a,b,c){this.setCamera(this._cameraFromEyeCenterUp(a,b,this.cameras.target.up),c)},setCameraFromEyeCenterAndUp:function(a,b,c,e){this.setCamera(this._cameraFromEyeCenterUp(a,b,c),e)},_cameraEvents:{},_prepareCameraEvent:function(b,c){var e=this._cameraEvents[b];e||(e={camera:new a},this._cameraEvents[b]=e);e.camera.copyFrom(c);return e},
emitWithCamera:function(a,b){f.emit(this,a,this._prepareCameraEvent(a,b))},targetChanged:function(a){this.inherited(arguments);this.cameras.target.markViewDirty();var b=this._prepareCameraEvent("targetViewChanged",this.cameras.target);b.interruptedAnimation=!!a;b.finishedAnimation=!1;f.emit(this,"targetViewChanged",b)},targetAnimatedChanged:function(a,b,c){this.targetChanged(a);this.startAnimation(b,c)},targetAndCurrentChanged:function(a){this.targetChanged(a);this.setCurrentToTarget(!1,a)},currentChanged:function(){this.inherited(arguments);
this.cameras.current.markViewDirty();this.emitWithCamera("currentViewChanged",this.cameras.current)},currentReachedTarget:function(a,b){this.inherited(arguments);this.currentChanged();if(!this.pan||!this.pan.continuous||!this.pan.continuous.active){var c=this._prepareCameraEvent("currentViewReachedTarget",this.cameras.current);c.finishedAnimation=!!a;c.interruptedAnimation=!!b;f.emit(this,"currentViewReachedTarget",c)}},setCurrentToTarget:function(a,b){this.cameras.current.copyFrom(this.cameras.target);
this.currentReachedTarget(a,b)}})})},"esri/views/3d/navigation/spherical/ConstraintsSpherical":function(){define("../mixins/ConstraintsMixin ../../support/mathUtils ../../support/earthUtils ../../lib/glMatrix ../../constraints/SceneViewAltitudeConstraint ../../constraints/SceneViewTiltConstraint ../../webgl-engine/lib/Util".split(" "),function(n,k,a,b,c,f,e){var h=b.vec3d,d=h.create();return n.createSubclass({declaredClass:"esri.views.3d.navigation.spherical.ConstraintsSpherical",defaultConstraints:{tilt:new n.Tilt({min:function(){return k.deg2rad(f.MAX_DEFAULT)},
max:k.makePiecewiseLinearFunction([[4E3,k.deg2rad(f.MIN_DEFAULT)],[5E4,k.deg2rad(88)],[6E6,k.deg2rad(88)],[2E7,k.deg2rad(f.MAX_DEFAULT)]])}),altitude:new n.Altitude({min:function(){return c.MIN_DEFAULT},max:function(){return c.MAX_DEFAULT}}),collision:new n.Collision},initialize:function(){this.captainNemoAltitudeThreshold=2E4;this.captainNemoElevationThreshold=-500},limitAltitude:function(b,c,e,f){h.scale(e,b/f,d);h.subtract(c,d,d);var k=this.renderCoordsHelper.getAltitude(d),r=this.constraints.altitude.apply(this,
k);if(1E-6<Math.abs(k-r)){var t=h.length(c);c=h.dot(e,c)/(t*f);if(0.9999<Math.abs(c))return b+(r-k);k=r+a.earthRadius;b=-2*t*c;t=b*b-4*(-(k*k)+t*t);if(0>t)return this.minPoiDist;t=Math.sqrt(t);return t<b?(b-t)/2:(t-b)/2}return b},limitTiltByAltitudeConstraints:function(b,c,d,e){c=h.length(c);var f=c*c,r=d*d,t=Math.sqrt(f+r-2*c*d*Math.cos(Math.PI-b))-a.earthRadius,s=this.constraints.altitude.min(),n=this.constraints.altitude.max(),v;if((void 0===e||0<e)&&t<s)v=s;else if((void 0===e||0>e)&&t>n)v=n;
void 0!==v&&(b=v+a.earthRadius,b=Math.PI-k.acos((-(b*b)+f+r)/(2*c*d)));return b},distanceToSilhouette:function(b,c,d,e,f){f||(f={maxFarNearRatio:0,distance:0});b=h.dot(b.eye,b.eye);c=a.earthRadius*a.earthRadius;f.maxFarNearRatio=this.maxFarNearRatio;this.isNemoMode(b,e)?(e=a.earthRadius+e,f.distance=Math.sqrt(b-e*e)):b>c?(f.maxFarNearRatio=k.clamp(2E4-19E3*((Math.log(Math.sqrt(b)-a.earthRadius)-7.983)/9.011),1E3,2E4),f.distance=Math.sqrt(b-c)):f.distance=this.maxFarNearRatio*this.minNearDistance;
f.distance*=1.2;return f},isNemoMode:function(b,c){var d=a.earthRadius+this.captainNemoAltitudeThreshold;return b<d*d&&c<this.captainNemoElevationThreshold},intersectManifold:function(b,c,d,f){return e.raySphereClosestPositive(b,c,a.earthRadius+d,f)},getFallbackCenterAlongViewDirection:function(b,c,d){var e=h.dot(b,b),f=a.earthRadius*a.earthRadius,e=e>f?Math.sqrt(e-f)/3:1;h.subtract(c,b,d);h.scale(d,e/h.length(d),d);h.add(d,b)}})})},"esri/views/3d/navigation/mixins/ConstraintsMixin":function(){define("../../../../core/Accessor ../../../../core/watchUtils ../../../../geometry/Point ../../support/mathUtils ../../lib/glMatrix ../../constraints/SceneViewAltitudeConstraint ../../webgl-engine/lib/Camera ../../webgl-engine/lib/IntervalUtilities ../../webgl-engine/lib/Selector".split(" "),
function(n,k,a,b,c,f,e,h,d){function l(a){return new D.Tilt({min:function(){return 0.01},max:function(){return b.deg2rad(a.tilt.max)}})}function g(a){return new D.Altitude({min:function(){return a.altitude.min},max:function(){return a.altitude.max}})}var m=c.vec3d,q=c.mat4d,p=new a,r=m.create(),t=m.create(),s=q.create(),u=m.create(),v=m.create(),w=m.create(),x=new e,y=m.create(),B={tilt:0,distance:0},H={distance:0,maxFarNearRatio:0},D=n.createSubclass([],{declaredClass:"esri.views.3d.navigation.mixins.ConstraintsMixin",
properties:{userConstraints:{set:function(a){this._disconnectUserConstraints();this._connectUserConstraints(a);this._set("userConstraints",a)}},elevationProvider:{value:null,set:function(a){null!==this._elevationChangeHandle&&(this._elevationChangeHandle.remove(),this._elevationChangeHandle=null);null!==this._elevationChangeTileHandle&&(this._elevationChangeTileHandle.remove(),this._elevationChangeTileHandle=null);null!==a&&(this._elevationChangeHandle=a.on("elevation-change",this._elevationChangeHandler.bind(this)),
this._elevationChangeTileHandle=a.on("elevation-change-tile",this._elevationChangeTileHandler.bind(this)));this._set("elevationProvider",a)}},minPoiDist:{get:function(){return this._minPoiDistInMeters/this.renderUnitInMeters},dependsOn:["renderUnitInMeters"]},cameraElevationMargin:{get:function(){return this._cameraElevationMarginInMeters/this.renderUnitInMeters},dependsOn:["renderUnitInMeters"]},minNearDistance:{get:function(){return this._minNearDistanceInMeters/this.renderUnitInMeters},dependsOn:["renderUnitInMeters"]},
renderUnitInMeters:{},constraintsEnabled:{value:!0}},constructor:function(){this._userConstraints=null;this._userConstraintsHandles=[];this._clipDistanceHandles=[];this._tiltHandles=[];this._altitudeHandles=[];this.constraints={tilt:this.defaultConstraints.tilt,altitude:this.defaultConstraints.altitude,collision:this.defaultConstraints.collision};this._tiltModeHandler=this._tiltModeHandler.bind(this);this._tiltMaxHandler=this._tiltMaxHandler.bind(this);this._altitudeModeHandler=this._altitudeModeHandler.bind(this);
this._altitudeMinMaxHandler=this._altitudeMinMaxHandler.bind(this);this._clipDistanceModeHandler=this._clipDistanceModeHandler.bind(this);this._clipDistanceNearFarHandler=this._clipDistanceNearFarHandler.bind(this);this._collisionEnabledHandler=this._collisionEnabledHandler.bind(this);this.enableElevationUpdates=!0;this.updateTargetByElevationUpdates=D.UPDATE_TARGET_BY_ELEVATION_UPDATES_DEFAULT;this._recomputeTargetEyeForElevationChange=this._recomputeTargetCenterForElevationChange=!1;this._elevationChangeTileHandle=
this._elevationChangeHandle=null;this._autoAltitudeConstraints={min:f.MIN_DEFAULT,max:f.MAX_DEFAULT};this.maxFarNearRatio=2E4;this._minNearDistanceInMeters=2;this._minPoiDistInMeters=4;this._cameraElevationMarginInMeters=5;this._intersectTerrainSelector=new d;this._intersectTerrainSelector.enableInvisibleTerrain=!0},initialize:function(){this._targetCameraBeforeElevationUpdate=this.cameras.current.copy();this._targetCameraChangedByElevationUpdate=!1;this._sceneExtentChangeHandle=this.view.watch("dataExtent",
function(a){this._dataExtentChanged()}.bind(this))},_dataExtentChanged:function(){this.view.ready&&(this._updateAltitudeConstraintFromExtent(this.view.dataExtent),this._reapplyConstraints(),this._camerasChanged())},_updateAutoAltitudeConstraints:function(a){},updateRenderCoordsHelper:function(a,b){this.inherited(arguments);if(!this._userConstraints||"auto"===this._userConstraints.altitude.mode)this.constraints.altitude=D.Altitude.scale(this.defaultConstraints.altitude,a.unitInMeters);if(!this._userConstraints||
"auto"===this._userConstraints.tilt.mode)this.constraints.tilt=D.Tilt.scale(this.defaultConstraints.tilt,a.unitInMeters);this._updateAltitudeConstraintFromExtent(this.view.dataExtent);this._reapplyConstraints();this._camerasChanged()},_updateAltitudeConstraintFromExtent:function(a){0<a.xmax-a.xmin&&(this._updateAutoAltitudeConstraints(a),(!this._userConstraints||"auto"===this._userConstraints.altitude.mode)&&this._autoUpdateAltitudeConstraint())},destroy:function(){this._disconnectUserConstraints();
this._sceneExtentChangeHandle.remove()},_updateTargetCenterForElevation:function(a){this._recomputeTargetCenterForElevationChange=!1;if(a||this.enableElevationUpdates&&this.updateTargetByElevationUpdates)if(this._targetCameraChangedByElevationUpdate?a=this._targetCameraBeforeElevationUpdate:(a=this.cameras.target,this._targetCameraBeforeElevationUpdate.copyFrom(a)),(a=this.getCameraIntersectTerrain(a.eye,a.center,a.up,0.02))&&!a.equals(this.cameras.target))return this.setCamera(a,{internalUpdate:!0}),
this._targetCameraChangedByElevationUpdate=!0;return!1},_updateTargetCenterForElevationWhenIdle:function(){var a=this.isAnimating,b=!1;if(!(this.pan&&this.pan.continuous&&this.pan.continuous.active||this.pan.active||this.zoom.active||this.rotate.active)&&!a&&this._recomputeTargetCenterForElevationChange){var c=this._targetCameraChangedByElevationUpdate;this._updateTargetCenterForElevation()&&(b=!0);this._targetCameraChangedByElevationUpdate=c}!a&&this._recomputeTargetEyeForElevationChange&&this._updateTargetEyeForElevationChange()&&
(b=!0);return b},step:function(){this._updateTargetCenterForElevationWhenIdle();this.inherited(arguments)},applyConstraints:function(a,b){if(!this.constraintsEnabled)return!1;var c=this._cameraElevationAngle(a,B),d=this.constraints.tilt.min(c.distance),e=this.constraints.tilt.max(c.distance),f=0;!b&&c.tilt>e?f=c.tilt-e:c.tilt<d&&(f=c.tilt-d);c=!1;0.01<Math.abs(f)&&(m.cross(r,a.up,t),q.identity(s),q.rotate(s,f,t),q.multiplyVec3(s,r),m.add(a.center,r,a.eye),q.multiplyVec3(s,a.up),c=!0);m.subtract(a.center,
a.eye,u);f=a.distance;d=this.limitAltitude(f,a.center,u,f);f!==d&&(m.scale(u,-d/f),m.add(a.center,u,a.eye),c=!0);this._autoUpdateTiltConstraint(e);return c},limitTiltByConstraints:function(a,b,c,d){if(!this.constraintsEnabled)return a;var e=this.constraints.tilt.min(c),f=this.constraints.tilt.max(c);if((void 0===d||0<d)&&a>=f)a=f;else if((void 0===d||0>d)&&a<=e)a=e;a=this.limitTiltByAltitudeConstraints(a,b,c,d);this._autoUpdateTiltConstraint(f);return a},_autoUpdateAltitudeConstraint:function(){var a=
this._userConstraints&&this._userConstraints.altitude;a&&"auto"===a.mode&&a.autoUpdate(this.constraints.altitude.min(this),this.constraints.altitude.max(this))},_autoUpdateTiltConstraint:function(a){var c=this._userConstraints&&this._userConstraints.tilt;void 0===a&&(a=this.constraints.tilt.max(this.cameras.target.distance));c&&"auto"===c.mode&&c.autoUpdate(b.rad2deg(a))},_disconnectUserConstraints:function(){if(this._userConstraints){this._userConstraintsHandles.forEach(function(a){a.remove()});
this._userConstraints=null;this._userConstraintsHandles.length=0;var a=this.renderUnitInMeters;this.constraints.tilt=D.Tilt.scale(this.defaultConstraints.tilt,a);this.constraints.altitude=D.Altitude.scale(this.defaultConstraints.altitude,a)}},_connectUserConstraints:function(a){a&&(this._userConstraints=a,this._userConstraintsHandles.push(k.init(a,"tilt.mode",this._tiltModeHandler),k.init(a,"clipDistance.mode",this._clipDistanceModeHandler),k.init(a,"altitude.mode",this._altitudeModeHandler),k.init(a,
"collision.enabled",this._collisionEnabledHandler)))},_camerasChanged:function(){var a=this._targetCameraChangedByElevationUpdate;this.targetChanged();this._targetCameraChangedByElevationUpdate=a;this.currentChanged();this.currentHasReachedTarget()&&this.currentReachedTarget()},_reapplyConstraints:function(){var a=!1;this.applyConstraints(this.cameras.current)&&(a=!0);this.applyConstraints(this.cameras.target)&&(a=!0);a&&this._camerasChanged()},_userConstraintsChanged:function(){this._reapplyConstraints()},
_altitudeMinMaxHandler:function(a,b,c){this._userConstraintsChanged()},_tiltMaxHandler:function(a,b,c){this._userConstraintsChanged()},_tiltModeHandler:function(a){this._tiltHandles.forEach(function(a){a.remove()});this._tiltHandles.length=0;"auto"===a?this.constraints.tilt=D.Tilt.scale(this.defaultConstraints.tilt,this.renderUnitInMeters):(this._tiltHandles.push(this._userConstraints.watch("tilt.max",this._tiltMaxHandler)),this.constraints.tilt=l(this._userConstraints));this._tiltMaxHandler()},_altitudeModeHandler:function(a){this._altitudeHandles.forEach(function(a){a.remove()});
this._altitudeHandles.length=0;"auto"===a?(this.constraints.altitude=D.Altitude.scale(this.defaultConstraints.altitude,this.renderUnitInMeters),this._autoUpdateAltitudeConstraint()):(this._altitudeHandles.push(this._userConstraints.watch("altitude.min",this._altitudeMinMaxHandler),this._userConstraints.watch("altitude.max",this._altitudeMinMaxHandler)),this.constraints.altitude=g(this._userConstraints));this._altitudeMinMaxHandler()},_collisionEnabledHandler:function(a,b,c){this.constraints.collision=
new D.Collision(this._userConstraints.collision.enabled);this._userConstraintsChanged()},_clipDistanceNearFarHandler:function(a,b,c){"auto"!==this._userConstraints.clipDistance.mode&&(this.cameras.target.near=this._userConstraints.clipDistance.near,this.cameras.target.far=this._userConstraints.clipDistance.far,this.cameras.current.near=this._userConstraints.clipDistance.near,this.cameras.current.far=this._userConstraints.clipDistance.far);this._camerasChanged()},_clipDistanceModeHandler:function(a){this._clipDistanceHandles.forEach(function(a){a.remove()});
this._clipDistanceHandles.length=0;"auto"!==a&&this._clipDistanceHandles.push(this._userConstraints.watch(["clipDistance.near","clipDistance.far"],this._clipDistanceNearFarHandler));this._clipDistanceNearFarHandler()},_updateAutoNearFar:function(a){var b=this._userConstraints&&this._userConstraints.clipDistance;if(!(b&&"auto"!==b.mode)){var c=this.renderUnitInMeters,d=this.distanceToSilhouette(a,this.view.dataExtent,c,this._getTerrainElevationBelowCamera(a),H);a.far=d.distance/c;a.far/d.maxFarNearRatio>
this.minNearDistance?a.near=a.far/d.maxFarNearRatio:(a.near=this.minNearDistance,a.far=a.near*d.maxFarNearRatio);b&&a===this.cameras.current&&b.autoUpdate(a.near,a.far)}},constrainTargetEyeByElevation:function(){var a=!1;if(this.elevationProvider&&this.elevationProvider.spatialReference)var a=this.cameras.target,b=this._getTerrainElevationBelowCamera(a),a=this._applyElevationConstraint(a.eye,b,this.cameraElevationMargin);return a},constrainTargetEyeByElevationAndMoveLookAt:function(){m.set(this.cameras.target.eye,
w);this.constrainTargetEyeByElevation()&&(m.subtract(w,this.cameras.target.eye),m.subtract(this.cameras.target.center,w))},targetChanged:function(a){this.inherited(arguments);this._targetCameraChangedByElevationUpdate=!1;this._updateAutoNearFar(this.cameras.target);this.currentHasReachedTarget()&&this.currentReachedTarget()},currentChanged:function(){this._updateAutoNearFar(this.cameras.current);this.inherited(arguments)},_applyElevationConstraint:function(a,b,c){if(!this.constraintsEnabled)return!1;
var d=this.renderCoordsHelper,e=d.getAltitude(a);return this.constraints.collision.enabled&&e-b<c?(d.setAltitude(b+c,a,0),!0):!1},_cameraElevationAngle:function(a,b){b=b||{tilt:0,distance:0};this.renderCoordsHelper.worldUpAtPosition(a.center,v);m.subtract(a.eye,a.center,r);var c=m.length(r),d=Math.acos(m.dot(r,v)/c/m.length(v));b.tilt=d;b.distance=c;return b},_elevationChangeTileHandler:function(a){if(this.enableElevationUpdates&&this._targetCameraChangedByElevationUpdate&&this.constraintsEnabled){var b=
!1,c=a.tile.extent;a=this.renderCoordsHelper.fromRenderCoords(this._targetCameraBeforeElevationUpdate.eye,p,a.spatialReference);c[0]<=a.x&&(c[1]<=a.y&&c[2]>a.x&&c[3]>a.y)&&(x.copyFrom(this.cameras.target),this.cameras.target.copyFrom(this._targetCameraBeforeElevationUpdate),this.constrainTargetEyeByElevation(),this.applyConstraints(this.cameras.target),b=!x.equals(this.cameras.target));b&&(this.isAnimating?this.targetChanged():this.targetAnimatedChanged(!1,{internalUpdate:!0}),this._targetCameraChangedByElevationUpdate=
!0)}},_elevationChangeHandler:function(a){var b=a.extent;a=a.spatialReference;var c=this.renderCoordsHelper.fromRenderCoords(this.cameras.target.eye,a);this._deferredUpdateTargetEyeForElevationChange(b,c,a);this._deferredUpdateTargetCenterForElevationChange(b,c,a)},_isPositionWithinExtent:function(a,b){return b[0]<=a.x&&b[1]<=a.y&&b[2]>a.x&&b[3]>a.y},_deferredUpdateTargetEyeForElevationChange:function(a,b){this.enableElevationUpdates&&this.constraintsEnabled&&this._isPositionWithinExtent(b,a)&&(this.isAnimating?
this._recomputeTargetEyeForElevationChange=!0:this._updateTargetEyeForElevationChange())},_updateTargetEyeForElevationChange:function(){this._recomputeTargetEyeForElevationChange=!1;var a=this.cameras.target;this._targetCameraChangedByElevationUpdate||this._targetCameraBeforeElevationUpdate.copyFrom(a);var b=this._getTerrainElevationBelowCamera(a);if(a=this._applyElevationConstraint(a.eye,b,this.cameraElevationMargin))this.isAnimating?this.targetChanged():this.targetAnimatedChanged(!1,{internalUpdate:!0}),
this._targetCameraChangedByElevationUpdate=!0;return a},_deferredUpdateTargetCenterForElevationChange:function(a,b,c){if(this.enableElevationUpdates&&!this._recomputeTargetCenterForElevationChange){var d=this.renderCoordsHelper.fromRenderCoords(this.cameras.target.center,c),e=Math.max(d.x,b.x),f=Math.min(d.x,b.x);c=Math.max(d.y,b.y);b=Math.min(d.y,b.y);e=h.intersectIntervals([[f,e]],[[a[0],a[2]]]);a=h.intersectIntervals([[b,c]],[[a[1],a[3]]]);0<e.length&&0<a.length&&(this._recomputeTargetCenterForElevationChange=
!0)}},_getTerrainElevationBelowCamera:function(a){if(!this.elevationProvider||!this.elevationProvider.spatialReference)return 0;a=this.renderCoordsHelper.fromRenderCoords(a.eye,this.elevationProvider.spatialReference);return this.elevationProvider.getElevation(a)||0},getCenterIntersectTerrain:function(a,b,c){c||(c=m.create());m.set(b,c);var d=this.picker.pickAlongRay(a,c,null,null,null,!1,this._intersectTerrainSelector);this.picker.pickedIntersectionPoint(d,c)||this.getCenterIntersectManifold(a,b,
c)||this.getFallbackCenterAlongViewDirection(a,b,c);return c},getCenterIntersectManifold:function(a,b,c){m.subtract(b,a,r);return this.intersectManifold(a,r,0,c)},getCameraIntersectTerrain:function(a,b,c,d){var e=this.cameras.current.copy();a&&(e.eye=a);b&&(e.center=b);c&&(e.up=c);this.getCenterIntersectTerrain(e.eye,e.center,y);m.dist2(e.eye,y)<this.minPoiDist&&this.constraintsEnabled&&(a=this.constraints.collision.enabled,m.set(e.viewForward,r),m.scale(r,this.minPoiDist),a?m.subtract(y,r,e.eye):
m.add(e.eye,r,y),b=this.renderCoordsHelper,c=b.getAltitude(e.eye),a&&c<this.cameraElevationMargin&&(m.subtract(y,e.eye,r),b.setAltitude(this.cameraElevationMargin,e.eye),m.add(e.eye,r,y)),e.markViewDirty());0<d?(a=m.dist(e.eye,e.center),m.dist(y,e.center)>a*d&&(e.center=y)):e.center=y;return e}});D.UPDATE_TARGET_BY_ELEVATION_UPDATES_DEFAULT=!0;D.Tilt=function(a){this.min=a.min;this.max=a.max};D.Tilt.scale=function(a,b){return 1===b?a:new D.Tilt({min:function(c){return a.min(c*b)},max:function(c){return a.max(c*
b)}})};D.Tilt.prototype.apply=function(a,c){return b.clamp(a,this.min(c),this.max(c))};D.Altitude=function(a){this.min=a.min;this.max=a.max};D.Altitude.scale=function(a,b){return 1===b?a:new D.Altitude({min:function(c){return a.min(c)/b},max:function(c){return a.max(c)/b}})};D.Altitude.prototype.apply=function(a,c){return b.clamp(c,this.min(a),this.max(a))};D.Collision=function(a){this.enabled=null!=a?a:!0};return D})},"esri/views/3d/navigation/spherical/AnimationSpherical":function(){define(["../mixins/AnimationMixin",
"../../lib/glMatrix","../../support/mathUtils"],function(n,k,a){function b(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f}function c(a,c){return Math.sqrt(b(a,c))}function f(b){this.interpolate=function(b,c,e){e=Math.min(9*e,0.3);a.slerpOrLerp(b.center,c.center,e,b.center,g);a.slerpOrLerp(b.eye,c.eye,e,b.eye,g);a.slerp(b.up,c.up,e);b.fov=a.lerp(b.fov,c.fov,e);b.padding=d.lerp(b.padding,c.padding,e,l);b.computeUpOnSphere()}}function e(b,e,f){e=e||250;f=f||e;var k=0,
t=0,s=0,n=0,v=function(b,c,d,l){var k=h.dist(b,c);if(0.1>k)return h.set(c,b),0;var m=Math.min(Math.sqrt(k*f),e);l=Math.min(l+f*d,m);d=Math.min(l/k*d,1);a.slerpOrLerp(b,c,d,b,g);return l};this.interpolate=function(g,h,y){k=v(g.eye,h.eye,y,k);t=v(g.center,h.center,y,t);n=v(g.padding,h.padding,y,n,{dist:c,lerp:function(a,b,c){return d.lerp(a,b,c,l)},set:function(a){g.padding=a}});s=b.easeInOutInterpLinear(f,e,g.fov,h.fov,y,s,{dist:function(a,b){return Math.abs(b-a)},lerp:a.lerp,set:function(a){g.fov=
a}});g.computeUpOnSphere()}}var h=k.vec3d,d=k.vec4d,l=d.create(),g=1E-4;return n.createSubclass({declaredClass:"esri.views.3d.navigation.spherical.AnimationSpherical",constructor:function(){this.interpolationTypes={linear:f,easeInOut:e}}})})},"esri/views/3d/navigation/mixins/AnimationMixin":function(){define(["../../../../core/Accessor","dojo/on","dojo/_base/lang","../../animation/pointToPoint/Animation","../../../animation/easing"],function(n,k,a,b,c){b=b.default;return n.createSubclass([],{declaredClass:"esri.views.3d.navigation.mixins.AnimationMixin",
properties:{interpolation:{set:function(a){if("string"===typeof a){var b=this.interpolationTypes[a];b?this._set("interpolation",new b(this)):console.error("[AnimationMixin] Invalid interpolation type "+a)}else this._set("interpolation",a)}},isAnimating:!1},initialize:function(){this._pointToPointAnimation=new b(this.view.viewingMode);this._targetCameraAnimated=this.cameras.current.copy();this.animationId=0},getDefaults:function(){return{interpolation:"linear"}},easeInOutInterpLinear:function(a,b,
c,d,l,g,k){var q=k.dist(c,d);if(q<0.1/this.renderUnitInMeters)return k.set(d,c),0;b=Math.min(Math.sqrt(q*a),b);g=Math.min(g+a*l,b);a=Math.min(g/q*l,1);k.set(k.lerp(c,d,a),c);return g},step:function(a){this.inherited(arguments);var b=this.currentHasReachedTarget();this._stepTimeAnimation(a/1E3,b);b&&this.pan.updateContinuous(a)},startAnimation:function(a,b){this.animationId++;this._startTimeAnimation(a,b);this.animationStarted()},_stepTimeAnimation:function(a,b){if(this.isAnimating)if(b)this.setCurrentToTarget(!0);
else{var c=this._pointToPointAnimation;c.step(a,this.cameras.current);c.finished?(this.isAnimating=!1,this._updateTargetCenterForElevationWhenIdle()||(this.isAnimating=!0,this.setCurrentToTarget(!0))):this.currentChanged()}},_startTimeAnimation:function(b,e){this.isAnimating=!0;var h={};!b||!b.internalUpdate?h.apex={maximumDistance:this.view.constraints.altitude.max/6}:(h.apex=null,h.duration=0.3,h.easing=c.outExpo);b=a.mixin(h,"object"===typeof b?b:null);this._pointToPointAnimation.update(this.cameras.current,
e?this._targetCameraAnimated:this.cameras.target,b)},animationStarted:function(){k.emit(this,"animationStarted")},stop:function(){this.pan&&this.pan.continuous&&this.pan.continuous.stop();this.currentHasAlmostReachedTarget()?this.currentReachedTarget(!1,!0):(this.cameras.target.copyFrom(this.cameras.current),this.targetAndCurrentChanged(!0))},currentReachedTarget:function(){this.inherited(arguments);this.isAnimating=!1}})})},"esri/views/3d/animation/pointToPoint/Animation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../animation/pointToPoint/Animation ./Camera ../../lib/glMatrix ../../webgl-engine/lib/Camera".split(" "),
function(n,k,a,b,c,f,e){var h=f.vec3d,d=h.create();n=function(){function a(d){this.animation=new b.Animation(function(){return new c.default(d)});this._current=new c.default(d)}Object.defineProperty(a.prototype,"finished",{get:function(){return this.currentTime>=this.animation.time},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"time",{get:function(){return this.animation.time},enumerable:!0,configurable:!0});a.prototype.update=function(a,b,c){var e=this.animation.definition.source,
f=this.animation.definition.target,l=h.subtract(b.center,a.center,d),k=h.length(l);1E-5<=k?(l[0]/=k,l[1]/=k,l[2]/=k):(l[0]=0,l[1]=1,l[0]=0);h.set(l,e.lookAtDirection);h.set(l,f.lookAtDirection);e.copyFromRenderCamera(a);f.copyFromRenderCamera(b);this._current.copyFrom(e);this.animation.update(e,f,c);this.currentTime=0};a.prototype.cameraAt=function(a,b){var c=this.animation.cameraAt(a,this._current);b||(b=new e);c.copyToRenderCamera(b);return b};a.prototype.step=function(a,b){this.finished||(this.currentTime+=
a,this.currentTime>=this.time&&(this.currentTime=this.time));return this.cameraAt(this.currentTime/this.time,b)};return a}();k.Animation=n;Object.defineProperty(k,"__esModule",{value:!0});k.default=n})},"esri/views/animation/pointToPoint/Animation":function(){define("require exports ../easing ./Definition ./Settings ./apex/Path".split(" "),function(n,k,a,b,c,f){var e={zoom:0,pan:0,rotate:0};n=function(){function h(a){this.createCamera=a;this.time=0;this.definition=new b.Definition(a);this.path=new f.Path}
h.prototype.update=function(a,b,c){this.definition.update(a,b,c);this.path.update(this.definition,c);this.time=this._applyTimeSettings(this.path.time,c);this.settings=c};h.prototype.cameraAt=function(b,c){c||(c=this.createCamera());b=Math.min(Math.max(0,b),1);b=this.settings.easing?this.settings.easing(b,1E3*this.time):1<=this.time?a.inOutCoastQuad(b):a.outExpo(b);var f=this.path.interpolateComponentsAt(b,e);c.interpolate(this.definition.source,this.definition.target,f);return c};h.prototype._applyTimeSettings=
function(a,b){var e=null!=b.speedFactor?b.speedFactor:1;null!=b.duration?a=b.duration:null!=b.speedFactor&&(a/=e);var f=null!=b.maxDuration?b.maxDuration:c.defaultSettings.maxDuration/e;return a=Math.min(Math.max(null!=b.minDuration?b.minDuration:c.defaultSettings.minDuration/e,a),f)};return h}();k.Animation=n;Object.defineProperty(k,"__esModule",{value:!0});k.default=n})},"esri/views/animation/pointToPoint/Definition":function(){define(["require","exports","./Settings"],function(n,k,a){n=function(){function b(b){this.createCamera=
b;this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0};this.settings={desiredScreenFlow:a.defaultSettings.desiredScreenFlow};this.source=b();this.target=b()}b.prototype.clone=function(){var a=new b(this.createCamera);a.copyFrom(this);return a};b.prototype.copyFrom=function(a){this.update(a.source,a.target,a.settings)};b.prototype.update=function(b,f,e){this.source!==b&&this.source.copyFrom(b);this.target!==f&&this.target.copyFrom(f);this.settings.desiredScreenFlow=null!=e.desiredScreenFlow?e.desiredScreenFlow:
a.defaultSettings.desiredScreenFlow;this.compared=this.source.compareTo(this.target,this.compared);this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2};b.prototype.halfWindowPanAtZoom=function(a){a=this.target.pixelsPerPanAtZoom(a);return this.halfWindowSize/a};Object.defineProperty(b.prototype,"hasZoom",{get:function(){return 1E-5<Math.abs(this.compared.sourceZoom-this.compared.targetZoom)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"hasPan",{get:function(){return 1E-9<this.compared.pan},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasRotate",{get:function(){return 1E-9<this.compared.rotate},enumerable:!0,configurable:!0});return b}();k.Definition=n;Object.defineProperty(k,"__esModule",{value:!0});k.default=n})},"esri/views/animation/pointToPoint/Settings":function(){define(["require","exports"],function(n,k){k.defaultSettings={desiredScreenFlow:2,minDuration:0.5,maxDuration:8}})},"esri/views/animation/pointToPoint/apex/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../easing ../Path ../Segment ./planning".split(" "),
function(n,k,a,b,c,f,e){n=function(c){function d(a,b){c.call(this);this._preallocSegments=[new f.default,new f.default,new f.default];this.update(a,b)}a(d,c);d.prototype.update=function(a,b){if(a){this.definition?this.definition.copyFrom(a):this.definition=a.clone();var c=null;b&&b.apex&&(c=e.optimalDistance(a,b.apex));this.segments.length=0;this._descensionSegment=this._ascensionSegment=null;null==c?this._updateWithoutApex():this._updateWithApex(c,b.apex)}};d.prototype.segmentInterpolateComponentsAt=
function(a,c,d){d=a.interpolateComponentsAt(c,d);a===this._ascensionSegment?d.zoom=b.outQuad(d.zoom):a===this._descensionSegment&&(d.zoom=b.inQuad(d.zoom));return d};d.prototype._updateWithApex=function(a,b){var c=this._preallocSegments,d=c[0],e=c[1],c=c[2],f=null!=b.ascensionFactor?b.ascensionFactor:0.5,h=Math.min(1-f,null!=b.ascensionFactor?b.descensionFactor:0.5),k=1-f-h;d.definition?d.definition.copyFrom(this.definition):d.definition=this.definition.clone();d.definition.compared.targetZoom=a;
d.definition.compared.pan=this.definition.compared.pan*f;d.definition.compared.rotate=this.definition.compared.rotate*f;d.update();this._ascensionSegment=d;this.segments.push(d);0<k&&(e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone(),e.definition.copyFrom(this.definition),e.definition.compared.sourceZoom=a,e.definition.compared.targetZoom=a,e.definition.compared.pan=this.definition.compared.pan*k,e.definition.compared.rotate=this.definition.compared.rotate*k,
e.update(),this.segments.push(e));c.definition?c.definition.copyFrom(this.definition):c.definition=this.definition.clone();c.definition.compared.sourceZoom=a;c.definition.compared.pan=this.definition.compared.pan*h;c.definition.compared.rotate=this.definition.compared.rotate*h;c.update();this._descensionSegment=c;this.segments.push(c)};d.prototype._updateWithoutApex=function(){var a=this._preallocSegments[0];a.update(this.definition);this.segments.push(a)};return d}(c.default);k.Path=n;Object.defineProperty(k,
"__esModule",{value:!0});k.default=n})},"esri/views/animation/pointToPoint/Path":function(){define(["require","exports"],function(n,k){var a=function(){function a(){this.segments=[]}Object.defineProperty(a.prototype,"time",{get:function(){return this.segments.reduce(function(a,b){return a+b.time},0)},enumerable:!0,configurable:!0});a.prototype.interpolateComponentsAt=function(a,b){a=Math.min(Math.max(a,0),1);a*=this.time;for(var e=0,h=0,d=this.definition,l=0;l<this.segments.length;l++){var g=this.segments[l],
k=g.definition;if(a<=g.time||l===this.segments.length-1)return b=this.segmentInterpolateComponentsAt(g,a/g.time,b),b.pan=d.hasPan?(e+k.compared.pan*b.pan)/d.compared.pan:1,b.rotate=d.hasRotate?(h+k.compared.rotate*b.rotate)/d.compared.rotate:1,e=b.zoom*(k.compared.targetZoom-k.compared.sourceZoom)+k.compared.sourceZoom,h=this.segments[0].definition.compared.sourceZoom,l=this.segments[this.segments.length-1].definition.compared.targetZoom,b.zoom=d.hasZoom?(e-h)/(l-h):1,b;a-=g.time;e+=k.compared.pan;
h+=k.compared.rotate}};a.prototype.segmentInterpolateComponentsAt=function(a,b,e){return a.interpolateComponentsAt(b,e)};return a}();k.Path=a;Object.defineProperty(k,"__esModule",{value:!0});k.default=a})},"esri/views/animation/pointToPoint/Segment":function(){define(["require","exports"],function(n,k){var a=function(){function a(b){b&&this.update(b)}a.prototype.update=function(a){a&&(this.definition?this.definition.copyFrom(a):this.definition=a.clone());this._updatePrecomputedVariables();this._updatePixelFlow()};
a.prototype._updatePrecomputedVariables=function(){var a=this.definition,b=a.compared,e=b.sourceZoom,h=b.targetZoom;this._sl=e>h?1:-1;this._panPixelsAtSource=b.pan*a.source.pixelsPerPanAtZoom(e);a=(a.source.pixelsPerRotateAtZoom(e)+a.target.pixelsPerRotateAtZoom(h))/2;this._rotatePixels=b.rotate*a};a.prototype._updatePixelFlow=function(){var a=this.definition.compared.sourceZoom,b=this.definition.compared.targetZoom,e=this.definition.hasZoom,h=this.definition.hasPan,d=this.definition.hasRotate,l,
g;l=h&&e?(b/a-1)/(-1/(this._sl*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource):0;g=e&&d?this._sl*(Math.log(a/b)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels:0;this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;a=this.definition.desiredPixelFlow;e&&h&&d?(b=l+g+l*g,this._zoomPixelFlow=l*g/b*a,this._panPixelFlow=g/b*a,this._rotatePixelFlow=l/b*a):e&&h?(b=1+l,this._zoomPixelFlow=l/b*a,this._panPixelFlow=1/b*a):e&&d?(b=1+g,this._zoomPixelFlow=g/b*a,this._rotatePixelFlow=
1/b*a):h&&d?(l=this._panPixelsAtSource/this._rotatePixels,b=1+l,this._panPixelFlow=l/b*a,this._rotatePixelFlow=1/b*a):h?this._panPixelFlow=a:e?this._zoomPixelFlow=a:d&&(this._rotatePixelFlow=a);this.time=d?this.rotateTime:e?this.zoomTime:h?this.panTime:0};Object.defineProperty(a.prototype,"zoomTime",{get:function(){return this.definition.hasZoom?this._sl*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:
0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"panTime",{get:function(){if(this.definition.hasPan){if(this.definition.hasZoom){var a=-1/(this._sl*this.definition.halfWindowSize)*Math.LN2;return Math.log(a*this._panPixelsAtSource*(this._zoomPixelFlow/this._panPixelFlow)+1)/(a*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}return 0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rotateTime",{get:function(){return this.definition.hasRotate?
this._rotatePixels/this._rotatePixelFlow:0},enumerable:!0,configurable:!0});a.prototype._interpolateComponentsZoom=function(a){if(this.definition.hasZoom){var b=this.definition.compared.sourceZoom,e=this.definition.compared.targetZoom;return(b*Math.pow(b/e,-a)-b)/(e-b)}return a};a.prototype._interpolateComponentsPan=function(a){if(this.definition.hasPan&&this.definition.hasZoom){var b=-1/(this._sl*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*this._panPixelFlow*
(Math.pow(2,b*a*this.time)-1)/(b*Math.LN2)}return a};a.prototype._interpolateComponentsRotate=function(a){return a};a.prototype.interpolateComponentsAt=function(a,b){a=Math.min(Math.max(a,0),1);var e=this._interpolateComponentsZoom(a),h=this._interpolateComponentsPan(a),d=this._interpolateComponentsRotate(a);b?(b.zoom=e,b.pan=h,b.rotate=d):b={zoom:e,pan:h,rotate:d};return b};return a}();k.Segment=a;Object.defineProperty(k,"__esModule",{value:!0});k.default=a})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["require",
"exports","./functions"],function(n,k,a){function b(a,b){var e=Math.max(a.compared.sourceZoom,a.compared.targetZoom),h=a.source.zoomAtPixelsPerPan(a.desiredPixelFlow/a.compared.pan)/2;return h<e?null!=b.maximumDistance?e+(b.maximumDistance-e)/2:1.5*e:b.maximumDistance?Math.min(b.maximumDistance,h):h}k.optimalDistance=function(c,f){var e=b(c,f),h={ascensionFactor:null!=f.ascensionFactor?f.ascensionFactor:0.5,descensionFactor:null!=f.descensionFactor?f.descensionFactor:0.5},d=0===h.ascensionFactor,
l=0===h.descensionFactor,g=d?a.tAscensionZoomOnly:a.tAscensionZoomPan,k=d?a.dtAscensionZoomOnly:a.dtAscensionZoomPan,d=d?a.ddtAscensionZoomOnly:a.ddtAscensionZoomPan,q=l?a.tDescensionZoomOnly:a.tDescensionZoomPan,p=l?a.dtDescensionZoomOnly:a.dtDescensionZoomPan,l=l?a.ddtDescensionZoomOnly:a.ddtDescensionZoomPan,r=function(b){return g(c,h,b)+a.tPanion(c,h,b)+q(c,h,b)},t=r(e),s=a.tBaseLine(c),n,v=f.maximumIterations||20,w=null!=f.maximumDistance?f.maximumDistance:Infinity;for(n=0;n<v;n++){var x=(k(c,
h,e)+a.dtPanion(c,h,e)+p(c,h,e)+1E-6)/(d(c,h,e)+a.ddtPanion(c,h,e)+l(c,h,e));if(isNaN(x)||e>=w&&0>x){if(!isFinite(w))return null;e=w;t=r(e);break}e-=x;if(e<c.compared.sourceZoom||e<c.compared.targetZoom)return null;x=r(e);if(0.005>=Math.abs(x-t)/t)break;t=x}return t>0.7*s?null:e<c.compared.sourceZoom||e<c.compared.targetZoom?null:e}})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["require","exports"],function(n,k){k.tAscensionZoomPan=function(a,b,c){var f=a.halfWindowPanAtZoom(c-
a.compared.sourceZoom);return-a.halfWindowSize*(b.ascensionFactor*Math.LN2*a.compared.pan+f)*Math.log(a.compared.sourceZoom/c)/(a.desiredPixelFlow*Math.LN2*f)};k.dtAscensionZoomPan=function(a,b,c){var f=1/c,e=Math.log(a.compared.sourceZoom*f),h=1/a.desiredPixelFlow,d=1/Math.LN2;c-=a.compared.sourceZoom;var l=1/c;b=(b.ascensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(c))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*f*h*d*l*b-a.halfWindowSize*e*h*d*l+a.halfWindowSize*e*h*d*b/(c*c)};
k.ddtAscensionZoomPan=function(a,b,c){var f=c-a.compared.sourceZoom,e=1/f,h=1/c,d=Math.log(a.compared.sourceZoom*h);b=(b.ascensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(f))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*e*(-2*e*h*b+2*e*d+2*h-2*d*b/(f*f)-b/(c*c))/(a.desiredPixelFlow*Math.LN2)};k.tAscensionZoomOnly=function(a,b,c){return-a.halfWindowSize*Math.log(a.compared.sourceZoom/c)/(a.desiredPixelFlow*Math.LN2)};k.dtAscensionZoomOnly=function(a,b,c){return a.halfWindowSize/(c*
a.desiredPixelFlow*Math.LN2)};k.ddtAscensionZoomOnly=function(a,b,c){return-a.halfWindowSize/(c*c*a.desiredPixelFlow*Math.LN2)};k.tPanion=function(a,b,c){return-a.compared.pan*a.halfWindowSize*(b.ascensionFactor+b.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(c))};k.dtPanion=function(a,b,c){return a.compared.pan*a.halfWindowSize*(b.ascensionFactor+b.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(c*c))};k.ddtPanion=function(a,b,c){return-2*a.compared.pan*a.halfWindowSize*
(b.ascensionFactor+b.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(c*c*c))};k.tDescensionZoomPan=function(a,b,c){return a.halfWindowSize*(-a.halfWindowPanAtZoom(c)-b.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))*Math.log(c/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*a.halfWindowPanAtZoom(-c+a.compared.targetZoom))};k.dtDescensionZoomPan=function(a,b,c){var f=Math.log(c/a.compared.targetZoom),e=1/a.desiredPixelFlow,h=1/Math.LN2,d=-c+
a.compared.targetZoom,l=1/d;b=(-a.halfWindowPanAtZoom(c)-b.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))/a.halfWindowPanAtZoom(1);return-a.halfWindowSize*f*e*h*l+a.halfWindowSize*f*e*h*b/(d*d)+a.halfWindowSize*e*h*l*b/c};k.ddtDescensionZoomPan=function(a,b,c){var f=c-a.compared.targetZoom,e=1/f,h=1/c,d=Math.log(c/a.compared.targetZoom);b=(a.halfWindowPanAtZoom(c)+b.descensionFactor*Math.LN2*a.compared.pan-a.halfWindowPanAtZoom(a.compared.targetZoom))/a.halfWindowPanAtZoom(1);
return a.halfWindowSize*e*(-2*e*h*b-2*e*d+2*h+2*d*b/(f*f)-b/(c*c))/(a.desiredPixelFlow*Math.LN2)};k.tDescensionZoomOnly=function(a,b,c){return a.halfWindowSize*Math.log(c/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2)};k.dtDescensionZoomOnly=function(a,b,c){return a.halfWindowSize/(c*a.desiredPixelFlow*Math.LN2)};k.ddtDescensionZoomOnly=function(a,b,c){return-a.halfWindowSize/(c*c*a.desiredPixelFlow*Math.LN2)};k.tBaseLine=function(a){var b=Math.LN2*a.compared.pan,c=a.halfWindowPanAtZoom(a.compared.sourceZoom-
a.compared.targetZoom),f=a.halfWindowSize*Math.log(a.compared.sourceZoom/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*c);return a.compared.sourceZoom<=a.compared.targetZoom?f*(b-c):f*(b+c)}})},"esri/views/3d/animation/pointToPoint/Camera":function(){define(["require","exports","../../lib/glMatrix","../../support/mathUtils"],function(n,k,a,b){var c,f,e,h=b.angle,d=b.lerp,l=b.slerpOrLerp,g=a.vec3d,m=a.mat3d,q=g.create(),p=g.create(),r=g.create(),t=g.create(),s=g.create();c=g.createFrom(0,0,1);
f=g.createFrom(0,1,0);e=g.createFrom(1,0,0);var u=m.create();n=function(){function a(b){void 0===b&&(b="global");this.viewingMode=b;this.center=g.create();this.distance=this.yaw=this.pitch=0;this.lookAtDirection=g.create(f)}a.prototype.pixelsPerPanAtZoom=function(a){return this.size/2/(this._zoomToPanScale*a)};a.prototype.zoomAtPixelsPerPan=function(a){return this.size/2/(this._zoomToPanScale*a)};a.prototype.pixelsPerRotateAtZoom=function(a){a=Math.max(Math.cos(Math.abs(this.pitch)),0.5);return this.size/
2/a};a.prototype.compareTo=function(a,b){b||(b={pan:0,rotate:0,sourceZoom:0,targetZoom:0});if("global"===this.viewingMode){var c=g.length(this.center),d=g.length(a.center);b.pan=h(this.center,a.center)*((c+d)/2)}else b.pan=g.dist(this.center,a.center);c=Math.abs(a.yaw-this.yaw);c>=Math.PI&&(c=2*Math.PI-c);d=Math.abs(a.pitch-this.pitch);b.rotate=Math.max(c,d);b.sourceZoom=this.distance;b.targetZoom=a.distance;return b};a.prototype.interpolate=function(a,b,c){"global"===this.viewingMode?l(a.center,
b.center,c.pan,this.center,v):g.lerp(a.center,b.center,c.pan,this.center);this.distance=d(a.distance,b.distance,c.zoom);this.pitch=d(a.pitch,b.pitch,c.rotate);a=a.yaw;b=b.yaw;Math.abs(b-a)>=Math.PI&&(a+=2*(a<b?1:-1)*Math.PI);this.yaw=d(a,b,c.rotate)};a.prototype.copyFrom=function(a){g.set(a.center,this.center);this.pitch=a.pitch;this.yaw=a.yaw;this.distance=a.distance;g.set(a.lookAtDirection,this.lookAtDirection);this.size=a.size;this.copyFromCommon(a);this.viewingMode=a.viewingMode};a.prototype.copyFromRenderCamera=
function(a){var b=this._lookAtOrientation(a.center,u);g.set(a.center,this.center);m.multiplyVec3(b,g.subtract(a.center,a.eye,t));m.multiplyVec3(b,a.up,s);this.distance=g.length(t);t[0]/=this.distance;t[1]/=this.distance;t[2]/=this.distance;this.pitch=this._eyeUpToPitch(t,s);this.yaw=this._eyeUpToYaw(t,s);this.size=Math.sqrt(a.width*a.width+a.height*a.height);this.copyFromCommon(a)};a.prototype.copyFromCommon=function(a){this.fov=a.fov;this._zoomToPanScale=Math.atan(0.5*this.fov)};a.prototype.copyToRenderCamera=
function(a){var b=this._lookAtOrientation(this.center,u);m.transpose(b);this._axisAngleVec3(e,this.pitch-Math.PI/2,f,t);this._axisAngleVec3(c,this.yaw,t);this._axisAngleVec3(e,this.pitch-Math.PI/2,c,s);this._axisAngleVec3(c,this.yaw,s);g.scale(t,this.distance);m.multiplyVec3(b,t);m.multiplyVec3(b,s);a.center=this.center;a.eye=g.subtract(this.center,t,t);a.up=s};a.prototype._axisAngleVec3=function(a,b,c,d){void 0===d&&(d=c);var e=Math.cos(b);b=Math.sin(b);g.scale(c,e,q);g.scale(g.cross(a,c,p),b);g.scale(a,
(1-e)*g.dot(a,c),r);return g.add(g.add(q,p,d),r,d)};a.prototype._lookAtOrientation=function(a,b){this._upAtLookAt(a,r);g.normalize(g.cross(this.lookAtDirection,r,q));0===q[0]&&(0===q[1]&&0===q[2])&&g.set(e,q);g.normalize(g.cross(r,q,p));b||(b=m.create());b[0]=q[0];b[1]=p[0];b[2]=r[0];b[3]=q[1];b[4]=p[1];b[5]=r[1];b[6]=q[2];b[7]=p[2];b[8]=r[2];return b};a.prototype._upAtLookAt=function(a,b){return"local"===this.viewingMode?g.set(c,b):g.normalize(a,b)};a.prototype._eyeUpToPitch=function(a,b){return Math.PI-
h(c,a)};a.prototype._eyeUpToYaw=function(a,b){var d=0.5>Math.abs(b[2])?b:a;return h(e,g.normalize(g.cross(d,c,p)),c)};return a}();var v=1E-4;Object.defineProperty(k,"__esModule",{value:!0});k.default=n})},"esri/views/3d/navigation/spherical/actions/PanSpherical":function(){define("./ActionSpherical ../../mixins/PanMixin ../../../lib/glMatrix ../../../support/earthUtils ../../../support/mathUtils ../../../webgl-engine/lib/Util ../../ContinuousAction ../../NavigationConstants".split(" "),function(n,
k,a,b,c,f,e,h){var d=a.vec2d,l=a.vec3d,g=a.vec4d,m=a.mat4d,q=l.create(),p=l.create(),r=l.create(),t=l.create(),s=l.create(),u=l.create(),v=m.create(),w=h.Pan.Mode,x=h.Pan.Direction,y=h.Pan.Vertical,B=h.Pan.Momentum;return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.spherical.actions.PanSpherical",constructor:function(){this._lastPanActionPtr=this._panMode=0;this._lastPanActions=[];this._plane=g.create();this._isMomentumPanning=!1;this.continuous=new e;for(var a=0;a<B.BUFFER_SIZE;a++)this._lastPanActions[a]=
{point:l.create(),pointScreen:d.create(),time:0}},begin:function(a,c){this.inherited(arguments);this.pickPointInScreen(a,this._navPickPoint)?this._navSphereRadius=l.length(this._navPickPoint):(this._navSphereRadius=l.length(this.targetCamera.center),this._navSphereRadius<0.9*b.earthRadius&&(this._navSphereRadius=b.earthRadius),this.createPickRay(a,a,this.currentCamera.viewMatrix,q,p),l.subtract(p,this.currentCamera.eye),this.intersectManifold(this.currentCamera.eye,p,this._navSphereRadius-b.earthRadius,
this._navPickPoint)||this.closestPointOnSphereSilhouette(this.currentCamera.eye,q,this._navSphereRadius,this._navPickPoint));var e=!1;this.renderCoordsHelper.getAltitude(this.currentCamera.eye)<y.ELEVATION_THRESHOLD&&(this._navSphereRadius>l.length(this.currentCamera.eye)?e=!0:(l.normalize(l.subtract(this.targetCamera.eye,this._navPickPoint,r)),e=Math.abs(0.5*Math.PI-Math.acos(l.dot(this._navPickPoint,r)/l.length(this._navPickPoint)))<y.ANGLE_THRESHOLD));e?(this._panMode=w.VERTICAL,l.normalize(l.subtract(this.targetCamera.eye,
this.targetCamera.center,r)),this.updatePlane(this._navPickPoint,r)):(this._panMode=w.HORIZONTAL,this._addToLastPanActions(void 0===c?f.performance.now():c,this._navPickPoint,a));d.set(a,this._dragLastPoint);d.set(a,this._dragBeginPoint);this._mouseDownCamera.copyFrom(this.targetCamera)},update:function(a,c){if(this._panMode===w.HORIZONTAL){if(0>=this._navSphereRadius)return;this.createPickRay(a,this._dragBeginPoint,this._mouseDownCamera.viewMatrix,q,p);l.subtract(p,this._mouseDownCamera.eye);this.intersectManifold(this._mouseDownCamera.eye,
p,this._navSphereRadius-b.earthRadius,this._targetOnSphere)||this.closestPointOnSphereSilhouette(this._mouseDownCamera.eye,q,this._navSphereRadius,this._targetOnSphere);this.rotateCameraWithPointsOnSphere(this._navPickPoint,this._targetOnSphere,this._mouseDownCamera,this.targetCamera,this._navSphereRadius);this._addToLastPanActions(void 0===c?f.performance.now():c,this._targetOnSphere,a)}else{this.createPickRay(this._dragLastPoint,this._dragBeginPoint,this.currentCamera.viewMatrix,q,p);l.subtract(p,
q);if(!f.rayPlane(q,p,this._plane,t))return;this.createPickRay(a,this._dragBeginPoint,this.currentCamera.viewMatrix,q,p);l.subtract(p,q);if(!f.rayPlane(q,p,this._plane,s))return;l.subtract(s,t);l.subtract(this.targetCamera.eye,s);l.subtract(this.targetCamera.center,s);d.set(a,this._dragLastPoint)}this.constrainTargetEyeByElevationAndMoveLookAt();d.set(a,this._dragLastPoint);this.fixTargetUpVector();this.targetAndCurrentChanged();this.inherited(arguments)},end:function(a,b){this._panMode===w.HORIZONTAL&&
this._initiateMomentumPanning(a,b);this._navSphereRadius=0;this.inherited(arguments)},_initiateMomentumPanning:function(a,b){if(0>=this._navSphereRadius)return this.setPoiAuto(a,!0),!1;this.update(a,b);var c=this._lastPanActionPtr;do if(c=(c-1+B.BUFFER_SIZE)%B.BUFFER_SIZE,this._lastPanActions[this._lastPanActionPtr].time-this._lastPanActions[c].time>1E3*B.INPUT_FILTER)break;while(this._lastPanActionPtr!==c);c++;c%=B.BUFFER_SIZE;c===this._lastPanActionPtr&&(c=(this._lastPanActionPtr-1+B.BUFFER_SIZE)%
B.BUFFER_SIZE);var e=0.001*(this._lastPanActions[this._lastPanActionPtr].time-this._lastPanActions[c].time);if(0<e&&d.dist(this._lastPanActions[c].pointScreen,this._lastPanActions[this._lastPanActionPtr].pointScreen)/e>=B.MINIMUM_VELOCITY){var f=this.rotationFromPointsOnSphere(this._lastPanActions[c].point,this._lastPanActions[this._lastPanActionPtr].point,this._navSphereRadius,this.continuous.direction);this.continuous.velocity=f/e;var f=d.create(),g=d.create();this.normalizeCoordinate(this._lastPanActions[c].pointScreen,
f);this.normalizeCoordinate(this._lastPanActions[this._lastPanActionPtr].pointScreen,g);c=Math.min(d.dist(f,g)/e/B.DURATION_LONG_VEL,1);this.continuous.timer=B.DURATION_SHORT+c*(B.DURATION_LONG-B.DURATION_SHORT);this._isMomentumPanning=!0;this.animationStarted();return!0}this.currentReachedTarget();return!1},beginContinuous:function(a){var b=0===this.continuous.status;b&&(this.navigation.begin(this),this.active=!0,this.emit("begin"));this.inherited(arguments);this.setCurrentToTarget();b&&l.set3(0,
0,0,this.continuous.direction);this.continuous.status&a||(this.continuous.status|=a,a&(x.LEFT|x.RIGHT|x.FORWARD|x.BACKWARD)?(this._computePanAxis(a,u),l.add(this.continuous.direction,u)):(b=this.continuous.status&(x.UP|x.DOWN),this.continuous.radiusChange=b===x.UP?1:b===x.DOWN?-1:0),this.continuous.velocity=this._computePanVelocity());this.continuous.timer=0},updateContinuous:function(a){if(this.continuous)if(this.continuous.active){a=this.continuous.step(a);var b=0.01<l.dot(this.continuous.direction,
this.continuous.direction),c=this.targetCamera;if(0<Math.abs(this.continuous.radiusChange)){var d=1+a*this.continuous.radiusChange,e=c.viewForward,c=l.normalize(c.center,p);(-0.999<l.dot(e,c)||0>this.continuous.radiusChange)&&l.scale(this.targetCamera.center,d);l.scale(this.targetCamera.eye,d);this.continuous.velocity=this._computePanVelocity();b||(this.applyConstraints(this.targetCamera),this.constrainTargetEyeByElevationAndMoveLookAt(),this.fixTargetUpVector(),this.targetAndCurrentChanged())}b&&
(m.identity(v),m.rotate(v,a,this.continuous.direction),m.multiplyVec3(v,this.targetCamera.eye),m.multiplyVec3(v,this.targetCamera.center),m.multiplyVec3(v,this.targetCamera.up),this.applyConstraints(this.targetCamera),this.constrainTargetEyeByElevationAndMoveLookAt(),this.fixTargetUpVector(),this.targetAndCurrentChanged());this.emit("update")}else this._isMomentumPanning&&(this._isMomentumPanning=!1,this.targetAndCurrentChanged(!0))},endContinuous:function(a){this.continuous.status&=~a;if(0===this.continuous.status)this.continuous.stop(),
this.continuous.radiusChange=0,this.active=!1,this.emit("end"),this.navigation.end(this);else if(a&(x.LEFT|x.RIGHT|x.FORWARD|x.BACKWARD))this._computePanAxis(a,u),l.subtract(this.continuous.direction,u),0.01>l.length(this.continuous.direction)&&l.set3(0,0,0,this.continuous.direction);else{var b=this.continuous.status&(x.UP|x.DOWN);this.continuous.radiusChange=b==x.UP?1:b==x.DOWN?-1:0}this.inherited(arguments)},_computePanAxis:function(a,b){l.subtract(this.targetCamera.center,this.targetCamera.eye,
b);l.cross(b,this.targetCamera.up);if(a===x.LEFT||a===x.RIGHT)l.normalize(b),l.cross(b,this.targetCamera.center);(a===x.RIGHT||a===x.FORWARD)&&l.negate(b);l.normalize(b)},_computePanVelocity:function(){var a=0.5*Math.abs(l.length(this.targetCamera.eye)-b.earthRadius),a=c.clamp(a,1,2*b.earthRadius);return c.acos(1-a*a/(2*b.earthRadius*b.earthRadius))},_addToLastPanActions:function(a,b,c){this._lastPanActionPtr=(this._lastPanActionPtr+1)%5;this._lastPanActions[this._lastPanActionPtr].time=a;l.set(b,
this._lastPanActions[this._lastPanActionPtr].point);d.set(c,this._lastPanActions[this._lastPanActionPtr].pointScreen)},updatePlane:function(a,b){g.set4(b[0],b[1],b[2],-l.dot(b,a),this._plane)}})})},"esri/views/3d/navigation/spherical/actions/ActionSpherical":function(){define(["../../Action","../../../support/mathUtils","../../../lib/glMatrix"],function(n,k,a){var b=a.vec3d,c=a.mat4d,f=b.create(),e=c.create();return n.createSubclass({declaredClass:"esri.views.3d.navigation.spherical.actions.ActionSpherical",
constructor:function(){this._targetOnSphere=b.create();this._navSphereRadius=0},closestPointOnSphereSilhouette:function(a,d,l,g){b.cross(a,d,f);b.cross(f,a,g);b.scale(g,1/b.length(g)*l);a=-k.asin(l/b.length(a));c.identity(e);c.rotate(e,a,f);c.multiplyVec3(e,g)},rotateCameraWithPointsOnSphere:function(a,b,c,e,f){return this.navigation.rotateCameraWithPointsOnSphere(a,b,c,e,f)},rotationFromPointsOnSphere:function(a,b,c,e){return this.navigation.rotationFromPointsOnSphere(a,b,c,e)}})})},"esri/views/3d/navigation/Action":function(){define(["../../../core/Accessor",
"../../../core/Evented","../webgl-engine/lib/Camera","../lib/glMatrix","dojo/on"],function(n,k,a,b,c){var f=b.vec3d,e=b.vec2d;return n.createSubclass([k],{properties:{type:{},navigation:{},picker:{readOnly:!0,aliasOf:"navigation.picker"},currentCamera:{aliasOf:"navigation.currentCamera"},targetCamera:{aliasOf:"navigation.targetCamera"},constraints:{readOnly:!0,aliasOf:"navigation.constraints"},renderCoordsHelper:{readOnly:!0,aliasOf:"navigation.renderCoordsHelper"},minPoiDist:{readOnly:!0,aliasOf:"navigation.minPoiDist"}},
constructor:function(){this._tmpEvent={type:null,phase:null,x:void 0,y:void 0};this._mouseDownCamera=new a;this._navPickPoint=f.create();this._dragLastPoint=e.create();this._dragBeginPoint=e.create();this.active=!1},initialize:function(){var a=this;["minPoiDist","renderCoordsHelper","constraints","picker"].forEach(function(b){this.navigation.watch(b,function(){a.notifyChange(b)})}.bind(this))},emit:function(a,b,e){this._tmpEvent.type=this.type;this._tmpEvent.phase=a;this._tmpEvent.x=b;this._tmpEvent.y=
e;c.emit(this,a,this._tmpEvent);c.emit(this.navigation,this.type,this._tmpEvent)},intersectManifold:function(a,b,c,e){return this.navigation.intersectManifold(a,b,c,e)},fixTargetUpVector:function(){return this.navigation.fixTargetUpVector()},setPoiAuto:function(a,b){return this.navigation.setPoiAuto(a,b)},normalizeCoordinate:function(a,b){b[0]=a[0]/this.currentCamera.width;b[1]=a[1]/this.currentCamera.height},worldUpAtPosition:function(a,b){return this.renderCoordsHelper.worldUpAtPosition(a,b)},applyConstraints:function(a,
b){return this.navigation.applyConstraints(a,b)},constrainTargetEyeByElevation:function(a){return this.navigation.constrainTargetEyeByElevation(a)},constrainTargetEyeByElevationAndMoveLookAt:function(){return this.navigation.constrainTargetEyeByElevationAndMoveLookAt()},targetAndCurrentChanged:function(a){return this.navigation.targetAndCurrentChanged(a)},targetAnimatedChanged:function(a,b){return this.navigation.targetAnimatedChanged(a,b)},currentReachedTarget:function(a){return this.navigation.currentReachedTarget(a)},
setCurrentToTarget:function(){return this.navigation.setCurrentToTarget()},animationStarted:function(){return this.navigation.animationStarted()},limitAltitude:function(a,b,c,e){return this.navigation.limitAltitude(a,b,c,e)},limitTiltByConstraints:function(a,b,c,e){return this.navigation.limitTiltByConstraints(a,b,c,e)},createPickRay:function(a,b,c,e,f){return this.picker.createPickRay(a,b,c,e,f)},pickAlongRay:function(a,b,c,e,f,k){return this.picker.pickAlongRay(a,b,c,e,f,k)},pickPointInScreen:function(a,
b){return this.picker.pickPointInScreen(a,b)},pickFreePointInScreen:function(a,b){return this.picker.pickFreePointInScreen(a,b)},pickInScreen:function(a){return this.picker.pickInScreen(a)}})})},"esri/views/3d/navigation/mixins/PanMixin":function(){define(["../../../../core/declare"],function(n){return n([],{declaredClass:"esri.views.3d.navigation.mixins.PanMixin",type:"pan",begin:function(k){this.navigation.begin(this);this.active=!0;this.emit("begin")},update:function(k){this.emit("update")},end:function(k){this.active=
!1;this.emit("end");this.navigation.end(this)},beginContinuous:function(k){},updateContinuous:function(k){},endContinuous:function(k){}})})},"esri/views/3d/navigation/ContinuousAction":function(){define(["../../../core/Accessor","../lib/glMatrix"],function(n,k){var a=k.vec3d;return n.createSubclass({properties:{active:{get:function(){return 0!==this.velocity},dependsOn:["velocity"],readOnly:!0},velocity:{}},constructor:function(){this.direction=a.create();this.status=this.timer=this.velocity=0},stop:function(){this.status=
this.velocity=this.timer=0;a.set3(0,0,0,this.direction)},step:function(a){var c;a*=0.001;0<this.timer?(a=Math.min(a,this.timer),c=this.velocity*a*(1-a/(2*this.timer)),this.velocity*=1-a/this.timer,this.timer-=a):c=this.velocity*a;return c}})})},"esri/views/3d/navigation/spherical/actions/ZoomSpherical":function(){define(["./ActionSpherical","../../mixins/ZoomMixin","../../../lib/glMatrix","../../../support/earthUtils"],function(n,k,a,b){var c=a.vec2d,f=a.vec3d,e=a.mat4d,h=f.create(),d=f.create(),
l=f.create(),g=e.create(),m=f.create(),q=f.create();return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.spherical.actions.ZoomSpherical",constructor:function(){},begin:function(a){this.inherited(arguments);this.pickPointInScreen(a,this._navPickPoint)?this._navSphereRadius=f.length(this._navPickPoint):(this._navSphereRadius=f.length(this.targetCamera.center),this._navSphereRadius<0.9*b.earthRadius&&(this._navSphereRadius=b.earthRadius),this.createPickRay(a,a,this.currentCamera.viewMatrix,
h,d),f.subtract(d,this.currentCamera.eye),this.intersectManifold(this.currentCamera.eye,d,this._navSphereRadius-b.earthUtils,this._navPickPoint)||(this._navSphereRadius=0));this._mouseDownCamera.copyFrom(this.targetCamera)},update:function(a){var k=this.targetCamera;k.eye=this._mouseDownCamera.eye;k.center=this._mouseDownCamera.center;k.up=this._mouseDownCamera.up;f.subtract(k.center,k.eye,l);var m=f.length(l);this.normalizeCoordinate(a,h);var q=12*(h[1]-this.normalizedAnchorPoint[1]);a=m*Math.pow(2,
q);0>q&&a<this.navigation.minPoiDist&&(a=this.navigation.minPoiDist);a=this.limitAltitude(a,k.center,l,m,0>q?-1:1);1E-6>Math.abs(m-a)||(0<this._navSphereRadius&&a<m&&(q=1-(1-a/m)*(1-this._navSphereRadius/f.length(k.center)),f.scale(k.center,q)),f.scale(l,-a/m),f.add(k.center,l,k.eye),m=!1,0<this._navSphereRadius&&(e.lookAt(k.eye,k.center,k.up,g),this.createPickRay(this._dragBeginPoint,this._dragBeginPoint,g,h,d),f.normalize(f.subtract(d,k.eye)),this.intersectManifold(k.eye,d,this._navSphereRadius-
b.earthRadius,this._targetOnSphere)||(this.closestPointOnSphereSilhouette(k.eye,h,this._navSphereRadius,this._targetOnSphere),m=!0),this.rotateCameraWithPointsOnSphere(this._navPickPoint,this._targetOnSphere,k,k,this._navSphereRadius),this.fixTargetUpVector()),this.applyConstraints(k),this.constrainTargetEyeByElevation(),this.targetAndCurrentChanged(),c.set(this._dragBeginPoint,this._dragLastPoint),m&&(e.lookAt(k.eye,k.center,k.up,g),this._dragLastPoint=this.currentCamera.projectPoint(this._navPickPoint,
g)),k=this._toYDownCoord(this._dragLastPoint),this.emit("update",k[0],k[1]))},stepAtPoint:function(a,c,l,k){f.set(c,q);c=f.length(q);f.subtract(this.targetCamera.eye,this.targetCamera.center,m);var n=f.length(m),v=n*a,v=(a=1>=a)&&v<this.minPoiDist?this.minPoiDist:this.limitAltitude(v,q,m,-n,a?-1:1);a=v/n;1E-6>Math.abs(n-v)||(k&&(n=f.length(this.targetCamera.center),f.scale(this.targetCamera.center,(c+a*(n-c))/n)),f.scale(m,a),f.add(this.targetCamera.center,m,this.targetCamera.eye),k&&l&&(e.lookAt(this.targetCamera.eye,
this.targetCamera.center,this.targetCamera.up,g),this.createPickRay(l,l,g,h,d),f.normalize(f.subtract(d,this.targetCamera.eye)),c<f.length(this.targetCamera.eye)&&this.intersectManifold(this.targetCamera.eye,d,c-b.earthRadius,this._targetOnSphere)?this.rotateCameraWithPointsOnSphere(q,this._targetOnSphere,this.targetCamera,this.targetCamera,c):k=!1),this.applyConstraints(this.targetCamera),this.constrainTargetEyeByElevation(),k&&this.fixTargetUpVector(),this.navigation.currentHasAlmostReachedTarget()?
this.targetAndCurrentChanged():this.targetAnimatedChanged(!1,{internalUpdate:!0}))}})})},"esri/views/3d/navigation/mixins/ZoomMixin":function(){define(["../../../../core/declare","../../lib/glMatrix"],function(n,k){var a=k.vec2d,b=k.vec3d,c=b.create();return n([],{declaredClass:"esri.views.3d.navigation.mixins.ZoomMixin",type:"zoom",constructor:function(){this.normalizedAnchorPoint=a.create();this._lastStepAnimationId=-1},begin:function(b){this.navigation.begin(this);a.set(b,this._dragBeginPoint);
this.normalizeCoordinate(b,this.normalizedAnchorPoint);b=this._toYDownCoord(this._dragBeginPoint);this.active=!0;this.emit("begin",b[0],b[1])},update:function(a){},end:function(a){this.active=!1;a=this._toYDownCoord(this._dragBeginPoint);this.emit("end",a[0],a[1]);this.navigation.end(this)},stepScreen:function(a,e){this.active||(b.set(this.currentCamera.center,c),0<a&&!this.pickPointInScreen(e,c)&&"local"===this.navigation.view.viewingMode&&this.pickFreePointInScreen(e,c),this.step(Math.pow(0.6,a),
c,e))},step:function(a,c,h){if(!this.active){this.navigation.begin(this);!this.navigation.currentHasAlmostReachedTarget()&&this.navigation.animationId!==this._lastStepAnimationId?this.navigation.stop():this.targetCamera.copyFrom(this.currentCamera);var d=1E-6<b.dist(c,this.targetCamera.center);this.stepAtPoint(a,c,h,d);this._lastStepAnimationId=this.navigation.animationId;this.navigation.end(this)}},stepAtPoint:function(a,b,c,d){},_toYDownCoord:function(a){return[a[0],this.currentCamera.height-a[1]]}})})},
"esri/views/3d/navigation/spherical/actions/RotateSpherical":function(){define(["./ActionSpherical","../../mixins/RotateMixin"],function(n,k){return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.spherical.actions.RotateSpherical"})})},"esri/views/3d/navigation/mixins/RotateMixin":function(){define(["../../../../core/declare","../../lib/glMatrix","../../support/mathUtils","../NavigationConstants"],function(n,k,a,b){var c=k.vec2d,f=k.vec3d,e=k.mat4d,h=f.create(),d=f.create(),l=c.create(),
g=e.create(),m=f.create(),q=[3,1.5],p=b.Rotate.PivotPoint;return n([],{declaredClass:"esri.views.3d.navigation.mixins.RotateMixin",type:"rotate",constructor:function(){this._rotLastPoint=c.create()},begin:function(a,b){this.navigation.begin(this);this.active=!0;this.emit("begin");this.setPoiAuto(a);this.normalizeCoordinate(a,this._rotLastPoint)},update:function(a,b){void 0===b&&(b=p.POI);var c,d;switch(b){case p.EYE:c=this.targetCamera.center;d=this.targetCamera.eye;break;default:c=this.targetCamera.eye,
d=this.targetCamera.center,b!==p.POI&&console.error("[RotateMixin.update]: invalid pivot specified")}this._applyRotation(a,b,c,d);this.constrainTargetEyeByElevation();this.fixTargetUpVector();this.targetAndCurrentChanged();this.emit("update")},_applyRotation:function(b,k,s,n){this.renderCoordsHelper.worldUpAtPosition(n,h);this.normalizeCoordinate(b,l);b=(l[1]-this._rotLastPoint[1])*q[k-1];var v=(l[0]-this._rotLastPoint[0])*q[k-1];f.subtract(s,n,d);var w=f.length(d),x=a.acos(f.dot(d,h)/w);k===p.POI?
b=this.limitTiltByConstraints(x+b,n,w)-x:(x=0.5*Math.PI-x,w=0.495*Math.PI,b=x-Math.max(-w,Math.min(w,x+-0.5*b)));e.identity(g);f.cross(this.targetCamera.up,d,m);k==p.POI&&(v=-v);e.rotate(g,v,h);e.rotate(g,b,m);e.multiplyVec3(g,d);f.add(n,d,s);e.multiplyVec3(g,this.targetCamera.up);c.set(l,this._rotLastPoint)},end:function(a){this.active=!1;this.emit("end");this.navigation.end(this)}})})},"esri/views/3d/navigation/planar/NavigationPlanar":function(){define("../Navigation ./ConstraintsPlanar ./AnimationPlanar ./actions/PanPlanar ./actions/RotatePlanar ./actions/ZoomPlanar ../../webgl-engine/lib/Camera ../../lib/glMatrix".split(" "),
function(n,k,a,b,c,f,e,h){var d=h.vec3d,l=d.create(),g=d.create(),m=d.create(),q=d.create();return n.createSubclass([k,a],{declaredClass:"esri.views.3d.navigation.planar.NavigationPlanar",initialize:function(){this.pan=new b({navigation:this});this.zoom=new f({navigation:this});this.rotate=new c({navigation:this})},getInitialCamera:function(){return new e(d.createFrom(0,0,100),d.createFrom(0,0,0),d.createFrom(0,1,0))},fixTargetUpVector:function(){var a=this.renderCoordsHelper.worldUp,b=this.cameras.target;
d.direction(b.center,b.eye,q);var c=d.dot(q,a);0.9999>=Math.abs(c)&&(d.scale(q,c,q),d.subtract(a,q,b.up),d.normalize(b.up))},setPoiAuto:function(a,b){var c=this.picker.pickAlongRay(this.cameras.target.eye,this.cameras.target.center,null,a);if(c.getMinResult().getIntersectionPoint(l)&&c.getMaxResult().getIntersectionPoint(g)){var e=5/this.renderUnitInMeters,f=c.getMinResult().dist-e,e=c.getMaxResult().dist+e,h=d.dist(this.cameras.target.eye,this.cameras.target.center);if(h<=f||h>=e){if(c.getMinResult().object){c.getMaxResult().dist=
void 0;c.intersectObject(c.getMinResult().object);if(void 0===c.getMaxResult().dist){console.error("[NavigationPlanar.setPoiAuto] Did not obtain maximum intersection distance");return}c.getMaxResult().getIntersectionPoint(g);d.lerp(l,g,0.5,m)}else d.set(l,m);this.setCameraFromEyeAndCenter(this.cameras.target.eye,m,{animate:!1})}}}})})},"esri/views/3d/navigation/planar/ConstraintsPlanar":function(){define("../mixins/ConstraintsMixin ../../support/mathUtils ../../support/earthUtils ../../support/RenderCoordsHelper ../../constraints/SceneViewTiltConstraint ../../lib/glMatrix ../../webgl-engine/lib/Util ../../../../geometry/support/scaleUtils".split(" "),
function(n,k,a,b,c,f,e,h){var d=f.vec3d,l=f.vec4d,g=l.create(),m=d.create(),q=d.create();return n.createSubclass({declaredClass:"esri.views.3d.navigation.planar.ConstraintsPlanar",defaultConstraints:{tilt:new n.Tilt({min:function(){return k.deg2rad(c.MAX_DEFAULT)},max:k.makePiecewiseLinearFunction([[4E3,k.deg2rad(c.MIN_DEFAULT)],[1E4,k.deg2rad(88)],[6E6,k.deg2rad(88)]])}),altitude:new n.Altitude({min:function(a){return a._autoAltitudeConstraints.min},max:function(a){return a._autoAltitudeConstraints.max}}),
collision:new n.Collision},_updateAutoAltitudeConstraints:function(a){var b=Math.max(a.xmax-a.xmin,a.ymax-a.ymin);a.hasZ&&(b=Math.max(b,a.zmax-a.zmin));b=3*b/Math.atan((this._targetCameraBeforeElevationUpdate||this.targetCamera)._fov/2);a=h.getUnitValueForSR(a.spatialReference);this._autoAltitudeConstraints.min=0;this._autoAltitudeConstraints.max=b*a},limitAltitude:function(a,b,c,d){return this.constraints.altitude.apply(this,a)},limitTiltByAltitudeConstraints:function(a,b,c,d){return a},distanceToSilhouette:function(c,
e,f,g,h){h||(h={maxFarNearRatio:0,distance:0});h.maxFarNearRatio=this.maxFarNearRatio;var l=b.Planar.prototype.getAltitude(c.eye),n=l*=f;g=l-g;var x=this.elevationProvider?this.elevationProvider.getElevationBounds():null;x&&(l=0<=g?n-f*x[0]:f*x[1]-n);var n=e.xmax-e.xmin,x=e.ymax-e.ymin,y=8*Math.max(e.xmax-e.xmin,e.ymax-e.ymin),n=Math.max(n,x,y);d.subtract(c.center,c.eye,q);m[0]=0<q[0]?e.xmax:e.xmin;m[1]=0<q[1]?e.ymax:e.ymin;m[2]=0<q[2]?n/2:-n/2;d.subtract(m,c.eye);d.normalize(q);c=d.dot(m,q);c=1.1*
c*f;x=l+a.earthRadius;x=Math.sqrt(x*x-a.earthRadius*a.earthRadius);e=Math.max(e.xmax-e.xmin,e.ymax-e.ymin);y=1E-4*e*f;f=k.clamp((l-y)/(0.001*e*f-y),0,1);h.distance=k.lerp(x,c,f*f*f);h.maxFarNearRatio=2E4;h.distance*=Math.max(Math.log(Math.abs(g)),1);h.distance=Math.min(h.distance,Math.max(34064E4,n));return h},intersectManifold:function(a,b,c,f){var h=this.renderCoordsHelper.worldUp;l.set4(h[0],h[1],h[2],c,g);return!e.rayPlane(a,b,g,f)||0>d.dot(d.subtract(f,a,m),b)?!1:!0},getFallbackCenterAlongViewDirection:function(a,
b,c){d.set(b,c)}})})},"esri/views/3d/navigation/planar/AnimationPlanar":function(){define(["../mixins/AnimationMixin","../../lib/glMatrix","../../support/mathUtils"],function(n,k,a){function b(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f}function c(a,c){return Math.sqrt(b(a,c))}function f(b){this.interpolate=function(b,c,e){e=Math.min(5*e,0.3);h.lerp(b.eye,c.eye,e);h.lerp(b.center,c.center,e);h.lerp(b.up,c.up,e);b.fov=a.lerp(b.fov,c.fov,e);b.padding=d.lerp(b.padding,
c.padding,e,l)}}function e(b,e,f){e=e||250;f=f||e;var k=0,r=0,n=0,s=0,u=0;this.interpolate=function(v,w,x){k=b.easeInOutInterpLinear(f,e,v.eye,w.eye,x,k,h);r=b.easeInOutInterpLinear(f,e,v.center,w.center,x,r,h);n=b.easeInOutInterpLinear(f,e,v.up,w.up,x,n,h);u=b.easeInOutInterpLinear(f,e,v.padding,w.padding,x,u,{dist:c,lerp:function(a,b,c){return d.lerp(a,b,c,l)},set:function(a){v.padding=a}});s=b.easeInOutInterpLinear(f,e,v.fov,w.fov,x,s,{dist:function(a,b){return Math.abs(b-a)},lerp:a.lerp,set:function(a){v.fov=
a}})}}var h=k.vec3d,d=k.vec4d,l=d.create();return n.createSubclass({declaredClass:"esri.views.3d.navigation.planar.AnimationPlanar",constructor:function(){this.interpolationTypes={linear:f,easeInOut:e}}})})},"esri/views/3d/navigation/planar/actions/PanPlanar":function(){define(["./ActionPlanar","../../mixins/PanMixin","../../../lib/glMatrix","../../../webgl-engine/lib/Util"],function(n,k,a,b){var c=a.vec2d,f=a.vec3d,e=f.create(),h=f.create(),d=f.create(),l=f.create(),g=f.create(),m=f.create(),q=Math.PI/
9,p=f.create(),r=f.create();return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.planar.actions.PanPlanar",begin:function(a){this.inherited(arguments);this.pickPointInScreen(a,e)||this.pickFreePointInScreen(a,e);f.normalize(f.subtract(this.targetCamera.eye,this.targetCamera.center,h));this.renderCoordsHelper.worldUpAtPosition(a,m);var b=f.dot(h,m);0>b&&(f.negate(h),b=-b);var g=Math.asin(b);g>=q?f.set(m,h):(f.subtract(h,f.scale(m,b,d)),f.normalize(h),g>q&&(f.lerp(h,m,(g-q)/(q-q)),f.normalize(h)));
this.updatePlane(e,h);c.set(a,this._dragLastPoint);c.set(a,this._dragBeginPoint)},update:function(a){this._intersectPanPlane(this._dragLastPoint,this._dragBeginPoint,p)&&this._intersectPanPlane(a,this._dragBeginPoint,r)&&(f.subtract(r,p),f.subtract(this.targetCamera.eye,r),f.subtract(this.targetCamera.center,r),c.set(a,this._dragLastPoint),this.constrainTargetEyeByElevationAndMoveLookAt(),this.targetAndCurrentChanged())},_intersectPanPlane:function(a,c,d){this.createPickRay(a,c,this.currentCamera.viewMatrix,
l,g);f.subtract(g,l);return b.rayPlane(l,g,this._plane,d)},end:function(a){this.setPoiAuto(a,!0);this._navSphereRadius=0;this.inherited(arguments)}})})},"esri/views/3d/navigation/planar/actions/ActionPlanar":function(){define(["../../Action","../../../lib/glMatrix"],function(n,k){var a=k.vec3d,b=k.vec4d;return n.createSubclass({declaredClass:"esri.views.3d.navigation.planar.actions.ActionPlanar",constructor:function(){this._plane=b.create()},updatePlane:function(c,f){b.set4(f[0],f[1],f[2],-a.dot(f,
c),this._plane)}})})},"esri/views/3d/navigation/planar/actions/RotatePlanar":function(){define(["./ActionPlanar","../../mixins/RotateMixin"],function(n,k){return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.planar.actions.RotatePlanar"})})},"esri/views/3d/navigation/planar/actions/ZoomPlanar":function(){define(["./ActionPlanar","../../mixins/ZoomMixin","../../../lib/glMatrix","../../../webgl-engine/lib/Util"],function(n,k,a,b){var c=a.vec2d,f=a.vec3d,e=f.create(),h=f.create(),d=f.create(),
l=f.create(),g=f.create(),m=f.create();return n.createSubclass([k],{declaredClass:"esri.views.3d.navigation.planar.actions.ZoomPlanar",begin:function(a){this.inherited(arguments);this.pickPointInScreen(a,g)||this.pickFreePointInScreen(a,g);f.normalize(f.subtract(this.targetCamera.eye,this.targetCamera.center,l));0>l[1]&&f.negate(l);this.updatePlane(g,l)},update:function(a){f.set(this.targetCamera.center,m);this.createPickRay(this._dragBeginPoint,this._dragBeginPoint,this.currentCamera.viewMatrix,
e,h);f.subtract(h,e);b.rayPlane(e,h,this._plane,m);this.normalizeCoordinate(a,e);a=4*(this.normalizedAnchorPoint[1]-e[1]);c.set(e,this.normalizedAnchorPoint);this._applyZoom(m,a);a=this._toYDownCoord(this._dragLastPoint);this.emit("update",a[0],a[1])},_applyZoom:function(a,b){f.subtract(a,this.targetCamera.eye,d);var c=f.length(d),e=c*(1-b);0<=b&&e<this.minPoiDist&&(e=this.minPoiDist);e=this.limitAltitude(e,a,d,c,0<=b?-1:1);1E-6>Math.abs(c-e)||(b=-(e-c)/c,f.scale(d,b),f.add(this.targetCamera.eye,
d),f.lerp(this.targetCamera.center,a,b),this.fixTargetUpVector(),this.targetAndCurrentChanged())},stepAtPoint:function(a,b,c,e){f.set(b,m);f.subtract(m,this.targetCamera.eye,d);b=f.length(d);c=b*a;if((a=1>=a)&&c<this.minPoiDist)c=this.minPoiDist;c=this.limitAltitude(c,m,d,b,a?-1:1);a=c/b;1E-6<=Math.abs(b-c)&&(f.scale(d,c/b),f.subtract(m,d,this.targetCamera.eye),f.lerp(this.targetCamera.center,m,1-a),this.constrainTargetEyeByElevation(),this.fixTargetUpVector(),this.targetAnimatedChanged(!1,{internalUpdate:!0}))}})})},
"esri/views/3d/support/Frustum":function(){define(["../../../core/declare","../lib/glMatrix","../support/earthUtils","../webgl-engine/lib/Util"],function(n,k,a,b){var c=k.vec3d,f=k.vec4d;return n([],{constructor:function(){this.planes=Array(6);this.points=Array(8);this.lines=Array(12);this.origin=c.create();this.direction=c.create();this.dirty=!1;this._altitude=null;for(var a=0;6>a;a++)this.planes[a]=f.create();for(a=0;8>a;a++)this.points[a]=c.create();for(a=0;12>a;a++)this.lines[a]={origin:null,
direction:c.create(),endpoint:null}},_makeLine:function(a,b,d){a.origin=b;a.endpoint=d;c.direction(d,b,a.direction)},update:function(a){if(this.dirty){b.matrix2frustumPlanes(a.viewMatrix,a.projectionMatrix,this.points,this.planes);for(var f=0;4>f;f++){var d=f,l=f+4;this._makeLine(this.lines[f],this.points[d],this.points[l]);this._makeLine(this.lines[f+4],this.points[d],3===f?this.points[0]:this.points[d+1]);this._makeLine(this.lines[f+8],this.points[l],3===f?this.points[4]:this.points[l+1])}c.set(a.eye,
this.origin);c.set(a.viewForward,this.direction);this._altitude=null;this.dirty=!1}},altitude:function(){return null!=this._altitude?this._altitude:this._altitude=c.length(this.origin)-a.earthRadius}})})},"esri/views/ui/3d/DefaultUI3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),function(n,k,a,b,c,f,e){return function(f){function d(){f.call(this)}
a(d,f);d.prototype.getDefaults=function(){return e.mixin(this.inherited(arguments),{components:["attribution","zoom","navigation-toggle","compass"]})};return d=b([c.subclass("esri.views.ui.3d.DefaultUI3D")],d)}(c.declared(f))})},"esri/layers/graphics/controllers/I3SOnDemandController":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/promise/all ../../../views/3d/support/ResourceController ../../../views/3d/layers/i3s/I3SNodeLoader ../../../views/3d/layers/i3s/I3SIndexTraversal ../../../views/3d/layers/i3s/I3SUtil ../../../views/3d/layers/i3s/I3SLodHandling ../../../views/3d/layers/i3s/I3SViewportQueries ../../../layers/SceneLayer ../../../layers/IntegratedMeshLayer ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../core/Evented ../../../core/Promise ../../../core/Logger ../../../core/watchUtils ../../../core/HandleRegistry ../../../views/3d/support/PromiseLightweight ../../../views/3d/support/projectionUtils ../../../views/3d/lib/glMatrix".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B){function H(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return[c,a[c]];return[-1,void 0]}var D=B.vec3d,I=u.getLogger("esri.layers.SceneService");return function(k){function n(a){k.call(this);this.nodeIndex={};this.screenSizeFactor=0;this.updating=!1;this.updatingPercentage=0;this._lodFactorProperty=null;this._numNodesLoading=0;this._progressMaxNumNodes=1;this._animFrameFunctionQueue=[[],[]];this._requiredAttributesDirty=!0;this._restartNodeLoading=
this._updatesDisabled=!1;this._handles=new w}a(n,k);Object.defineProperty(n.prototype,"isMeshPyramid",{get:function(){return"mesh-pyramids"===this.layer.profile||"MeshPyramid"===this.layer.store.lodType},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"streamDataSupplier",{get:function(){return this.layerView.view.resourceController.registerClient(this.layerView,f.ClientType.SCENE,{addUrlToken:this.addUrlToken,trackRequests:!0})},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,
"crsVertex",{get:function(){return d.getVertexCrs(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"crsIndex",{get:function(){return d.getIndexCrs(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"rootNodeVisible",{get:function(){var a=this._rootNodeId&&this.nodeIndex[this._rootNodeId];return a&&this._viewportQueries?this._viewportQueries.isNodeVisible(a):!0},enumerable:!0,configurable:!0});n.prototype.initialize=function(){var a=this;this.updateEventListener=
{needsUpdate:function(){return a._needsAnimationFrameHandler()},idleFrame:function(b){return a._animationFrameHandler(b)},idleBegin:function(){return a._startNodeLoading()},idleEnd:function(){return a.cancelNodeLoading()}};this.updateEventListenerWhileSuspended={idleBegin:function(){return a._startNodeLoadingWhileSuspended()}};this._lodHandling=new l(this.layerViewRequiredFunctions,this.layerViewOptionalFunctions);this.layerView._controller=this;var b=this.layer;this._defaultGeometrySchema=b.store.defaultGeometrySchema;
this._fields=b.fields;this._attributeStorageInfo=b.attributeStorageInfo;this._rootNodeUrl=b.store.rootNode;b=this._rootNodeUrl.split("/");this._rootNodeId=b[b.length-1];this.layer instanceof m?"mesh"===this.layer.geometryType?this._lodFactorProperty="qualitySettings.sceneService.3dObject.lodFactor":"point"===this.layer.geometryType&&(this._lodFactorProperty="qualitySettings.sceneService.point.lodFactor"):this.layer instanceof q&&(this._lodFactorProperty="qualitySettings.sceneService.integratedMesh.lodFactor");
b=c([this.layer,this.layerView]).then(function(){if(!a.destroyed&&a.layerView&&!a.layerView.destroyed){a.setClippingArea(a.layerView.view.clippingArea);var b=a.layerView.view.resourceController,c=!1;a._handles.add(v.init(a.layerView,"suspended",function(d){null!=a.layerView.setVisibility&&a.layerView.setVisibility(!d);c&&b.deregisterIdleFrameWorker(a);d?b.registerIdleFrameWorker(a,a.updateEventListenerWhileSuspended):b.registerIdleFrameWorker(a,a.updateEventListener);c=!0}),"layerview");a._lodFactorProperty&&
a._handles.add(a.layerView.view.watch(a._lodFactorProperty,function(){return a._qualityChanged()}),"quality")}});this.addResolvingPromise(b)};n.prototype.destroy=function(){this.layerView.view.resourceController.deregisterIdleFrameWorker(this);this.layerView.view.resourceController.deregisterClient(this.layerView);this._handles.destroy();this._nodeLoader=null};n.prototype._modifyNumNodesLoading=function(a){this._numNodesLoading+=a};n.prototype._getRequiredAttributes=function(){if(null==this._attributeStorageInfo||
!this._fields)return[];var a=Object.create(null);this.layer.renderer&&this.layer.renderer.collectRequiredFields(a);this.layer.labelsVisible&&this.layer.labelingInfo&&this.layer.labelingInfo.forEach(function(b){b._collectRequiredFields(a)});var b=this._attributeStorageInfo,c=this._fields;return Object.keys(a).map(function(a){var d=H(b,a)[0],e=H(c,a)[1];return{index:d,name:a,field:e,attributeStorageInfo:b[d]}}).filter(function(a){return-1!==a.index&&null!=a.field})};n.prototype._rendererChanged=function(){this._restartNodeLoading=
this._requiredAttributesDirty=!0};n.prototype._labelsVisibleChanged=function(){var a=this._getRequiredAttributes(),b=!0;a.length===this._requiredAttributes.length&&(b=this._requiredAttributes.every(function(b){return-1!==H(a,b.name)[0]}));b&&(this._restartNodeLoading=this._requiredAttributesDirty=!0)};n.prototype._labelingInfoChanged=function(){};n.prototype.setClippingArea=function(a){var b=[];y.extentToBoundingBox(a,b,this.layerView.view.renderSpatialReference)?this._clippingArea=b:this._clippingArea=
null};n.prototype._qualityChanged=function(){this._restartNodeLoading=!0};n.prototype.updateClippingArea=function(a){this.setClippingArea(a);this._restartNodeLoading=!0};n.prototype.queueAnimationFrameFunctionCall=function(a,b,c,d,e){null!=this._nodeLoader&&this._animFrameFunctionQueue[e||0].push({fct:a,that:b,args:c,cancelFunc:d})};n.prototype.getBaseUrl=function(){return d.addTrailingSlash(this.layer.parsedUrl.path)};n.prototype.updateElevationChanged=function(a,b,c){d.findIntersectingNodes(a,b,
this.nodeIndex.root,this.crsIndex,this.nodeIndex,c);for(a=0;a<c.length;a++)b=c.data[a],b.computedMbs&&(b.computedMbs[3]=-1);c.length&&this.restartNodeLoading()};n.prototype.restartNodeLoading=function(){this._restartNodeLoading=!0};n.prototype._needsAnimationFrameHandler=function(){return!0};n.prototype._animationFrameHandler=function(a){this._restartNodeLoading&&(this.cancelNodeLoading(),this._startNodeLoading());if(null!=this._nodeLoader){for(var b;0<this._animFrameFunctionQueue[0].length&&!a.done();)b=
this._animFrameFunctionQueue[0].shift(),b.fct.apply(b.that,b.args);b=5-this._numNodesLoading;for(null!=this._indexLoader&&0<b&&this._indexLoader.continueTraversal(b);0<this._animFrameFunctionQueue[1].length&&!a.done();)b=this._animFrameFunctionQueue[1].shift(),b.fct.apply(b.that,b.args);this._evaluateUpdatingState();this._lodHandling.lodGlobalHandling()}};n.prototype._evaluateUpdatingState=function(){var a=null!=this._indexLoader?this._indexLoader.getQueueSize()+3*this._numNodesLoading:0,b=0<a;0===
a&&(this._progressMaxNumNodes=1);this._progressMaxNumNodes=Math.max(a,this._progressMaxNumNodes);b!==this._get("updating")&&this._set("updating",b);a=100*a/this._progressMaxNumNodes;a!==this._get("updatingPercentage")&&this._set("updatingPercentage",a)};n.prototype._initViewData=function(){var a=this.layerView.view,b=a.navigation.targetCamera,c=a.renderCoordsHelper;this.camPos=b.eye;this.screenSizeFactor=1/b.perPixelRatio;this._poi=D.create();var d=D.create(),e=D.create();D.subtract(b.center,b.eye,
d);D.normalize(d);c.worldUpAtPosition(b.center,e);d=Math.acos(D.dot(e,d))-0.5*Math.PI;D.lerp(b.eye,b.center,Math.max(0,Math.min(1,d/(0.5*Math.PI))),this._poi);d=this._lodFactorProperty&&this.layerView.view.get(this._lodFactorProperty)||1;e=this.layerViewOptionalFunctions.traversalOptions.elevationInfo;this._viewportQueries=new g(this.crsIndex,c,b,this._clippingArea,null!=this.layerViewOptionalFunctions.traversalOptions?this.layerViewOptionalFunctions.traversalOptions.errorMetricPreference:null,e?
a.basemapTerrain:null,e,{screenspaceErrorBias:d,maxDistance:25E7,angleDependentLoD:0.5>d});this.notifyChange("rootNodeVisible")};n.prototype._startNodeLoadingWhileSuspended=function(){var a=this;this._initViewData();this._removeInvisibleNodes(function(b){return a._viewportQueries.isNodeVisible(b)})};n.prototype._startNodeLoading=function(){var a=this;this._restartNodeLoading=!1;if(!this._updatesDisabled&&null!=this.streamDataSupplier){this._initViewData();var b=null!=this.layerViewOptionalFunctions.getTexturePrefetchFunctions?
this.layerViewOptionalFunctions.getTexturePrefetchFunctions():void 0,c=this.isMeshPyramid&&null!=this._defaultGeometrySchema&&null!=this._defaultGeometrySchema.ordering;null!=this.layerViewOptionalFunctions.getLoadedAttributes&&this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1,this._handles.add([this.layer.watch("renderer",function(){return a._rendererChanged()}),this.layer.watch("labelsVisible",function(){return a._labelsVisibleChanged()}),
this.layer.watch("labelingInfo",function(){return a._labelingInfoChanged()})],"requiredAttributes"));this._nodeLoader=new e(this.streamDataSupplier,this._bundleLoadedCallback.bind(this),this.queueAnimationFrameFunctionCall.bind(this),void 0,this.layerView.view.renderCoordsHelper,this.crsIndex,b?b._calcDesiredTextureLOD:void 0,b?b._imageIsPartOfTextureBundle:void 0,b?b._matId2Meta:void 0,b?b._texId2Meta:void 0,b?b.useCompressedTextures:void 0,I,this._defaultGeometrySchema,this._requiredAttributes,
c);this._indexLoader=new h(this.getBaseUrl(),this._rootNodeUrl,this._rootNodeId,this._poi,this.nodeIndex,this.streamDataSupplier,this._viewportQueries,function(b,c){return a._processNodeIndexDocument(b,c)},function(b){return a._lodHandling.finishedLevel(b)},this.layerViewOptionalFunctions._nodeDebugVisualizer,I,this.layerViewOptionalFunctions.traversalOptions);this._indexLoader.start();b=this._removeInvisibleNodes(function(b){return a._indexLoader.nodeIsVisible(b)});c=null!=this.layerViewOptionalFunctions.traversalOptions&&
!0===this.layerViewOptionalFunctions.traversalOptions.perLevelTraversal?"perLevel":this.isMeshPyramid?"global":"swap";this._lodHandling.startNodeLoading(this._indexLoader.nodeIsVisible.bind(this._indexLoader),this._indexLoader.nodeTraversalState.bind(this._indexLoader),c,this.nodeIndex,b,this._rootNodeId);this.layerViewOptionalFunctions.additionalStartNodeLoadingHandler&&this.layerViewOptionalFunctions.additionalStartNodeLoadingHandler();this._evaluateUpdatingState()}};n.prototype.isNodeLoading=function(){return null!=
this._nodeLoader&&null!=this._indexLoader};n.prototype.cancelNodeLoading=function(){if(this.isNodeLoading()){this._indexLoader.cancel();this._nodeLoader.cancel();this.streamDataSupplier.cancelAll();for(var a=0;a<this._animFrameFunctionQueue.length;a++)for(var b=0;b<this._animFrameFunctionQueue[a].length;b++)void 0!==this._animFrameFunctionQueue[a][b].cancelFunc&&this._animFrameFunctionQueue[a][b].cancelFunc();this._numNodesLoading=0;this._animFrameFunctionQueue=[[],[]];this._indexLoader=this._nodeLoader=
void 0;this._lodHandling.cancelNodeLoading();this.layerViewOptionalFunctions.additionalCancelNodeLoadingHandler&&this.layerViewOptionalFunctions.additionalCancelNodeLoadingHandler();this._evaluateUpdatingState()}};n.prototype._removeInvisibleNodes=function(a){for(var b={},c=this.layerViewRequiredFunctions.getAddedNodeIDs(),d=0;d<c.length;d++){var e=c[d],f=this.nodeIndex[e];this._isNodeVisibleWithParents(f,a)?b[e]=f:this._removeNodeData(f)}return b};n.prototype._isNodeVisibleWithParents=function(a,
b){var c,d=a;do c=b(d),d=d.parentNode,d=null!=d?this.nodeIndex[d.id]:null;while(c&&null!=d);return c};n.prototype._removeNodeData=function(a){this._lodHandling.setLodGlobalDirty();this.layerViewRequiredFunctions.removeNodeData(a)};n.prototype._processNodeIndexDocument=function(a,b){var c=this,d=new x.Promise;if(null!=a.featureData&&0<a.featureData.length)if(this.layerViewRequiredFunctions.areAllBundlesLoaded(a,!0)){var e=this.layerViewOptionalFunctions.getLoadedAttributes,e=null!=e?e(a):void 0;null!=
e&&e!==this._requiredAttributes&&this._nodeLoader.loadAttributes(a,a.baseUrl,this._requiredAttributes).then(function(b){c.layerViewOptionalFunctions.setAttributeData(a,c._requiredAttributes,b)}).catch(function(b){c.layerViewOptionalFunctions.setAttributeData(a,c._requiredAttributes,{})});this._lodHandling.shouldLoadNode(a,b)&&(e=this._lodHandling.lodSwapBuildInfoForNode(a))&&null==e.swapPairs&&this._lodHandling.lodSwapBundleLoaded(a,null,e)}else if(this._lodHandling.shouldLoadNode(a,b)){e=this._lodHandling.lodSwapBuildInfoForNode(a);
if(this.layerViewRequiredFunctions.isOverMemory())return d.done(),d;this._modifyNumNodesLoading(1);for(var f=[],g=0;g<a.featureData.length;g++){var h=this.layerViewRequiredFunctions.isBundleAlreadyAddedToStage(a,g),l=h.wasPartiallyHidden;(!h.alreadyLoaded||l)&&f.push(g)}this.queueAnimationFrameFunctionCall(this._nodeLoader.loadNodeData,this._nodeLoader,[a,f,d,null!=this.layerViewOptionalFunctions.getTexturePrefetchFunctions,e],void 0,1);d.then(function(){return c._modifyNumNodesLoading(-1)},function(){return c._modifyNumNodesLoading(-1)});
return d}d.done();return d};n.prototype._bundleLoadedCallback=function(a,b,c,d,e,f,g,h){this._lodHandling.lodSwapBundleLoaded(a,b,h);this.layerViewRequiredFunctions.addBundle(a,b,c,d,e,f,g);null!=this.layerViewOptionalFunctions.setPolygonOffset&&(b=this._lodHandling.shouldSetPolygonOffset(a))&&this.layerViewOptionalFunctions.setPolygonOffset(a,b)};b([p.property({readOnly:!0})],n.prototype,"isMeshPyramid",null);b([p.property({readOnly:!0})],n.prototype,"streamDataSupplier",null);b([p.property({readOnly:!0})],
n.prototype,"crsVertex",null);b([p.property({readOnly:!0})],n.prototype,"crsIndex",null);b([p.property({readOnly:!0})],n.prototype,"nodeIndex",void 0);b([p.property()],n.prototype,"camPos",void 0);b([p.property()],n.prototype,"screenSizeFactor",void 0);b([p.property()],n.prototype,"layerView",void 0);b([p.property()],n.prototype,"layerViewRequiredFunctions",void 0);b([p.property()],n.prototype,"layerViewOptionalFunctions",void 0);b([p.property()],n.prototype,"layer",void 0);b([p.property()],n.prototype,
"addUrlToken",void 0);b([p.property({readOnly:!0})],n.prototype,"updating",void 0);b([p.property({readOnly:!0})],n.prototype,"updatingPercentage",void 0);b([p.property({readOnly:!0})],n.prototype,"rootNodeVisible",null);return n=b([p.subclass("esri.layers.graphics.controllers.I3SOnDemandController")],n)}(p.declared(r,s,t))})},"esri/views/3d/layers/i3s/I3SNodeLoader":function(){define("require exports dojo/_base/lang ../../webgl-engine/lib/Util ./I3SUtil ./I3SBinaryReader ../../support/PromiseLightweight ../../support/projectionUtils ../../lib/glMatrix ../../support/PromiseNativeOrShim ../../../../core/urlUtils".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g){var m=b.assert,q=d.vec4d,p={};return function(){function b(a,c,d,e,f,h,k,m,q,n,p,A,z,E,C){this.bundleLoadedCallback=c;this.queueFunctionCall=d;this.debugVis=e;this.renderCoordsHelper=f;this.indexSR=h;this.calcDesiredTextureLOD=k;this.imageIsPartOfTextureBundle=m;this.matId2Meta=q;this.texId2Meta=n;this.useCompressedTextures=p;this.logger=A;this.defaultGeometrySchema=z;this.requiredAttributes=E;this.bypassFeatureData=C;this.texIdToPromises={};this.loadShared=function(a){if(null==
a.sharedResource)return l.resolve({});var c=g.makeAbsolute(a.sharedResource.href,a.baseUrl)+"/";a.sharedResource.hrefConcat=c;return this.loadJSON(c).then(function(a){b.fixTextureEncodings(a);b.addAbsoluteHrefTexture(a,c);return a})};this.loader=a;this.cancelled=!1}b.prototype.waitForAnimationFrame=function(){var a=this;return new l(function(b,c){a.queueFunctionCall(b,null,[],c)})};b.prototype.cancel=function(){this.cancelled=!0};b.prototype.loadJSON=function(a){var b=this.loader.request(a,"json");
return new l(function(c,d){b.then(function(a,b){c(b)},function(b){d(Error("Failed to load: "+a))})})};b.prototype.loadBinary=function(a){var b=this.loader.request(a,"binary");return new l(function(c,d){b.then(function(a,b){c(b)},function(b){d(Error("Failed to load: "+a))})})};b.prototype.loadImage=function(a){var b=this.loader.request(a,"image");return new l(function(c,d){b.then(function(a,b){c(b)},function(b){d(Error("Failed to load: "+a))})})};b.prototype.loadAttribute=function(a,b,d){a=c.addTrailingSlash(g.makeAbsolute(d,
a));return this.loadBinary(a).then(function(a){return f.readBinaryAttribute(b,a)})};b.prototype.loadAttributes=function(a,b,c){var d=this,e=c.map(function(c){return null==a.attributeData||null==a.attributeData[c.index]?l.reject(Error("Missing attributeData on node '"+a.id+"'")):d.loadAttribute(b,c.attributeStorageInfo,a.attributeData[c.index].href)});return l.all(e).then(function(a){for(var b={},d=0;d<c.length;++d)a[d]&&(b[c[d].name]=a[d]);return b})};b.prototype.prepareBinaryGeometryData=function(b,
c,d,e){a.mixin(b.geometries[0].params,d);b.faceRanges[0][0]=0;b.faceRanges[0][1]=d.header.fields.vertexCount/3-1;!e&&null==d.vertexAttributes.region&&delete d.vertexAttributes.region;if(null!=d.featureAttributes){e=d.featureAttributes;if(e.faceRange){b.faceRanges=[];for(var g=f.createTypedView(c,e.faceRange),h=e.faceRange.valuesPerElement,l=0;l<d.header.fields.featureCount;l++)b.faceRanges[l]=[g[l*h],g[l*h+1]]}if(e.id){b.featureIds=[];g=1;l=f.valueType2TypedArrayClassMap[e.id.valueType];"UInt64"===
e.id.valueType&&(l=Uint32Array,g=2);c=new l(c,e.id.byteOffset,e.id.count*e.id.valuesPerElement*g);for(l=0;l<d.header.fields.featureCount;l++)if(b.featureIds[l]=c[l*e.id.valuesPerElement*g],2===g){h=c[l*e.id.valuesPerElement*g+1];if(2097150<=h)throw Error("ID exceeded maximum range supported by javascript (max \x3d 53bit-1 \x3d 9007199254740991)");b.featureIds[l]+=4294967296*h}}}};b.prototype.loadNodeData=function(c,d,e,h,k){var m=this,q=null==c.features,n=c.baseUrl,p={},D=this.loadShared(c),I=D.then(function(a){return m.loadReferencedShared(a,
n)}),A=null;null!=this.requiredAttributes&&(A=this.loadAttributes(c,n,this.requiredAttributes));var z=null;null!=c.geometryData&&(z=c.geometryData.map(function(a,b){if(-1===d.indexOf(b))return null;var c=g.makeAbsolute(a.href,n);a.hrefConcat=c;return m.loadBinary(c)}));l.all([D,I]).then(function(e){var g=e[0];e=e[1];m.handleCancelled();c.sharedResource&&(p[c.sharedResource.hrefConcat]=g,a.mixin(p,e));e=d.map(function(a){return m.loadFeatureData(c,a,g).then(function(d){m.handleCancelled();q&&b.buildNodeFeatures(c,
a,d);var e=m.collectGeometries(c,a,d,g);d=null;d=null!=z&&null!=z[a]?z[a].then(function(b){p[c.geometryData[a].hrefConcat]=b;var d=Object.keys(g.materialDefinitions)[0],d=g.materialDefinitions[d].params.vertexRegions,h=f.createGeometryDataIndex(b,m.defaultGeometrySchema,d);m.prepareBinaryGeometryData(e[0],b,h,d);return e}):l.resolve(e);var k=h?m.loadTextures(e,g,m.matId2Meta,m.texId2Meta).then(function(a){var b={};a.forEach(function(a){var c=a.i3sTexId;b[c]={i3sTexId:c,data:a.data,encoding:a.encoding,
desiredLOD:a.desiredLOD,createdTextureForDomImage:function(){m.texIdToPromises[c]&&delete m.texIdToPromises[c]}}});return b}):null;return l.all([k,d,A])}).then(function(b){var d=b[0],e=b[1];b=b[2];m.handleCancelled();void 0!==m.debugVis&&m.debugVis.show(c,m.indexSR,"green");var f=null;b&&(f={attributeData:b,loadedAttributes:m.requiredAttributes});return m.callbackWrapped(c,e,f,p,d,a,k)}).catch(function(b){m.handleCancelled();m.logger.error("Failed to load node '"+c.id+"' bundle "+a+": "+b);return m.callbackWrapped(c,
null,null,p,null,a,k)})});return l.all(e)}).catch(function(a){if(!m.cancelled)return m.logger.error("Failed to shared data of node '"+c.id+"': "+a),a=d.map(function(a){return m.callbackWrapped(c,null,null,p,null,a,k)}),l.all(a)}).then(function(){e.done()})};b.prototype.callbackWrapped=function(a,b,c,d,f,g,h){var k=this;return this.waitForAnimationFrame().then(function(){return new l(function(l,m){var q=new e.Promise,n=k.bundleLoadedCallback;n(a,b,c,d,q,f,g,h);q.then(l,m)})})};b.addAbsoluteHrefTexture=
function(a,b){var c=a.textureDefinitions;if(void 0!==c)for(var d in c)if(c.hasOwnProperty(d))for(var e=c[d],f=0;f<e.images.length;f++){var h=e.images[f];Array.isArray(e.encoding)?h.hrefConcat=h.href.map(function(a){return g.makeAbsolute(a,b)}):h.hrefConcat=g.makeAbsolute(h.href,b)}};b.fixTextureEncodings=function(a){a=a.textureDefinitions;if(null!=a)for(var b in a){var c=a[b];if(Array.isArray(c.encoding))for(var d=0;d<c.encoding.length;d++){var e=c.encoding[d];"data:"===e.substring(0,5)&&(c.encoding[d]=
e.substring(5))}else e=c.encoding,"data:"===e.substring(0,5)&&(c.encoding=e.substring(5))}};b.prototype.loadReferencedShared=function(a,c){var d=this;if(null==a||null==a.materialDefinitions)return l.resolve({});var e=Object.keys(a.materialDefinitions).filter(function(b){return a.materialDefinitions[b]&&null!=a.materialDefinitions[b].href}).map(function(b){return g.makeAbsolute(a.materialDefinitions[b].href,c)+"/"});return l.all(e.map(function(a){return d.loadJSON(a).then(function(b){return[a,b]})})).then(function(a){for(var c=
{},d=0;d<a.length;d++){var e=a[d],f=e[0],e=e[1];b.fixTextureEncodings(e);b.addAbsoluteHrefTexture(e,f);c[f]=e}return c})};b.prototype.loadTexture=function(a,b,d,e,f,g){var h=this,k=-1<g?d.encoding[g]:d.encoding;d=k===c.DDS_ENCODING_STRING;var q=this.imageIsPartOfTextureBundle(e);m(!(d&&q),"DDS in multi texture bundles not supported at the moment");return d?this.loadBinary(a).then(function(a){return h.cancelled?l.reject():{i3sTexId:b,data:a,encoding:k,desiredLOD:f}}):q?this.loadBinary(a).then(function(c){var d;
try{var q=void 0,n;-1<g?(m(Array.isArray(e.byteOffset)&&Array.isArray(e.length),"texture encoding is array, but image byteOffset/length isn't"),q=e.byteOffset[g],n=e.length[g]):(q=e.byteOffset,n=e.length);var p=new Uint8Array(c,q,n),r=new Blob([p],{type:k});d=window.URL.createObjectURL(r)}catch(u){d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIElEQVQ4T2P8zyD6n4ECwDhqAMNoGDCMhgEwDw2DdAAAdzkhQdS8dl8AAAAASUVORK5CYII\x3d",h.logger.error("error loading texture "+a+": "+u)}var H=
new Image;c=new l(function(a,c){var e=function(){window.URL.revokeObjectURL(d);H.onerror=void 0;H.onload=void 0};H.onerror=function(a){e();c(a)};H.onload=function(){e();h.cancelled?c():a({i3sTexId:b,data:H,encoding:k,desiredLOD:f})}});H.src=d;return c}):this.loadImage(a).then(function(a){return h.cancelled?l.reject():{i3sTexId:b,data:a,encoding:k,desiredLOD:f}})};b.getAllEngineMBS=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].engineMBS);return b};b.prototype.loadTextures=function(a,d,e,
f){for(var g=[],h=0;h<a.length;h++)for(var k=a[h].geometries,q=b.getAllEngineMBS(a[h].features),n=0;n<k.length;++n)for(var p=k[n],I=p.params.components.length,A=0;A<I;A++){var z=p.params.components[A],E=z.materialID,z=z.textureID||"none";if(!(e[E]&&null!=e[E][z])&&null==f[z]&&"none"!==z)if(null!=this.texIdToPromises[z])g.push(this.texIdToPromises[z]);else{(null==d.textureDefinitions||null==d.textureDefinitions[z])&&this.logger.warn("textureDefinitions missing in shared resource. i3sTexId: "+z);E=
d.textureDefinitions[z];m(void 0!==E,"geometry wants unknown texture "+z);var C=this.calcDesiredTextureLOD(q,E.images);if(0!==E.images.length){var J=E.images[C],F=c.getAppropriateTextureEncoding(E.encoding,this.useCompressedTextures()),E=this.loadTexture(-1<F?J.hrefConcat[F]:J.hrefConcat,z,E,J,C,F);g.push(E);this.texIdToPromises[z]=E}}}return l.all(g)};b.getIdFromJsonPointer=function(a){a=a.split("/");return a[a.length-1]};b.buildNodeFeatures=function(a,b,c){null==a.features&&(a.features=[]);for(var d in c.featureData)a.features.push({id:c.featureData[d].id,
mbs:a.mbs,block:b})};b.prototype.collectGeometries=function(a,c,d,e){var f=[],g=!1,l=0,k=a.features.length-1;null==a.featureData[c].featureRange?g=!0:(l=a.featureData[c].featureRange[0],k=a.featureData[c].featureRange[1]);for(;l<=k;++l){var n=a.features[l];if(!n.engineMBS){var p=q.create();h.mbsToMbs(n.mbs,this.indexSR,p,this.renderCoordsHelper.spatialReference);p[3]=n.mbs[3];n.engineMBS=p}if(!(g&&n.block!==c)){for(var I=d.featureData,p=void 0,A=0;A<I.length;A++)if(I[A].id===n.id){p=I[A];break}m(null!=
p,"I3S: unable to find feature data in specified block in node.id "+a.id+" feature.id "+n.id);var I=p.geometries,A=[],z=[];if(null!=I)for(var E=0;E<I.length;E++){var C=p.geometries[E];if("GeometryReference"===C.type){for(var J=b.getIdFromJsonPointer(C.params.$ref),F=void 0,G=0;G<d.geometryData.length;G++){var K=d.geometryData[G];if(K.id+""===J){F=K;break}}m(null!=F,"I3S: Unable to find referenced geometry");null==F.params.material&&(this.logger.warn("material definition is missing in featureData, node: "+
a.id),G=Object.keys(e.materialDefinitions)[0],F.params.material="/materialDefinitions/"+G);null==F.params.components&&(F.params.components=null!=F.params.texture?[{material:F.params.material,materialID:b.getIdFromJsonPointer(F.params.material),texture:F.params.texture,textureID:b.getIdFromJsonPointer(F.params.texture),id:1}]:[{material:F.params.material,materialID:b.getIdFromJsonPointer(F.params.material),id:1}],null!=F.params.faces&&null!=F.params.faces.position&&(F.params.faces.position.componentIndices=
[0]));K=void 0;K=null;for(G=0;G<f.length;G++)if(1===f[G].geometries.length&&f[G].geometries[0].id+""===J){K=f[G];break}null===K&&(K={features:[],featureDataPositions:[],faceRanges:[],geometries:[F]},f.push(K));K.features.push(n);K.featureDataPositions.push(p.position);K.faceRanges.push(C.params.faceRange)}else A.push(C),null!=C.params.faceRange&&z.push(C.params.faceRange)}else null!=p.position&&A.push({id:n.id,type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0,0]}}});0===z.length&&
(z=null);0<A.length&&f.push({features:[n],featureDataPositions:[p.position],geometries:A,faceRanges:z})}}return f};b.prototype.idHash=function(a){var b=0,c=a.length;if(0===c)return b;for(var d=0;d<c;d++)var e=a.charCodeAt(d),b=(b<<5)-b+e,b=b|0;return b};b.prototype.loadFeatureData=function(a,c,d){if(this.bypassFeatureData&&this.defaultGeometrySchema){a=this.idHash(a.id);var e=c=void 0;null!=d.materialDefinitions&&(c=Object.keys(d.materialDefinitions)[0]);null!=d.textureDefinitions&&(e=Object.keys(d.textureDefinitions)[0]);
d=b.buildDefaultFeatureData(a,c,e,null);return l.resolve(d)}d=g.makeAbsolute(a.featureData[c].href,a.baseUrl);a.featureData[c].hrefConcat=d;return this.loadJSON(d)};b.buildDefaultFeatureData=function(a,b,c,d){return{featureData:[{id:a,position:[0,0,0],pivotOffset:[0,0,0],mbb:d,layer:"Default",geometries:[{id:1,type:"GeometryReference",params:{$ref:"/geometryData/0",faceRange:[0,0]}}]}],geometryData:[{id:0,type:"ArrayBufferView",params:{type:"triangles",material:"/materialDefinitions/"+b,texture:null!=
c?"/textureDefinitions/"+c:void 0}}]}};b.prototype.handleCancelled=function(){if(this.cancelled)throw p;};return b}()})},"esri/views/3d/layers/i3s/I3SUtil":function(){define("require exports ../../lib/glMatrix ../../support/earthUtils ../../support/projectionUtils ../../../../core/requireUtils ../../../../core/promiseUtils ../../../../core/Error ../../../../core/urlUtils ../../../../geometry/support/webMercatorUtils dojo/_base/lang dojo/promise/all ../../../../request ../../../../geometry/SpatialReference ../../webgl-engine/Stage ../../webgl-engine/materials/Material ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Layer ../../webgl-engine/lib/Util ./I3SBinaryReader".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y){function B(a){return a&&parseInt(a.substring(a.lastIndexOf("/")+1,a.length),10)}function H(a){var b=new p(B(a.store.indexCRS||a.store.geographicCRS));return b.equals(a.spatialReference)?a.spatialReference:b}function D(a){var b=new p(B(a.store.vertexCRS||a.store.projectedCRS));return b.equals(a.spatialReference)?a.spatialReference:b}function I(a,b,c){if(!l.canProject(a,b))throw new h("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",
{});if("local"===c&&a.isGeographic)throw new h("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",{});}function A(a,b,d,e,f,g){if(null!=d){var h=N;c.mbsToMbs(d.mbs,e,h,b);if(0!==z(a,h)){g.push(d);for(var h=null!=d.children?d.children.length:0,l=0;l<h;l++)A(a,b,f[d.children[l].id],e,f,g)}}}function z(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=0;if(c<a[0])var h=a[0]-c,g=g+h*h;d<a[1]&&(h=a[1]-d,g+=h*h);e<a[2]&&(h=a[2]-e,g+=h*h);c>a[3]&&(h=c-a[3],g+=h*h);
d>a[4]&&(h=d-a[4],g+=h*h);e>a[5]&&(h=e-a[5],g+=h*h);if(g>f*f)return 0;if(0<g)return 1;g=Infinity;c-a[0]<g&&(g=c-a[0]);d-a[1]<g&&(g=d-a[1]);e-a[2]<g&&(g=e-a[2]);a[3]-c<g&&(g=a[3]-c);a[4]-d<g&&(g=a[4]-d);a[5]-e<g&&(g=a[5]-e);return g>f?2:1}function E(a,b,c){void 0===c&&(c=["*"]);return a?f.when(n,["../../../../tasks/support/Query","../../../../tasks/QueryTask"]).then(function(d){var e=d[1];d=new d[0]({objectIds:[b],outFields:c});return(new e(a.parsedUrl.path)).execute(d)}).then(function(a){return a&&
a.features&&0<a.features.length?a.features[0].attributes:e.reject(Error("Feature not found in companion feature layer."))}):e.reject(Error("Companion feature layer not present."))}function C(a,b,c,f,g){void 0===f&&(f=["*"]);var h=f.some(function(a){return"*"===a});return m(b.attributeData.map(function(c,l){if(!h&&!f.some(function(b){return a[l].name===b}))return e.resolve(null);var k=d.makeAbsolute(c.href,b.baseUrl);return q(k,{query:{token:g},responseType:"array-buffer"}).then(function(b){return y.readBinaryAttribute(a[l],
b.data)}).otherwise(function(){return null})})).then(function(b){for(var d={},e=0;e<b.length;e++)null!=b[e]&&(d[a[e].name]=b[e][c]);return d})}var J=a.vec4d,F=a.vec3d,G=a.mat4d,K=x.assert,N=J.create();k.DDS_ENCODING_STRING="image/vnd-ms.dds";k.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS=["image/jpeg","image/png"];k.addTrailingSlash=function(a){"/"!==a[a.length-1]&&(a+="/");return a};k.extractWkid=B;k.getIndexCrs=H;k.getVertexCrs=D;k.checkSpatialReferences=function(a,b,c){var d=H(a);a=D(a);I(d,b,c);I(a,
b,c)};k.checkSpatialReference=I;k.processNormals=function(a,b,d){switch(b){case "none":b=a.normals;d=a.positions;var e=a.normalInd,f=a.positionInd;K(a.normalInd.length===a.positionInd.length);a=F.create();for(var g=F.create(),h=0;h<f.length;h+=3){var l=3*f[h],k=d[l],m=d[l+1],q=d[l+2],l=3*f[h+1];a[0]=d[l]-k;a[1]=d[l+1]-m;a[2]=d[l+2]-q;l=3*f[h+2];g[0]=d[l]-k;g[1]=d[l+1]-m;g[2]=d[l+2]-q;F.cross(a,g,a);F.normalize(a);for(l=0;3>l;l++)k=3*e[h+l],b[k]=a[0],b[k+1]=a[1],b[k+2]=a[2]}break;case "east-north-up":break;
case "earth-centered":d(a.normals,c.SphericalRenderSpatialReference);break;case "vertex-reference-frame":break;default:throw Error("Received unexpected normalReferenceFrame: "+b);}};k.getAppropriateTextureEncoding=function(a,b){if(Array.isArray(a)){if(b){var c=a.indexOf(k.DDS_ENCODING_STRING);if(-1<c)return c}for(c=0;c<a.length;c++)if(-1<k.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS.indexOf(a[c]))return c;throw Error("Could not find appropriate texture encoding (among "+a.toString()+")");}return-1};
k.findIntersectingNodes=A;k.intersectBoundingBoxWithMbs=z;k.makeNodeDebugVisualizer=function(a,d,e){function f(a){return{ambient:a,diffuse:[0,0,0],transparent:!0,opacity:0.5,blendModeOneOne:!1}}var g=new s(u.createCylinderGeometry(1,1,64,[0,0,1],[0,0,0],!1),"debugCylinder"),h=new s(u.createSphereGeometry(1),"debugSphere"),l={red:new t(f([0.8,0,0]),"debugMaterialRed"),grey:new t(f([0.4,0.4,0.4]),"debugMaterialGrey"),brown:new t(f([0.2,0.1,0]),"debugMaterialBrown"),green:new t(f([0,0.8,0]),"debugMaterialGreen"),
blue:new t(f([0,0,0.8]),"debugMaterialBlue"),yellow:new t(f([0.8,0.8,0]),"debugMaterialYellow"),magenta:new t(f([0.8,0,0.8]),"debugMaterialMagenta")},k;for(k in l)a.add(r.ModelContentType.MATERIAL,l[k]);a.add(r.ModelContentType.GEOMETRY,g);e=new w(e+"_debug",{interaction:"IGNORED"},e+"_debug");a.add(r.ModelContentType.LAYER,e);a.addToViewContent([e.getId()]);var m=F.create(),q=G.create();return{engineLayer:e,added:{},show:function(a,e,f){var h=a.computedMbs;h||(h=J.create(),c.mbsToMbs(a.mbs,e,h,d.spatialReference));
var k="node"+a.id+"dbg";F.set(h,m);var n=h[3];if(n>b.earthRadius/10&&d.spatialReference===c.SphericalRenderSpatialReference){this.showWS(m,Math.max(0.01*n,1E4),f,k+"_center");var h=F.length(m),p=b.earthRadius;p+n>h&&(n=(h*h+p*p-n*n)/(2*h),F.scale(m,n/h),n=Math.sqrt(p*p-n*n))}G.identity(q);G.scale(q,[n,n,0.05*n]);f=l[f];K(f);f=new v({name:k,geometries:[g],materials:[[f]],transformations:[q],castShadow:!1,idHint:k});c.computeLinearTransformation(e,a.mbs,q,d.spatialReference);null!=m&&(q[12]=m[0],q[13]=
m[1],q[14]=m[2]);f.setObjectTransformation(q);this._addToStage(f,k)},showWS:function(a,b,c,d){var e=G.identity();G.scale(e,[b,b,b]);b=l[c];K(b);e=new v({name:d,geometries:[h],materials:[[b]],transformations:[e],castShadow:!1,idHint:d});b=G.identity();G.translate(b,a);e.setObjectTransformation(b);this._addToStage(e,d)},_addToStage:function(b,c){a.add(r.ModelContentType.OBJECT,b);this.engineLayer.addObject(b);var d=this.added[c];void 0!==d&&(a.remove(r.ModelContentType.OBJECT,d.getId()),this.engineLayer.removeObject(d));
this.added[c]=b},clear:function(){for(var b in this.added){var c=this.added[b];a.remove(r.ModelContentType.OBJECT,c.getId());this.engineLayer.removeObject(c)}this.added={}},dispose:function(){this.clear();for(var b in l)a.remove(r.ModelContentType.MATERIAL,l[b].getId());a.remove(r.ModelContentType.GEOMETRY,g.getId());a.remove(r.ModelContentType.LAYER,this.engineLayer.getId())}}};k.postData=function(a,b,c){var d=new XMLHttpRequest;d.open("PUT","/put.php"+a,!0);d.setRequestHeader("Content-type",c);
d.send(b)};k.whenGraphicAttributes=function(a,b,c,d,f){d=d.filter(function(a){return!b.attributes.hasOwnProperty(a)});if(0===d.length)return e.resolve(b);var h=function(a){g.mixin(b.attributes,a);return b},l=a.companionFeatureLayer,k=a.attributeStorageInfo;return l?E(l,c,d).then(h):k&&(c=f(),null!=c)?C(k,c.node,c.index,d,a.token).then(h):e.reject()};k.queryAttributesFromFeatureLayer=E;k.queryAttributesFromCachedAttributes=C;k.binaryIndexOf=function(a,b){for(var c=0,d=a.length-1;c<d;){var e=c+(d-c>>
1);b>a[e]?c=e+1:d=e}return b===a[c]?c:~c};k.checkPointCloudLayerValid=function(a){if(null==a.store||null==a.store.defaultGeometrySchema||null==a.store.defaultGeometrySchema.geometryType||"points"!==a.store.defaultGeometrySchema.geometryType||null!=a.store.defaultGeometrySchema.topology&&"PerAttributeArray"!==a.store.defaultGeometrySchema.topology||null!=a.store.defaultGeometrySchema.encoding&&""!==a.store.defaultGeometrySchema.encoding&&"lepcc-xyz"!==a.store.defaultGeometrySchema.encoding||null==
a.store.defaultGeometrySchema.vertexAttributes||null==a.store.defaultGeometrySchema.vertexAttributes.position)throw new h("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{});};k.checkPointCloudCompatibleWithView=function(a,b){I(a.spatialReference,b.spatialReference,b.viewingMode)}})},"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("require exports dojo/_base/lang ../../../../core/Logger ../../../../core/Error ./LEPCC".split(" "),
function(n,k,a,b,c,f){function e(a,b,d){for(var e="",f=0;f<d;){var g=a[b+f];if(128>g)e+=String.fromCharCode(g),f++;else if(192<=g&&224>g){if(f+1>=d)throw new c("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var h=a[b+f+1],g=(g&31)<<6|h&63,e=e+String.fromCharCode(g),f=f+2}else if(224<=g&&240>g){if(f+2>=d)throw new c("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");var h=a[b+f+1],l=a[b+f+2],g=(g&15)<<12|(h&63)<<6|l&63,e=e+String.fromCharCode(g),
f=f+3}else if(240<=g&&248>g){if(f+3>=d)throw new c("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");h=a[b+f+1];l=a[b+f+2];g=(g&7)<<18|(h&63)<<12|(l&63)<<6|a[b+f+3]&63;e=65536<=g?e+String.fromCharCode((g-65536>>10)+55296,(g&1023)+56320):e+String.fromCharCode(g);f+=4}else throw new c("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");}return e}function h(a,b){for(var c={byteOffset:0,byteCount:0,fields:Object.create(null)},d=0,e=0;e<b.length;e++){var f=
b[e],g=f.valueType||f.type;c.fields[f.property]=(0,k.valueType2ArrayBufferReader[g])(a,d);d+=k.valueType2TypedArrayClassMap[g].BYTES_PER_ELEMENT}c.byteCount=d;return c}function d(a,b,d){var f=[],g,h=0,l;for(l=0;l<a;l+=1){g=b[l];if(0<g){if(f.push(e(d,h,g-1)),0!==d[h+g-1])throw new c("string-array-error","Invalid string array: missing null termination.");}else f.push(null);h+=g}return f}function l(a,b){return new k.valueType2TypedArrayClassMap[b.valueType](a,b.byteOffset,b.count*b.valuesPerElement)}
function g(a,b){return new Uint8Array(a,b.byteOffset,b.byteCount)}function m(b,d,e){b=null!=d.header?h(b,d.header):{byteOffset:0,byteCount:0,fields:{count:e}};e={header:b,byteOffset:b.byteCount,byteCount:0,entries:Object.create(null)};for(var f=b.byteCount,g=0;g<d.ordering.length;g++){var l=d.ordering[g],k=a.clone(d[l]);k.count=b.fields.count;if("String"===k.valueType){if(k.byteOffset=f,k.byteCount=b.fields[l+"ByteCount"],"UTF-8"!==k.encoding)throw new c("unsupported-encoding","Unsupported String encoding.",
{encoding:k.encoding});}else if(p(k.valueType)){var m=r(k.valueType),f=f+(0!==f%m?m-f%m:0);k.byteOffset=f;k.byteCount=m*k.valuesPerElement*k.count}else throw new c("unsupported-value-type","Unsupported binary valueType",{valueType:k.valueType});f+=k.byteCount;e.entries[l]=k}e.byteCount=f-e.byteOffset;return e}function q(a,b,d){b!==a&&t.error("Invalid "+d+" buffer size\n expected: "+a+", actual: "+b+")");if(b<a)throw new c("buffer-too-small","Binary buffer is too small",{expectedSize:a,actualSize:b});
}function p(a){return k.valueType2TypedArrayClassMap.hasOwnProperty(a)}function r(a){return p(a)&&k.valueType2TypedArrayClassMap[a].BYTES_PER_ELEMENT}var t=b.getLogger("esri.layers.SceneService");k.readHeader=h;k.readStringArray=d;k.createTypedView=l;k.createRawView=g;k.createAttributeDataIndex=m;k.createGeometryDataIndex=function(b,c,d){var e=h(b,c.header),f=e.byteCount,g={header:e,byteOffset:e.byteCount,byteCount:0,vertexAttributes:a.clone(c.vertexAttributes)},l=g.vertexAttributes;!d&&null!=l.region&&
delete l.region;var k=e.fields.vertexCount||e.fields.count;for(d=0;d<c.ordering.length;d++){var m=c.ordering[d];null!=l[m]&&(l[m].byteOffset=f,l[m].count=k,f+=r(l[m].valueType)*l[m].valuesPerElement*k)}l=e.fields.faceCount;if(c.faces&&l){g.faces=a.clone(c.faces);k=g.faces;for(d=0;d<c.ordering.length;d++)m=c.ordering[d],null!=k[m]&&(k[m].byteOffset=f,k[m].count=l,f+=r(k[m].valueType)*k[m].valuesPerElement*l)}e=e.fields.featureCount;if(c.featureAttributes&&c.featureAttributeOrder&&e){g.featureAttributes=
a.clone(c.featureAttributes);l=g.featureAttributes;for(d=0;d<c.featureAttributeOrder.length;d++)k=c.featureAttributeOrder[d],l[k].byteOffset=f,l[k].count=e,m=r(l[k].valueType),"UInt64"===l[k].valueType&&(m=8),f+=m*l[k].valuesPerElement*e}q(f,b.byteLength,"geometry");g.byteCount=f-g.byteOffset;return g};k.readBinaryAttribute=function(a,b,e){if("lepcc-rgb"===a.encoding)return f.decodeRGB(b);if("lepcc-intensity"===a.encoding)return f.decodeIntensity(b);if(null!=a.encoding&&""!==a.encoding)throw new c("unknown-attribute-storage-info-encoding",
"Unknown Attribute Storage Info Encoding");a["attributeByteCounts "]&&!a.attributeByteCounts&&(t.error("Warning: Trailing space in 'attributeByteCounts '."),a.attributeByteCounts=a["attributeByteCounts "]);"ObjectIds"===a.ordering[0]&&a.hasOwnProperty("objectIds")&&(t.error("Warning: Case error in objectIds"),a.ordering[0]="objectIds");e=m(b,a,e);q(e.byteOffset+e.byteCount,b.byteLength,"attribute");if(a=e.entries.attributeValues||e.entries.objectIds){if("String"===a.valueType){e=e.entries.attributeByteCounts;
var h=l(b,e);b=g(b,a);return d(e.count,h,b)}return l(b,a)}throw new c("bad-attribute-storage-info","Bad attributeStorageInfo specification.");};k.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array};k.valueType2ArrayBufferReader={Float32:function(a,b){return(new DataView(a,0)).getFloat32(b,!0)},Float64:function(a,b){return(new DataView(a,0)).getFloat64(b,!0)},UInt8:function(a,
b){return(new DataView(a,0)).getUint8(b)},Int8:function(a,b){return(new DataView(a,0)).getInt8(b)},UInt16:function(a,b){return(new DataView(a,0)).getUint16(b,!0)},Int16:function(a,b){return(new DataView(a,0)).getInt16(b,!0)},UInt32:function(a,b){return(new DataView(a,0)).getUint32(b,!0)},Int32:function(a,b){return(new DataView(a,0)).getInt32(b,!0)}};k.isValueType=p;k.getBytesPerValue=r})},"esri/views/3d/layers/i3s/LEPCC":function(){define(["require","exports","../../../../core/Error"],function(n,
k,a){function b(a,b,c){return{identifier:String.fromCharCode.apply(null,new Uint8Array(a,c+h.identifierOffset,h.identifierLength)),version:b.getUint16(c+h.versionOffset,e),checksum:b.getUint32(c+h.checksumOffset,e)}}function c(a,b,c){var e=[];b=f(a,b,e);for(var h=[],k=0;k<e.length;k++){h.length=0;b=f(a,b,h);for(var n=0;n<h.length;n++)c.push(h[n]+e[k])}return b}function f(b,c,f){var h=new DataView(b,c),k=h.getUint8(0),n=k&31,r=!!(k&32),t=(k&192)>>6,k=0;if(0===t)k=h.getUint32(1,e),c+=5;else if(1===
t)k=h.getUint16(1,e),c+=3;else if(2===t)k=h.getUint8(1),c+=2;else throw new a("lepcc-decode-error","Bad count type");if(r)throw new a("lepcc-decode-error","LUT not implemented");h=Math.ceil(k*n/8);b=new Uint8Array(b,c,h);for(var t=r=h=0,s=-1>>>32-n,u=0;u<k;u++){for(;r<n;)h|=b[t]<<r,r+=8,t+=1;f[u]=h&s;h>>>=n;r-=n;32<r+n&&(h|=b[t-1]>>8-r)}return c+t}var e=!0,h={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};k.decodeXYZ=function(d){var f=new DataView(d,0),g=0,
k=b(d,f,g),q=k.identifier,k=k.version,g=g+h.byteCount;if("LEPCC     "!==q)throw new a("lepcc-decode-error","Bad identifier");if(1<k)throw new a("lepcc-decode-error","Unknown version");var n=f.getUint32(g+0,e),r=f.getUint32(g+4,e),q=f.getFloat64(g+8,e),k=f.getFloat64(g+16,e),t=f.getFloat64(g+24,e),s=f.getFloat64(g+32,e),u=f.getFloat64(g+40,e),v=f.getFloat64(g+48,e),w=f.getFloat64(g+56,e),x=f.getFloat64(g+64,e),y=f.getFloat64(g+72,e),B=f.getUint32(g+80,e);f.getUint32(g+84,e);g+=88;if(r*Math.pow(2,32)+
n!==d.byteLength)throw new a("lepcc-decode-error","Bad size");var f=new Float64Array(3*B),n=[],r=[],B=[],H=[],g=c(d,g,n),g=c(d,g,r),g=c(d,g,B),g=c(d,g,H);if(g!==d.byteLength)throw new a("lepcc-decode-error","Bad length");for(var D=g=d=0;D<n.length;D++)for(var g=g+n[D],I=0,A=0;A<r[D];A++){var I=I+B[d],z=H[d];f[3*d]=Math.min(s,q+2*w*I);f[3*d+1]=Math.min(u,k+2*x*g);f[3*d+2]=Math.min(v,t+2*y*z);d++}return{errorX:w,errorY:x,errorZ:y,result:f}};k.decodeRGB=function(c){var f=new DataView(c,0),g=0,k=b(c,
f,g),n=k.identifier,k=k.version,g=g+h.byteCount;if("ClusterRGB"!==n)throw new a("lepcc-decode-error","Bad identifier");if(1<k)throw new a("lepcc-decode-error","Unknown version");var p=f.getUint32(g+0,e),r=f.getUint32(g+4,e),n=f.getUint32(g+8,e),k=f.getUint16(g+12,e),t=f.getUint8(g+14),s=f.getUint8(g+15),g=g+16;if(r*Math.pow(2,32)+p!==c.byteLength)throw new a("lepcc-decode-error","Bad size");if((2===t||1===t)&&0===s){if(3*k+n+g!==c.byteLength||256<k)throw new a("lepcc-decode-error","Bad count");f=
new Uint8Array(c,g,3*k);k=new Uint8Array(c,g+3*k,n);g=new Uint8Array(3*n);for(c=0;c<n;c++)p=k[c],g[3*c]=f[3*p],g[3*c+1]=f[3*p+1],g[3*c+2]=f[3*p+2];return g}if(0===t&&0===s){if(3*n+g!==c.byteLength||0!==k)throw new a("lepcc-decode-error","Bad count");return(new Uint8Array(c,g)).slice()}if(2>=t&&1===s){if(g+3!==c.byteLength||1!==k)throw new a("lepcc-decode-error","Bad count");k=f.getUint8(g);p=f.getUint8(g+1);f=f.getUint8(g+2);g=new Uint8Array(3*n);for(c=0;c<n;c++)g[3*c]=k,g[3*c+1]=p,g[3*c+2]=f;return g}throw new a("lepcc-decode-error",
"Bad method "+t+","+s);};k.decodeIntensity=function(c){var k=new DataView(c,0),g=0,m=b(c,k,g),n=m.identifier,m=m.version,g=g+h.byteCount;if("Intensity "!==n)throw new a("lepcc-decode-error","Bad identifier");if(1<m)throw new a("lepcc-decode-error","Unknown version");var p=k.getUint32(g+0,e),r=k.getUint32(g+4,e),n=k.getUint32(g+8,e),m=k.getUint16(g+12,e),t=k.getUint8(g+14);k.getUint8(g+15);g+=16;if(r*Math.pow(2,32)+p!==c.byteLength)throw new a("lepcc-decode-error","Bad size");k=new Uint16Array(n);
if(8===t){if(n+g!==c.byteLength)throw new a("lepcc-decode-error","Bad size");t=new Uint8Array(c,g,n)}else if(16===t){if(2*n+g!==c.byteLength)throw new a("lepcc-decode-error","Bad size");t=new Uint16Array(c,g,n)}else if(t=[],f(c,g,t)!==c.byteLength)throw new a("lepcc-decode-error","Bad size");for(c=0;c<n;c++)k[c]=t[c]*m;return k}})},"esri/views/3d/support/PromiseNativeOrShim":function(){define(["./PromiseShim"],function(n){return null!=window.Promise&&"function"===typeof window.Promise?window.Promise:
n})},"esri/views/3d/support/PromiseShim":function(){define(["require","exports"],function(n,k){function a(a,b,c){setTimeout(a,0,b,c)}function b(a){return null!=a&&"object"===typeof a&&"then"in a&&"function"===typeof a.then}var c;(function(a){a[a.Pending=0]="Pending";a[a.Rejected=1]="Rejected";a[a.Resolved=2]="Resolved"})(c||(c={}));return function(){function f(a){var b=this;this.init(c.Pending);a(function(a){return b.resolve(a)},function(a){return b.reject(a)})}f.prototype.then=function(a,b){if(this.state===
c.Pending){var d=f.pending(a,b);this._addToChain(d);return d}if(this.state===c.Resolved)return null!=a?f.tryResolveAsync(a,this.value):f.resolve(this.value);if(this.state===c.Rejected)return null!=b?f.tryResolveAsync(b,this.error):f.reject(this.error)};f.prototype.catch=function(a){return this.then(null,a)};f.resolve=function(a){if(a instanceof f)return a;if(b(a)){var h=Object.create(f.prototype);h.init(c.Pending);a.then(function(a){h.resolve(a)},function(a){h.reject(a)});return h}var d=Object.create(f.prototype);
d.init(c.Resolved,a);return d};f.reject=function(a){var b=Object.create(f.prototype);b.init(c.Rejected,null,a);return b};f.all=function(a){var b=a.length;if(0===b)return f.resolve([]);var c=a.map(f.resolve),k=f.pending();a=function(){0===--b&&k.resolve(c.map(f.getValue))};for(var g=function(a){k.reject(a)},m=0;m<c.length;m++)c[m].then(a,g);return k};f.prototype.init=function(a,b,c,f,g){void 0===b&&(b=null);void 0===c&&(c=null);void 0===f&&(f=null);void 0===g&&(g=null);this.state=a;this.value=b;this.error=
c;this.callback=f;this.errback=g;this.chainedPromise=this.firstPromise=null};f.pending=function(a,b){var d=Object.create(f.prototype);d.init(c.Pending,null,null,a,b);return d};f.getValue=function(a){return a.value};f.prototype._unchain=function(){this.errback=this.callback=this.chainedPromise=null};f.prototype._addToChain=function(a){a.chainedPromise=this.firstPromise;this.firstPromise=a};f.tryResolveAsync=function(b,h){var d=Object.create(f.prototype);d.init(c.Pending);a(function(){d.tryResolve(b,
h)});return d};f.prototype.tryResolve=function(a,b){try{var c=a(b);this.resolve(c)}catch(f){console.error(f.stack instanceof Error?f.stack:f),this.reject(f)}};f.prototype.resolve=function(a){var h=this;this.state===c.Pending?a instanceof f?a.state===c.Pending?(this._unchain(),a._addToChain(this)):a.state===c.Resolved?this.resolve(a.value):a.state===c.Rejected&&this.reject(a.error):b(a)?a.then(function(a){h.resolve(a)},function(a){h.reject(a)}):(this.state=c.Resolved,this.value=a,this.resolveHandlers()):
console.error("Error: Promise is already resolved")};f.prototype.reject=function(a){this.state===c.Pending?(this.state=c.Rejected,this.error=a,this.rejectHandlers()):console.error("Error: Promise is already resolved")};f.prototype.resolveHandlers=function(){this.callResolveHandlers(this.firstPromise);this.firstPromise=null};f.prototype.callResolveHandlers=function(a){null!=a&&(this.callResolveHandlers(a.chainedPromise),null!=a.callback?a.tryResolve(a.callback,this.value):a.resolve(this.value))};f.prototype.rejectHandlers=
function(){this.callRejectHandlers(this.firstPromise);this.firstPromise=null};f.prototype.callRejectHandlers=function(a){null!=a&&(this.callRejectHandlers(a.chainedPromise),null!=a.errback?a.tryResolve(a.errback,this.error):a.reject(this.error))};return f}()})},"esri/views/3d/layers/i3s/I3SIndexTraversal":function(){define(["require","exports","./GoogPriorityQueue","../../support/PromiseLightweight","../../../../core/urlUtils"],function(n,k,a,b,c){return function(){function f(a,b,c,f,g,k,n,p,r,t,
s,u){void 0===u&&(u={initDepthFirst:!0,neighborhood:!0,perLevelTraversal:!1});this.baseURL=a;this.startNodeUrl=b;this.rootId=c;this.poi=f;this.nodeIndex=g;this.streamDataSupplier=k;this.viewportQueries=n;this.processNodeIndexDocument=p;this.finishedLevelCallback=r;this.debugVis=t;this.logger=s;this.traversalOptions=u;this.queues=[];this.knownNodes=new Set;this.dataLoadingPerLevel=[];this.numIndicesLoading=this.currentLevel=0;this.cancelled=this.queueTraversalEnabled=!1}f.prototype.start=function(){var a=
this;this._nodeTraversalState={};this._nodeIsVisibleCached={};this.dataLoadingPerLevel=[];this.currentLevel=0;this.rootUrl=c.makeAbsolute(this.startNodeUrl,this.baseURL);this.traversalOptions.initDepthFirst?(this.initPromise=new b.Promise,this.getNode(this.rootUrl,this.rootId,this.initQueryCallback.bind(this),this.initQueryErrback.bind(this)),this.initPromise.then(function(){a.cancelled||(a.queueTraversalEnabled=!0)})):(this.enqueue(0,{id:this.rootId,hrefConcat:this.rootUrl},0),this.queueTraversalEnabled=
!0)};f.prototype.initQueryErrback=function(){this.initPromise.done()};f.prototype.continueTraversal=function(a){var b=this;if(this.queueTraversalEnabled){a=null==a?5:a;for(var c=0;c<this.queues.length;c++)if(!(this.traversalOptions.perLevelTraversal&&this.currentLevel!==c)){for(var f=this.queues[c];0<a--&&!f.isEmpty();)(function(a){var c=b.queues[a].dequeue();b.dataLoadingPerLevel[a]++;var d=function(){b.dataLoadingPerLevel[a]--};b.getNode(c.hrefConcat,c.id,function(c,e){null==e.parentNode?(b.nodeTraversalState(e.id),
b.enqueueConnected(c,e,a),b.processNodeIndexDocument(e,void 0).then(d,d)):b.getNode(b.concatHref(e.parentNode,c),e.parentNode.id,function(f,k){b.nodeTraversalState(e.id);b.enqueueConnected(c,e,a);b.processNodeIndexDocument(e,k).then(d,d)})},d)})(c);this.traversalOptions.perLevelTraversal&&(f.isEmpty()&&0===this.dataLoadingPerLevel[c])&&(this.finishedLevelCallback.call(null,this.currentLevel),this.currentLevel++)}}};f.prototype.isQueueTraversalEnabled=function(){return this.queueTraversalEnabled};
f.prototype.getQueueSize=function(){for(var a=0,b=0;b<this.queues.length;b++)a+=this.queues[b].getCount();return a};f.prototype.cancel=function(){this.queueTraversalEnabled=!1;for(var a=0;a<this.queues.length;a++)this.queues[a].clear();this.cancelled=!0};f.prototype.isLoading=function(){return 0<this.numIndicesLoading||0<this.getQueueSize()};f.prototype.nodeIsVisible=function(a){if(null!=this._nodeIsVisibleCached[a.id])return this._nodeIsVisibleCached[a.id];this._nodeIsVisibleCached[a.id]=this.viewportQueries.isNodeVisible(a);
return this._nodeIsVisibleCached[a.id]};f.prototype.nodeTraversalState=function(a){if(null!=this._nodeTraversalState[a])return this._nodeTraversalState[a];var b=this.nodeIndex[a];if(null==b)return null;var c=null,f=!1;if(null!=b.parentNode){c=this.nodeIndex[b.parentNode.id];if(null==c)return null;var g=this._nodeTraversalState[c.id];null!=g&&(f=g.nodeIsTooHighLOD)}var g=this.viewportQueries.hasLOD(b),k=this.viewportQueries.isTooHighLOD(b),c=this.viewportQueries.isChosenLOD(b,c,k,f);this._nodeTraversalState[b.id]=
{visited:!0,nodeHasLOD:g,nodeIsTooHighLOD:k,isChosenLOD:c};return this._nodeTraversalState[a]};f.prototype.getNode=function(a,b,c,f){var g=this;this.numIndicesLoading++;this.nodeIndex[b]?(c(a,this.nodeIndex[b]),this.numIndicesLoading--):this.streamDataSupplier.request(a,"json").then(function(a,b){g.nodeIndex[b.id]=b;b.baseUrl=a;c(a,b);g.numIndicesLoading--},function(b){null!=f&&f(b);g.loadErrorCallback(a);g.numIndicesLoading--})};f.prototype.initQueryCallback=function(a,b){if(this.cancelled)this.initPromise.done();
else if(this.nodeTraversalState(b.id),this.enqueueConnected(a,b,0),this.isLeafNode(b))this.initPromise.done();else{for(var d=1E9,f=void 0,g=0;g<b.children.length;++g){var k=b.children[g];if(this.nodeIsVisible(k)&&(!this.viewportQueries.hasLOD(b)||!this.viewportQueries.isTooHighLOD(b))){var n=this.viewportQueries.distToPOI(k,this.poi);n<d&&(d=n,f=k)}}f?(d=c.makeAbsolute(f.href,a),this.getNode(d,f.id,this.initQueryCallback.bind(this),this.initQueryErrback.bind(this))):this.initPromise.done()}};f.prototype.isLeafNode=
function(a){return null==a.children};f.prototype.concatHref=function(a,b){return c.makeAbsolute(a.href,b)};f.prototype.enqueue=function(b,c,d){this.traversalOptions.perLevelTraversal||(d=0);for(this.knownNodes.add(c.id);this.queues.length<=d;)this.queues.push(new a.goog.structs.PriorityQueue),this.dataLoadingPerLevel.push(0);this.queues[d].enqueue(b,c)};f.prototype.enqueueConnected=function(a,b,c){if(!this.cancelled&&null!=b){var f=this.nodeTraversalState(b.id);if(b.id!==this.rootId&&null!=b.parentNode&&
!this.knownNodes.has(b.parentNode.id)){var g={id:b.parentNode.id,hrefConcat:this.concatHref(b.parentNode,a)};this.enqueue(this.viewportQueries.distToPOI(b.parentNode,this.poi),g,c-1)}else b.id===this.rootId&&(!this.knownNodes.has(b.id)&&this.nodeIsVisible(b))&&this.enqueue(this.viewportQueries.distToPOI(b,this.poi),{id:b.id,hrefConcat:a},c);if(b.children)for(var k=0,n=b.children;k<n.length;k++){var p=n[k],g=this.nodeIsVisible(p);if(!this.knownNodes.has(p.id)&&(!f.nodeHasLOD||!f.nodeIsTooHighLOD)&&
g)g={id:p.id,hrefConcat:this.concatHref(p,a)},this.enqueue(this.viewportQueries.distToPOI(p,this.poi),g,c+1)}if(this.traversalOptions.neighborhood&&b.neighbors){f=0;for(b=b.neighbors;f<b.length;f++)k=b[f],g=this.nodeIsVisible(k),!this.knownNodes.has(k.id)&&g&&(g={id:k.id,hrefConcat:this.concatHref(k,a)},this.enqueue(this.viewportQueries.distToPOI(k,this.poi),g,c))}}};f.prototype.loadErrorCallback=function(a){this.logger.warn("Error loading node: "+a)};return f}()})},"esri/views/3d/layers/i3s/GoogPriorityQueue":function(){define([],
function(){var n={};(function(){function k(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function a(a,b){var c=a.split("."),e=d;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?e=e[f]?e[f]:e[f]={}:e[f]=b}function b(a,b){this.d=a;this.b=b}function c(a){if("array"!=k(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function f(a){this.a=[];if(a)a:{var c,d;if(a instanceof f){c=a.a;d=[];
for(var h=c.length,k=0;k<h;k++)d.push(c[k].getKey());c=d;d=a.a;for(var h=[],k=d.length,n=0;n<k;n++)h.push(d[n].b);d=h;if(0>=a.a.length){a=this.a;for(h=0;h<c.length;h++)a.push(new b(c[h],d[h]));break a}}else{c=[];h=0;for(k in a)c[h++]=k;h=[];k=0;for(d in a)h[k++]=a[d];d=h}for(h=0;h<c.length;h++)e(this,c[h],d[h])}}function e(a,c,d){var e=a.a;e.push(new b(c,d));c=e.length-1;a=a.a;for(d=a[c];0<c;)if(e=c-1>>1,a[e].getKey()>d.getKey())a[c]=a[e],c=e;else break;a[c]=d}function h(){f.call(this)}var d=this;
b.prototype.getKey=function(){return this.d};b.prototype.c=function(){return new b(this.d,this.b)};f.prototype.remove=function(){var a=this.a,b=a.length,d=a[0];if(!(0>=b)){if(1==b)c(a);else{a[0]=a.pop();for(var a=0,b=this.a,e=b.length,f=b[a];a<e>>1;){var h=2*a+1,k=2*a+2,h=k<e&&b[k].getKey()<b[h].getKey()?k:h;if(b[h].getKey()>f.getKey())break;b[a]=b[h];a=h}b[a]=f}return d.b}};f.prototype.c=function(){return new f(this)};f.prototype.g=function(){return this.a.length};f.prototype.h=function(){return 0==
this.a.length};f.prototype.clear=function(){c(this.a)};(function(){function a(){}var b=f;a.prototype=b.prototype;h.i=b.prototype;h.prototype=new a})();h.prototype.f=function(a,b){e(this,a,b)};h.prototype.e=function(){return this.remove()};a("goog.structs.PriorityQueue",h);a("goog.structs.PriorityQueue.prototype.enqueue",h.prototype.f);a("goog.structs.PriorityQueue.prototype.dequeue",h.prototype.e);a("goog.structs.PriorityQueue.prototype.isEmpty",h.prototype.h);a("goog.structs.PriorityQueue.prototype.clear",
h.prototype.clear);a("goog.structs.PriorityQueue.prototype.clone",h.prototype.c);a("goog.structs.PriorityQueue.prototype.getCount",h.prototype.g)}).call(n);return n})},"esri/views/3d/layers/i3s/I3SLodHandling":function(){define(["require","exports"],function(n,k){return function(){function a(a,c){this.layerViewRequiredFunctions=a;this.layerViewOptionalFunctions=c;this._lodSwapNodeIndex={};this._lodSwapFeatureLookup={};this._lodSwapRootFeatureLookup={}}a.prototype.startNodeLoading=function(a,c,f,e,
h,d){this._lodGlobalDirty=!1;this._lodMode=f;this._lodSwapNodeIndex={};this._lodSwapFeatureLookup={};this._lodSwapRootFeatureLookup={};this._nodeIndex=e;this._rootId=d;this._nodeTraversalState=c;this._nodeIsVisible=a;if("swap"===this._lodMode){for(var k in h)a=h[k],this._nodeTraversalState(a.id).nodeHasLOD&&!this._nodeTraversalState(a.id).isChosenLOD&&(this._lodSwapNodeIndex[k]=a);this._lodSwapBuildUnmatchingFeatureLookups()}};a.prototype.cancelNodeLoading=function(){this._lodSwapNodeIndex={}};a.prototype.shouldLoadNode=
function(a,c){var f=this._nodeTraversalState(a.id),e=f.nodeHasLOD,f=f.isChosenLOD;return"perLevel"!==this._lodMode?f||!e:f||!e?!0:this.layerViewOptionalFunctions.traversalOptions.allowPartialOverlaps?this._someSubtreesIncomplete(a):this._allSubtreesIncomplete(a)};a.prototype.shouldSetPolygonOffset=function(a){return"perLevel"===this._lodMode?!this._nodeTraversalState(a.id).isChosenLOD:!1};a.prototype._allSubtreesIncomplete=function(a){if(this.layerViewRequiredFunctions.areAllBundlesLoaded(a))return!1;
var c=!0;if(null!=a.children)for(var f=0;f<a.children.length;++f){var e=a.children[f];this._nodeIsVisible(e)&&(e=this._nodeIndex[e.id],c=c&&(null==e||this._allSubtreesIncomplete(e)))}return c};a.prototype._someSubtreesIncomplete=function(a){if(this.layerViewRequiredFunctions.areAllBundlesLoaded(a))return!1;var c=!1;if(null!=a.children)for(var f=0;f<a.children.length;++f){var e=a.children[f];this._nodeIsVisible(e)&&(e=this._nodeIndex[e.id],c=c||null==e||this._allSubtreesIncomplete(e))}return c};a.prototype.setLodGlobalDirty=
function(){this._lodGlobalDirty=!0};a.prototype.finishedLevel=function(a){"perLevel"===this._lodMode&&this._deleteUpToLevelRecurse(a-1,0,this._nodeIndex[this._rootId])};a.prototype._deleteUpToLevelRecurse=function(a,c,f){if(null!=f&&!(c>a)&&(this._nodeTraversalState(f.id).isChosenLOD||this.layerViewRequiredFunctions.removeNodeData(f),null!=f.children))for(var e=0;e<f.children.length;++e)this._deleteUpToLevelRecurse(a,c+1,this._nodeIndex[f.children[e].id])};a.prototype.lodSwapBundleLoaded=function(a,
c,f){if(null!=f)if(null!=f.swapPairs&&0<Object.keys(f.swapPairs).length){if(null!=c){a=f.swapPairs;f={};for(var e=0;e<c.length;e++)for(var h=c[e].features,d=0;d<h.length;d++)f[h[d].id]=!0;for(var k in a){c=a[k];e=[];h=c.features;for(d=0;d<h.length;d++)null!=f[h[d]]&&e.push(h[d]);this.layerViewRequiredFunctions.removeFeatures(c.node,c.features)}}}else{for(e in f.nodesHigherInTree)this.layerViewRequiredFunctions.removeNodeData(f.nodesHigherInTree[e]);for(e in f.nodesDeeperInTree)this.layerViewRequiredFunctions.removeNodeData(f.nodesDeeperInTree[e])}this._lodGlobalDirty=
!0};a.prototype.lodGlobalHandling=function(){if("global"===this._lodMode&&(!0===this._lodGlobalDirty||this.layerViewRequiredFunctions.isOverMemory())){var a=this._rootId;null!=a&&(this._lodGlobalHandlingRecursion({id:a,mbs:null},this._nodeIndex,!1,!1,0),this._lodGlobalHandlingRecursionRemoveIntermediate(a,this._nodeIndex,!1,0),this._lodGlobalDirty=!1)}};a.prototype.lodSwapBuildInfoForNode=function(a){if(!this._nodeTraversalState(a.id).nodeHasLOD)return null;if("swap"===this._lodMode){var c={},f={},
e=!1,h=!1,d=a.id+"",k;for(k in this._lodSwapNodeIndex){var g=this._lodSwapNodeIndex[k];null!=this.layerViewRequiredFunctions.getAddedFeatures(g.id)&&(e=null===a.parentNode||0===(g.id+"").indexOf(d),h=null==g.parentNode||0===d.indexOf(g.id+""),!0===h&&(f[g.id]=g),!0===e&&(c[g.id]=g))}return{nodesHigherInTree:f,nodesDeeperInTree:c}}if("perLevel"===this._lodMode&&this._nodeTraversalState(a.id).isChosenLOD)return c={},this._getNodesRecurse(a,c),{nodesHigherInTree:null,nodesDeeperInTree:c}};a.prototype._getNodesRecurse=
function(a,c){if(null!=a.children)for(var f=0;f<a.children.length;++f){var e=a.children[f],h=this._nodeIndex[e.id];null!=h&&(c[e.id]=h,this._getNodesRecurse(h,c))}};a.prototype._lodSwapBuildUnmatchingFeatureLookups=function(){this._lodSwapFeatureLookup={};this._lodSwapRootFeatureLookup={};for(var a in this._lodSwapNodeIndex){var c=this._lodSwapNodeIndex[a],f=this.layerViewRequiredFunctions.getAddedFeatures(c.id);if(null!=f)for(var e=0;e<f.length;e++){var h=f[e];this._lodSwapFeatureLookup[h.id]=c;
null!=h.rootFeature&&(null==this._lodSwapRootFeatureLookup[h.rootFeature]&&(this._lodSwapRootFeatureLookup[h.rootFeature]=[]),this._lodSwapRootFeatureLookup[h.rootFeature].push({node:c,featureId:h.id}))}}};a.prototype._validateLodTreeVisibilities=function(){if(null!=this.layerViewOptionalFunctions.getAllAddedFeatures){var a=this.layerViewOptionalFunctions.getAllAddedFeatures();console.debug("validating lod tree: ");var c={},f={},e=!0,h;for(h in a)for(var d=a[h],k=0;k<d.length;k++){var g=d[k];null!=
c[g.id]&&c[g.id]!==h&&(console.debug("node "+h+" !! encountered feature "+g.id+" already in node "+c[g.id]),e=!1);null!=f[g.id]&&f[g.id]!==h&&(console.debug("node "+h+" !! encountered feature "+g.id+" already as rootFeature in node "+f[g.id]),e=!1);c[g.id]=h;null!=g.rootFeature&&f[g.rootFeature]!==h&&(null!=f[g.rootFeature]&&(console.debug("node "+h+" !! encountered rootFeature "+g.rootFeature+" already in node "+f[g.rootFeature]),e=!1),null!=c[g.rootFeature]&&(console.debug("node "+h+" !! encountered rootFeature "+
g.rootFeature+" already as feature"),e=!1),f[g.rootFeature]=h)}return e}};a.prototype._lodGlobalHandlingRecursion=function(a,c,f,e,h){var d=a.id,k=c[d];if(null==k)return f=null!=a.mbs?this._nodeIsVisible(a):!1,e||!f;d=this._nodeTraversalState(d);a=this._nodeIsVisible(k);var d=d.isChosenLOD,g=this.layerViewRequiredFunctions.isBundleAlreadyAddedToStage(k,0).alreadyLoaded,m=!0;if(null!=k.children)for(var n=0;n<k.children.length;++n)this._lodGlobalHandlingRecursion(k.children[n],c,g&&d||f,d||e,h+1)||
(m=!1);c=this.layerViewRequiredFunctions.isOverMemory();if(g&&!d&&((e?f:m)||c))this.setLodGlobalDirty(),this.layerViewRequiredFunctions.removeNodeData(k),g=!1;g&&this.layerViewOptionalFunctions.setPolygonOffset&&this.layerViewOptionalFunctions.setPolygonOffset(k,!(d&&!e));f=m||g;if(d&&g||!a||e)f=!0;d&&(!g&&a)&&(f=!1);return f};a.prototype._lodGlobalHandlingRecursionRemoveIntermediate=function(a,c,f,e){var h=c[a];if(null!=h){var d=this.layerViewRequiredFunctions.isBundleAlreadyAddedToStage(h,0).alreadyLoaded;
a=this._nodeTraversalState(a).isChosenLOD;if(null!=h.children)for(var k=0;k<h.children.length;++k)this._lodGlobalHandlingRecursionRemoveIntermediate(h.children[k].id,c,d||f,e+1);f&&(!a&&d)&&(this.layerViewRequiredFunctions.removeNodeData(h),this.setLodGlobalDirty())}};return a}()})},"esri/views/3d/layers/i3s/I3SViewportQueries":function(){define("require exports ../../lib/glMatrix ./I3SUtil ../../webgl-engine/lib/Util ../../support/projectionUtils ../graphics/Graphics3DSymbolCommonCode ../../../../geometry/Point".split(" "),
function(n,k,a,b,c,f,e,h){var d=a.vec3d,l=a.vec4d;return function(){function a(b,e,f,g,k,n,u,v){void 0===v&&(v={});this.indexSR=b;this.extent=g;this.errorMetricPreference=k;this.elevationProvider=n;this.elevationInfo=u;this.options=v;this.fp=[];this._tmp1=[0,0,0];this._tmp2=[0,0,0];this._tmp3=[0,0,0];this._tmp0=[0,0,0];this.supportedMetrics=["screenSpaceRelative","maxScreenThreshold","removedFeatureDiameter","distanceRangeFromDefaultCamera"];this.maxDistance=v.maxDistance||Number.MAX_VALUE;this.screenspaceErrorBias=
v.screenspaceErrorBias||1;this.enableLoD=!1!==v.disableLod;for(g=0;8>g;++g)this.fp[g]=l.create();c.matrix2frustumPlanes(f.viewMatrix,f.projectionMatrix,this.fp);this.engineSR=e.spatialReference;this._screenSizeFactor=1/f.perPixelRatio;this._camPos=f.eye;this._center=f.center;this._camDir=d.subtract(this._center,this._camPos,[0,0,0]);d.normalize(this._camDir);this.tmpPoint=new h({x:0,y:0,z:0,spatialReference:b})}a.prototype.computedMbs=function(a){a.computedMbs||(a.computedMbs=l.create(),a.computedMbs[3]=
-1);var b=a.computedMbs;0>b[3]&&(l.set(a.mbs,b),this.elevationProvider&&1E5>a.mbs[3]&&(this.tmpPoint.x=b[0],this.tmpPoint.y=b[1],this.tmpPoint.z=b[2],b[2]=e.computeElevation(this.elevationProvider,this.tmpPoint,this.elevationInfo)),f.mbsToMbs(b,this.indexSR,b,this.engineSR));return b};a.prototype.isNodeVisible=function(a){a=this.computedMbs(a);return this.isMBSinExtent(a)&&this.isMBSVisible(a)};a.prototype.isMBSinExtent=function(a){return!this.extent?!0:0!==b.intersectBoundingBoxWithMbs(this.extent,
a)};a.prototype.isMBSVisible=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=this.fp;return e[0][0]*b+e[0][1]*c+e[0][2]*d+e[0][3]<=a&&e[1][0]*b+e[1][1]*c+e[1][2]*d+e[1][3]<=a&&e[2][0]*b+e[2][1]*c+e[2][2]*d+e[2][3]<=a&&e[3][0]*b+e[3][1]*c+e[3][2]*d+e[3][3]<=a&&e[4][0]*b+e[4][1]*c+e[4][2]*d+e[4][3]<=a&&e[5][0]*b+e[5][1]*c+e[5][2]*d+e[5][3]<=a};a.prototype.calcScreenSpaceSize=function(a,b){var c=this.computedMbs(a),e=c[3],c=d.dist2(c,this._camPos)-e*e;return 0>c?0.5*Number.MAX_VALUE:b/Math.sqrt(c)*
this._screenSizeFactor};a.prototype.calcCameraDistance=function(a){a=this.computedMbs(a);return Math.max(0,d.dist(a,this._camPos)-a[3])};a.prototype.calcAngleDependentLoD=function(a){a=this.computedMbs(a);var b=a[3];a=(Math.abs(a[0]*(a[0]-this._camPos[0])+a[1]*(a[1]-this._camPos[1])+a[2]*(a[2]-this._camPos[2]))/d.length(a)+b)/d.dist(a,this._camPos);return Math.min(1,a)};a.prototype.hasLOD=function(a){return this.enableLoD&&null!=a.lodSelection};a.prototype.hasFeatures=function(a){return null!=a.features&&
0<a.features.length||null!=a.featureData};a.prototype.getDistancePlanarMode=function(a,b,c){var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];d=d+d+e*e;if(d<=c*c)return Math.abs(a);c=Math.sqrt(d)-c;return Math.sqrt(a*a+c*c)};a.prototype.getDistanceGlobeMode=function(a,b,c){var e=d.length(b),f=d.length(a)-e;d.scale(a,d.dot(a,b)/d.length2(a),this._tmp0);if(d.dist2(b,this._tmp0)<=c*c)return Math.abs(f);b=d.scale(b,1/e,this._tmp0);var e=d.scale(b,e-c*c/2/e,this._tmp1),g=d.subtract(a,e,this._tmp2),g=d.subtract(g,
d.scale(b,d.dot(b,g),this._tmp3),this._tmp2),e=d.add(e,d.scale(g,c/d.length(g),this._tmp2),this._tmp2);c=d.dist(a,e);2E5<=f&&(a=d.subtract(a,e,this._tmp1),a=d.dot(a,b)/d.length(a),0.08>a&&(a=1E-4),c/=a);return c};a.prototype.getDistance=function(a,b,c){return this.engineSR===f.SphericalRenderSpatialReference?this.getDistanceGlobeMode(a,b,c):this.getDistancePlanarMode(a,b,c)};a.prototype._selectErrorMetric=function(a){if(this.errorMetricPreference)for(var b=0;b<this.errorMetricPreference.length;b++)for(var c=
0;c<a.length;c++){if(a[c].metricType===this.errorMetricPreference[b])return a[c]}else for(b=0;b<a.length;b++)if(0<=this.supportedMetrics.indexOf(a[b].metricType))return a[b];return null};a.prototype.isTooHighLOD=function(a){if(a.lodSelection&&0<a.lodSelection.length){if(!1===this.hasFeatures(a))return!1;var b=this._selectErrorMetric(a.lodSelection);if(null!=b)return this.evaluateLODmetric(a,b)}return!1};a.prototype.evaluateLODmetric=function(a,b){if("screenSpaceRelative"===b.metricType){var c=this.computedMbs(a),
c=2*this.getDistance(this._camPos,c,c[3])/this._screenSizeFactor;return b.maxError*this.screenspaceErrorBias<=c}return"maxScreenThreshold"===b.metricType?(c=this.calcScreenSpaceSize(a,a.mbs[3]),this.options.angleDependentLoD&&(c*=this.calcAngleDependentLoD(a)),c*this.screenspaceErrorBias<b.maxError):"removedFeatureDiameter"===b.metricType?10>this.calcScreenSpaceSize(a,b.maxError)*this.screenspaceErrorBias:"distanceRangeFromDefaultCamera"===b.metricType?this.calcCameraDistance(a)>b.maxError:!1};a.prototype.isChosenLOD=
function(a,b,c,d){return a.lodSelection&&0<a.lodSelection.length?(c||!a.children)&&!(b&&d):!0};a.prototype.distToPOI=function(a,b){var c=this.computedMbs(a);return d.dist(c,b)-c[3]};return a}()})},"esri/layers/SceneLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Layer ./FeatureLayer ./support/Field ./support/LabelClass ./mixins/SceneService ../PopupTemplate ../request ../core/lang ../core/kebabDictionary ../core/requireUtils ../core/promiseUtils ../core/Error ../core/Logger ../core/accessorSupport/PropertyOrigin ../core/accessorSupport/utils ../renderers/support/jsonUtils ../renderers/support/styleUtils ../portal/PortalItem dojo/_base/lang dojo/promise/all".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D){var I=p({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",absoluteHeight:"absolute-height"}),A=["3DObject","Point"],z=u.getLogger("esri.layers.SceneLayer"),E={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},C={"mesh-pyramids":"mesh",points:"point",
lines:"polyline",polygons:"polygon"};return function(f){function k(a,b){f.call(this);this.operationalLayerType="ArcGISSceneServiceLayer";this.type="scene";this.fields=[];this.elevationInfo=null;this.labelsVisible=!1;this.labelingInfo=null;this.legendEnabled=!0;this.renderer=null;this.cachedDrawingInfo={color:!1};this.popupEnabled=!0;this.objectIdFilter=this.objectIdField=this.popupTemplate=null;this._fieldUsageInfo={}}a(k,f);k.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?H.mixin({},
{url:a},b):a};k.prototype.getField=function(a){return this._fieldLookup(this.fields,a)};k.prototype.readElevationInfo=function(a){a=q.clone(a);a.mode=I.fromJSON(a.mode);return a};k.prototype.writeElevationInfo=function(a,b){if(a&&(a.mode||a.offset||a.featureExpression)){var c={};a.mode&&(c.mode=I.toJSON(a.mode));a.offset&&(c.offset=a.offset);a.featureExpression&&(c.featureExpression=a.featureExpression);b.layerDefinition={elevationInfo:c}}};Object.defineProperty(k.prototype,"geometryType",{get:function(){return C[this.profile]||
"mesh"},enumerable:!0,configurable:!0});k.prototype.readLabelsVisible=function(a,b){return b.showLabels};k.prototype.writeLabelsVisible=function(a,b){a&&(b.showLabels=!0)};k.prototype.readLabelingInfo=function(a,b,c){var e=this;a=b.drawingInfo.labelingInfo;if(!a)return null;var f=/\[([^\[\]]+)\]/ig,g=null!=b.fields&&Array.isArray(b.fields)?b.fields:null,h=function(a,b){var c=e._fieldLookup(g,b);return"["+(c&&c.name||b)+"]"};return a.map(function(a){var b=new d;b.read(a,c);if((a=b.labelExpression)&&
g)b.labelExpression=a.replace(f,h);return b})};k.prototype.writeLabelingInfo=function(a,b,c){a&&(b.layerDefinition={drawingInfo:{labelingInfo:a.map(function(a){return a.write({},c)})}})};k.prototype.readLegendEnabled=function(a,b){return null!=b.showLegend?b.showLegend:!0};k.prototype.writeLegendEnabled=function(a,b){a||(b.showLegend=!1)};k.prototype.readRenderer=function(a,b,c){if(a=b.drawingInfo.renderer||void 0)(a=x.read(a,b,c)||void 0)||z.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,
layer:this,context:c});return a};k.prototype.readCachedDrawingInfo=function(a,b){if(null==a||"object"!==typeof a)a={};null==a.color&&(a.color=!1);return a};k.prototype.readPopupEnabled=function(a,b){return null!=b.disablePopup?!b.disablePopup:void 0};k.prototype.writePopupEnabled=function(a,b){a||(b.disablePopup=!0)};k.prototype.readPopupTemplate=function(a,b){return b.popupInfo?g.fromJSON(b.popupInfo):void 0};k.prototype.writePopupTemplate=function(a,b){a&&(b.popupInfo=a.toJSON())};k.prototype.readObjectIdField=
function(a,b){!a&&b.fields&&b.fields.some(function(b){"esriFieldTypeOID"===b.type&&(a=b.name);return!!a});return a||void 0};k.prototype.readProfile=function(a,b){var c=b.store.profile;if(null!=c&&E[c])return E[c];z.error("Unknown or missing profile",{profile:c,layer:this});return"mesh-pyramids"};k.prototype.readNormalReferenceFrame=function(a,b){return b.store.normalReferenceFrame};k.prototype.load=function(){var a=this,b=this.loadFromPortal({supportedTypes:["Scene Service"]}).always(function(){return a._fetchService()}).then(function(){return D([a._verifyRootNodeAndUpdateExtent(),
a._setCompanionFeatureLayer()])}).then(function(){return a._applyCompanionOverrides()}).then(function(){return a._populateFieldUsageInfo()}).then(function(){return y.loadStyleRenderer(a,{origin:"service"})});this.addResolvingPromise(b);return this};k.prototype.createLayerView=function(a){var b=this;return r.when(n,null==this.profile||"mesh-pyramids"===this.profile?"../views/3d/layers/SceneLayerView3D":"../views/3d/layers/SceneLayerGraphicsView3D").then(function(c){return new c({view:a,layer:b})})};
k.prototype.read=function(a,b){this.inherited(arguments,[a,b]);a.layerDefinition&&this.inherited(arguments,[a.layerDefinition,b]);return this};k.prototype.queryExtent=function(a){return this._getCompanionLayerForQuery().then(function(b){return b.queryExtent(a)})};k.prototype.queryFeatureCount=function(a){return this._getCompanionLayerForQuery().then(function(b){return b.queryFeatureCount(a)})};k.prototype.queryFeatures=function(a){var b=this;return this._getCompanionLayerForQuery().then(function(b){return b.queryFeatures(a)}).then(function(a){if(a&&
a.features)for(var c=0,d=a.features;c<d.length;c++)d[c].layer=b;return a})};k.prototype.queryObjectIds=function(a){return this._getCompanionLayerForQuery().then(function(b){return b.queryObjectIds(a)})};k.prototype.getFieldUsageInfo=function(a){return this._fieldUsageInfo[a]||{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}};k.prototype._getCompanionLayerForQuery=function(){var a=this.companionFeatureLayer;return null!=a?t.resolve(a):t.reject(new s("scenelayer:query-not-available",
"SceneLayer queries are not available without companion feature layer"))};k.prototype._validateLayer=function(a){if(a.layerType&&-1===A.indexOf(a.layerType))throw new s("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:a.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new s("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(1<this.version.major)throw new s("layer:service-version-too-new",
"Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});a=this.normalReferenceFrame;var b=this.spatialReference,c=!1,d=!1;if(null==a)d=c=!0;else switch(b=b&&b.isGeographic,a){case "east-north-up":case "earth-centered":c=!0;d=b;break;case "vertex-reference-frame":c=!0;d=!b;break;default:c=!1}if(!c)throw new s("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!d)throw new s("scenelayer:incompatible-normal-reference-frame",
"Normal reference frame is incompatible with scene spatial reference.");};k.prototype._populateFieldUsageInfo=function(){this._fieldUsageInfo={};if(this.fields)for(var a=function(a){var c=!(!b.attributeStorageInfo||!b.attributeStorageInfo.some(function(b){return b.name===a.name})),d=!(!b.companionFeatureLayer||!b.companionFeatureLayer.fields||!b.companionFeatureLayer.fields.some(function(b){return b&&a.name===b.name}));b._fieldUsageInfo[a.name]={supportsLabelingInfo:c,supportsRenderer:c,supportsPopupTemplate:c||
d,supportsLayerQuery:d}},b=this,c=0,d=this.fields;c<d.length;c++)a(d[c])};k.prototype._applyCompanionOverrides=function(){if(this.companionFeatureLayer){if(this.companionFeatureLayer.fields)for(var a=0,b=this.companionFeatureLayer.fields;a<b.length;a++){var c=b[a];this.getField(c.name)||this.fields.push(c.clone())}a=["popupTemplate","popupEnabled"];b=w.getProperties(this);for(c=0;c<a.length;c++){var d=a[c];this._buddyIsMoreImportant(d)&&(b.setDefaultOrigin(this.companionFeatureLayer.originOf(d)),
b.set(d,this.companionFeatureLayer[d]),b.setDefaultOrigin("user"))}}};k.prototype._setCompanionFeatureLayer=function(){var a=this;return this._fetchCompanionFeatureLayer().then(function(b){a.companionFeatureLayer=b})};k.prototype._fetchCompanionFeatureLayer=function(){var a=this;return-1===["mesh-pyramids","points"].indexOf(this.profile)?t.resolve(null):(this.portalItem&&this.portalItem.isResolved()?this._fetchCompanionFeatureLayerFromRelatedItems(this.portalItem):this._fetchCompanionFeatureLayerFromUrl()).then(function(a){return a.load()}).otherwise(function(b){null==
a.attributeStorageInfo?z.warn("Companion FeatureLayer could not be loaded and no binary attributes found. Popups will not work for this SceneLayer: "+a.title):z.info("Companion FeatureLayer could not be loaded. Falling back to binary attributes for Popups on this SceneLayer: "+a.title);return null})};k.prototype._fetchCompanionFeatureLayerFromRelatedItems=function(a){var b=this;return a.fetchRelatedItems({relationshipType:"Service2Data",direction:"forward"}).then(function(a){return(a=a.filter(function(a){return"Feature Service"===
a.type})[0])?b._fetchCompanionFeatureLayerFromPortalItem(new B({id:a.id,portal:a.portal})):b._fetchCompanionFeatureLayerFromUrl()}).otherwise(function(){return b._fetchCompanionFeatureLayerFromUrl()})};k.prototype._fetchCompanionFeatureLayerFromPortalItem=function(a){var b=this;return a.load().then(function(a){return b._findMatchingCompanionSublayerUrl(a.url)}).then(function(b){return t.resolve(new e({url:b,portalItem:a}))})};k.prototype._fetchCompanionFeatureLayerFromUrl=function(){return this._findMatchingCompanionSublayerUrl().then(function(a){return t.resolve(new e({url:a}))})};
k.prototype._findMatchingCompanionSublayerUrl=function(a){var b=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);if(!b)return t.reject();null==a&&(a=b[1]+"/FeatureServer");var c=a.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1");a={query:{f:"json"},responseType:"json"};var d=b[1]+"/SceneServer",e=parseInt(b[2],10),b=m(this._addUrlToken(d),a).otherwise(function(a){return{layers:null}});a=m(this._addUrlToken(c),a);return D([a,b]).then(function(a){var b=a[0];a=a[1];a=a.data&&a.data.layers;
b=b.data&&b.data.layers;if(!Array.isArray(b))throw Error("expected layers array");if(Array.isArray(a))for(var d=0;d<Math.min(a.length,b.length);d++){if(a[d].id===e)return c+"/"+b[d].id}else if(e<b.length)return c+"/"+b[e].id;throw Error("could not find matching companion sublayer");})};k.prototype._buddyIsMoreImportant=function(a){if(!this.companionFeatureLayer)return!1;var b=v.nameToId(this.originOf(a));a=v.nameToId(this.companionFeatureLayer.originOf(a));return null!=a&&a<=v.OriginId.SERVICE?null==
b||b<v.OriginId.SERVICE:null!=a&&a<=v.OriginId.PORTAL_ITEM?null==b||b<v.OriginId.PORTAL_ITEM:!1};k.prototype._fieldLookup=function(a,b){for(var c=b.toLowerCase(),d=0;d<a.length;d++){var e=a[d];if(e.name.toLowerCase()===c)return e}return null};b([c.shared("esri.layers.SceneLayer")],k.prototype,"declaredClass",void 0);b([c.property()],k.prototype,"companionFeatureLayer",void 0);b([c.property()],k.prototype,"operationalLayerType",void 0);b([c.property({json:{readable:!1}})],k.prototype,"type",void 0);
b([c.property({type:[h]})],k.prototype,"fields",void 0);b([c.property({readOnly:!0})],k.prototype,"attributeStorageInfo",void 0);b([c.property()],k.prototype,"elevationInfo",void 0);b([c.read("elevationInfo")],k.prototype,"readElevationInfo",null);b([c.write("elevationInfo")],k.prototype,"writeElevationInfo",null);b([c.property({type:String,dependsOn:["profile"]})],k.prototype,"geometryType",null);b([c.property({type:Boolean})],k.prototype,"labelsVisible",void 0);b([c.read("labelsVisible",["showLabels"])],
k.prototype,"readLabelsVisible",null);b([c.write("labelsVisible")],k.prototype,"writeLabelsVisible",null);b([c.property()],k.prototype,"labelingInfo",void 0);b([c.read("labelingInfo",["drawingInfo.labelingInfo"])],k.prototype,"readLabelingInfo",null);b([c.write("labelingInfo")],k.prototype,"writeLabelingInfo",null);b([c.property({type:Boolean})],k.prototype,"legendEnabled",void 0);b([c.read("legendEnabled",["showLegend"])],k.prototype,"readLegendEnabled",null);b([c.write("legendEnabled")],k.prototype,
"writeLegendEnabled",null);b([c.property({json:{writeTo:"layerDefinition.drawingInfo.renderer"}})],k.prototype,"renderer",void 0);b([c.read("renderer",["drawingInfo.renderer"])],k.prototype,"readRenderer",null);b([c.property()],k.prototype,"cachedDrawingInfo",void 0);b([c.read("cachedDrawingInfo")],k.prototype,"readCachedDrawingInfo",null);b([c.property({type:Boolean})],k.prototype,"popupEnabled",void 0);b([c.read("popupEnabled",["disablePopup"])],k.prototype,"readPopupEnabled",null);b([c.write("popupEnabled")],
k.prototype,"writePopupEnabled",null);b([c.property({type:g})],k.prototype,"popupTemplate",void 0);b([c.read("popupTemplate",["popupInfo"])],k.prototype,"readPopupTemplate",null);b([c.write("popupTemplate")],k.prototype,"writePopupTemplate",null);b([c.property({type:String})],k.prototype,"objectIdField",void 0);b([c.read("objectIdField",["fields"])],k.prototype,"readObjectIdField",null);b([c.property()],k.prototype,"objectIdFilter",void 0);b([c.property({type:String})],k.prototype,"profile",void 0);
b([c.read("profile",["store.profile"])],k.prototype,"readProfile",null);b([c.property({readOnly:!0,type:String})],k.prototype,"normalReferenceFrame",void 0);b([c.read("normalReferenceFrame",["store.normalReferenceFrame"])],k.prototype,"readNormalReferenceFrame",null);return k=b([c.subclass()],k)}(c.declared(f,l))})},"esri/layers/mixins/SceneService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Layer ../../core/MultiOriginJSONSupport ./ArcGISService ./OperationalLayer ./PortalLayer ../../core/Error ../../core/urlUtils ../../core/promiseUtils ../../core/requireUtils ../../request dojo/_base/lang dojo/io-query ../../geometry/SpatialReference ../../geometry/Extent ../support/arcgisLayerUrl".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w){return function(d){function e(){d.apply(this,arguments);this.fullExtent=this.spatialReference=this.blendMode=null;this.version={major:Number.NaN,minor:Number.NaN,versionString:""};this.copyright=null;this.sublayerTitleMode="item-title";this.layerId=this.title=null}a(e,d);e.prototype.readSpatialReference=function(a,b){return this._readSpatialReference(b)};e.prototype._readSpatialReference=function(a){if(null!=a.spatialReference)return u.fromJSON(a.spatialReference);
a=a.store;a=(a=a.indexCRS||a.geographicCRS)&&parseInt(a.substring(a.lastIndexOf("/")+1,a.length),10);return null!=a?new u(a):null};e.prototype.readFullExtent=function(a,b){var c=b.store,d=this._readSpatialReference(b);return null==d||null==c||null==c.extent?null:new v({xmin:c.extent[0],ymin:c.extent[1],xmax:c.extent[2],ymax:c.extent[3],spatialReference:d})};e.prototype.readVersion=function(a,b){var c=b.store,d=null!=c.version?c.version.toString():"",c={major:Number.NaN,minor:Number.NaN,versionString:d},
d=d.split(".");2<=d.length&&(c.major=parseInt(d[0],10),c.minor=parseInt(d[1],10));return c};e.prototype.readCopyright=function(a,b){return b.copyrightText};e.prototype.readTitlePortalItem=function(a,b){return"item-title"!==this.sublayerTitleMode?void 0:a};e.prototype.readTitleService=function(a,b){var c=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return w.titleFromUrlAndName(this.url,b.name);var d=b.name||w.parse(this.url).title;"item-title-and-service-name"===
this.sublayerTitleMode&&c&&(d=c+" - "+d);return w.cleanTitle(d)};e.prototype.readLayerId=function(a,b){return b.id};Object.defineProperty(e.prototype,"url",{set:function(a){var b=m.urlToObject(a),c=w.parse(b.path);c&&null!=c.sublayer&&(this.layerId=c.sublayer,b=s.objectToQuery(b.query),a=c.url.path,b&&(a=a+"?"+b));for(;"/"===a[a.length-1];)a=a.slice(0,-1);this._set("url",a)},enumerable:!0,configurable:!0});e.prototype.writeUrl=function(a,b){a&&m.isProtocolRelative(a)&&(a="https:"+a);var c=m.urlToObject(a);
null!=this.layerId&&c?(b.url=c.path+"/layers/"+this.layerId,c.query&&Object.keys(c.query)&&(b.url+="?"+s.objectToQuery(c.query))):a&&(b.url=a)};Object.defineProperty(e.prototype,"parsedUrl",{get:function(){var a=this._get("url");if(!a)return null;a=m.urlToObject(a);null!=this.layerId&&w.match.test(a.path)&&(a.path=a.path+"/layers/"+this.layerId);return a},enumerable:!0,configurable:!0});e.prototype._addUrlToken=function(a){var b=t.mixin({},this.parsedUrl.query,{token:this.token}),b=s.objectToQuery(b);
return a+(b?"?"+b:"")};e.prototype.readRootNode=function(a,b){return b.store.rootNode};e.prototype._verifyRootNodeAndUpdateExtent=function(){var a=this;return this._fetchRootNode().then(function(b){return a._updateExtentFromRootNode(b)})};e.prototype._updateExtentFromRootNode=function(a){if(!(null==this.fullExtent||this.fullExtent.hasZ)&&null!=a&&Array.isArray(a.mbs)&&4===a.mbs.length){var b=a.mbs[2];a=a.mbs[3];this.fullExtent.zmin=b-a;this.fullExtent.zmax=b+a}};e.prototype._fetchRootNode=function(){if(!this.rootNode)return q.resolve();
var a=m.join(this.parsedUrl.path,this.rootNode);return r(this._addUrlToken(a),{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}).otherwise(function(b){throw new g("sceneservice:root-node-missing","Root node missing.",{error:b,url:a});})};e.prototype._fetchService=function(){var a=this;return(null==this.layerId&&/SceneServer\/*$/i.test(this.url)?this._fetchFirstLayerId().then(function(b){null!=b&&(a.layerId=b)}):q.resolve()).then(function(){return a._fetchServiceLayer()})};e.prototype._fetchFirstLayerId=
function(){return r(this._addUrlToken(this.url),{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){if(a.data&&Array.isArray(a.data.layers)&&0<a.data.layers.length)return a.data.layers[0].id})};e.prototype._fetchServiceLayer=function(){var a=this;return r(this._addUrlToken(this.parsedUrl.path),{query:{f:"json"},responseType:"json"}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));b=b.data;a.read(b,{origin:"service",url:a.parsedUrl});a._validateLayer(b)})};
e.prototype._validateLayer=function(a){};e.prototype.createGraphicsController=function(a){var b=this;a.layer=this;a.addUrlToken=function(a){return b._addUrlToken(a)};var c=p.when(n,"../graphics/controllers/I3SOnDemandController").then(function(b){return new b(a)});c.then(function(a){b.emit("graphics-controller-create",{graphicsController:a})});return c};b([c.shared({id:{json:{origins:{service:{readable:!1},portalItem:{readable:!1}}}}})],e.prototype,"properties",void 0);b([c.property({type:u})],e.prototype,
"spatialReference",void 0);b([c.read("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],e.prototype,"readSpatialReference",null);b([c.property({type:v})],e.prototype,"fullExtent",void 0);b([c.read("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],e.prototype,"readFullExtent",null);b([c.property({readOnly:!0})],e.prototype,"version",void 0);b([c.read("version",["store.version"])],e.prototype,"readVersion",null);b([c.property({type:String})],
e.prototype,"copyright",void 0);b([c.read("copyright",["copyrightText"])],e.prototype,"readCopyright",null);b([c.property({type:String})],e.prototype,"sublayerTitleMode",void 0);b([c.property({type:String})],e.prototype,"title",void 0);b([c.read("portal-item","title")],e.prototype,"readTitlePortalItem",null);b([c.read("service","title",["name"])],e.prototype,"readTitleService",null);b([c.property({type:Number})],e.prototype,"layerId",void 0);b([c.read("service","layerId",["id"])],e.prototype,"readLayerId",
null);b([c.property()],e.prototype,"url",null);b([c.write("url")],e.prototype,"writeUrl",null);b([c.property({dependsOn:["layerId"]})],e.prototype,"parsedUrl",null);b([c.property()],e.prototype,"store",void 0);b([c.property({type:String})],e.prototype,"rootNode",void 0);b([c.read("rootNode",["store.rootNode"])],e.prototype,"readRootNode",null);return e=b([c.subclass("esri.layers.mixins.SceneService")],e)}(c.declared(f,h,e,d,l))})},"esri/layers/IntegratedMeshLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Layer ./mixins/SceneService ../core/Error dojo/_base/lang".split(" "),
function(n,k,a,b,c,f,e,h,d){return function(e){function f(a,b){e.call(this);this.geometryType="mesh";this.operationalLayerType="IntegratedMeshLayer";this.type="integrated-mesh"}a(f,e);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?d.mixin({},{url:a},b):a};f.prototype.load=function(){var a=this,b=this.loadFromPortal({supportedTypes:["Scene Service"]}).always(function(){return a._fetchService()}).then(function(){return a._verifyRootNodeAndUpdateExtent()});this.addResolvingPromise(b);
return this};f.prototype.read=function(a,b){this.inherited(arguments,[a,b]);a.layerDefinition&&this.inherited(arguments,[a.layerDefinition,b]);return this};f.prototype._validateLayer=function(a){if(a.layerType&&"IntegratedMesh"!==a.layerType)throw new h("integratedmeshlayer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:a.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new h("layer:service-version-not-supported","Service version is not supported.",
{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(1<this.version.major)throw new h("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});};b([c.shared("esri.layers.IntegratedMeshLayer")],f.prototype,"declaredClass",void 0);b([c.shared({"3d":"../views/3d/layers/SceneLayerView3D"})],f.prototype,"viewModulePaths",void 0);b([c.property({type:String,readOnly:!0})],f.prototype,"geometryType",void 0);b([c.property()],
f.prototype,"operationalLayerType",void 0);b([c.property({json:{readable:!1}})],f.prototype,"type",void 0);return f=b([c.subclass()],f)}(c.declared(f,e))})},"esri/views/3d/layers/ElevationLayerView3D":function(){define(["../../../core/declare","../../../core/promiseUtils","../../../core/Error","./TiledLayerView3D"],function(n,k,a,b){return n(b,{declaredClass:"esri.views.3d.layers.ElevationLayerView3D",properties:{isTransparent:{readOnly:!0,get:function(){return!0}}},initialize:function(){var b=this.get("view.map.ground.layers");
(!b||-1===b.indexOf(this.layer))&&this.addResolvingPromise(k.reject(new a("layerview:elevation-layer-only","3D elevation layer '"+this.layer.id+"' can only be added in the map ground")))}})})},"esri/views/3d/layers/TiledLayerView3D":function(){define("dojo/request/xhr ../../../core/declare ../../../core/watchUtils ../../../core/promiseUtils ../../../core/Error ../../../layers/support/arcgisLayerUrl ../../layers/LayerView ../terrain/terrainUtils ./support/LayerViewUpdatingPercentage".split(" "),function(n,
k,a,b,c,f,e,h,d){function l(a){var b=null,c=a.search(/\/rest\/services\//i);0<c&&(b=a.substring(0,c+6));return b}return k([e,d],{declaredClass:"esri.views.3d.layers.TiledLayerView3D",properties:{formatIsTransparent:{dependsOn:["layer.tileInfo.format"],get:function(){return"jpg"!==this.get("layer.tileInfo.format")}},isTransparent:{dependsOn:["fullOpacity","formatIsTransparent"],readOnly:!0,get:function(){return 1>this.fullOpacity||this.formatIsTransparent}}},_numUpdating:0,_maxNumUpdating:0,_isUpdating:!1,
minDataLevel:0,maxDataLevel:Infinity,initialize:function(){var d=this.layer.tileInfo,e=h.checkIfTileInfoSupportedForView(d,this.layer.fullExtent,this.view.spatialReference,this.view.basemapTerrain.manifold);if(e){var f={layer:this.layer,error:e};switch(e.name){case "tilingscheme:local-gcs-not-supported":e=new c("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",f);break;case "tilingscheme:spatial-reference-mismatch":case "tilingscheme:global-unsupported-spatial-reference":e=
new c("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",f);break;default:e=new c("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",f)}this.addResolvingPromise(b.reject(e))}else e=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){if(!this.view.basemapTerrain.tilingScheme.compatibleWith(d)){var a=new c("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface");
return b.reject(a)}}.bind(this)),this.addResolvingPromise(e);this._checkServiceVersionCompatibility();var k=Infinity,l=0;d.lods.forEach(function(a){k=Math.min(a.level,k);l=Math.max(a.level,l)});l=Math.min(l,h.getKnownTiledServiceLevelCap(this.layer.url));this.minDataLevel=k;this.maxDataLevel=l},getTileUrl:function(a,b,c){return this.layer.getTileUrl(a,b,c)},_checkServiceVersionCompatibility:function(){if(!f.isHostedAgolService(this.layer.url))if(10.22>this.layer.version){var a=new c("layerview:service-version-too-old",
"Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+this.layer.version,{minVersion:10.22,detectedVersion:this.layer.version});this.addResolvingPromise(b.reject(a))}else if(10.22===this.layer.version){var a=l(this.layer.url),d=new c("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied."),a=n(a+"self?f\x3djson",{headers:{"X-Requested-With":null},timeout:1E4,handleAs:"json"}).then(function(a){if(!a||
a.error)throw d;}).otherwise(function(){throw d;});this.addResolvingPromise(a)}},_evaluateUpdatingState:function(a){this._isUpdating=!!a;this.notifyChange("updating")},isUpdating:function(){return this._isUpdating}})})},"esri/views/3d/layers/support/LayerViewUpdatingPercentage":function(){define(["../../../../core/Accessor"],function(n){return n.createSubclass([],{properties:{updating:{readOnly:!0},updatingPercentageValue:{value:100,readOnly:!0},updatingPercentage:{dependsOn:["updating","updatingPercentageValue"],
readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}},constructor:function(){}})})},"esri/views/3d/layers/FeatureLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators dojo/promise/all ./graphics/Graphics3DLayerViewCore ./graphics/graphicUtils ./support/LayerViewUpdatingPercentage ../../layers/LayerView ../../../layers/FeatureLayer ../../../renderers/support/renderingInfoUtils ../../../layers/graphics/controllers/SnapshotController ../support/PromiseLightweight ../../../core/watchUtils ./support/projectExtentUtils ../../../core/Error ../../../core/promiseUtils ../../../layers/graphics/QueryEngine".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v){return function(d){function k(){d.call(this);this.controller=null;this.supportsDraping=!0;this._overlayUpdating=null;this._progressMaxNumNodes=0;this._eventHandles=[];this._controllerClientSideFiltering=!1;this.fullExtentInViewSpatialReference=this._suspendResumeExtent=null;this._isUpdating=!1}a(k,d);Object.defineProperty(k.prototype,"drawingOrder",{set:function(a){this.layerViewCore.graphicsCore.setDrawingOrder(a);this._set("drawingOrder",a)},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"hasDraped",{get:function(){return this.layerViewCore.graphicsCore.hasDraped},enumerable:!0,configurable:!0});k.prototype.initialize=function(){var a=this;this.layerViewCore=new e({owner:this,layer:this.layer,spatialIndexRequired:!0,frustumVisibilityEnabled:!0,scaleVisibilityEnabled:!0,labelingEnabled:this.layer.isInstanceOf(g),elevationAlignmentEnabled:!0,verticalScaleEnabled:!0,updateSuspendResumeExtent:function(){return a.updateSuspendResumeExtent()},
updateClippingExtent:function(b){return a.updateClippingExtent(b)}});this.addResolvingPromise(this.layerViewCore.initialize());this.drawingOrder=this.view.getDrawingOrder(this.layer.uid);this.createController();this.addResolvingPromise(this.validateMaximumFeatureCount());this.addResolvingPromise(this.validateGeometryType());var b=t.toView(this).then(function(b){a.fullExtentInViewSpatialReference=b});b&&this.addResolvingPromise(b);this._evaluateUpdatingState()};k.prototype.destroy=function(){this._eventHandles.forEach(function(a){return a.remove()});
this._eventHandles=null;this.controller&&(this.controller.destroy(),this.controller=null);this.layerViewCore&&(this.layerViewCore.destroy(),this.layerViewCore=null);this.loadedGraphics=null};k.prototype.getRenderingInfo=function(a){if((a=m.getRenderingInfo(a,{renderer:this.layer.renderer}))&&a.color){var b=a.color;b[0]/=255;b[1]/=255;b[2]/=255}return a};k.prototype.getGraphicsFromStageObject=function(a,b){var c=a.getMetadata().graphicId,d=null;this.loadedGraphics&&this.loadedGraphics.some(function(a){return a.uid===
c?(d=a,!0):!1});var e=new p.Promise;null!==d?e.done(d):e.reject();return e};k.prototype.getGraphics3DGraphics=function(){return this.layerViewCore.graphicsCore.getGraphics3DGraphics()};k.prototype.getGraphics3DGraphicsKeys=function(){return this.layerViewCore.graphicsCore.getGraphics3DGraphicsKeys()};k.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};k.prototype.queryFeatures=function(a){return this._queryEngine?this._queryEngine.queryFeatures(a):
this._rejectQuery()};k.prototype.queryObjectIds=function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery()};k.prototype.queryFeatureCount=function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};k.prototype.queryExtent=function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};k.prototype.whenGraphicBounds=function(a){return this.layerViewCore.graphicsCore.whenGraphicBounds(a)};k.prototype._rejectQuery=
function(){return u.reject(new s("FeatureLayerView3D","Not ready to execute query"))};k.prototype._notifySuspendedChange=function(){this.notifyChange("suspended")};k.prototype._notifyDrapedDataChange=function(){this.notifyChange("hasDraped");this.emit("draped-data-change")};k.prototype.canResume=function(){return this.inherited(arguments)&&this.layerViewCore&&this.layerViewCore.canResume()};k.prototype._evaluateUpdatingState=function(){if(this.layerViewCore.elevationAlignment){var a;a=0+this.layerViewCore.elevationAlignment.numNodesUpdating();
a+=this.layerViewCore.graphicsCore.numNodesUpdating();var b;b=(b=(b=(b=this.controller&&this.controller.isQueryInProgress)||this._overlayUpdating)||this.layerViewCore.graphicsCore.needsIdleUpdate())||!(this.view.basemapTerrain&&this.view.basemapTerrain.ready);var c;c=(c=0<a||b)||this.layerViewCore.spatialIndex.isUpdating();this._progressMaxNumNodes=Math.max(a,this._progressMaxNumNodes);0===a&&(this._progressMaxNumNodes=1);this._isUpdating=c;this.notifyChange("updating");this._set("updatingPercentageValue",
b?100:100*a/this._progressMaxNumNodes)}else this._isUpdating=!1,this.notifyChange("updating"),this._set("updatingPercentageValue",100)};k.prototype.isUpdating=function(){return this._isUpdating};k.prototype.createController=function(){var a=this,b=this.layer.createGraphicsController({layerView:this,options:{maxPageSize:300,extent:this.view.clippingArea}});r.whenTrueOnce(this.view,"basemapTerrain.ready",function(){f([a,b]).then(function(b){b=b[1];b instanceof q&&(a.controller=b,a._eventHandles.push(a.controller.watch("isQueryInProgress",
function(){return a._evaluateUpdatingState()})));a.loadedGraphics=b.graphics;a._queryEngine=new v({features:a.loadedGraphics,objectIdField:a.layer.objectIdField});a._evaluateUpdatingState()})})};k.prototype.updateClippingExtent=function(a){if(this.controller){if(this._controllerClientSideFiltering)return!1;this.controller.extent?(this.controller.extent=null,this._controllerClientSideFiltering=!0):this.controller.extent=a;return!0}return!1};k.prototype.updateSuspendResumeExtent=function(){return this._suspendResumeExtent=
h.enlargeExtent(this.layerViewCore.graphicsCore.computedExtent,this._suspendResumeExtent,1.2)};k.prototype.validateGeometryType=function(){var a=this.layer;switch(a.geometryType){case "multipatch":case "multipoint":return u.reject(new s("featurelayerview3d:unsupported-geometry-type","Unsupported geometry type ${geometryType}",{geometryType:a.geometryType}))}};k.prototype.validateMaximumFeatureCount=function(){return 0>k.maximumFeatureCount||!this.layer.url?u.resolve():this.layer.queryFeatureCount().then(function(a){if(a>
k.maximumFeatureCount)throw new s("featurelayerview3d:maximum-feature-count-exceeded","The maximum number of allowed features (${maximumFeatureCount}) has been exceeded (layer has ${numberOfFeatures} features)",{maximumFeatureCount:k.maximumFeatureCount,numberOfFeatures:a});})};k.prototype.getStats=function(){var a=this.layerViewCore.graphicsCore.getGraphics3DGraphics(),b="null",c=this._suspendResumeExtent;c&&(b=[c[0],c[1],c[2],c[3]].map(function(a){return a.toPrecision(4)}).join(", "));var c="null",
d=this.layerViewCore.graphicsCore.computedExtent;d&&(c=[d.xmin,d.ymin,d.xmax,d.ymax].map(function(a){return a.toPrecision(4)}).join(", "));return{numCollection:this.loadedGraphics.length,numGraphics:Object.keys(a).length,numElevationUpdating:this.layerViewCore.elevationAlignment.numNodesUpdating(),numSpatialIndexUpdating:this.layerViewCore.spatialIndex.numNodesUpdating(),numGraphicsUpdating:this.layerViewCore.graphicsCore.numNodesUpdating(),visibilityFrustum:this.layerViewCore.frustumVisibility.canResume(),
visibilityScale:this.layerViewCore.scaleVisibility.canResume(),resumeExtent:b,computedExtent:c,updating:this.updating,suspended:this.suspended}};k.maximumFeatureCount=-1;b([c.property()],k.prototype,"drawingOrder",null);b([c.property()],k.prototype,"loadedGraphics",void 0);b([c.property()],k.prototype,"hasDraped",null);b([c.property()],k.prototype,"controller",void 0);return k=b([c.subclass("esri.views.3d.layers.FeatureLayerView3D")],k)}(c.declared(l,d))})},"esri/views/3d/layers/graphics/Graphics3DLayerViewCore":function(){define("require exports ../../../../core/HandleRegistry ../../../../core/watchUtils ../../../../core/promiseUtils ./Graphics3DCore ./Graphics3DLabeling ./Graphics3DScaleVisibility ./Graphics3DFrustumVisibility ./Graphics3DElevationAlignment ./Graphics3DSpatialIndex ./Graphics3DVerticalScale".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m){return function(){function k(c){var n=this;this._handles=new a;this.layer=c.layer;this.owner=c.owner;this.updateClippingExtent=c.updateClippingExtent;this.updateSuspendResumeExtent=c.updateSuspendResumeExtent;this.elevationChanged=c.elevationChanged;this.graphicsCore=new f;c.spatialIndexRequired&&(this.spatialIndex=new g);if(c.frustumVisibilityEnabled){this.frustumVisibility=new d;var q=this.owner.view.basemapTerrain;this._handles.add([this.owner.view.on("resize",
function(){return n.frustumVisibility.viewChange()}),this.owner.view.navigation.on("currentViewChanged",function(){return n.frustumVisibility.viewChange()}),q.on("elevation-bounds-change",function(){return n.frustumVisibility.elevationBoundsChange()})]);"local"===this.owner.view.viewingMode?this.frustumVisibility.isVisibleBelowSurface=!0:this._handles.add(b.init(q,["opacity","wireframe"],function(){return n.frustumVisibility.isVisibleBelowSurface=q._renderer.isTransparent()}))}c.scaleVisibilityEnabled&&
(c.spatialIndexRequired?(this.scaleVisibility=new h,this._handles.add(this.layer.watch("minScale,maxScale,labelingInfo",function(){return n.scaleVisibility.layerMinMaxScaleChangeHandler()}))):console.warn("scaleVisibility requires a spatialIndex"));c.elevationAlignmentEnabled&&(this.elevationAlignment=new l,this._handles.add(this.layer.watch("elevationInfo",function(){return n.graphicsCore.elevationInfoChange()})));c.labelingEnabled&&(this.labeling=new e,this._handles.add(this.layer.watch("labelsVisible",
function(){return n.labeling.labelVisibilityChanged()})),this._handles.add(this.layer.watch("labelingInfo",function(){return n.labeling.updateLabelingInfo()})));c.verticalScaleEnabled&&(this.verticalScale=new m({sourceSpatialReference:this.layer.spatialReference,destSpatialReference:this.owner.view.spatialReference}))}k.prototype.initialize=function(){var a=this;return this.whenSpatialIndexLoaded().then(function(){return a.deferredInitialize()})};k.prototype.whenSpatialIndexLoaded=function(){return this.spatialIndex?
this.spatialIndex.whenLoaded():c.resolve()};k.prototype.deferredInitialize=function(){var a=this;this.spatialIndex&&this.spatialIndex.initialize(this.owner,this.layer,this.owner.view.spatialReference,this.graphicsCore);this.frustumVisibility&&this.frustumVisibility.initialize(this.owner);var b=this.owner.view.basemapTerrain;this.scaleVisibility&&this.scaleVisibility.initialize(this.owner,this.layer,this.spatialIndex,this.graphicsCore,b);this.elevationAlignment&&this.elevationAlignment.initialize(this.owner,
function(b,c,d){return a._elevationChanged(b,c,d)},this.graphicsCore,b);this.labeling&&this.labeling.initialize(this.owner,this.layer,function(b,c){return a._labelGraphicCreated(b,c)},this.graphicsCore);this.graphicsCore.initialize(this.owner,this.layer,this.elevationAlignment,this.scaleVisibility,this.spatialIndex,this.labeling,function(){a.updateSuspendResumeExtent&&a._updateSuspendResumeExtent(a.updateSuspendResumeExtent())},function(b){return a.verticalScale?a.verticalScale.adjust(b):b},b);this._handles.add([this.layer.watch("renderer",
function(b){return a.graphicsCore.rendererChange(b)}),this.owner.watch("fullOpacity",function(){return a.graphicsCore.opacityChange()})]);this._handles.add(this.layer.on("graphic-update",function(b){return a.graphicsCore.graphicUpdateHandler(b)}));this.owner.view.resourceController.registerIdleFrameWorker(this,{needsUpdate:this._needsIdleUpdate,idleFrame:this._idleUpdate});this.updateClippingExtent&&(this._handles.add(this.owner.view.watch("clippingArea",function(){return a._updateClippingExtent()})),
this._updateClippingExtent());if(this.labeling)return this.labeling.updateLabelingInfo()};k.prototype.destroy=function(){this.owner&&this.owner.view.resourceController.deregisterIdleFrameWorker(this);this._handles&&(this._handles.destroy(),this._handles=null);this.frustumVisibility&&(this.frustumVisibility.destroy(),this.frustumVisibility=null);this.scaleVisibility&&(this.scaleVisibility.destroy(),this.scaleVisibility=null);this.elevationAlignment&&(this.elevationAlignment.destroy(),this.elevationAlignment=
null);this.labeling&&(this.labeling.destroy(),this.labeling=null);this.graphicsCore&&(this.graphicsCore.destroy(),this.graphicsCore=null);this.spatialIndex&&(this.spatialIndex.destroy(),this.spatialIndex=null);this.owner=this.layer=null};k.prototype.canResume=function(){return(!this.frustumVisibility||this.frustumVisibility.canResume())&&(!this.scaleVisibility||this.scaleVisibility.canResume())};k.prototype._needsIdleUpdate=function(){return this.frustumVisibility&&this.frustumVisibility.needsIdleUpdate()||
this.scaleVisibility&&this.scaleVisibility.needsIdleUpdate()||this.elevationAlignment&&this.elevationAlignment.needsIdleUpdate()||this.graphicsCore&&this.graphicsCore.needsIdleUpdate()?!0:!1};k.prototype._idleUpdate=function(a){this.frustumVisibility&&this.frustumVisibility.idleUpdate(a);this.scaleVisibility&&this.scaleVisibility.idleUpdate(a);this.elevationAlignment&&this.elevationAlignment.idleUpdate(a);this.graphicsCore&&this.graphicsCore.idleUpdate(a)};k.prototype._updateSuspendResumeExtent=function(a){this.frustumVisibility&&
this.frustumVisibility.setExtent(a);this.scaleVisibility&&this.scaleVisibility.setExtent(a)};k.prototype._updateClippingExtent=function(){var a=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(a,this.owner.view.spatialReference)&&(this.updateClippingExtent(a)||this.graphicsCore.recreateAllGraphics())};k.prototype._elevationChanged=function(a,b,c){this.elevationChanged?this.elevationChanged(a,b,c):this.spatialIndex&&this.spatialIndex.intersects(a,b,c)};k.prototype._labelGraphicCreated=
function(a,b){this.scaleVisibility&&this.scaleVisibility.updateGraphicLabelScaleVisibility(a,b)};return k}()})},"esri/views/3d/layers/graphics/Graphics3DLabeling":function(){define("require exports dojo/promise/all ../../webgl-engine/lib/TextTextureAtlas ../../webgl-engine/lib/MaterialCollection ../../webgl-engine/materials/HUDMaterial ./Graphics3DWebStyleSymbol ../../../../layers/support/LabelClass ../../../../core/HandleRegistry ../../../../core/watchUtils ../../lib/glMatrix".split(" "),function(n,
k,a,b,c,f,e,h,d,l,g){var m=g.vec3d;n=function(){function g(){this.hudMaterialCollection=this.textTextureAtlas=null;this.labelVisibilityDirty=!1;this.labelClasses=[];this.eventHandles=new d;this.graphicsCore=this.layer=this.layerView=null}g.prototype.initialize=function(a,b,c,d){var e=this;this.layerView=a;this.layer=b;this.graphicsCore=d;this.labelGraphicsCreated=c;this.layerView.view.labelManager.addSceneServiceLayerView(this);this.eventHandles.add(l.whenNot(this.layerView,"suspended",function(){return e.resume()}))};
g.prototype.destroy=function(){this.layerView.view.labelManager.removeSceneServiceLayerView(this);this.textTextureAtlas&&(this.textTextureAtlas.dispose(),this.textTextureAtlas=null);this.hudMaterialCollection&&(this.hudMaterialCollection.dispose(),this.hudMaterialCollection=null);this.labelClasses=null;this.eventHandles.destroy();this.graphicsCore=this.layer=this.layerView=this.eventHandles=null};g.prototype.clear=function(){this.layerView.view.labelManager.setDirty();this.textTextureAtlas&&(this.textTextureAtlas.dispose(),
this.textTextureAtlas=null);this.hudMaterialCollection&&(this.hudMaterialCollection.dispose(),this.hudMaterialCollection=null)};g.prototype.updateLabelingInfo=function(){var b=this;this.removeLabels();return this.layer.then(function(){var c=b.layer.labelingInfo&&b.layer.labelingInfo.filter(function(a){return!!a.symbol});if(c&&0<c.length){var d=Array(c.length),c=c.map(function(a,c){var f=b.graphicsCore.getOrCreateGraphics3DSymbol(a.symbol),g;g=f instanceof e?f.graphics3DSymbol:f;d[c]={labelClass:a,
graphics3DSymbolLayer:g};return f});return a(c).then(function(){return d})}return null}).then(function(a){b.labelClasses=a;b.labelVisibilityChanged()})};g.prototype.createLabelsForGraphic=function(a,d){var e=!1;if(this.labelClasses&&0!==this.labelClasses.length&&d._graphics[0]){for(var f=0;f<this.labelClasses.length;f++){var g=this.labelClasses[f];if(h.evaluateWhere(g.labelClass.where,a.attributes)){var k=g.labelClass.getLabelExpression();if(k&&(k=h.buildLabelText(k,a.attributes,this.layer.fields))){var f=
g.graphics3DSymbolLayer.childGraphics3DSymbols[0],l=this.evalLabelPlacementParams(a,d);null==this.textTextureAtlas&&(this.textTextureAtlas=new b(this.layer.id,this.layerView.view._stage),this.hudMaterialCollection=new c(this.layerView.view._stage));if(k=f.createGraphics3DGraphic(a,{text:k,centerOffset:l.centerOffset,translation:l.translation,screenOffset:l.screenOffset,anchor:l.anchor},this.hudMaterialCollection,this.textTextureAtlas))k._labelClass=g.labelClass,d.addLabelGraphic(k,this.graphicsCore.labelStageLayer,
this.graphicsCore.stage),k.setVisibilityFlag("VISIBILITY_LABEL_SHOW",this.layerLabelsEnabled()),this.layerView.view.labelManager.setInitialLabelGraphicState(k),e=!0;break}}}e&&this.labelGraphicsCreated&&this.labelGraphicsCreated(a,d)}};g.prototype.evalLabelPlacementParams=function(a,b){var c=q[this.layer.labelingInfo[0].labelPlacement]||q["default"];if("polygon"===a.geometry.type||"polyline"===a.geometry.type||"extent"===a.geometry.type)return{anchor:"center"};if("point"!==a.geometry.type)return{anchor:c.anchor};
var d=b.graphics3DSymbol,g=(d instanceof e?d.graphics3DSymbol:d).symbol.symbolLayers.getItemAt(0),d={screenOffset:[0,0],centerOffset:[0,0,0,-1],translation:m.create(b.getCenterObjectSpace()),anchor:c.anchor},h=b._graphics[0];"Icon"===g.type?(g=h.getScreenSize(),b.isDraped()?d.anchor="center":(h=h.stageObject.getGeometryRecords()[0].materials[0],h instanceof f?(h=h.getParams(),d.screenOffset=[g[0]/2*(c.normalizedOffset[0]-2*(h.anchorPos[0]-0.5)),g[1]/2*(c.normalizedOffset[1]-2*(h.anchorPos[1]-0.5))]):
d.screenOffset=[g[0]/2*c.normalizedOffset[0],g[1]/2*c.normalizedOffset[1]])):"Object"===g.type&&(g=h.getBoundingBoxObjectSpace(),g=[g[3]-g[0],g[4]-g[1],g[5]-g[2]],h=Math.max(g[0],g[1]),d.centerOffset[0]=1.1*h/2*c.normalizedOffset[0],d.translation[2]+=1.1*g[2]/2*c.normalizedOffset[1],g=m.length(g),d.centerOffset[2]=1.1*g/2*c.normalizedOffset[2]);return d};g.prototype.layerLabelsEnabled=function(){return this.layer.labelsVisible};g.prototype.getGraphics3DGraphics=function(){return this.graphicsCore.getGraphics3DGraphics()};
g.prototype.getGraphics3DGraphicsKeys=function(){return this.graphicsCore.getGraphics3DGraphicsKeys()};g.prototype.labelVisibilityChanged=function(){var a=this;if(this.layerView.suspended)this.labelVisibilityDirty=!0;else if(this.layerView.loadedGraphics){var b=this.layerLabelsEnabled();this.layerView.loadedGraphics.forEach(function(c){var d=a.graphicsCore.getGraphics3DGraphicById(c.uid);if(d){b&&0===d._labelGraphics.length&&a.createLabelsForGraphic(c,d);for(c=0;c<d._labelGraphics.length;c++)d._labelGraphics[c].setVisibilityFlag("VISIBILITY_LABEL_SHOW",
b)}});this.layerView.view.labelManager.setDirty();this.labelVisibilityDirty=!1}};g.prototype.elevationInfoChange=function(){this.labelClasses&&this.labelClasses.forEach(function(a){a.graphics3DSymbolLayer.layerPropertyChanged("elevationInfo",{})})};g.prototype.resume=function(){this.labelVisibilityDirty&&this.labelVisibilityChanged()};g.prototype.removeLabels=function(){var a=this;this.layerView.loadedGraphics&&(this.layerView.loadedGraphics.forEach(function(b){if(b=a.graphicsCore.getGraphics3DGraphicById(b.uid))b._labelGraphics&&
b._labelGraphics.forEach(function(a){return a._labelClass=null}),b.clearLabelGraphics()}),this.labelClasses=null,this.layerView.view.labelManager.setDirty())};return g}();var q={"above-center":{normalizedOffset:[0,1,0],anchor:"bottom"},"above-left":{normalizedOffset:[-1,1,0],anchor:"bottom-right"},"above-right":{normalizedOffset:[1,1,0],anchor:"bottom-left"},"below-center":{normalizedOffset:[0,-1,2],anchor:"top"},"below-left":{normalizedOffset:[-1,-1,0],anchor:"top-right"},"below-right":{normalizedOffset:[1,
-1,0],anchor:"top-left"},"center-center":{normalizedOffset:[0,0,1],anchor:"center"},"center-left":{normalizedOffset:[-1,0,0],anchor:"right"},"center-right":{normalizedOffset:[1,0,0],anchor:"left"}};k={"above-center":["default","esriServerPointLabelPlacementAboveCenter"],"above-left":["esriServerPointLabelPlacementAboveLeft"],"above-right":["esriServerPointLabelPlacementAboveRight"],"below-center":["esriServerPointLabelPlacementBelowCenter"],"below-left":["esriServerPointLabelPlacementBelowLeft"],
"below-right":["esriServerPointLabelPlacementBelowRight"],"center-center":["esriServerPointLabelPlacementCenterCenter"],"center-left":["esriServerPointLabelPlacementCenterLeft"],"center-right":["esriServerPointLabelPlacementCenterRight"]};var p,r;for(r in k)g=k[r],p=q[r],g.forEach(function(a){q[a]=p});Object.freeze&&(Object.freeze(q),Object.keys(q).forEach(function(a){Object.freeze(q[a]);Object.freeze(q[a].normalizedOffset)}));return n})},"esri/views/3d/webgl-engine/lib/TextTextureAtlas":function(){define("require exports ./Texture ./ModelContentType ../../../webgl/Texture ../../../webgl/enums".split(" "),
function(n,k,a,b,c,f){var e=function(){function b(c){this.textTextures={};this.dirty=!1;this._glTexture=null;this.id=a.idGen.gen(c)}b.prototype.getId=function(){return this.id};b.prototype.dispose=function(){};b.prototype.deferredLoading=function(){return!1};b.prototype.getWidth=function(){return 512};b.prototype.getHeight=function(){return 512};b.prototype.initializeThroughRender=function(a,b){b.wrapMode=33071;b.samplingMode=9729;b.flipped=!0;var e=this._drawToCanvas();this._glTexture=new c(a,b,
e);this.dirty=!1;return this._glTexture};b.prototype.redraw=function(){if(this.dirty&&this._glTexture){var a=this._drawToCanvas();this._glTexture.setData(a);this.dirty=!1}};b.prototype.setUnloadFunc=function(a){this._unloadFunc=a};b.prototype.unload=function(){null!=this._unloadFunc&&(this._unloadFunc(this.id),this._unloadFunc=null)};b.prototype._drawToCanvas=function(){var a=b._create2Dcanvas(),c=a.getContext("2d");c.clearRect(0,0,512,512);for(var e in this.textTextures){var f=this.textTextures[e];
f.textTexture.renderText(1,f.placement.width,f.placement.height,c,f.placement.atlasOffX,f.placement.atlasOffY)}return a};b._create2Dcanvas=function(){b._textCanvas2D||(b._textCanvas2D=document.createElement("canvas"),b._textCanvas2D.setAttribute("id","canvas2d"),b._textCanvas2D.setAttribute("width",(512).toString()),b._textCanvas2D.setAttribute("height",(512).toString()),b._textCanvas2D.setAttribute("style","display:none"));return b._textCanvas2D};return b}();return function(){function a(b,c){this._textureAtlasSubtextures=
[];this._curLineHeight=this._curY=this._curX=0;this._idHint=b;this._stage=c}a.prototype.dispose=function(){for(var a=0;a<this._textureAtlasSubtextures.length;a++)this._stage.remove(b.TEXTURE,this._textureAtlasSubtextures[a].getId());this._textureAtlasSubtextures=[]};a.prototype.addTextTexture=function(a){for(var c=JSON.stringify(a.getParams())+"_"+a.getString(),f=0;f<this._textureAtlasSubtextures.length;f++){var h=this._textureAtlasSubtextures[f].textTextures[c];if(null!=h)return h.placement}var k=
null;0===this._textureAtlasSubtextures.length&&(k=new e(this._idHint),this._textureAtlasSubtextures.push(k));var f=a.getTextWidth(),h=a.getTextHeight(),n,r;this._curLineHeight=Math.max(this._curLineHeight,h);512>this._curX+f&&512>this._curY+this._curLineHeight||(512>this._curY+this._curLineHeight+h?(this._curX=0,this._curY+=this._curLineHeight+2):(k=new e(this._idHint),this._textureAtlasSubtextures.push(k),this._curY=this._curX=0),this._curLineHeight=h);n=this._curX;r=this._curY;this._curX+=f;null!=
k&&this._stage.add(b.TEXTURE,k);k=this._textureAtlasSubtextures[this._textureAtlasSubtextures.length-1];f={uvMinMax:[n/512,1-(r+h)/512,(n+f)/512,1-r/512],atlasOffX:n,atlasOffY:r,width:f,height:h,texture:k};k.textTextures[c]={placement:f,textTexture:a};k.dirty=!0;return f};return a}()})},"esri/views/3d/webgl-engine/lib/MaterialCollection":function(){define(["require","exports","./ModelContentType"],function(n,k,a){return function(){function b(a){this.materials={};this.stage=a}b.prototype.getMaterial=
function(a){return this.materials[a]};b.prototype.addMaterial=function(b,f){this.materials[b]=f;this.stage.add(a.MATERIAL,f)};b.prototype.dispose=function(){for(var b in this.materials)this.stage.remove(a.MATERIAL,this.materials[b].getId());this.materials={}};return b}()})},"esri/views/3d/layers/graphics/Graphics3DScaleVisibility":function(){define(["require","exports"],function(n,k){function a(a){var c=!1;a.labelingInfo&&(c=c||a.labelingInfo.some(function(a){return a&&(null!==a.minScale&&0<a.minScale&&
8E7>a.minScale||1E3<a.maxScale)}));return c=c||null!==a.minScale&&0<a.minScale&&8E7>a.minScale||1E3<a.maxScale}return function(){function b(){this._scaleRangeActive=!1;this.layerScaleRangeVisibilityDirty=this.layerScaleRangeVisibility=!0;this.layerScaleRangeVisibilityQuery=!1;this.basemapTerrain=this.graphicsCore=this.extent=this.spatialIndex=this.layer=this.layerView=this.scaleChangeEventHandle=null}b.prototype.initialize=function(b,f,e,h,d){this.layerView=b;this.layer=f;this.spatialIndex=e;this.graphicsCore=
h;this._scaleRangeActive=a(f);this.basemapTerrain=d;this.layerMinMaxScaleChangeHandler(!1)};b.prototype.destroy=function(){this.scaleChangeEventHandle&&(this.scaleChangeEventHandle.remove(),this.scaleChangeEventHandle=null);this.graphicsCore=this.spatialIndex=this.extent=this.layerView=null};b.prototype.needsIdleUpdate=function(){return this.layerView.view.basemapTerrain&&this.layerScaleRangeVisibilityDirty};b.prototype.canResume=function(){return this.layerScaleRangeVisibility};b.prototype.setExtent=
function(a){this.extent=a;this.layerScaleRangeVisibilityDirty=!0};b.prototype.idleUpdate=function(a){this.layerView.view.basemapTerrain&&(!a.done()&&this.layerScaleRangeVisibilityDirty)&&(this.updateSuspendScaleVisible(),this.layerScaleRangeVisibilityDirty=!1)};b.prototype.scaleRangeActive=function(){return this._scaleRangeActive};b.prototype.updateSuspendScaleVisibleFinish=function(a){this.layerScaleRangeVisibilityQuery=!1;this.layerScaleRangeVisibility!==a&&(this.layerScaleRangeVisibility=a,this.layerView._notifySuspendedChange())};
b.prototype.updateSuspendScaleVisible=function(){var a=this,b=this.layerView.view.basemapTerrain;!this.extent||!b||!this._scaleRangeActive?this.updateSuspendScaleVisibleFinish(!0):this.layerScaleRangeVisibilityQuery||(this.layerScaleRangeVisibilityQuery=!0,b.queryVisibleScaleRange(this.extent,this.layer.minScale,this.layer.maxScale,function(b){return a.updateSuspendScaleVisibleFinish(b)}))};b.prototype.visibleAtScale=function(a,b,e){return null==a?!0:a>e&&(!b||a<b)};b.prototype.visibleAtLayerScale=
function(a){return this.visibleAtScale(a,this.layer.minScale,this.layer.maxScale)};b.prototype.visibleAtLabelScale=function(a,b){return this.visibleAtScale(a,b.minScale,b.maxScale)};b.prototype.graphicScale=function(a,b){var e;b.centroid?e=b.centroid:"point"===a.geometry.type&&(e=a.geometry);return e?this.layerView.view.basemapTerrain?this.layerView.view.basemapTerrain.getScale(e):1:null};b.prototype.graphicVisible=function(a,b){var e=this.graphicScale(a,b);return this.visibleAtLayerScale(e)};b.prototype.updateGraphicScaleVisibility=
function(a,b){if(this._scaleRangeActive&&b.addedToSpatialIndex){var e=this.graphicVisible(a,b);return b.setVisibilityFlag("VISIBILITY_SCALERANGE",e)}return!1};b.prototype.updateGraphicLabelScaleVisibility=function(a,b){if(!this._scaleRangeActive||!b.addedToSpatialIndex||!b._labelGraphics||0===b._labelGraphics.length)return!1;var e=this.graphicScale(a,b);(e=this.updateLabelScaleVisibility(b,e))&&this.layerView.view.labelManager.setDirty();return e};b.prototype.updateLabelScaleVisibility=function(a,
b){if(!a._labelGraphics||0===a._labelGraphics.length)return!1;for(var e=!1,h=0,d=a._labelGraphics;h<d.length;h++){var k=d[h],g=k._labelClass;g&&(null!=g.minScale&&null!=g.maxScale)&&(g=this.visibleAtLabelScale(b,g),k.setVisibilityFlag("VISIBILITY_SCALERANGE_LABEL",g)&&(e=!0))}return e};b.prototype.scaleUpdateHandler=function(a){var b=this;if(!this.layerView.suspended&&this.spatialIndex.hasGraphics()){var e=a.extent,h=a.scale;this.spatialIndex.intersects(e,a.spatialReference,function(a,c){for(var g=
b.visibleAtLayerScale(h),k=!1,n=!1,p=0;p<c;p++){var r=b.graphicsCore.getGraphics3DGraphicById(a[p]);if(r){var t=r.centroid;if(!t||!(e[0]>t.x||e[1]>t.y||e[2]<t.x||e[3]<t.y))t=!1,r.setVisibilityFlag("VISIBILITY_SCALERANGE",g)&&(t=!0),b.updateLabelScaleVisibility(r,h)&&(t=!0),t&&(n=!0,r.isDraped()&&(k=!0))}}n&&b.layerView.view.labelManager.setDirty();k&&b.layerView._notifyDrapedDataChange()})}this.layerScaleRangeVisibilityDirty=!0};b.prototype.layerMinMaxScaleChangeHandler=function(b){var f=this;void 0===
b&&(b=!0);(this._scaleRangeActive=a(this.layer))&&!this.scaleChangeEventHandle?(this.scaleChangeEventHandle=this.basemapTerrain.on("scale-change",function(a){return f.scaleUpdateHandler(a)}),this.layerView.suspended||this.spatialIndex.addGraphicsToSpatialIndex(this._scaleRangeActive)):!this._scaleRangeActive&&this.scaleChangeEventHandle&&(this.scaleChangeEventHandle.remove(),this.scaleChangeEventHandle=null);!this.layerView.suspended&&b&&this.graphicsCore.updateAllGraphicsVisibility();this.layerScaleRangeVisibilityDirty=
!0};return b}()})},"esri/views/3d/layers/graphics/Graphics3DFrustumVisibility":function(){define("require exports ../../support/earthUtils ../../support/projectionUtils ../../support/intersectionUtils ../../lib/glMatrix".split(" "),function(n,k,a,b,c,f){var e=f.vec3d,h=f.vec4d,d=-0.3*a.earthRadius;n=0.5*Math.PI;var l=180*(n/Math.PI),g=n*a.earthRadius,m=0.9*a.earthRadius,q=function(){function a(){this.extent=Array(4);this.planes=Array(4);this.maxSpan=0;this.center={origin:e.create(),direction:e.create()};
for(var b=0;4>b;b++)this.extent[b]={origin:e.create(),originLength:0,direction:e.create(),cap:{next:null,direction:e.create()}},this.planes[b]=h.create();this.planes[4]=h.create()}a.prototype.update=function(a,c,d,f,g,h){var k=this.extent;e.set3(a[0],a[1],h,k[0].origin);e.set3(a[2],a[1],h,k[1].origin);e.set3(a[2],a[3],h,k[2].origin);e.set3(a[0],a[3],h,k[3].origin);if(!g)for(g=0;4>g;g++)b.vectorToVector(k[g].origin,f,k[g].origin,d);e.add(k[0].origin,k[2].origin,this.center.origin);e.scale(this.center.origin,
0.5);c(this.center.origin,this.center.direction);for(g=0;4>g;g++)d=k[g],c(d.origin,d.direction),d.originLength=e.length(d.origin),f=k[3===g?0:g+1],d.cap.next=f.origin,e.direction(f.origin,d.origin,d.cap.direction),this._computePlane(d.cap.direction,d.direction,d.origin,this.planes[g]);this._computePlane(k[1].cap.direction,k[0].cap.direction,k[0].origin,this.planes[4]);this.maxSpan=Math.max(Math.abs(a[0]-a[2]),Math.abs(a[1]-a[3]))};a.prototype.isVisibleInFrustumGlobal=function(a){if(0>e.dot(this.center.direction,
a.direction))return!0;for(var b=0;4>b;b++)if(0>e.dot(this.extent[b].direction,a.direction))return!0;return!1};a.prototype.isVisibleInFrustum=function(a,b,d){if("global"===a.viewingMode){if(this.maxSpan>(a.spatialReference.isWGS84?l:g))return!0;if(b.altitude()>=m)return this.isVisibleInFrustumGlobal(b)}for(a=0;a<this.extent.length;a++)if(d=this.extent[a],c.frustumRay(b.planes,d.origin,null,d.direction)||c.frustumLineSegment(b.planes,d.origin,d.cap.next,d.cap.direction))return!0;for(a=0;a<b.lines.length;a++)if(d=
b.lines[a],c.frustumLineSegment(this.planes,d.origin,d.endpoint,d.direction))return!0;return!1};a.prototype._computePlane=function(a,b,c,d){e.cross(a,b,d);d[3]=-e.dot(d,c)};return a}();return function(){function a(){this.frustumVisibilityDirty=this.frustumVisibility=!0;this.extent=null;this.extentEngine=new q;this.extentEngineDirty=!0;this.renderSREqualsViewSR=null;this._isVisibleBelowSurface=!1;this.layerView=null}a.prototype.initialize=function(a){this.layerView=a;this.renderSREqualsViewSR=a.view.renderSpatialReference.equals(a.view.spatialReference)};
a.prototype.destroy=function(){this.extentEngine=this.extent=this.layerView=null};a.prototype.needsIdleUpdate=function(){return this.frustumVisibilityDirty};a.prototype.canResume=function(){return this.frustumVisibility};a.prototype.setExtent=function(a){this.extent=a;this.frustumVisibilityDirty=this.extentEngineDirty=!0};a.prototype.viewChange=function(){this.frustumVisibilityDirty=!0};a.prototype.elevationBoundsChange=function(){this.extentEngineDirty=this.frustumVisibilityDirty=!0};Object.defineProperty(a.prototype,
"isVisibleBelowSurface",{set:function(a){this._isVisibleBelowSurface=a;this.extentEngineDirty=this.frustumVisibilityDirty=!0},enumerable:!0,configurable:!0});a.prototype.idleUpdate=function(a){!a.done()&&this.frustumVisibilityDirty&&(this.updateSuspendFrustumVisible(),this.frustumVisibilityDirty=!1)};a.prototype.updateExtentEngine=function(){if(this.extentEngineDirty){this.extentEngineDirty=!1;var a=this.layerView.view,b=a.renderCoordsHelper.worldUpAtPosition,c;if(this._isVisibleBelowSurface)c=d;
else{var e=a.basemapTerrain.getElevationBounds();c=e[0];e=Math.max(1,(e[1]-c)*(1.2-1));c-=e}this.extentEngine.update(this.extent,b,a.renderSpatialReference,a.spatialReference,this.renderSREqualsViewSR,c)}};a.prototype.updateSuspendFrustumVisible=function(){if(this.extent){this.updateExtentEngine();var a=this.layerView.view.getFrustum(),a=this.extentEngine.isVisibleInFrustum(this.layerView.view,a,this._isVisibleBelowSurface);a!==this.frustumVisibility&&(this.frustumVisibility=a,this.layerView._notifySuspendedChange())}else this.frustumVisibility=
!0};return a}()})},"esri/views/3d/layers/graphics/Graphics3DVerticalScale":function(){define(["require","exports","../../../../geometry/support/scaleUtils"],function(n,k,a){return function(){function b(a){this.sourceSpatialReference=a.sourceSpatialReference;this.destSpatialReference=a.destSpatialReference}b.prototype.adjust=function(a){var b=this._getVerticalUnitScale();1!==b&&(a=a.slice(),this._scaleVerticalUnits(a,b));return a};b.prototype._getVerticalUnitScale=function(){if(this.sourceSpatialReference&&
!this.sourceSpatialReference.equals(this.destSpatialReference)){var a=this._getVerticalUnitValueForSR(this.sourceSpatialReference),b=this._getVerticalUnitValueForSR(this.destSpatialReference);return a/b}return 1};b.prototype._getVerticalUnitValueForSR=function(b){b=a.getUnitValueForSR(b);return 1E5<b?1:b};b.prototype._vertexListsScaleZ=function(a,b){for(var e=0,h=a.length;e<h;++e)for(var d=a[e],k=0,g=a.length;k<g;++k)d[k][2]*=b};b.prototype._scaleVerticalUnits=function(a,b){for(var e=0,h=a.length;e<
h;++e){var d=a[e].geometry;if(d.hasZ)this._geometryIsPoint(d)?null!==d.z&&(d.z*=b):this._geometryIsPolyline(d)?this._vertexListsScaleZ(d.paths,b):this._geometryIsPolygon(d)&&this._vertexListsScaleZ(d.rings,b);else break}};b.prototype._geometryIsPoint=function(a){return"point"===a.type};b.prototype._geometryIsPolygon=function(a){return"polygon"===a.type};b.prototype._geometryIsPolyline=function(a){return"polyline"===a.type};return b}()})},"esri/renderers/support/renderingInfoUtils":function(){define(["require",
"exports"],function(n,k){function a(a,b){if(!a||a.symbol)return null;var e=b.renderer;return a&&e&&e.getObservationRenderer?e.getObservationRenderer(a):e}function b(b,f){if(b.symbol)return b.symbol;var e=a(b,f);return e&&e.getSymbol(b,f)}k.getRenderer=a;k.getSymbol=b;k.getRenderingInfo=function(c,f){var e=a(c,f),h=b(c,f);if(!h)return null;h={renderer:e,symbol:h};if(e){e.colorInfo&&(h.color=e.getColor(c).toRgba());if(e.sizeInfo){var d=e.getSize(c);h.size=[d,d,d]}if(e.visualVariables){for(var e=e.getVisualVariableValues(c,
f),d=["proportional","proportional","proportional"],k=0;k<e.length;k++){var g=e[k],m=g.variable,n=m.type;"color"===n?h.color=g.value.toRgba():"size"===n?"outline"===m.target?h.outlineSize=g.value:(m=g.variable.axis,g=g.variable.useSymbolValue?"symbolValue":g.value,"width"===m?d[0]=g:"depth"===m?d[1]=g:"height"===m?d[2]=g:d[0]="width-and-depth"===m?d[1]=g:d[1]=d[2]=g):"opacity"===n?h.opacity=g.value:"rotation"===n&&(h.rotationAngle=g.value)}if(isFinite(d[0])||isFinite(d[1])||isFinite(d[2]))h.size=
d}}return h}})},"esri/views/3d/layers/support/projectExtentUtils":function(){define(["require","exports","../../../../portal/support/geometryServiceUtils","../../../../core/promiseUtils","../../../../tasks/support/ProjectParameters"],function(n,k,a,b,c){k.toView=function(f){var e=f.view.spatialReference,h=f.layer.fullExtent&&f.layer.fullExtent.spatialReference;return!h||h.equals(e)||"local"!==f.view.viewingMode?b.resolve(null):a.create(f.layer.portalItem).then(function(a){var b=new c;b.geometries=
[f.layer.fullExtent];b.outSR=e;return a.project(b)}).then(function(a){if(!f.destroyed&&a&&Array.isArray(a)&&1===a.length)return a[0]}).otherwise(function(){return null})}})},"esri/views/3d/layers/SceneLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../../core/promiseUtils ../../../core/Logger ../../../core/lang dojo/_base/lang dojox/color/_base dojo/has ../../layers/LayerView ../../../Graphic ../../../symbols/Symbol3D ../../../geometry/Extent ./i3s/I3SUtil ./i3s/I3SBinaryReader ./i3s/I3SProjectionUtil ./i3s/I3SQueryEngine ./graphics/graphicUtils ./support/LayerViewUpdatingPercentage ../support/intersectionUtils ../support/projectionUtils ../support/aaBoundingBox ../webgl-engine/Stage ../webgl-engine/lib/Layer ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryData ../webgl-engine/lib/Object3D ../webgl-engine/lib/Texture ../webgl-engine/materials/Material ../webgl-engine/lib/Util ../webgl-engine/lib/base64Binary ../lib/glMatrix ../../../layers/IntegratedMeshLayer".split(" "),
function(n,k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D,I,A,z,E,C,J,F,G,K,N,V){function U(a,b,c,d){var e=!1,f;b.encoding===s.DDS_ENCODING_STRING?f=J.DDS_ENCODING:e=!(ia(a.width)&&ia(a.height));a=b.usedByEngineMats.some(function(a){return a.getParams().atlasRegions})||b.atlas;c=(c||!a)&&!e;return{mipmap:c,wrapClamp:a||!b.wrap,disableAnisotropy:a&&c&&d,encoding:f,noUnpackFlip:!0}}function ha(a,b){for(var c=b.toLowerCase(),d=0,e=Object.keys(a);d<e.length;d++){var f=e[d];if(f.toLowerCase()===c)return a[f]}return null}
var Q=h.getLogger("esri.layers.SceneService"),S=G.assert,Y=G.clamp,ia=G.isPowerOfTwo,X=G.fallbackIfUndefined,aa=G.objectEmpty,ba=G.VertexAttrConstants,R=[1,1,1,1],M=I.ModelContentType,T=[0.8,0.8,0.8],Z=[0.5,0.5,0.5],L=1,P=null;return function(h){function k(){h.apply(this,arguments);this._queryEngine=null;this._featuresChangedEventScheduled=!1;this._featuresChangedEvent=null}a(k,h);k.prototype.initialize=function(){var a=this;s.checkSpatialReferences(this.layer,this.view.spatialReference,this.view.viewingMode);
var b=this.layer.version,b=!m("trident")||1<b.major||1===b.major&&3<b.minor;this.useCompressedTextures=this.view.has("s3tc")&&b;this._disableAtlasAnisotropy=(this._enableAtlasMipMaps=this.view.has("standardDerivatives"))&&!this.view.has("shaderTextureLOD");this._initGraphicsController();this.dbg=!1;this.maxGpuMemory=1E3;this.geoMemoryEstimate=this.texMemoryEstimate=this.gpuMemoryEstimate=0;this._stage=this.view._stage;this._matId2Meta={};this._texId2Meta={};this._requestedTexImageIds={};this._nodeId2Meta=
{};this._colorOverride=null;for(var b=new Uint8Array(256),c=0;c<b.length;c++)b[c]=255;this._whiteTexture=new J(b,"white",{width:8,height:8});this._stage.add(I.ModelContentType.TEXTURE,this._whiteTexture);this._layerEventHandles=[f.init(this.layer,"renderer",function(b){return a._rendererChange(b)}),f.watch(this,"fullOpacity",function(b){return a._opacityChange(b)}),f.init(this.layer,"objectIdFilter",function(){return a._objectIdFilterChange()}),f.init(this.view,"clippingArea",function(){return a._clippingAreaChanged()})];
this._addThisLayerToStage();this.setVisibility(!this.suspended);this.debugLODVis=this.debugNodeVis=!1};k.prototype.destroy=function(){this._stage.remove(I.ModelContentType.TEXTURE,this._whiteTexture.getId());this._removeThisLayerFromStage();this._layerEventHandles.forEach(function(a){a.remove()});this._stage=null;null!=this._controller&&(this._controller.destroy(),this._controller=null);this._nodeId2Meta=this._texId2Meta=this._matId2Meta=null};k.prototype.canResume=function(){return this.inherited(arguments)&&
(!this._controller||this._controller.rootNodeVisible)};k.prototype.isUpdating=function(){return this._controller&&this._controller.updating};k.prototype.memEstimateTextureAdded=function(a){a=a.getEstimatedTexMemRequiredMB();this.gpuMemoryEstimate+=a;this.texMemoryEstimate+=a};k.prototype.memEstimateTextureRemoved=function(a){a=a.getEstimatedTexMemRequiredMB();this.gpuMemoryEstimate-=a;this.texMemoryEstimate-=a};k.prototype.memEstimateGeometryAdded=function(a){a=a.estimateGpuMemoryUsage()/1E6;this.gpuMemoryEstimate+=
a;this.geoMemoryEstimate+=a};k.prototype.memEstimateGeometryRemoved=function(a){a=a.estimateGpuMemoryUsage()/1E6;this.gpuMemoryEstimate-=a;this.geoMemoryEstimate-=a};k.prototype.isBundleAlreadyAddedToStage=function(a,b){var c=!1,d=!1;if(null!=this._nodeId2Meta[a.id]&&this._nodeId2Meta[a.id].engineObjectsPerBundle&&this._nodeId2Meta[a.id].engineObjectsPerBundle[b])for(var d=!0,e=this._nodeId2Meta[a.id].engineObjectsPerBundle[b],f=0;f<e.length&&!(c=e[f].isPartiallyHidden());f++);return{wasPartiallyHidden:c,
alreadyLoaded:d}};k.prototype._initGraphicsController=function(){var a=this,b={addBundle:this._addBundle.bind(this),isBundleAlreadyAddedToStage:this.isBundleAlreadyAddedToStage.bind(this),isOverMemory:this.isOverMemory.bind(this),removeNodeData:this._removeNodeDataFromStage.bind(this),removeFeatures:this._removeFeatures.bind(this),getAddedFeatures:this._getAddedFeatures.bind(this),getAddedNodeIDs:this._getAddedNodeIDs.bind(this),areAllBundlesLoaded:this._areAllBundlesLoaded.bind(this),wholeNodeSwitchEnabled:!0},
c={additionalStartNodeLoadingHandler:this._startNodeLoading.bind(this),additionalCancelNodeLoadingHandler:this.cancelNodeLoading.bind(this),getTexturePrefetchFunctions:function(){return{_calcDesiredTextureLOD:a._calcDesiredTextureLOD.bind(a),_imageIsPartOfTextureBundle:a._imageIsPartOfTextureBundle.bind(a),_matId2Meta:a._matId2Meta,_texId2Meta:a._texId2Meta,useCompressedTextures:function(){return a.useCompressedTextures}}},_nodeDebugVisualizer:this._nodeDebugVisualizer,setPolygonOffset:this._setPolygonOffset.bind(this),
traversalOptions:{initDepthFirst:!0,neighborhood:!0,perLevelTraversal:!1,allowPartialOverlaps:!1},getLoadedAttributes:this.getLoadedAttributes.bind(this),setAttributeData:this.setAttributeData.bind(this)};this.layer.createGraphicsController({layerView:this,layerViewRequiredFunctions:b,layerViewOptionalFunctions:c}).then(function(b){b.watch("rootNodeVisible",function(){a.notifyChange("suspended")})})};k.prototype.setMaxGpuMemory=function(a){this.maxGpuMemory=a};k.prototype.setVisibility=function(a){if(this._stage&&
this._engineLayer){var b=this._engineLayer.getId(),c=0<=this._stage.getViewContent().indexOf(b);!!a!==c&&(b=[b],null!=this._nodeDebugVisualizer&&b.push(this._nodeDebugVisualizer.engineLayer.getId()),a?this._stage.addToViewContent(b):this._stage.removeFromViewContent(b))}};k.prototype.getEngineLayer=function(){return this._engineLayer};k.prototype.getStats=function(){var a={nodesInIndex:0,knownFeatures:0,activeMaterials:0};if(!this._controller)return a;for(var b=0,c=Object.keys(this._controller.nodeIndex);b<
c.length;b++){var d=c[b];a.nodesInIndex++;d=this._controller.nodeIndex[d];null!=d.features&&(a.knownFeatures+=d.features.length)}a.activeMaterials=Object.keys(this._matId2Meta).length;return a};k.prototype._addThisLayerToStage=function(){var a=this._stage;this._initTexture=new J(null,"i3sInitTexture");a.add(M.TEXTURE,this._initTexture);var b=this.layer.id;this._engineLayer=b=new A(b,{},b);a.add(M.LAYER,b);null!=this._nodeDebugVisualizer&&this._nodeDebugVisualizer.dispose()};k.prototype._removeThisLayerFromStage=
function(){this.cancelNodeLoading();if(null!=this._engineLayer){var a=this._stage;a.remove(M.TEXTURE,this._initTexture.getId());if(null!=this._controller)for(var b in this._controller.nodeIndex)this._controller.nodeIndex.hasOwnProperty(b)&&(this._removeNodeDataFromStage(this._controller.nodeIndex[b]),delete this._controller.nodeIndex[b]);S(aa(this._nodeId2Meta));S(aa(this._matId2Meta));S(aa(this._texId2Meta));a.remove(M.LAYER,this._engineLayer.getId());null!=this._nodeDebugVisualizer&&this._nodeDebugVisualizer.dispose();
this._nodeDebugVisualizer=void 0;this._matId2Meta={};this._texId2Meta={};this._requestedTexImageIds={};this._nodeId2Meta={};this._engineLayer=void 0;this.gpuMemoryEstimate=0}};k.prototype._startNodeLoading=function(){this._updateAllTextureLOD()};k.prototype.cancelNodeLoading=function(){null!=this._nodeDebugVisualizer&&this._nodeDebugVisualizer.clear();this._requestedTexImageIds={}};k.prototype._isAllHidden=function(a){a=this._nodeId2Meta[a.id].engineObjects;for(var b=0;b<a.length;b++)if(!a[b].isAllHidden())return!1;
return!0};k.prototype.getLoadedAttributes=function(a){if((a=this._nodeId2Meta[a.id])&&1===a.engineObjects.length)return a.engineObjects[0].getMetadata().loadedAttributes};k.prototype.setAttributeData=function(a,b,c){if((a=this._nodeId2Meta[a.id])&&1===a.engineObjects.length){a=a.engineObjects[0];var d=a.getMetadata();d.loadedAttributes=b;d.attributeData=c;this._setObjectSymbology(a)}};k.prototype._createUnitTestData=function(a){var b=this.view.navigation.targetCamera,b={viewParams:{eye:b.eye,center:b.center,
up:b.up,viewMatrix:b.viewMatrix,projectionMatrix:b.projectionMatrix,fovX:b.fovX,viewport:b.viewport,perPixelRatio:b.perPixelRatio},visibleObjects:[]};a=a.getAll("objects");for(var c in a){var d=a[c];if(d.getParentLayer()===this._engineLayer){var e=d.getMetadata(),d=e.i3sNode,e=e.features.map(function(a){return a.id});e.sort();b.visibleObjects.push({featureIDs:e,nodeId:d})}}console.debug(""+b.visibleObjects.length);return JSON.stringify(b)};k.prototype.isOverMemory=function(){return this.gpuMemoryEstimate>
this.maxGpuMemory?(Q.warn("over memory: "+this.gpuMemoryEstimate+" tex "+this.texMemoryEstimate+" geom "+this.geoMemoryEstimate),!0):!1};k.prototype._getAddedFeatures=function(a){if(null==this._nodeId2Meta[a])return null;var b=[];a=this._nodeId2Meta[a].engineObjects;for(var c=0;c<a.length;c++)b=b.concat(a[c].getMetadata().features);return b};k.prototype._getAddedNodeIDs=function(){return Object.keys(this._nodeId2Meta)};k.prototype._calcEngineMaterialTransparencyParams=function(a,b,c){var e=this.fullOpacity,
f=1-Y(X(b.transparency,0),0,1),e=e*f;a=1>e||a&&d.endsWith(a.channels,"a")||!0===b.useVertexColorAlpha||c;return{opacity:e,transparent:a}};k.prototype._calcEngineMaterialDoubleSidedParams=function(a){return null!=a.doubleSided?a.doubleSided:!0};k.prototype._calcEngineMaterialCullFaceParams=function(a){return a.cullFace?a.cullFace:null!=a.doubleSided?a.doubleSided?"none":"back":"none"};k.prototype._createEngineMaterial=function(a,b,c,d,e,f){var g,h;null!=a&&(g=(h=this._texId2Meta[b])&&h.engineTex?h.engineTex.getId():
this._initTexture.getId());var k=c.params,m=X(k.diffuse,T),n,q;null!=a&&(q=s.getAppropriateTextureEncoding(a.encoding,this.useCompressedTextures),n=-1<q?a.encoding[q]:a.encoding);"standard"!==c.type&&Q.warn("Unknown material type '"+c.type+"', must be 'standard'");void 0===k.reflectivity&&Q.warn("Material parameter 'reflectivity' is missing.");c=this.layer instanceof V;g={ambient:this._colorOverride||m,diffuse:this._colorOverride||m,specular:X(k.specular,Z),shininess:X(k.shininess,64),atlasRegions:k.vertexRegions,
textureId:g&&this._colorOverride?this._whiteTexture.getId():g,vertexColors:!0,flipV:!1,doubleSided:this._calcEngineMaterialDoubleSidedParams(k),cullFace:this._calcEngineMaterialCullFaceParams(k),writeStencil:c,receiveSSAO:!c};c||(m=this._calcEngineMaterialTransparencyParams(a,k),l.mixin(g,m));g=new F(g,d);g.metadata={i3sMatId:d,i3sTexId:b,i3sTex:a,i3sMatParams:k};if(null!=a){h?h.usedByEngineMats.push(g):(h={id:b,featureMBS:{},usedByEngineMats:[g],images:a.images,encoding:n,encodingIdx:q,atlas:!0===
a.atlas,wrap:"none"!==a.wrap[0]||"none"!==a.wrap[1]},this._texId2Meta[b]=h);for(a=0;a<e.length;a++)k=e[a],h.featureMBS[k.id]=k.engineMBS;if(void 0!==f[b]){null==h.engineTex&&(e=f[b].data,a=U(e,h,this._enableAtlasMipMaps,this._disableAtlasAnisotropy),h.engineTex=new J(e,h.id,a),this._stage.add(M.TEXTURE,h.engineTex),h.desiredLOD=f[b].desiredLOD,h.curLOD=h.desiredLOD,this.memEstimateTextureAdded(h.engineTex));e=h.engineTex.getId();for(a=0;a<h.usedByEngineMats.length;a++)k=h.usedByEngineMats[a],null==
this._colorOverride&&k.setParameterValues({textureId:e}),k.metadata.originalTextureId=e;f[b].createdTextureForDomImage();delete f[b]}else this._updateTextureLOD(h)}this._matId2Meta[d]||(this._matId2Meta[d]={});this._matId2Meta[d][b]={engineMat:g,refCount:1};return g};k.prototype._createVertexAndIndexArrays=function(a,b,c){var d,e=a.params.vertexAttributes,f={},g;for(g in e)if(e.hasOwnProperty(g)&&"classification"!==g){var h=e[g];d=u.valueType2TypedArrayClassMap[h.valueType];S(null!=d,"unsupported vertex attribute value type: "+
h.valueType);f[g]={data:new d(b,h.byteOffset,h.count*h.valuesPerElement),size:h.valuesPerElement}}if(null==f[ba.COLOR]){d=u.valueType2TypedArrayClassMap.UInt8;f[ba.COLOR]={data:new d(4*e.position.count),size:4};for(var k=0;k<f[ba.COLOR].data.length;k++)f[ba.COLOR].data[k]=0===k%3?255:0}g=!1;null==f[ba.NORMAL]&&(g=!0,d=u.valueType2TypedArrayClassMap.Float32,f[ba.NORMAL]={data:new d(3*e.position.count),size:3});e=[];d=a.params.faces;if(null!=d&&"PerAttributeArray"!==a.params.topology){var l={},m;for(m in d)d.hasOwnProperty(m)&&
(h=d[m],S(0===h.count%3),S(h.count===d.position.count),S("UInt32"===h.valueType),l[m]=h.byteOffset);for(var n=a.params.components.length,h=Array(n),q=d.position.componentIndices||[0],p=0;p<n;p++){var r=a.params.components[p],s=p<n-1?q[p+1]-q[p]:d.position.count-q[p];m={type:"triangle",positionKey:"position",indices:{},componentRange:[q[p],q[p]+s]};for(var t in d)d.hasOwnProperty(t)&&(m.indices[t]=new Uint32Array(b,l[t],s),l[t]+=4*s);if(null==m.indices[ba.COLOR]){m.indices[ba.COLOR]=new Uint32Array(s);
for(k=0;k<s;k++)m.indices[ba.COLOR][k]=k}if(g&&null==m.indices[ba.NORMAL]){m.indices[ba.NORMAL]=new Uint32Array(s);for(k=0;k<s;k++)m.indices[ba.NORMAL][k]=k}h[p]=m;var k=r.textureID||"none",v=void 0;"none"!==k&&(v=c.textureDefinitions[k],S(void 0!==v,"geometry wants unknown texture "+k));if(v&&!0===v.atlas&&null!=v.regions){S(0<v.regions.length,"texture marked as atlas carries no region definition");k=v.regions[r.regionID].subimageRegion;e=e.concat([65536*k[0],65536*(k[2]-k[0]),65536*(1-k[3]),65536*
(k[3]-k[1])]);k=new Uint32Array(s);for(r=0;r<s;r++)k[r]=e.length/4-1;m.indices[ba.REGION]=k}}}else{m={type:"triangle",positionKey:"position",indices:{}};a=f.position.data.length/f.position.size;if(a>L||null==P){for(;a>L;)L*=2;P=new Uint32Array(L);for(k=0;k<L;k++)P[k]=k}a=new Uint32Array(P.buffer,0,a);for(l in f)m.indices[l]=a;a=m.indices[m.positionKey];m.componentRange=[0,null!=a?a.length-1:0];h=[m]}0<e.length&&(a=new Uint16Array(e),f[ba.REGION]={data:a,size:4});return{indexArrays:h,vertexArrays:f}};
k.prototype._createEngineMats=function(a,b,c,d,e){for(var f=a.params.components.length,g=Array(f),h=0;h<f;h++){var k=a.params.components[h],l=k.materialID,m=c.materialDefinitions[l];null!=m.href&&(m=d[m.hrefConcat].materialDefinitions[l]);S(void 0!==m,"geometry wants unknown material "+l);var n=k.textureID||"none",q=void 0;"none"!==n&&((null==c.textureDefinitions||null==c.textureDefinitions[n])&&Q.warn("textureDefinitions missing in shared resource"),q=c.textureDefinitions[n]);k=void 0;this._matId2Meta[l]&&
this._matId2Meta[l][n]?(l=this._matId2Meta[l][n],k=l.engineMat,l.refCount++):k=this._createEngineMaterial(q,n,m,l,b,e);g[h]=k}return g};k.prototype._areAllBundlesLoaded=function(a,b){if(null==this._nodeId2Meta[a.id]||null==this._nodeId2Meta[a.id].engineObjectsPerBundle)return!1;for(var c=0;c<a.featureData.length;c++){if(null==this._nodeId2Meta[a.id].engineObjectsPerBundle[c])return!1;if(!b)for(var d=this._nodeId2Meta[a.id].engineObjectsPerBundle[c],e=0;e<d.length;e++)if(d[e].isPartiallyHidden())return!1}return!0};
k.prototype._getObjectIdField=function(){return this.layer.objectIdField||"OBJECTID"};k.prototype._findGraphic=function(a){a=ha(a.attributes,this._getObjectIdField());for(var b=0,c=Object.keys(this._nodeId2Meta);b<c.length;b++)for(var d=c[b],e=this._nodeId2Meta[d].engineObjects,f=0;f<e.length;f++){var g=e[f].getMetadata().featureIds.indexOf(a);if(-1!==g)return{node:this._controller.nodeIndex[d],nodeId:d,bundleNr:f,index:g}}return null};k.prototype.whenGraphicBounds=function(a){var b=this._findGraphic(a);
if(null!=b){a=this._nodeId2Meta[b.nodeId].engineObjects[b.bundleNr];var c=a.getMetadata().faceRanges[b.index],b=new Float64Array(24);this._boundingBoxCornerPoints(c,a,b);if(H.bufferToBuffer(b,this.view.renderSpatialReference,0,b,this.view.spatialReference,0,8))return a=D.create(D.NEGATIVE_INFINITY),D.expandBuffer(a,b,0,8),e.resolve(a)}return e.reject()};k.prototype.whenGraphicAttributes=function(a,b){var c=this,d=ha(a.attributes,this._getObjectIdField());return s.whenGraphicAttributes(this.layer,
a,d,b,function(){return c._findGraphic(a)})};k.prototype.getGraphicsFromStageObject=function(a,b){if(this.layer instanceof V)return e.reject();var c=a.getMetadata(),d=a.getFaceRangeIndexFromTriangleNr(b);return null!=d&&null!=c.featureIds&&d<c.featureIds.length?(c=this._createGraphic(d,c),e.resolve(c)):e.reject()};k.prototype._addBundle=function(a,b,c,d,e,f,g){if(!0===this.debugNodeVis&&null!=this._nodeDebugVisualizer){var h="grey";switch(a.level){case 1:h="red";break;case 2:h="green";break;case 3:h=
"blue";break;case 4:h="yellow";break;case 5:h="magenta";break;case 6:h="brown"}this._nodeDebugVisualizer.show(a,this._controller.crsIndex,h)}var h=this._stage,k={};k[M.OBJECT]={};k[M.GEOMETRY]={};k[M.MATERIAL]={};k[M.TEXTURE]={};var l=this._engineLayer,m=l.getId(),n=d[a.sharedResource.hrefConcat];if(null!=this._nodeId2Meta[a.id]&&null!=this._nodeId2Meta[a.id].engineObjectsPerBundle&&this._nodeId2Meta[a.id].engineObjectsPerBundle[g])this._applyFilters(a),null!=e&&e.done();else if(!this.isOverMemory())if(null==
this._nodeId2Meta[a.id]&&(this._nodeId2Meta[a.id]={engineObjects:[],engineObjectsPerBundle:[]}),this._nodeId2Meta[a.id].engineObjectsPerBundle[g]=[],null==b)null!=e&&e.done();else{for(var q=0,p=0;p<b.length;p++){var r=b[p].geometries,t=b[p].features,u=d[a.geometryData[g].hrefConcat];S(u instanceof ArrayBuffer,"I3S: geometry data is not an ArrayBuffer");null==u._isReprojected&&(u._isReprojected={});for(var w=a.id+"|"+t[0].id.toString(),x=[],y=[],A=[],B=void 0,D=function(b){var c=r[b],e=F._createVertexAndIndexArrays(c,
u,n);if(0===e.indexArrays.length)return"continue";var g=F._createEngineMats(c,t,n,d,f),h=F._controller.crsIndex,l=F.view.renderSpatialReference;B=v.reprojectPoints(F._controller.isMeshPyramid?v.ReprojectionTypes.PER_VERTEX:v.ReprojectionTypes.BOUNDINGBOX,e.vertexArrays.position.data,a.mbs,u._isReprojected[c.id],h,F._controller.crsVertex,l);u._isReprojected[c.id]=!0;F._controller.isMeshPyramid&&s.processNormals({normals:e.vertexArrays.normal.data,positions:e.vertexArrays.position.data,normalInd:e.indexArrays[0].indices.normal,
positionInd:e.indexArrays[0].indices.position},F.layer.normalReferenceFrame||"none",function(b,c){v.reprojectNormalsPerVertex(b,a.mbs,h,c,l)});var m=B.localTrafo;null!=c.transformation&&(m=N.mat4d.create(c.transformation),N.mat4d.multiply(B.localTrafo,m,m));for(c=0;c<g.length;c++){var q=g[c];k[M.MATERIAL][q.getId()]=q}e=new z(new E(e.indexArrays,e.vertexArrays),w+"_"+b);F.memEstimateGeometryAdded(e.getData());k[M.GEOMETRY][e.getId()]=e;x[b]=e;y[b]=m;A[b]=g},F=this,G=0;G<r.length;++G)D(G);D={i3sNode:a.id,
ceLayer:m,features:t,faceRanges:b[p].faceRanges,featureIds:b[p].featureIds,attributeData:c?c.attributeData:null,loadedAttributes:c?c.loadedAttributes:null,layerId:this.layer.id};q+=null!=D.featureIds?D.featureIds.length:1;D=new C({idHint:a.id,name:w,geometries:x,materials:A,transformations:y,castShadow:!0,metadata:D});G=N.mat4d.create();N.mat4d.identity(G);N.mat4d.multiply(G,B.globalTrafo,G);D.setObjectTransformation(G);this._nodeId2Meta[a.id].engineObjectsPerBundle[g].push(D);this._nodeId2Meta[a.id].engineObjects.push(D);
k[M.OBJECT][D.getId()]=D;this._setObjectSymbology(D);this._applyFilters(a)}h.beginMod();b=k[M.OBJECT];for(var H in b)b.hasOwnProperty(H)&&l.addObject(b[H]);for(var I in k)if(k.hasOwnProperty(I)){H=k[I];for(var J in H)H.hasOwnProperty(J)&&null==h.get(I,J)&&h.add(I,H[J])}h.endMod();null!=e&&e.done();this._notifyFeaturesChanged(q,0)}};k.prototype._clippingAreaChanged=function(){var a=this,b=[];H.extentToBoundingBox(this.view.clippingArea,b,this.view.renderSpatialReference)?this._clippingArea=b:this._clippingArea=
null;this._updateFilters();if(this._controller){var c=this._controller.nodeIndex;c&&Object.keys(this._nodeId2Meta).forEach(function(b){return a._applyFilters(c[b])});this._controller.updateClippingArea(this.view.clippingArea)}};k.prototype._objectIdFilterChange=function(){var a=this;this._updateFilters();if(this._controller){var b=this._controller.nodeIndex;b&&Object.keys(this._nodeId2Meta).forEach(function(c){return a._applyFilters(b[c])})}};k.prototype._updateFilters=function(){var a=this,b=[];
if(this.layer.objectIdFilter){var c=new Float64Array(this.layer.objectIdFilter.ids),d="include"===this.layer.objectIdFilter.method;c.sort();b.push(function(b,e){return a._objectIdFilter(c,d,e)})}this._clippingArea&&b.push(function(b,c){return a._boundingboxFilter(b,a._clippingArea,c)});this._filters=b};k.prototype._objectIdFilter=function(a,b,c){for(var d=0;d<c.length;)0<=s.binaryIndexOf(a,c[d])===b?d++:c.splice(d,1)};k.prototype._boundingboxFilter=function(a,b,c){var d=[0,0,0,0];H.mbsToMbs(a.mbs,
this._controller.crsIndex,d,this.view.renderSpatialReference);d=null!=b?s.intersectBoundingBoxWithMbs(b,d):2;if(2!==d){var e=0;a=this._nodeId2Meta[a.id].engineObjects;for(var f=0;f<a.length;f++){var g=a[f],h=g.getMetadata().featureIds;if(0===d){for(var k=0,g=0;g<h.length&&e+k<c.length;g+=1)c[e+k]===h[g]&&k++;c.splice(e,k)}else{var l=g.getObjectTransformation(),k=g.getGeometryRecords()[0].getShaderTransformation();N.mat4d.multiply(l,k);if(!(0!==l[1]||0!==l[2]||0!==l[3]||0!==l[4]||0!==l[6]||0!==l[7]||
0!==l[8]||0!==l[9]||0!==l[11]||1!==l[15]))for(var k=(b[0]-l[12])/l[0],m=(b[1]-l[13])/l[5],n=(b[2]-l[14])/l[10],q=(b[3]-l[12])/l[0],p=(b[4]-l[13])/l[5],l=(b[5]-l[14])/l[10],r=g.getGeometryRecords()[0].geometry.getData(),t=r.getFaces()[0].indices.position,r=r.getVertexAttr().position.data,u=g.getMetadata().faceRanges,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,g=0;g<u.length&&e<c.length;g+=1)if(c[e]===h[g]){for(var v=u[g],B=v[0],C=v[1],v=w=x=Number.MAX_VALUE,y=z=A=-Number.MAX_VALUE;B<=C;B+=
1)for(var D=0;3>D;D+=1)var E=3*t[3*B+D],F=r[E],G=r[E+1],E=r[E+2],v=Math.min(F,v),w=Math.min(G,w),x=Math.min(E,x),y=Math.max(F,y),z=Math.max(G,z),A=Math.max(E,A);v>q||y<k||w>p||z<m||x>l||A<n?c.splice(e,1):e++}}}}};k.prototype._applyFilters=function(a){if(this._nodeId2Meta[a.id]&&null!=this._nodeId2Meta[a.id].engineObjects){for(var b=this._nodeId2Meta[a.id].engineObjects,c=0;c<b.length;c++)b[c].unhideAllFaceRange();if(0!==this._filters.length){for(var d=[],c=0;c<b.length;c++)var e=b[c],d=d.concat(e.getMetadata().featureIds);
c=d.length;for(e=0;e<this._filters.length;e++)this._filters[e](a,d);if(d.length!==c)for(c=a=0;c<b.length;c++){for(var e=b[c],f=[],g=e.getMetadata().faceRanges,h=e.getMetadata().featureIds,k=0;k<h.length;k+=1){var l=h[k],m=g[k];a>=d.length||d[a]!==l?f.push(m):a++}0<f.length&&e.hideFaceRange(e.getGeometryRecords()[0],f)}}}};k.prototype._hideFeatures=function(a,b){for(var c=this._nodeId2Meta[a.id].engineObjects,d=0;d<c.length;d++){for(var e=c[d],f=[],g=e.getMetadata().features,h=e.getMetadata().faceRanges,
k=0;k<b.length;k++)for(var l=b[k],m=0;m<g.length;m++)l===g[m].id&&(null!=h&&1===e.getGeometryRecords().length?f.push(h[m]):e.hideAllFaceRanges());0<f.length&&e.hideFaceRange(e.getGeometryRecords()[0],f)}};k.prototype._removeFeatures=function(a,b){null!=this._nodeId2Meta[a.id]&&(this._hideFeatures(a,b),!0===this._isAllHidden(a)&&this._removeNodeDataFromStage(a))};k.prototype._removeNodeDataFromStage=function(a){if(!(null==this._nodeId2Meta[a.id]||null==this._nodeId2Meta[a.id].engineObjects)){for(var b=
this._stage,c=this._engineLayer,d=0,e=this._nodeId2Meta[a.id].engineObjects,f=0;f<e.length;++f){var g=e[f],h=g.getMetadata(),d=d+(null!=h.featureIds?h.featureIds.length:1);c.removeObject(g);for(var h=g.getGeometryRecords(),k=0;k<h.length;k++){var l=h[k];this.memEstimateGeometryRemoved(l.geometry.getData());b.remove(M.GEOMETRY,l.geometry.getId());for(var m=0;m<l.materials.length;m++){var n=l.materials[m],q=n.getId(),p=n.metadata.i3sMatId,r=n.metadata.i3sTexId||"none",s=this._matId2Meta[p][r];S(0<s.refCount);
s.refCount--;0===s.refCount&&this._removeMaterial(q,r,p,n,b)}}b.remove(M.OBJECT,g.getId())}delete this._nodeId2Meta[a.id];this._notifyFeaturesChanged(0,d)}};k.prototype._emitFeaturesChangedEvent=function(){this.emit("features-changed",this._featuresChangedEvent);this._featuresChangedEvent=null;this._featuresChangedEventScheduled=!1};k.prototype._cancelFeaturesChangedEvent=function(){this._featuresChangedEventScheduled=!1};k.prototype._notifyFeaturesChanged=function(a,b){var c=this;null==this._featuresChangedEvent&&
(this._featuresChangedEvent={addedCount:0,removedCount:0});this._featuresChangedEvent.addedCount+=a;this._featuresChangedEvent.removedCount+=b;!this._featuresChangedEventScheduled&&null!=this._controller&&(this._featuresChangedEventScheduled=!0,this._controller.queueAnimationFrameFunctionCall(function(){return c._emitFeaturesChangedEvent()},null,null,function(){return c._cancelFeaturesChangedEvent()},null))};k.prototype._removeMaterial=function(a,b,c,d,e){e.remove(M.MATERIAL,a);if("none"!==b){a=this._texId2Meta[b];
var f=a.usedByEngineMats;d=f.indexOf(d);S(-1<d);f[d]=f[f.length-1];f.pop();if(1>f.length){if((d=a.engineTex)&&d!==this._initTexture)this.memEstimateTextureRemoved(d),e.remove(M.TEXTURE,a.engineTex.getId());a.engineTex=void 0;a.desiredLOD=-1;a.curLOD=-1;delete this._texId2Meta[b]}}delete this._matId2Meta[c][b];aa(this._matId2Meta[c])&&delete this._matId2Meta[c]};k.prototype._updateAllTextureLOD=function(){for(var a in this._texId2Meta)this._texId2Meta.hasOwnProperty(a)&&this._updateTextureLOD(this._texId2Meta[a])};
k.prototype._calcDesiredTextureLOD=function(a,b){var c,d=0;c=0;for(var e=Object.keys(a);c<e.length;c++){var f=a[e[c]],g=N.vec3.dist(f,this._controller.camPos),f=2*f[3]/g*this._controller.screenSizeFactor;f>d&&(d=f)}d/=9;for(c=b.length-1;0<c&&b[c].size<d;)c--;return c};k.prototype._updateTextureLOD=function(a){var b=this;a.desiredLOD=this._calcDesiredTextureLOD(a.featureMBS,a.images);if(a.curLOD!==a.desiredLOD&&(0>a.curLOD||!a.curLOD||0===a.desiredLOD||a.desiredLOD>a.curLOD||a.desiredLOD<a.curLOD-
1)){if(0===a.images.length)return;var c=a.images[a.desiredLOD],d=-1<a.encodingIdx?c.hrefConcat[a.encodingIdx]:c.hrefConcat;if(!this._requestedTexImageIds[c.id]){var e={metadata:{texMeta:a,image:c}};this._requestedTexImageIds[c.id]=!0;this._imageIsPartOfTextureBundle(c)?this._controller.streamDataSupplier.request(d,"binary",e).then(this._extractTextureImageFromBlob.bind(this)):this._controller.streamDataSupplier.request(d,"image",e).then(function(a,c,d,e){b._textureImageLoaded(a,c,e.image,e.texMeta)})}}a.engineTex||
(a.engineTex=this._initTexture,a.curLOD=-1);if(this.debugLODVis){c=g.fromHsv(270*(a.desiredLOD/a.images.length),100,100).toRgb().map(function(a){return a/255});for(d=0;d<a.usedByEngineMats.length;d++)a.usedByEngineMats[d].setParameterValues({ambient:c,diffuse:c})}};k.prototype._extractTextureImageFromBlob=function(a,b,c,d){var e=d.texMeta;if(0>e.desiredLOD||d.image.size>e.images[e.desiredLOD].size)delete this._requestedTexImageIds[d.image.id];else{var f=this;S("binary"===c);var g="";try{var h=c=0;
-1<e.encodingIdx?(c=d.image.byteOffset[e.encodingIdx],h=d.image.length[e.encodingIdx]):(c=d.image.byteOffset,h=d.image.length);var k=new Uint8Array(b,c,h),l=new Blob([k],{type:e.encoding}),g=window.URL.createObjectURL(l)}catch(m){g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIElEQVQ4T2P8zyD6n4ECwDhqAMNoGDCMhgEwDw2DdAAAdzkhQdS8dl8AAAAASUVORK5CYII\x3d",Q.error("error loading texture "+a+" "+m)}var n=new Image;n.onerror=function(){window.URL.revokeObjectURL(g);n.src="";n.onerror=
void 0;n.onload=void 0};n.onload=function(){f._controller.queueAnimationFrameFunctionCall(f._textureImageLoaded,f,[a,n,d.image,d.texMeta,g],void 0,1);window.URL.revokeObjectURL(g);n.src="";n.onerror=void 0;n.onload=void 0};n.src=g}};k.prototype._textureImageLoaded=function(a,b,c,d){delete this._requestedTexImageIds[c.id];if(!(0>d.desiredLOD)){a=d.images[d.desiredLOD];var e=d.images[d.curLOD];if(!this.isOverMemory()||!(null==e||c.size>e.size))if(!e||c.size>e.size&&c.size<=a.size||c.size<e.size&&c.size>=
a.size){if((e=d.engineTex)&&e!==this._initTexture)this.memEstimateTextureRemoved(e),this._stage.remove(M.TEXTURE,d.engineTex.getId());e=U(b,d,this._enableAtlasMipMaps,this._disableAtlasAnisotropy);d.engineTex=new J(b,d.id,e);this._stage.add(M.TEXTURE,d.engineTex);d.curLOD=d.desiredLOD;this.memEstimateTextureAdded(d.engineTex);b=d.engineTex.getId();for(e=0;e<d.usedByEngineMats.length;e++){var f=d.usedByEngineMats[e];null==this._colorOverride&&f.setParameterValues({textureId:b});f.metadata.originalTextureId=
b}c!==a&&(d.curLOD=d.images.indexOf(c),S(-1<d.curLOD),this._requestedTexImageIds[a.id]||(c={metadata:{texMeta:d,image:a}},this._requestedTexImageIds[a.id]=!0,this._controller.streamDataSupplier.request(a.hrefConcat,"binary",c).then(this._extractTextureImageFromBlob.bind(this))))}}};k.prototype._imageIsPartOfTextureBundle=function(a){return!this._controller.isMeshPyramid};k.prototype._setPolygonOffset=function(a,b){if(null!=this._nodeId2Meta[a.id]&&null!=this._nodeId2Meta[a.id].engineObjectsPerBundle)for(var c=
{polygonOffset:b},d=0;d<this._nodeId2Meta[a.id].engineObjectsPerBundle.length;d++)for(var e=this._nodeId2Meta[a.id].engineObjectsPerBundle[d],f=0;f<e.length;f++)for(var g=e[f].getGeometryRecords(),h=0;h<g.length;h++)for(var k=g[h].materials,l=0;l<k.length;l++)k[l].setParameterValues(c)};k.prototype._rendererChange=function(a){(this._currentRenderer=a)&&(a.colorInfo||a.sizeInfo)&&Q.warn("renderer.colorInfo and renderer.sizeInfo are not supported for Scene Services. Use visualVariables instead.")};
k.prototype._getRenderingInfo=function(a){var b=this._currentRenderer,c=b&&b.getSymbol(a);if(!c||!(c instanceof r))return null;var c={symbol:c},d,e;if(b&&b.visualVariables){a=b.getVisualVariableValues(a);for(b=0;b<a.length;b++){var f=a[b],g=f.variable.type;"color"===g?d=f.value:"opacity"===g&&(e=f.value)}}d&&(c.color=[d.r/255,d.g/255,d.b/255]);null!=e?c.opacity=e:d&&null!=d.a&&(c.opacity=d.a);return c};k.prototype._getSymbolFillColor=function(a){a=a.symbolLayers;for(var b=0;b<a.length;b++){var c=
a.getItemAt(b);if("Fill"===c.type&&c.material&&c.material.color)return a=c.material.color,[a.r/255,a.g/255,a.b/255,a.a]}};k.prototype._setObjectSymbology=function(a){if(!(this.layer instanceof V)){for(var b=a.getMetadata(),c=[],d=!1,e=b.faceRanges?b.faceRanges.length:1,f={attributes:{}},g=this.layer.objectIdField,h=this._currentRenderer&&this._currentRenderer.requiredFields,k=0;k<e;k++){null!=g&&null!=b.featureIds&&(f.attributes[g]=b.featureIds[k]);if(null!=h&&null!=b.attributeData)for(var l=0,m=
h;l<m.length;l++){var n=m[l];b.attributeData[n]&&(f.attributes[n]=b.attributeData[n][k])}var q=this._getRenderingInfo(f),l=null!=b.faceRanges?b.faceRanges[k]:null;q?(m=q.color,n=q.opacity,null==m||null==n?(q=this._getSymbolFillColor(q.symbol),m=x.overrideColor(m,n,q,q&&q[3],R)):m=x.overrideColor(m,n,null,null,R),1>m[3]&&(d=!0),c.push({faceRanges:l,color:m})):c.push({faceRanges:l,color:void 0})}this.layer.cachedDrawingInfo.color?a.setFacerangeColors(c,"replace"):a.setFacerangeColors(c,"blend");a=a.getGeometryRecords();
for(b=0;b<a.length;b++){c=a[b];for(e=0;e<c.materials.length;e++)f=c.materials[e],g=f.getParams().transparent,h=f.getParams().opacity,f.metadata.symbolIsTransparent=d,k=this._calcEngineMaterialTransparencyParams(f.metadata.i3sTex,f.metadata.i3sMatParams,f.metadata.symbolIsTransparent),(g!==k.transparent||h!==k.opacity)&&f.setParameterValues({transparent:k.transparent,opacity:k.opacity})}}};k.prototype._opacityChange=function(a){for(var b in this._matId2Meta)for(var c in this._matId2Meta[b]){a=this._matId2Meta[b][c].engineMat;
var d=a.getParams().transparent,e=a.getParams().opacity,f=this._calcEngineMaterialTransparencyParams(a.metadata.i3sTex,a.metadata.i3sMatParams,a.metadata.symbolIsTransparent);(d!==f.transparent||e!==f.opacity)&&a.setParameterValues({transparent:f.transparent,opacity:f.opacity})}};k.prototype.queryExtent=function(a){return this._ensureQueryEngine().queryExtent(a)};k.prototype.queryFeatureCount=function(a){return this._ensureQueryEngine().queryFeatureCount(a)};k.prototype.queryFeatures=function(a){return this._ensureQueryEngine().queryFeatures(a)};
k.prototype.queryObjectIds=function(a){return this._ensureQueryEngine().queryObjectIds(a)};k.prototype._ensureQueryEngine=function(){this._queryEngine||(this._queryEngine=this._createQueryEngine());return this._queryEngine};k.prototype._createQueryEngine=function(){var a=this,b={id:0,index:0,object:null,bbCorners:new Float64Array(24)};return new w({forAll:function(c){a._forAllFeatures(function(d,e,f){b.id=d;b.index=e;b.object=f;d=b.object.getMetadata().faceRanges[b.index];a._boundingBoxCornerPoints(d,
b.object,b.bbCorners);c(b)})},createGraphic:function(b,c){var d=a._createGraphic(b.index,b.object.getMetadata());return c&&c.length?a.whenGraphicAttributes(d,c):e.resolve(d)},createExtentBuilder:function(){return a._createExtentBuilder()},createVisibilityFilter:function(){return a._createVisibilityFilter()}},{enableObjectId:!0,enableOutFields:!!this.layer.objectIdField,addVisibilityFilter:!0})};k.prototype._createExtentBuilder=function(){var a=this.view.renderSpatialReference,b=this.view.spatialReference,
c=D.create(D.NEGATIVE_INFINITY),d=new Float64Array(24);return{add:function(e){H.bufferToBuffer(e.bbCorners,a,0,d,b,0,8)&&D.expandBuffer(c,d,0,8)},getExtent:function(){return new t({xmin:c[0],ymin:c[1],zmin:c[2],xmax:c[3],ymax:c[4],zmax:c[5],spatialReference:b})}}};k.prototype._createVisibilityFilter=function(){var a=this.view._stage.getCamera().frustumPlanes,b=0;return function(c){c=B.conservativeFrustumConvexBuffer(a,c.bbCorners,0,8,b);return 0<=c?(b=c,!1):!0}};k.prototype._forAllFeatures=function(a){for(var b=
0,c=Object.keys(this._nodeId2Meta);b<c.length;b++)for(var d=this._nodeId2Meta[c[b]].engineObjects,e=0;e<d.length;e++)for(var f=d[e],g=f.getMetadata().featureIds,h=0;h<g.length;h++)a(g[h],h,f)};k.prototype._createGraphic=function(a,b){var c={};c[this._getObjectIdField()]=b.featureIds[a];for(var d=0,e=Object.keys(b.attributeData);d<e.length;d++){var f=e[d];c[f]=b.attributeData[f][a]}c=new p(null,null,c);c.layer=this.layer;return c};k.prototype._boundingBoxCornerPoints=function(a,b,c){a=b.geometries[0].calculateAABB(0,
a);for(var d=0;8>d;++d){var e=[d&1?a[0]:a[3],d&2?a[1]:a[4],d&4?a[2]:a[5]];N.mat4d.multiplyVec3(b.objectTransformation,e);c[3*d]=e[0];c[3*d+1]=e[1];c[3*d+2]=e[2]}return c};b([c.property()],k.prototype,"layer",void 0);b([c.property()],k.prototype,"view",void 0);b([c.property()],k.prototype,"_controller",void 0);b([c.property({dependsOn:["_controller.updating"]})],k.prototype,"updating",void 0);b([c.property({readOnly:!0,aliasOf:"_controller.updatingPercentage"})],k.prototype,"updatingPercentageValue",
void 0);return k=b([c.subclass("esri.views.3d.layers.SceneLayerView3D")],k)}(c.declared(q,y))})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(n,k,a,b){n=k.getObject("color",!0,n);n.Color=a;n.blend=a.blendColors;n.fromRgb=a.fromRgb;n.fromHex=a.fromHex;n.fromArray=a.fromArray;n.fromString=a.fromString;n.greyscale=b.makeGrey;k.mixin(n,{fromCmy:function(b,f,e){k.isArray(b)?(f=b[1],e=b[2],b=b[0]):k.isObject(b)&&(f=b.m,e=b.y,b=b.c);f=1-f/
100;e=1-e/100;return new a({r:Math.round(255*(1-b/100)),g:Math.round(255*f),b:Math.round(255*e)})},fromCmyk:function(b,f,e,h){k.isArray(b)?(f=b[1],e=b[2],h=b[3],b=b[0]):k.isObject(b)&&(f=b.m,e=b.y,h=b.b,b=b.c);f/=100;e/=100;h/=100;b=1-Math.min(1,b/100*(1-h)+h);f=1-Math.min(1,f*(1-h)+h);e=1-Math.min(1,e*(1-h)+h);return new a({r:Math.round(255*b),g:Math.round(255*f),b:Math.round(255*e)})},fromHsl:function(b,f,e){k.isArray(b)?(f=b[1],e=b[2],b=b[0]):k.isObject(b)&&(f=b.s,e=b.l,b=b.h);f/=100;for(e/=100;0>
b;)b+=360;for(;360<=b;)b-=360;var h,d;120>b?(h=(120-b)/60,d=b/60,b=0):240>b?(h=0,d=(240-b)/60,b=(b-120)/60):(h=(b-240)/60,d=0,b=(360-b)/60);h=2*f*Math.min(h,1)+(1-f);d=2*f*Math.min(d,1)+(1-f);b=2*f*Math.min(b,1)+(1-f);0.5>e?(h*=e,d*=e,b*=e):(h=(1-e)*h+2*e-1,d=(1-e)*d+2*e-1,b=(1-e)*b+2*e-1);return new a({r:Math.round(255*h),g:Math.round(255*d),b:Math.round(255*b)})}});n.fromHsv=function(b,f,e){k.isArray(b)?(f=b[1],e=b[2],b=b[0]):k.isObject(b)&&(f=b.s,e=b.v,b=b.h);360==b&&(b=0);f/=100;e/=100;var h,
d,l;if(0==f)d=l=h=e;else{var g=b/60;b=Math.floor(g);var m=g-b,g=e*(1-f),n=e*(1-f*m);f=e*(1-f*(1-m));switch(b){case 0:h=e;d=f;l=g;break;case 1:h=n;d=e;l=g;break;case 2:h=g;d=e;l=f;break;case 3:h=g;d=n;l=e;break;case 4:h=f;d=g;l=e;break;case 5:h=e,d=g,l=n}}return new a({r:Math.round(255*h),g:Math.round(255*d),b:Math.round(255*l)})};k.extend(a,{toCmy:function(){var a=1-this.g/255,b=1-this.b/255;return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*a),y:Math.round(100*b)}},toCmyk:function(){var a,
b,e,h=this.r/255;a=this.g/255;b=this.b/255;e=Math.min(1-h,1-a,1-b);a=(1-a-e)/(1-e);b=(1-b-e)/(1-e);return{c:Math.round(100*((1-h-e)/(1-e))),m:Math.round(100*a),y:Math.round(100*b),b:Math.round(100*e)}},toHsl:function(){var a=this.r/255,b=this.g/255,e=this.b/255,h=Math.min(a,e,b),d=Math.max(a,b,e),k=d-h,g=0,m=0,h=(h+d)/2;0<h&&1>h&&(m=k/(0.5>h?2*h:2-2*h));0<k&&(d==a&&d!=b&&(g+=(b-e)/k),d==b&&d!=e&&(g+=2+(e-a)/k),d==e&&d!=a&&(g+=4+(a-b)/k),g*=60);return{h:g,s:Math.round(100*m),l:Math.round(100*h)}},
toHsv:function(){var a=this.r/255,b=this.g/255,e=this.b/255,h=Math.min(a,e,b),d=Math.max(a,b,e),h=d-h,k=null,g=0==d?0:h/d;0==g?k=0:(k=a==d?60*(b-e)/h:b==d?120+60*(e-a)/h:240+60*(a-b)/h,0>k&&(k+=360));return{h:k,s:Math.round(100*g),v:Math.round(100*d)}}});return n})},"dojox/main":function(){define(["dojo/_base/kernel"],function(n){return n.dojox})},"esri/views/3d/layers/i3s/I3SProjectionUtil":function(){define(["../../support/projectionUtils","../../lib/glMatrix","../../webgl-engine/lib/Util"],function(n,
k,a){var b=k.vec3d,c=k.mat4d,f=a.assert,e={PER_VERTEX:"perVertex",BOUNDINGBOX:"boundingBox",NO_REPROJECTION:"noReprojection"},h=new Float64Array(3E3);return{ReprojectionTypes:e,reprojectPoints:function(a,b,f,h,k,p,r){a===e.PER_VERTEX?f=this.reprojectPointsPerVertex(b,f,k,p,r,h):a===e.BOUNDINGBOX?f=this.reprojectBoundingBox(b,f,k,p,r):(a=c.create(),c.identity(a),b=c.create(),n.computeLinearTransformation(k,f,b,r),f={localTrafo:a,globalTrafo:b});return f},reprojectPointsPerVertex:function(a,b,e,f,k,
p){var r=c.create();n.computeLinearTransformation(e,b,r,k);var t=c.create(),t=c.inverse(r,t),s=c.create();c.identity(s);if(!p){p=[0,0,0];var u=a.length/3;n.vectorToVector(b,e,p,f);for(e=b=0;e<u;e+=1E3){var v=Math.min(1E3,u-e);for(b=0;b<v;b++)h[3*b]=a[3*(e+b)]+p[0],h[3*b+1]=a[3*(e+b)+1]+p[1],h[3*b+2]=a[3*(e+b)+2]+p[2];n.bufferToBuffer(h,f,0,h,k,0,v);var w,x,y;for(b=0;b<v;b++)w=h[3*b],x=h[3*b+1],y=h[3*b+2],a[3*(e+b)]=t[0]*w+t[4]*x+t[8]*y+t[12],a[3*(e+b)+1]=t[1]*w+t[5]*x+t[9]*y+t[13],a[3*(e+b)+2]=t[2]*
w+t[6]*x+t[10]*y+t[14]}}return{localTrafo:s,globalTrafo:r}},reprojectNormalsPerVertex:function(a,b,e,h,k){f(h.equals(n.SphericalRenderSpatialReference));h=c.create();n.computeLinearTransformation(e,b,h,k);b=c.create();b=c.inverse(h,b);e=a.length/3;for(var p,r=0;r<e;r++)k=a[3*r],h=a[3*r+1],p=a[3*r+2],a[3*r]=b[0]*k+b[4]*h+b[8]*p,a[3*r+1]=b[1]*k+b[5]*h+b[9]*p,a[3*r+2]=b[2]*k+b[6]*h+b[10]*p},reprojectBoundingBox:function(a,e,f,h,k){for(var p=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,
-Number.MAX_VALUE,-Number.MAX_VALUE],t=0;t<a.length/3;t++)for(var s=[a[3*t],a[3*t+1],a[3*t+2]],u=0;3>u;u++)p[u]=Math.min(p[u],s[u]),r[u]=Math.max(r[u],s[u]);t=this.geographicToProjected(e,f,h);b.add(t,p,p);b.add(t,r,r);for(t=0;3>t;t++)r[t]==p[t]&&(r[t]+=1);t=[[p[0],p[1],p[2]],[r[0],p[1],p[2]],[p[0],r[1],p[2]],[p[0],p[1],r[2]]];for(s=0;4>s;s++)u=t[s],n.vectorToVector(u,h,u,k);h=b.subtract(t[1],t[0],b.create());s=b.subtract(t[2],t[0],b.create());u=b.subtract(t[3],t[0],b.create());b.scale(h,1/(r[0]-
p[0]));b.scale(s,1/(r[1]-p[1]));b.scale(u,1/(r[2]-p[2]));var p=b.length(h),r=b.length(s),v=b.length(u);if(3<Math.abs(p-r)||3<Math.abs(p-v)||3<Math.abs(r-v)){for(t=0;t<a.length/3;t++)a[3*t]*=p,a[3*t+1]*=r,a[3*t+2]*=v;b.normalize(h);b.normalize(s);b.normalize(u)}a=c.createFromMatrixRowMajor([h[0],s[0],u[0],0,h[1],s[1],u[1],0,h[2],s[2],u[2],0,0,0,0,1]);p=[0,0,0,0];n.vectorToVector(e,f,p,k);return{globalTrafo:c.createFromMatrixRowMajor([1,0,0,p[0],0,1,0,p[1],0,0,1,p[2],0,0,0,1]),localTrafo:a}},geographicToProjected:function(a,
b,c){return 4326===c.wkid?[a[0],a[1],a[2]]:a}}})},"esri/views/3d/layers/i3s/I3SQueryEngine":function(){define("require exports dojo/promise/all ../../../../core/promiseUtils ../../../../core/Error ../../../../tasks/support/FeatureSet".split(" "),function(n,k,a,b,c,f){return function(){function e(a,b){this._support=a;this._options=b}e.prototype.queryExtent=function(a){var b=this;return this._rejectUnsupported(a).then(function(){var c=0,e=b._support.createExtentBuilder();b._forAllQueried(a,function(a){c++;
e.add(a)});return{count:c,extent:0===c?null:e.getExtent()}})};e.prototype.queryFeatureCount=function(a){var b=this;return this._rejectUnsupported(a).then(function(){var c=0;b._forAllQueried(a,function(){return c++});return c})};e.prototype.queryFeatures=function(b){var c=this;return this._rejectUnsupported(b).then(function(){var e=[],f=b&&b.outFields;c._forAllQueried(b,function(a){e.push(c._support.createGraphic(a,f))});return a(e)}).then(function(a){var b=new f;b.features=a;return b})};e.prototype.queryObjectIds=
function(a){var b=this;return this._rejectUnsupported(a).then(function(){var c=[];b._forAllQueried(a,function(a){return c.push(a.id)});return c})};e.prototype._forAllQueried=function(a,b){var c=[];if(a&&a.objectIds){var e=a.objectIds;c.push(function(a){return 0<=e.indexOf(a.id)})}this._options.addVisibilityFilter&&c.push(this._support.createVisibilityFilter());this._support.forAll(function(a){for(var e=0;e<c.length;e++)if(!c[e](a))return;b(a)})};e.prototype._rejectUnsupported=function(a){if(null==
a)return b.resolve();var d=function(a){return b.reject(new c("Unsupported Query","Unsupported property '"+a+"'"))};return null!=a.distance?d("distance"):null!=a.geometryPrecision?d("geometryPrecision"):a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length?d("groupByFieldsForStatistics"):null!=a.maxAllowableOffset?d("maxAllowableOffset"):a.multipatchOption?d("multipatchOption"):null!=a.num?d("num"):a.orderByFields&&a.orderByFields.length?d("orderByFields"):a.outSpatialReference?d("outSpatialReference"):
a.outStatistics&&a.outStatistics.length?d("outStatistics"):a.pixelSize?d("pixelSize"):a.quantizationParameters?d("quantizationParameters"):a.relationParam?d("relationParam"):a.returnDistinctValues?d("returnDistinctValues"):null!=a.start?d("start"):a.text?d("text"):a.timeExtent?d("timeExtent"):a.where?d("where"):a.geometry?d("geometry"):!this._options.enableOutFields&&a.outFields&&a.outFields.length?d("outFields"):!this._options.enableObjectId&&a.objectIds&&a.objectIds.length?d("objectIds"):b.resolve()};
return e}()})},"esri/views/3d/webgl-engine/lib/base64Binary":function(){define(["require","exports"],function(n,k){function a(a){var c=b[a.charAt(a.length-1)],h=b[a.charAt(a.length-2)],d=3*(a.length/4);64===c&&d--;64===h&&d--;c=new ArrayBuffer(d);h=new Uint8Array(c);a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var k=0,g=0;g<d;g+=3){var m=b[a.charAt(k++)],n=b[a.charAt(k++)],p=b[a.charAt(k++)],r=b[a.charAt(k++)],t=(n&15)<<4|p>>2,s=(p&3)<<6|r;h[g]=m<<2|n>>4;64!==p&&(h[g+1]=t);64!==r&&(h[g+2]=s)}return c}
for(var b={},c=0;65>c;c++)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[c]]=c;k.decode=a;k.decodeFloat32=function(b){return new Float32Array(a(b))};k.decodeUint32=function(b){return new Uint32Array(a(b))};k.decodeInt32=function(b){return new Int32Array(a(b))};k.encode=function(a){var b;b=a instanceof Uint8Array?a:new Uint8Array(b.buffer,b.byteOffset,b.byteLength);a=b.length%3;for(var c="",d,k=0,g=b.length-a;k<g;k+=3)d=(b[k]<<16)+(b[k+1]<<8)+b[k+2],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>
18&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d&63];switch(a){case 1:d=b[b.length-1];c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>2];c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d<<4&63];c+="\x3d\x3d";break;case 2:d=(b[b.length-2]<<8)+b[b.length-1],
c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>10],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d>>4&63],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"[d<<2&63],c+="\x3d"}return c}})},"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Popup/templates/PopupRenderer.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.container}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3cdiv class\x3d"${_css.loadingSpinnerContainer}"\x3e\x3cspan class\x3d"${_css.iconLoading} ${_css.spinner}"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_contentNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/Attribution/templates/Attribution.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.sources}" data-dojo-attach-point\x3d"_sourcesNode"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.poweredBy}"\x3ePowered by \x3ca target\x3d"_blank" href\x3d"http://www.esri.com/" class\x3d"${_css.link}"\x3eEsri\x3c/a\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Compass/templates/Compass.html":'\x3cdiv role\x3d"button" tabindex\x3d"0"\x3e\r\n  \x3cspan data-dojo-attach-point\x3d"_iconNode" aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.rotationIcon}" title\x3d"${_i18n.reset}"\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"${_css.text}"\x3e${_i18n.reset}\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/NavigationToggle/templates/NavigationToggle.html":'\x3cdiv data-dojo-attach-point\x3d"_navigationToggleNode" title\x3d"${_i18n.toggle}"\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.panButton}"\r\n       data-dojo-attach-point\x3d"_panButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.panIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.rotateButton}"\r\n       data-dojo-attach-point\x3d"_rotateButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.rotationIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Zoom/templates/Zoom.html":'\x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.disabled}"\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomInNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomIn}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomInIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomIn}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomOutNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomOut}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomOutIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomOut}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/views/3d/environment/materials/SimpleAtmosphereMaterial.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"vsSimpleAtmosphere"\x3e\x3c![CDATA[\r\n  uniform mat4 proj;\r\n  uniform mat4 view;\r\n\r\n#ifndef PANORAMIC\r\n\r\n  const float TWICEPI \x3d 2.0*3.14159265;\r\n  const float ATMOSPHERE_RIM_SEGMENTS \x3d 128.0;\r\n\r\n  uniform vec3 silCircleCenter;\r\n  uniform vec3 silCircleV1;\r\n  uniform vec3 silCircleV2;\r\n  uniform vec2 texV;\r\n\r\n#endif\r\n\r\n  uniform vec3 lightDirection;\r\n\r\n  attribute vec3 $position;\r\n  varying vec2 vtc;\r\n  varying float falloff;\r\n\r\n  void main(void) {\r\n\r\n#ifdef PANORAMIC\r\n\r\n    vec3 pos \x3d $position;\r\n    float ndotl \x3d lightDirection.z;\r\n    vtc \x3d vec2(0, $position.z+0.05);\r\n\r\n#else\r\n\r\n    float phi \x3d $position.x * (TWICEPI / ATMOSPHERE_RIM_SEGMENTS) + 1.0;\r\n    vec3 pos \x3d (sin(phi) * silCircleV1 + cos(phi) * silCircleV2 + silCircleCenter) * $position.y;\r\n    float ndotl \x3d dot(normalize(pos), lightDirection);\r\n\r\n    vtc.x \x3d $position.x / ATMOSPHERE_RIM_SEGMENTS;\r\n    vtc.y \x3d texV.x * (1.0 - $position.z) + texV.y * $position.z;\r\n\r\n#endif\r\n\r\n    falloff \x3d max(0.0, (smoothstep(-1.0, 0.8, ndotl + ndotl)));\r\n\r\n    gl_Position \x3d proj * view * vec4(pos, 1.0);\r\n    gl_Position.z \x3d gl_Position.w; // project atmosphere onto the far plane\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fsSimpleAtmosphere"\x3e\x3c![CDATA[\r\n  precision mediump float;\r\n\r\n  uniform sampler2D tex;\r\n  uniform vec4 color;\r\n  varying vec2 vtc;\r\n  varying float falloff;\r\n\r\n  void main() {\r\n    vec4 texColor \x3d texture2D(tex, vtc);\r\n    gl_FragColor \x3d texColor * color * falloff;\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/3d/environment/materials/RealisticAtmosphereMaterial.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\r\n\x3csnippets\x3e\r\n\r\n\x3c!--Vertex Shader for Atmosphere--\x3e\r\n\x3csnippet name\x3d"vsRealisticAtmosphere"\x3e\x3c![CDATA[\r\n//\r\n// Based on Atmospheric scattering vertex shader by Sean O\'Neil from GPU Gems 2 Chapter 16.\r\n//\r\n// Link:                   http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter16.html\r\n// Download Portal:        http://http.download.nvidia.com/developer/GPU_Gems_2/CD/Index.html\r\n// Unmodified Source Code: http://http.download.nvidia.com/developer/GPU_Gems_2/CD/Content/16.zip\r\n//\r\n// Adapted for WebGIS by Jascha Gr\u00fcbel (jgruebel@esri.com), Z\u00fcrich 2015\r\n//\r\n\r\n  precision mediump  float;\r\n\r\n  //Camera\r\n  uniform vec2 halfSizeNearPlane;\r\n  uniform vec3 v3CameraUp;\r\n  uniform vec3 v3CameraRight;\r\n  uniform vec3 v3CameraDir;\r\n  uniform vec2 v2CameraCenterOffset;\r\n\r\n  //Attributes\r\n  attribute vec3 $position;\r\n  attribute vec2 $uv0;\r\n\r\n  //Varyings\r\n  varying vec3 v3WorldRay;\r\n  varying vec2 vtc;\r\n\r\n#ifdef HAZE\r\n  varying vec3 v3EyeDir;\r\n#endif\r\n\r\n  void main(void) {\r\n    vec3 v3Pos \x3d $position;\r\n    vtc \x3d $uv0;\r\n    vec2 rayvtc \x3d $uv0 - v2CameraCenterOffset;\r\n\r\n#ifdef HAZE\r\n    v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\r\n#else\r\n    vec3 v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\r\n#endif\r\n    v3WorldRay \x3d v3EyeDir.z*v3CameraDir + v3EyeDir.y*v3CameraUp + v3EyeDir.x*v3CameraRight;\r\n    gl_Position \x3d vec4(v3Pos, 1.0);\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"atmosphereScaleFunction"\x3e\x3c![CDATA[\r\n  //Approximation for inner integral based on a radii ratio of 10.25:10\r\n  float scale(float fCos){\r\n    float x \x3d 1.0 - fCos;\r\n    return exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"toneMapperConstants"\x3e\x3c![CDATA[\r\n#ifdef HAZE\r\n  const float fOneOverGamma \x3d 1.0;//Gamma \x3d 1.0\r\n#else\r\n  const float fOneOverGamma \x3d 0.454545; // Gamma \x3d 2.2\r\n#endif\r\n  const vec3 v3OneOverGamma \x3d vec3(fOneOverGamma);\r\n\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"exponentialToneMapper"\x3e\x3c![CDATA[\r\n  //ToneMapping operators\r\n  vec3 expTM(vec3 inputColor,float exposure){\r\n      return pow(1.0 - exp(inputColor * -exposure), v3OneOverGamma);\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"reinhardToneMapper"\x3e\x3c![CDATA[\r\n  vec3 reinhardTM(vec3 inputColor, float exposure){\r\n      vec3 intermediate \x3d inputColor *exposure;\r\n      intermediate /\x3d (1.0+intermediate);\r\n      return pow(intermediate, v3OneOverGamma);\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"HSVColorSpace"\x3e\x3c![CDATA[\r\n//based on http://gamedev.stackexchange.com/a/59808\r\n// Hue in range [0,1] instead of 360\u00b0\r\nvec3 rgb2hsv(vec3 c)\r\n{\r\n    vec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\r\n    vec4 p \x3d mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\r\n    vec4 q \x3d mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\r\n\r\n    float d \x3d q.x - min(q.w, q.y);\r\n    float e \x3d 1.0e-10;\r\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\r\n}\r\n\r\nvec3 hsv2rgb(vec3 c)\r\n{\r\n    vec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n    vec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"atmosphereUniformsConstantsVaryings"\x3e\x3c![CDATA[\r\n\r\n  //Light\r\n  uniform vec3 v3LightDir;      // The direction vector to the light source\r\n  uniform vec3 v3InvWavelength; // 1 / pow(wavelength, 4) for the red, green, and blue channels\r\n  uniform vec3 v3InvWavelengthScaled; //v3InvWavelength * fKr4PI + fKm4PI\r\n\r\n  //Radii\r\n  uniform vec4 v4Radii; // inner, inner^2, outer, outer^2,\r\n\r\n  //Atmosphere\r\n  const float fKrESun \x3d 0.075;        // Kr * ESun \x3d 0.005 * 15.0\r\n  const float fKmESun \x3d 0.015;        // Km * ESun \x3d 0.005 * 15\r\n  //uniform float fScale;         // 1 / (fOuterRadius - fInnerRadius)\r\n  //uniform float fScaleDepth;    // The scale depth (i.e. the altitude at which the atmosphere\'s average density is found)\r\n  //uniform float fScaleOverScaleDepth; // fScale / fScaleDepth\r\n  //uniform float fOneOverScaleDepth; // 1.0 / fScaleDepth\r\n\r\n  //uniform float fScaleDepthBlue;    // The scale depth (i.e. the altitude at which the atmosphere\'s average density is found)\r\n  //uniform float fScaleOverScaleDepthBlue; // fScale / fScaleDepth\r\n  //uniform float fOneOverScaleDepthBlue; // 1.0 / fScaleDepth\r\n\r\n  uniform vec4 v4AtmosParams1; //(fScale,fScaleDepth,fScaleOverScaleDepth,fOneOverScaleDepth)\r\n  uniform vec4 v4AtmosParams2; //(g,fScaleDepthBlue,fScaleOverScaleDepthBlue,fOneOverScaleDepthBlue)\r\n#ifndef HAZE\r\n  uniform vec4 v4AtmosParams3; //(g2,fMiePhaseCoefficients,fLowerAlphaBlendBound,fOneOverOuterRadiusMinusAlphaBlendBound)\r\n#endif\r\n\r\n  //Camera\r\n  uniform vec3 v3CameraPos;     // The camera\'s current position\r\n  //uniform float fCameraHeight;  // The camera\'s current height\r\n  //uniform float fCameraHeight2; // fCameraHeight^2\r\n  //uniform float fC; //fCameraHeight2 - fOuterRadius2; // C \x3d ||o-c||^2 - r^2\r\n  //uniform float fCSur; //fCameraHeight2 - (fInnerRadius2 - 63756370000.0); // C \x3d ||o-c||^2 - r^2\r\n  uniform vec4 v4SphereComp; //The camera\'s current height, CameraHeight^2,fC,fCSur\r\n  uniform vec2 nearFar;\r\n\r\n  //Camera HDR\r\n#ifdef HAZE\r\n  const float fExposure \x3d 1.5;\r\n#else\r\n  const float fExposure \x3d 2.0;\r\n#endif\r\n\r\n#ifdef HAZE\r\n  //Depth texture\r\n  uniform sampler2D tDepth;\r\n#endif\r\n\r\n  //Testing variables\r\n  uniform float showTest;\r\n\r\n  //Varyings\r\n  varying vec3 v3EyeDir;\r\n  varying vec3 v3WorldRay;\r\n  varying vec2 vtc;\r\n\r\n  //Loop constants for integral approximation\r\n  const float fSamples \x3d 5.0;\r\n  const int maxSamples \x3d 5;\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmospherePrecomputation"\x3e\x3c![CDATA[\r\n    float fInnerRadius \x3d v4Radii[0];   // The inner (planetary) radius\r\n    float fInnerRadius2 \x3d v4Radii[1];  // fInnerRadius^2\r\n    float fOuterRadius \x3d v4Radii[2];   // The outer (atmosphere) radius\r\n    float fOuterRadius2 \x3d v4Radii[3];  // fOuterRadius^2\r\n\r\n    float fCameraHeight \x3d v4SphereComp[0];\r\n    float fCameraHeight2 \x3d v4SphereComp[1];\r\n    float fC \x3d v4SphereComp[2];\r\n    float fCSur \x3d v4SphereComp[3];\r\n\r\n#ifdef PLANAR\r\n    vec3 cameraPosition \x3d vec3(0.0,0.0,fCameraHeight);\r\n#else\r\n    vec3 cameraPosition \x3d v3CameraPos;\r\n#endif\r\n\r\n    //Debug variables\r\n    vec3 test \x3d vec3(0.0,0.0,0.0);\r\n\r\n    //Obtain ray from Camera\r\n    vec3 worldSpaceRay \x3d normalize(v3WorldRay);\r\n\r\n    //Compute Atmosphere intersection; i.e. ray/sphere intersection\r\n    float B \x3d 2.0 * dot(cameraPosition, worldSpaceRay); // B \x3d 2(l * (o-c))\r\n    float det \x3d B*B - 4.0 * fC; // det \x3d B^2 - 4.0* C\r\n\r\n    //idealized sphere intersection to discard early some pixels\r\n    float detSur \x3d B*B - 4.0 * fCSur; // det \x3d B^2 - 4.0* C\r\n\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmosphereDiscardPixels"\x3e\x3c![CDATA[\r\n      bool continueComputation \x3d true;\r\n#ifdef HAZE\r\n      // only use red channel from depth texture.\r\n      // see \'Issues\' at https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture\r\n      float depthSample \x3d texture2D(tDepth, vtc).r;\r\n\r\n      float zNear \x3d nearFar[0];\r\n      float zFar \x3d nearFar[1];\r\n\r\n      // http://web.archive.org/web/20130416194336/http://olivers.posterous.com/linear-depth-in-glsl-for-real\r\n      float zNorm \x3d 2.0 * depthSample - 1.0;\r\n      float linDepth \x3d 2.0 * zNear * zFar /\r\n        (zFar + zNear - zNorm * (zFar - zNear));\r\n\r\n      float nearSurfaceT;\r\n      if (detSur\x3e0.0){\r\n        nearSurfaceT \x3d 0.5 *(-B - sqrt(detSur));\r\n      }\r\n\r\n      float rayEndT;\r\n\r\n      // find intersections with ground, but only between the near and far\r\n      // clipping planes.\r\n      if (depthSample \x3c 1.0 \x26\x26 depthSample \x3e 0.0) {\r\n        vec3 cameraSpaceRay \x3d normalize(v3EyeDir);\r\n        cameraSpaceRay /\x3d cameraSpaceRay.z;\r\n        cameraSpaceRay *\x3d linDepth;\r\n#ifndef PLANAR\r\n        if((fCameraHeight-fInnerRadius)\x3e8000000.0 \x26\x26 detSur\x3e0.0){\r\n          rayEndT \x3d nearSurfaceT;\r\n        } else  if ((fCameraHeight-fInnerRadius)\x3e2000000.0 \x26\x26 detSur\x3e0.0){\r\n          rayEndT \x3d mix(length(cameraSpaceRay),nearSurfaceT,((fCameraHeight-fInnerRadius)-2000000.0)/6000000.0);\r\n        } else {\r\n          rayEndT \x3d length(cameraSpaceRay);\r\n        }\r\n#else\r\n        rayEndT \x3d length(cameraSpaceRay);\r\n#endif\r\n      } else {\r\n        continueComputation \x3d false;\r\n      }\r\n#ifdef PLANAR\r\n      if (16500.0+ fInnerRadius \x3c fCameraHeight){\r\n        continueComputation \x3d false;\r\n      }\r\n#endif\r\n#else\r\n      if (detSur\x3e0.0){\r\n        float nearSurfaceT \x3d 0.5 *(-B - sqrt(detSur));\r\n        if (nearSurfaceT \x3e 0.0){\r\n          continueComputation \x3d false;\r\n        }\r\n      }\r\n#endif\r\n\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"atmosphereUnpackAddUniforms"\x3e\x3c![CDATA[\r\n        float fScale \x3d v4AtmosParams1.x;\r\n        vec2 v2ScaleDepth \x3d vec2(v4AtmosParams1.y,v4AtmosParams2.y);//fScaleDepth, fScaleDepthBlue\r\n        vec2 v2ScaleOverScaleDepth \x3d vec2(v4AtmosParams1.z,v4AtmosParams2.z);//fScaleOverScaleDepth, fScaleOverScaleDepthBlue\r\n        vec2 v2OneOverScaleDepth \x3d vec2(v4AtmosParams1.w,v4AtmosParams2.w);//fOneOverScaleDepth, fOneOverScaleDepthBlue\r\n\r\n#ifndef HAZE\r\n        float g \x3d v4AtmosParams2.x;\r\n        float g2 \x3d v4AtmosParams3.x;\r\n        float fMiePhaseCoefficients \x3d v4AtmosParams3.y;\r\n        float fLowerAlphaBlendBound \x3d v4AtmosParams3.z;\r\n        float fOneOverOuterRadiusMinusAlphaBlendBound \x3d v4AtmosParams3.w;\r\n#endif\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmosphereComputeRayAndLoopSetup"\x3e\x3c![CDATA[\r\n        float rayStartT \x3d 0.5 *(-B - sqrt(det)); //near intersection with atmosphere\r\n#ifdef HAZE\r\n        float nearT \x3d abs(rayStartT);\r\n        float farT \x3d abs(rayEndT);\r\n#else\r\n        float rayEndT \x3d 0.5 *(-B + sqrt(det)); //far intersection with atmosphere\r\n\r\n#endif\r\n\r\n        float fDistance;//calculate its scattering offset\r\n        // Calculate the ray\'s starting position\r\n        if (rayStartT \x3c 0.0)\r\n        { //ray starts from camera to far\r\n          rayStartT \x3d 0.0;\r\n#ifndef HAZE\r\n          fDistance \x3d fScale*(fInnerRadius - fCameraHeight);\r\n#endif\r\n        }\r\n#ifndef HAZE\r\n        else\r\n        {//outside atmosphere\r\n          fDistance \x3d -1.0;\r\n        }\r\n#endif\r\n\r\n        // Initialize the scattering loop variables\r\n        vec3 v3Start \x3d cameraPosition + worldSpaceRay * rayStartT;\r\n\r\n#ifdef HAZE\r\n        vec3 v3End \x3d cameraPosition + worldSpaceRay * rayEndT;\r\n\r\n        float fEndLength \x3d length(v3End);\r\n        float fLocalCameraHeight \x3d length(v3Start);\r\n\r\n        //computed for the original end point to get consistent light angles after possible inversions\r\n        float fLightAngle \x3d dot(v3LightDir, v3End) / fEndLength;\r\n\r\n        if (nearT \x3e farT)\r\n        {\r\n          if (fLocalCameraHeight \x3c fEndLength)\r\n          {\r\n            //Switch positive slopes for flipped rays\r\n            v3End \x3d cameraPosition + worldSpaceRay * rayStartT;\r\n            v3Start \x3d cameraPosition + worldSpaceRay * rayEndT;\r\n            worldSpaceRay *\x3d -1.0;\r\n            fEndLength \x3d length(v3End);\r\n            fLocalCameraHeight \x3d length(v3Start);\r\n          }\r\n          else if (fLocalCameraHeight \x3d\x3d fEndLength)\r\n          {// create minuscule fake slope for integration if the slope is zero\r\n            fLocalCameraHeight +\x3d 1.0; //BUGFIX, if the height of camera and ground is equal the equation breaks, add fake meter to camera height to get\r\n            //slope for the camera function\r\n          }\r\n        }\r\n\r\n        //Calculate its scattering offset\r\n        // Assumes camera constrains of WSV 3.8\r\n        float fCameraDepth;\r\n        float fCameraDepthBlue;\r\n        if (fLocalCameraHeight \x3e fOuterRadius)\r\n        {\r\n          fDistance \x3d fInnerRadius - fOuterRadius;\r\n        } else\r\n        {//outside atmosphere\r\n          fDistance \x3d fEndLength - fLocalCameraHeight;\r\n        }\r\n\r\n#endif\r\n        vec2 v2OpticalStartDepth \x3d exp(fDistance * v2OneOverScaleDepth);\r\n\r\n        float fRayLength \x3d rayEndT - rayStartT;\r\n        float fSampleLength \x3d fRayLength / fSamples;\r\n        float fScaledLength \x3d fSampleLength * fScale;\r\n        vec3 v3SampleRay \x3d worldSpaceRay * fSampleLength;\r\n        vec3 v3SamplePoint \x3d v3Start + v3SampleRay * 0.5;\r\n\r\n#ifdef HAZE\r\n        float fCameraAngle \x3d dot(-worldSpaceRay, v3End) / fEndLength;\r\n        float fScaleCameraAngle \x3d scale(fCameraAngle);\r\n        vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth;\r\n\r\n        float scaledValues \x3d scale(fLightAngle) + fScaleCameraAngle;\r\n        vec2 v2ScaledValuesDepth \x3d scaledValues * v2ScaleDepth;\r\n#else\r\n        float fCameraAngle \x3d dot(worldSpaceRay, v3Start / length(v3Start));\r\n        float angleMultiplier \x3d fCameraAngle\x3e0.0?fCameraAngle:0.0;\r\n\r\n        float fScaleCameraAngle \x3d scale(fCameraAngle);\r\n        vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth * v2ScaleDepth;\r\n#endif\r\n\r\n        //Loop variables\r\n        vec3 v3FrontColor \x3d vec3(0.0, 0.0, 0.0);\r\n        vec3 v3FrontColorBlue \x3d vec3(0.0, 0.0, 0.0);\r\n        vec3 v3Attenuate\x3d vec3(0.0, 0.0, 0.0);\r\n        vec3 v3AttenuateBlue \x3d vec3(0.0, 0.0, 0.0);\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmosphereComputeSampleContribution"\x3e\x3c![CDATA[\r\n          float fHeight \x3d length(v3SamplePoint);\r\n          vec2 v2Depth \x3d exp(v2ScaleOverScaleDepth * (fInnerRadius - fHeight));\r\n#ifdef HAZE\r\n          vec2 v2Scatter \x3d v2Depth*v2ScaledValuesDepth-v2CameraOffset;\r\n#else\r\n          float fLightAngle \x3d dot(v3LightDir, v3SamplePoint) / fHeight;\r\n          float fCameraAngle \x3d dot(worldSpaceRay, v3SamplePoint) / fHeight;\r\n          float fTempScaledValues \x3d scale(fLightAngle) - scale(fCameraAngle);\r\n          vec2 v2Scatter \x3d v2CameraOffset + fTempScaledValues*v2Depth* v2ScaleDepth;\r\n#endif\r\n          v3Attenuate \x3d exp(-v2Scatter.x * v3InvWavelengthScaled);\r\n          v3AttenuateBlue \x3d exp(-v2Scatter.y * v3InvWavelengthScaled);\r\n\r\n          v3FrontColor +\x3d v3Attenuate * v2Depth.x;\r\n          v3FrontColorBlue +\x3d v3AttenuateBlue * v2Depth.y;\r\n\r\n          v3SamplePoint +\x3d v3SampleRay;\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmosphereComputeHDRColors"\x3e\x3c![CDATA[\r\n        //Phase computation\r\n        //clamp to avoid numerical instability at fCos \x3d\x3d -1.0 (and close values) to display fake sun\r\n        float fCos \x3d clamp(dot(v3LightDir, -worldSpaceRay ),-0.9999999,1.0);\r\n        float fOnePlusCos2 \x3d fCos*fCos + 1.0;\r\n#ifdef HAZE\r\n        // Finally, scale the Rayleigh colors and set up the varying variables for the pixel shader\r\n        vec3 colorCoefficients \x3d (fScaledLength* 0.75 * fOnePlusCos2)*(fKrESun*v3InvWavelength+fKmESun);\r\n\r\n        //Scaled Length is only applied afterwards to save multiplications\r\n        vec3 v3Color \x3d colorCoefficients *v3FrontColor;\r\n        vec3 v3ColorBlue \x3d colorCoefficients *v3FrontColorBlue;\r\n#else\r\n        vec3 v3RayleighCoefficients \x3d (fScaledLength*0.75 * fOnePlusCos2*fKrESun)*v3InvWavelength;\r\n        float fMieCoefficients \x3d fScaledLength*fKmESun * fMiePhaseCoefficients * fOnePlusCos2 / pow(1.0 + g2 - 2.0*g*fCos, 1.5);\r\n\r\n        // Calculate the attenuation factor for the ground\r\n        vec3 v3Color \x3d v3RayleighCoefficients * v3FrontColor + fMieCoefficients * v3FrontColor;\r\n        vec3 v3ColorBlue \x3d v3RayleighCoefficients * v3FrontColorBlue + fMieCoefficients * v3FrontColorBlue;\r\n#endif\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\r\n\x3csnippet name\x3d"atmosphereComputePixelColor"\x3e\x3c![CDATA[\r\n\r\n\r\n        //HDR to LDR conversion\r\n        vec3 ldrBlue \x3d expTM(v3ColorBlue,2.0*fExposure);\r\n        vec3 ldrRed \x3d expTM(v3Color,fExposure);\r\n\r\n        //mix reddish and blueish atmosphere\r\n        vec3 LDR \x3d mix(ldrBlue,ldrRed,0.2);\r\n#ifdef HAZE\r\n        LDR *\x3d (1.0-fCameraAngle);\r\n        vec3 hsv \x3d rgb2hsv(LDR);\r\n        hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);//boost haze saturation by 50%\r\n        LDR \x3d hsv2rgb(hsv);\r\n        vec3 finalColor \x3d LDR;\r\n        // when rendering we specify the blend functions such that\r\n        // newDestColor \x3d oldDestColor*(1.0-finalColor) + finalColor\r\n#else\r\n        //reinhard tonemapper for looking upwards\r\n        vec3 ldrReinhard \x3d reinhardTM(v3Color,fExposure);\r\n        LDR +\x3d angleMultiplier*ldrReinhard;\r\n\r\n        //height dependent parameter to smooth out reddish atmosphere\r\n        float side \x3d (rayEndT+rayStartT)*0.5;\r\n        float atmoHeight \x3d sqrt(fCameraHeight2 - side*side);\r\n        float h2 \x3d clamp(1.0-(atmoHeight-fLowerAlphaBlendBound)/(fOuterRadius-fLowerAlphaBlendBound),0.0,1.0);\r\n\r\n        vec3 finalColor \x3d LDR*h2;\r\n        vec3 hsv \x3d rgb2hsv(finalColor);\r\n        hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);//boost sky saturation by 50%\r\n        finalColor \x3d hsv2rgb(hsv);\r\n#endif\r\n#ifdef PLANAR\r\n#ifndef HAZE\r\n        float alpha \x3d clamp(fCameraHeight-fInnerRadius,7000.0,30000.0);\r\n        alpha \x3d alpha / (30000.0-7000.0);\r\n        gl_FragColor \x3d vec4(finalColor, 1.0-alpha);\r\n#else\r\n        float alpha \x3d clamp(fCameraHeight-fInnerRadius,0.0,16500.0);\r\n        alpha \x3d alpha / (16500.0-0.0);\r\n        gl_FragColor \x3d vec4(finalColor, 1.0-alpha);\r\n#endif\r\n#else\r\n#ifndef HAZE\r\n        float alpha \x3d clamp(fCameraHeight-fInnerRadius,7000.0,30000.0);\r\n        alpha \x3d alpha / (30000.0-7000.0);\r\n        float atmosStrength \x3d clamp((length(ldrRed)-0.05)*1.05,0.0,1.0);\r\n        gl_FragColor \x3d vec4(finalColor, atmosStrength*clamp(1.0-(atmoHeight-fInnerRadius)/(fOuterRadius-fInnerRadius),0.0,1.0));\r\n#else\r\n        gl_FragColor \x3d vec4(finalColor, 1.0);\r\n#endif\r\n#endif\r\n\r\n\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3c!--Fragment Shader for Atmosphere--\x3e\r\n\x3csnippet name\x3d"fsRealisticAtmosphere"\x3e\x3c![CDATA[\r\n\r\n  precision mediump  float;\r\n\r\n$atmosphereUniformsConstantsVaryings\r\n\r\n$atmosphereScaleFunction\r\n\r\n  //Conversion implementation found in util.xml\r\n$rgba2float\r\n\r\n\r\n$toneMapperConstants\r\n$exponentialToneMapper\r\n#ifndef HAZE\r\n$reinhardToneMapper\r\n#endif\r\n\r\n$HSVColorSpace\r\n\r\n  void main()\r\n  {\r\n\r\n    $atmospherePrecomputation\r\n\r\n    //Inside Atmosphere\r\n    if (det \x3e\x3d 0.0){\r\n\r\n      $atmosphereDiscardPixels\r\n\r\n      if(continueComputation){\r\n\r\n        $atmosphereUnpackAddUniforms\r\n\r\n        $atmosphereComputeRayAndLoopSetup\r\n\r\n        // Now loop through the sample rays\r\n        for(int i\x3d0; i\x3cmaxSamples; i++)\r\n        {\r\n          $atmosphereComputeSampleContribution\r\n        }\r\n\r\n        $atmosphereComputeHDRColors\r\n\r\n        $atmosphereComputePixelColor\r\n\r\n        //Debug variable overlay\r\n        if(showTest\x3e0.0){\r\n          gl_FragColor \x3d vec4(test,1.0);\r\n        }\r\n\r\n      } else {//Not on surface\r\n        gl_FragColor \x3d vec4(0.0);\r\n      }\r\n    } else {//Outside Atmosphere\r\n      gl_FragColor \x3d vec4(0.0);\r\n    }\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/3d/environment/materials/StarMaterial.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"vertexShaderStar"\x3e\x3c![CDATA[\r\n\tprecision mediump float;\r\n\tuniform mat4 proj;\r\n\tuniform mat4 view;\r\n\tuniform mat4 model;\r\n\tuniform vec4 viewport;\r\n\r\n\tattribute vec3 $position;\r\n\tattribute vec4 $color;\r\n  attribute float $size;\r\n\r\n\tvarying vec4 vcolor;\r\n\tvarying float vsize;\r\n\r\n\t$matchPixelCenter\r\n\r\n\tvoid main(void) {\r\n\t\tvec4 posProj \x3d proj * view * model*vec4($position*1.0e25,1.0);//move infinitely far away\r\n\t\tgl_Position \x3d matchPixelCenter(posProj, viewport.zw); //pixel align position\r\n    gl_Position.z \x3d gl_Position.w; // project atmosphere onto the far plane\r\n\t\tvcolor \x3d $color/1.2;\r\n\t\tvsize \x3d size*5.0;\r\n\t\tgl_PointSize \x3d vsize;\r\n\t}\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fragmentShaderStar"\x3e\x3c![CDATA[\r\n\tprecision mediump float;\r\n\r\n\tvarying vec4 vcolor;\r\n\tvarying float vsize;\r\n\r\n\tvoid main() {\r\n\t\tfloat cap \x3d 0.7;\r\n\t\tfloat scale \x3d 1.0/cap;\r\n\t\tfloat helper \x3d clamp(length(abs(gl_PointCoord-vec2(0.5))),0.0,cap);\r\n\t\tfloat alpha \x3d clamp((cap-helper)*scale,0.0,1.0);\r\n\t\tfloat intensity \x3d alpha*alpha*alpha;\r\n\t\tif (vsize \x3c 3.0)\r\n\t\t\tintensity *\x3d 0.5;\r\n\t\tgl_FragColor \x3d vec4(1.0,1.0,1.0,intensity);\r\n\t\tgl_FragColor.xyz *\x3d vcolor.xyz;\r\n\t}\r\n]]\x3e\x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/views/3d/terrain/TerrainMaterial.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"vsTerrain"\x3e\x3c![CDATA[\r\n  precision mediump float;\r\n\r\n  uniform mat4 proj;\r\n  uniform mat4 view;\r\n  uniform vec3 origin;\r\n  uniform vec2 texOffset;\r\n  uniform float texScale;\r\n  uniform mat4 viewNormal;\r\n\r\n  attribute vec3 $position;\r\n  attribute vec2 $uv0;\r\n  varying vec2 vtc;\r\n  varying vec3 vpos;\r\n  varying vec3 vnormal;\r\n\r\n#if defined(WIREFRAME) || defined(TILE_BORDERS)\r\n  varying vec2 vuv;\r\n#endif\r\n\r\n#ifdef ATMOSPHERE\r\n  uniform vec3 lightDirection;\r\n  varying vec3 wpos;\r\n  varying vec3 wview;\r\n  varying vec3 wnormal;\r\n  varying vec3 wlight;\r\n#endif\r\n\r\n#ifdef OVERLAY\r\n  uniform vec2 overlayTexOffset;\r\n  uniform vec2 overlayTexScale;\r\n  varying vec2 vtcOverlay;\r\n#endif\r\n\r\n  void main(void) {\r\n    vpos \x3d $position;\r\n\r\n#ifdef SPHERICAL\r\n    vnormal \x3d normalize(vpos + origin);\r\n#else\r\n    vnormal \x3d vec3(0, 0, 1); // WARNING: up-axis dependent code\r\n#endif\r\n\r\n#ifdef ATMOSPHERE\r\n    wpos \x3d (view * vec4(vpos, 1.0)).xyz;\r\n    wnormal \x3d (viewNormal * vec4(normalize(vpos+origin), 1.0)).xyz;\r\n    wlight \x3d (view  * vec4(lightDirection, 1.0)).xyz;\r\n#endif\r\n\r\n#if defined(WIREFRAME) || defined(TILE_BORDERS)\r\n    vuv \x3d $uv0;\r\n#endif\r\n\r\n    gl_Position \x3d proj * view * vec4(vpos, 1.0);\r\n    vtc \x3d $uv0*texScale + texOffset;\r\n\r\n#ifdef OVERLAY\r\n    vtcOverlay \x3d $uv0*overlayTexScale + overlayTexOffset;\r\n#endif\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fsTerrainCommon"\x3e\x3c![CDATA[\r\n  uniform vec3 lightDirection;\r\n  uniform vec3 viewDirection;\r\n  uniform sampler2D depthTex;\r\n  uniform int shadowMapNum;\r\n  uniform vec4 shadowMapDistance;\r\n  uniform mat4 shadowMapMatrix[4];\r\n  uniform float depthHalfPixelSz;\r\n  uniform sampler2D ssaoTex;\r\n  uniform vec4 viewportPixelSz;\r\n  uniform sampler2D tex;\r\n  uniform float opacity;\r\n\r\n  varying vec3 vpos;\r\n  varying vec3 vnormal;\r\n  varying vec2 vtc;\r\n\r\n#if defined(WIREFRAME) || defined(TILE_BORDERS)\r\n  varying vec2 vuv;\r\n#endif\r\n\r\n#ifdef ATMOSPHERE\r\n  varying vec3 wpos;\r\n  varying vec3 wview;\r\n  varying vec3 wnormal;\r\n  varying vec3 wlight;\r\n#endif\r\n\r\n  const vec3 ambient \x3d vec3(0.2,0.2,0.2);\r\n  const vec3 diffuse \x3d vec3(0.8,0.8,0.8);\r\n  const float diffuseHardness \x3d 2.5;\r\n\r\n#ifdef OVERLAY\r\n  uniform sampler2D overlayTex;\r\n  uniform float overlayOpacity;\r\n  varying vec2 vtcOverlay;\r\n#endif\r\n\r\n#ifdef RECEIVE_SHADOWS\r\n\t$evalShadow\r\n#endif\r\n\r\n  float lum(vec3 c) {\r\n    float max \x3d max(max(c.r, c.g), c.b);\r\n    float min \x3d min(min(c.r, c.g), c.b);\r\n    return (min + max) * 0.5;\r\n  }\r\n\r\n#ifdef ATMOSPHERE\r\n  vec3 atmosphere(vec3 lightPos, vec3 normal, vec3 view) {\r\n    vec3 surfaceColor   \x3d vec3(0.0);\r\n    vec3 fuzzySpecColor \x3d vec3(1.0);\r\n    vec3 subColor       \x3d vec3(0.0);\r\n    float rollOff       \x3d 1.0;\r\n\r\n    vec3 Ln \x3d normalize(lightPos);\r\n    vec3 Nn \x3d normalize(normal);\r\n    vec3 Hn \x3d normalize(view + Ln);\r\n\r\n    float ldn \x3d dot(Ln, Nn);\r\n    float diffComp \x3d max(0.0, ldn);\r\n    float vdn \x3d 1.0 - dot(view, Nn);\r\n    float ndv \x3d dot(view, Ln);\r\n\r\n    vec3 diffContrib \x3d surfaceColor * diffComp;\r\n    float subLamb \x3d max(0.0, smoothstep(-rollOff, 1.0, ldn) - smoothstep(0.0, 1.0, ldn));\r\n\r\n    vec3 subContrib \x3d subLamb * subColor;\r\n    vec3 vecColor \x3d vec3(vdn);\r\n\r\n    vec3 diffuseContrib \x3d (subContrib + diffContrib);\r\n    vec3 specularContrib \x3d (vecColor * fuzzySpecColor);\r\n\r\n    return (diffContrib + specularContrib) * rollOff;\r\n  }\r\n#endif\r\n\r\n  void main() {\r\n    vec3 a \x3d ambient;\r\n\r\n    float shadow \x3d 0.0;\r\n#ifdef RECEIVE_SHADOWS\r\n    shadow \x3d evalShadow(vpos, 1.0 / gl_FragCoord.w, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\r\n#endif\r\n    float vndl \x3d dot(normalize(vnormal), lightDirection);\r\n    float k \x3d smoothstep(0.0, 1.0, clamp(vndl*diffuseHardness, 0.0, 1.0));\r\n    vec3 d \x3d (1.0 - shadow/1.8) * diffuse * k;\r\n\r\n    float ssao \x3d viewportPixelSz.w \x3c .0 ? 1.0 : texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\r\n    vec4 texCol \x3d texture2D(tex, vtc);\r\n\r\n#ifdef OVERLAY\r\n    if ((vtcOverlay.x \x3e 0.0) \x26\x26 (vtcOverlay.y \x3e 0.0) \x26\x26 (vtcOverlay.x \x3c 1.0) \x26\x26 (vtcOverlay.y \x3c 1.0)) {\r\n      vec4 overlayTexCol \x3d texture2D(overlayTex, vtcOverlay);\r\n      overlayTexCol *\x3d overlayOpacity;\r\n      texCol \x3d texCol * (1.0 - overlayTexCol.a) + overlayTexCol; // texCol and overlayTexCol have pre-multiplied alpha\r\n    }\r\n#endif\r\n\r\n    vec3 atm \x3d vec3(0.0);\r\n#ifdef ATMOSPHERE\r\n    float ndotl \x3d max(0.0, min(1.0, vndl));\r\n    atm \x3d atmosphere(wlight, wnormal, -viewDirection);\r\n    atm *\x3d max(0.0, min(1.0, (1.0-lum(texCol.rgb)*1.5))); //avoid atmosphere on bright base maps\r\n    atm *\x3d max(0.0, min(1.0, ndotl*2.0)); // avoid atmosphere on dark side of the globe\r\n#endif\r\n\r\n    vec3 color \x3d atm + texCol.rgb * (a + d) * ssao;\r\n    gl_FragColor \x3d vec4(color, texCol.a) * opacity;\r\n\r\n  // closing } is missing here, it\'s in the shaders using this snippet below\r\n\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fsTerrainWireframe"\x3e\x3c![CDATA[\r\n#ifdef GL_OES_standard_derivatives\r\n#extension GL_OES_standard_derivatives : enable\r\n#endif\r\n\r\n  precision mediump float;\r\n\r\n  struct WireframeSettings {\r\n    float width;\r\n    float falloff;\r\n    float subdivision;\r\n    vec4 color;\r\n    float wireOpacity;\r\n    float surfaceOpacity;\r\n    float near;\r\n    float far;\r\n  };\r\n\r\n  uniform WireframeSettings wireframe;\r\n\r\n    $fsTerrainCommon\r\n\r\n    vec2 dVuv;\r\n    vec2 vuvScaled \x3d vuv * wireframe.subdivision;\r\n    vec2 vuvMod \x3d fract(vuvScaled);\r\n\r\n#ifdef GL_OES_standard_derivatives\r\n    dVuv \x3d fwidth(vuvScaled);\r\n#else\r\n    // Something that reasonably works\r\n    dVuv \x3d vec2(0.05);\r\n#endif\r\n\r\n    vec2 edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\r\n                                  wireframe.width * dVuv, min(vuvMod, 1.0 - vuvMod));\r\n\r\n    float edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\r\n\r\n#ifdef WIREFRAME\r\n    gl_FragColor \x3d vec4(mix(gl_FragColor.rgb, wireframe.color.rgb, edgeFactor * wireframe.color.a),\r\n                        mix(wireframe.surfaceOpacity, wireframe.wireOpacity, edgeFactor));\r\n#endif\r\n\r\n\r\n#ifdef TILE_BORDERS\r\n    dVuv \x3d fwidth(vuv);\r\n    edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\r\n                              wireframe.width * dVuv, min(vuv, 1.0 - vuv));\r\n    edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\r\n\r\n    gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), edgeFactor);\r\n#endif\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fsTerrain"\x3e\x3c![CDATA[\r\n  precision mediump float;\r\n\r\n    $fsTerrainCommon\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"vsTerrainNormal"\x3e\x3c![CDATA[\r\n  uniform vec3 origin;\r\n  uniform mat4 proj;\r\n  uniform mat4 view;\r\n  uniform mat4 viewNormal;\r\n  attribute vec3 $position;\r\n  varying vec3 vnormal;\r\n\r\n  void main(void) {\r\n#ifdef SPHERICAL\r\n    vec4 normal \x3d vec4(normalize($position + origin), 1.0);\r\n#else\r\n    vec4 normal \x3d vec4(0.0, 1.0, 0.0, 1.0);\r\n#endif\r\n\r\n    gl_Position \x3d proj * view * vec4($position, 1.0);\r\n    vnormal \x3d normalize((viewNormal * normal).xyz);\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"vsTerrainDepthOnly"\x3e\x3c![CDATA[\r\n  precision mediump float;\r\n\r\n  uniform mat4 proj;\r\n  uniform mat4 view;\r\n\r\n  attribute vec3 $position;\r\n\r\n  void main() {\r\n    gl_Position \x3d proj * view * vec4($position, 1.0);\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3csnippet name\x3d"fsTerrainDepthOnly"\x3e\x3c![CDATA[\r\n  precision mediump float;\r\n\r\n  void main() {\r\n  }\r\n]]\x3e\x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/views/nls/SceneView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("../core/accessorSupport/watch dojo/_base/lang dojo/_base/kernel dojo/dom dojo/Deferred dojo/when ./View ./DOMContainer ./ViewAnimation ./animation/easing ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../Camera ../geometry/Point ../geometry/Extent ../geometry/ScreenPoint ../Viewpoint ../core/Scheduler ../core/sniff ../core/watchUtils ../core/promiseUtils ../core/Error ../core/Logger ../core/HandleRegistry ../webscene/Environment ./support/screenshotUtils ./3d/environment/SceneViewEnvironment ./3d/environment/SceneViewEnvironmentManager ./3d/constraints/SceneViewConstraints ./3d/input/SceneInputManager ./3d/lib/glMatrix ./3d/support/cameraUtils ./3d/support/viewpointUtils ./3d/support/projectionUtils ./3d/webgl-engine/Stage ./3d/webgl-engine/lib/Selector ./3d/support/RenderCoordsHelper ./3d/support/MapCoordsHelper ./3d/support/ResourceController ./3d/support/DisplayQualityProfile ./3d/support/QualitySettings ./3d/support/SharedSymbolResources ./3d/terrain/TerrainSurface ./3d/terrain/terrainUtils ./3d/layers/graphics/LabelManager ./3d/layers/GraphicsView3D ./3d/navigation/spherical/NavigationSpherical ./3d/navigation/planar/NavigationPlanar ./3d/support/Frustum ./ui/3d/DefaultUI3D".split(" "),function(n,
k,a,b,c,f,e,h,d,l,g,m,q,p,r,t,s,u,v,w,x,y,B,H,D,I,A,z,E,C,J,F,G,K,N,V,U,ha,Q,S,Y,ia,X,aa,ba,R,M,T,Z,L){function P(a,b){return function(){return this._internallyReady?b.apply(this,arguments):this._get(a)}}function W(a,b){return function(c){if(this._internallyReady)return b.apply(this,arguments);this._initialProps[a]=c;this._set(a,c);ja[a]&&this.notifyChange("initialExtentRequired")}}var O=B.getLogger("esri.views.SceneView"),ea=J.vec3d,$=ea.create();B=new p(0,0,0);var da=new q(new p(0,0,0)),fa={point:B,
retval:null},ca={heading:0,tilt:0},ja={camera:["viewpoint"],viewpoint:["extent"],extent:["center","scale"],scale:["zoom"],center:[],zoom:[]},ka=Object.keys(ja);return h.createSubclass([e],{declaredClass:"esri.views.SceneView",properties:{animation:{type:d,value:null},basemapTerrain:{readOnly:!0,value:null},camera:{copy:function(a,b){a.position.x=b.position.x;a.position.y=b.position.y;a.position.z=b.position.z;a.position.spatialReference=b.position.spatialReference;a.heading=b.heading;a.tilt=b.tilt},
type:q},canvas:{readOnly:!0,value:null},center:{copy:function(a,b){if(!a)return b.clone();a.x=b.x;a.y=b.y;a.z=b.z;a.spatialReference=b.spatialReference;return a},type:p},clippingArea:{type:r,dependsOn:["map.clippingArea","map.clippingEnabled","viewingMode"],get:function(){if("global"===this.viewingMode)return null;if(this._userClippingArea)return this._userClippingArea;var a=this.get("map.clippingEnabled"),b=this.get("map.clippingArea");if(!a||!b)return this._clippingArea=null;if(!(b instanceof r))return console.error("Only clippingArea geometries of type Extent are supported"),
this._clippingArea;if(m.canProject(b.spatialReference,this.spatialReference))b=m.project(b,this.spatialReference);else return console.error("Setting clippingArea with incompatible SpatialReference."),this._clippingArea;return this._clippingArea&&b&&this._clippingArea.equals(b)?this._clippingArea:this._clippingArea=b},set:function(a){this._userClippingArea=a;this._set("clippingArea",a)}},constraints:{type:E,value:null},dataExtent:{dependsOn:["basemapTerrain.extent","clippingArea","map"],readOnly:!0,
get:function(){function a(e){if(e&&(e=m.project(e,c)))d&&(e=e.intersection(d)),e&&b.push(e)}var b=[],c=this.spatialReference||g.WGS84,d=this.clippingArea;d&&(d=m.project(d,c));var e=this._get("basemapTerrain");e&&e.spatialReference&&a(new r({xmin:e.extent[0],ymin:e.extent[1],zmin:0,xmax:e.extent[2],ymax:e.extent[3],zmax:0,spatialReference:e.spatialReference}));this.map&&this.map.allLayers.forEach(function(b){a(b.fullExtent)});return 0<b.length?(e=b.reduce(function(a,b){return a.union(b)}),e.hasZ?
(e.zmin=Math.min(0,e.zmin),e.zmax=Math.max(0,e.zmax)):(e.zmin=0,e.zmax=0),e):new r({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:c})}},environment:{value:null,set:function(a){a!==this._defaults.environment&&(this._externallySet.environment=!0);a?a instanceof A?this._set("environment",a):a instanceof D?this.environment.lighting=a.lighting:a.declaredClass?this._set("environment",a):this._set("environment",new A(a)):this._set("environment",new A)}},environmentManager:{},extent:{copy:function(a,
b){a.xmin=b.xmin;a.ymin=b.ymin;a.zmin=b.zmin;a.xmax=b.xmax;a.ymax=b.ymax;a.zmax=b.zmax;a.spatialReference=b.spatialReference},type:r},fullOpacity:1,groundExtent:{dependsOn:["basemapTerrain.extent"],readOnly:!0,get:function(){var a=this._get("basemapTerrain");if(a&&a.spatialReference){var b=a.extent;return new r({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:a.spatialReference})}return new r({spatialReference:this.spatialReference||g.WGS84})}},initialExtentRequired:{dependsOn:["map.initialViewProperties.viewpoint"],
get:function(){if(this.get("map.initialViewProperties.viewpoint"))return!1;for(var a=0;a<ka.length;a++)if(this._initialProps&&void 0!==this._initialProps[ka[a]])return!1;return!0}},interacting:{dependsOn:["navigation.interacting"],get:function(){return!(!this.navigation||!this.navigation.interacting)}},map:{value:null},mapCoordsHelper:{},navigation:{readOnly:!0,value:null},inputManager:{},qualityProfile:{set:function(a){S.isValidProfile(a)&&(S.apply(a,this),this._set("qualityProfile",a))}},qualitySettings:{type:Y},
ready:{dependsOn:["viewingMode"]},renderCoordsHelper:{},scale:{},spatialReference:{dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isDone"]},type:"3d",ui:{type:L},updating:{},updatingPercentage:0,viewingMode:{dependsOn:["map.initialViewProperties.viewingMode","spatialReference"],get:function(){var a=this.get("map.initialViewProperties.viewingMode"),b=this.spatialReference;a||(a=!b||b.isWebMercator||b.isWGS84?"global":"local");return a},set:function(a){if(-1!==["local","global"].indexOf(a)){var b=
this._get("viewingMode")===a;this._override("viewingMode",a);b&&!this.get("map.initialViewProperties.viewingMode")&&this._internallyReady&&this._initGlobe(this.viewingMode)}else void 0===a&&this._clearOverride("viewingMode")}},viewpoint:{copy:function(a,b){a.rotation=b.rotation;a.scale=b.scale;a.targetGeometry=b.targetGeometry;a.camera=b.camera},dependsOn:["camera"],type:s},zoom:{dependsOn:["scale"]}},getDefaults:function(a){var b=this.inherited(arguments);!b.constraints&&!a.constraints&&(this._defaults.constraints=
new E,b.constraints=this._defaults.constraints);!b.environment&&!a.environment&&(this._defaults.environment=new A,b.environment=this._defaults.environment);b.popup.autoPanEnabled=!1;b.qualitySettings=new Y;b.qualityProfile=S.getDefaultProfile();return b},constructor:function(){w.when(this,"ready",this._viewReadyHandler.bind(this));this._internallyReady=!1;this._initialProps={};this._initialDefaultSpatialReference=this._gotoTask=this._userClippingArea=null;this._initCoordinateSystem();this._frustum=
new Z;this._clippingArea=this._constraints=this._animationStateWatcher=null;this.inputManager=new C({view:this});this._defaults={};this._externallySet={};this.resourceController=new Q(this);this.labelManager=new ba(this);this._evaluateUpdating=this._evaluateUpdating.bind(this);this._layerViewsUpdatingHandles={};this._navigationHandles=new H;this._navigationPauseNotifications=!1;this._navigationHandles.add([w.on(this,"navigation","currentViewChanged",this._navigationCurrentViewChanged.bind(this),null,
null,!0),w.on(this,"navigation","currentViewReachedTarget",this._navigationCurrentViewReachedTarget.bind(this),null,null,!0),w.on(this,"navigation","targetViewChanged",function(a){this._navigationPauseNotifications||this._navigationTargetViewChanged(a)}.bind(this),null,null,!0),w.on(this,"navigation","animationStarted",function(a){this._navigationPauseNotifications||this._navigationAnimationStarted(a)}.bind(this),null,null,!0)]);this.watch("map",function(a){a&&a.load&&a.load()})},initialize:function(){this.environmentManager=
new z({view:this});this._updateUpdatingMonitorsHandle=this.allLayerViews.on("change",this._updateUpdatingMonitors.bind(this));this._updateUpdatingMonitors({added:this.allLayerViews.toArray(),removed:[],moved:[]});w.whenNot(this,"ready",this._viewUnreadyHandler.bind(this))},destroy:function(){n.dispatchTarget(this);this.environmentManager.destroy();this._disposeGraphicsView();this._updateUpdatingMonitorsHandle.remove();this._updateUpdatingMonitorsHandle=null;this._navigationHandles.remove();this._navigationHandles=
null;this.inputManager&&(this.inputManager.destroy(),this.inputManager=null)},destroyLayerViews:function(){for(var a in this._layerViewsUpdatingHandles)this._layerViewsUpdatingHandles[a].remove();this._layerViewsUpdatingHandles={};this._disposeSurface();this.inherited(arguments);this._stage&&(this._stage.dispose(),this._stage=null,this._forwardAASettingsHandle.remove(),this._forwardAASettingsHandle=null);this._setCanvas(null);this.labelManager.destroy();this.labelManager=null;this.resourceController.destroy();
this.resourceController=null},on:function(a,b,c){var d=this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)},toMap:function(a,b,c){if(!this._internallyReady)return O.error("#toMap()","Scene view cannot be used before it is ready"),null;a=this._normalizePointArgs(a,b,void 0,c);b=this._stage.pick([a.point.x,this.height-a.point.y]).getMinResult();return this._computeMapPointFromIntersectionResult(b,a.retval)},toScreen:function(a,b,c,d){if(!this._internallyReady)return O.error("#toScreen()",
"Scene view cannot be used before it is ready"),null;a=this._normalizePointArgs(a,b,c,d);K.pointToVector(a.point,$,this.renderSpatialReference);return this.engineToScreen($,a.retval)},pixelSizeAt:function(a,b,c){if(!this._internallyReady)return O.error("#pixelSizeAt()","Scene view cannot be used before it is ready"),null;if("esri.geometry.ScreenPoint"===a.declaredClass){if(!this._stage.pick([a.x,this.height-a.y]).getMinResult().getIntersectionPoint($))return 0}else a=this._normalizePointArgs(a,b,
c,void 0),K.pointToVector(a.point,$,this.renderSpatialReference);return this.navigation.currentCamera.computePixelSizeAt($)},hitTest:function(a,b){if(!this._internallyReady)return O.error("#hitTest()","Scene view cannot be used before it is ready"),null;var c=this._normalizePointArgs(a,b,void 0,void 0),d=[c.point.x,this.height-c.point.y],c=this._stage.pick(d,null,!0).getMinResult(),e=this._computeMapPointFromIntersectionResult(c);return f(this._getGraphicFromStageObject(c.object,c.triangleNr)).otherwise(function(){return null}).then(function(a){var b=
[];(a||e)&&b.push({mapPoint:e,graphic:a});return{screenPoint:d,results:b}})},goTo:function(a,b){if(this._internallyReady){b=k.mixin({animate:!0},b);var c=G.create(this,a,b);this._gotoTask={};return b.animate?this._gotoAnimated(c,b):this._gotoImmediate(c,b)}O.error("#goTo()","Scene view cannot be used before it is ready")},animateTo:function(b,c){a.deprecated(this.declaredClass+".animateTo is deprecated. Use .goTo instead.","","4.0");return this.goTo(b,c)},takeScreenshot:function(a){if(this._internallyReady){a=
I.adjustScreenshotSettings(a,this);var b=new c;this._stage.requestScreenCapture(a,function(a){u.schedule(function(){b.resolve(a)})});return b.promise}O.error("#takeScreenshot()","Scene view cannot be used before it is ready")},engineToScreen:function(a,b){var c=ea.create();this._stage.getCamera().projectPoint(a,c);var d=c[0],e=this.height-c[1],c=c[2];return b?(b.x=d,b.y=e,b.z=c,b):new t({x:d,y:e,z:c})},getDefaultSpatialReference:function(){return this.get("map.initialViewProperties.spatialReference")||
this.get("defaultsFromMap.spatialReference")||this.get("defaultsFromMap.isDone")&&this._initialDefaultSpatialReference||null},validate:function(){var a;v("esri-webgl")?v("safari")&&9>v("safari")&&(a=new y("sceneview:browser-not-supported","This browser is not supported by SceneView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:v("safari")})):a=new y("sceneview:webgl-required","WebGL is required but not supported");return a?x.reject(a):x.resolve()},isSpatialReferenceSupported:function(a,
b){var c=a.isGeographic,d=a.isWebMercator,e=a.isWGS84,f="local"===this.viewingMode,g=!(!this._isOverridden("viewingMode")&&!this.get("map.initialViewProperties.viewingMode"));if(g){if(f&&c||!f&&!d&&!e)return!1}else if(c&&!e)return!1;if(b)if(aa.isTiledLayer(b)){if(!(g?null==aa.checkIfTileInfoSupportedForView(b.tileInfo,b.fullExtent,a,this.viewingMode):null==aa.checkIfTileInfoSupportedForView(b.tileInfo,b.fullExtent,a,"local")||null==aa.checkIfTileInfoSupportedForView(b.tileInfo,b.fullExtent,a,"global")))return!1}else if((e||
d)&&!f)return null==this._initialDefaultSpatialReference&&(this._initialDefaultSpatialReference=a),!g&&!this.ready&&(this.viewingMode="global"),!1;return!0},has:function(a){return this._stage.has(a)},flushDisplayModifications:function(){this._stage.processDirty()},getFrustum:function(){this._frustum.dirty&&this._frustum.update(this.navigation.currentCamera);return this._frustum},getDrawingOrder:function(a){return this.allLayerViews.findIndex(function(b){return b.layer&&b.layer.uid===a})},getViewForGraphic:function(a){return a.layer?
this.allLayerViews.find(function(b){return b.layer===a.layer}):this._graphicsView},whenViewForGraphic:function(a){return a.layer?this.whenLayerView(a.layer):x.resolve(this._graphicsView)},renderSpatialReference:null,_graphicsView:null,_surfaceReadyWatchHandle:null,_forwardAASettingsHandle:null,_gotoImmediate:function(a,b){var c=this._gotoTask;return a.then(function(a){c===this._gotoTask&&(this.viewpoint=a)}.bind(this))},_gotoAnimated:function(a,b){!this.animation||"running"!==this.animation.state&&
"waiting-for-target"!==this.animation.state?this.animation=new d({target:a}):this.animation.target=a;var c=this.animation;c.state="waiting-for-target";a.then(function(e){if(!(c.target!==a||this.animation!==c)){c.target=e;c.state="running";e=G.toCamera(this,e);if(!e)throw O.error("#goTo()","Invalid target specified for animateTo"),new y("goto:invalid-camera","Invalid camera in conversion from viewpoint");this._cameraAlmostEquals(this.camera,e)?c.finish():(e=F.externalToInternal(this,e),e.almostEquals(this.navigation.currentCamera,
5E-4/this.renderCoordsHelper.unitInMeters)?c.finish():(this._navigationPauseNotifications=!0,this._setInternalCamera(e,this._animateOptions(b)),c.state===d.State.STOPPED&&c.stop(),this._navigationPauseNotifications=!1))}}.bind(this)).otherwise(function(){c.target!==a||this.animation!==c||(this.animation=null,c.finish())});return c},_animateOptions:function(a){var b={animate:!0};a&&null!=a.speedFactor&&(b.speedFactor=a.speedFactor);a&&null!=a.duration&&(b.duration=a.duration/1E3);a&&null!=a.minDuration&&
(b.minDuration=a.minDuration/1E3);a&&null!=a.maxDuration&&(b.maxDuration=a.maxDuration/1E3);a&&null!=a.easing&&(b.easing="string"===typeof a.easing?l.named[a.easing]:a.easing);return b},_trackCanvasSize:function(){this.on("resize",function(a){if(this.canvas){this.canvas.width=a.width;this.canvas.height=a.height;var b=this._stage.getCamera();b.width=a.width;b.height=a.height;this._stage.setCamera(b);this.navigation&&(this.navigation.windowSize=[a.width,a.height])}}.bind(this));this.canvas.width=this.width;
this.canvas.height=this.height},_computeMapPointFromIntersectionResult:function(a,b){if(a.getIntersectionPoint($)){var c=this.spatialReference||g.WGS84;K.vectorToVector($,this.renderSpatialReference,$,c)||(c=g.WGS84,K.vectorToVector($,this.renderSpatialReference,$,c));b?(b.x=$[0],b.y=$[1],b.z=$[2],b.spatialReference=c):b=new p($,c);c=this._get("basemapTerrain");"terrain"===a.intersector&&c&&(c=c.getElevation(b),null!==c&&(b.z=c));return b}return null},_getGraphicFromStageObject:function(a,b){if(!a)return null;
var c=a.getMetadata();if(null!=c&&null!=c.layerId){if(c.layerId===this._graphicsView.mockLayerId)return this._graphicsView.getGraphicsFromStageObject(a,b);if(c=this.map.findLayerById(c.layerId))return this.whenLayerView(c).then(function(c){if(c&&null!=c.getGraphicsFromStageObject&&!c.suspended)return c.getGraphicsFromStageObject(a,b)})}return null},_viewingModeToManifold:function(a){return{local:"planar",global:"spherical"}[a]},_initBasemapTerrain:function(a){this._disposeBasemapTerrain();this._set("basemapTerrain",
new X(this,this._viewingModeToManifold(a)));this.navigation.elevationProvider=this._get("basemapTerrain")},_initGlobe:function(a){this._initCoordinateSystem();this._initNavigation(a);this._stage.setViewParams({backgroundColor:[0,0,0,0],maxFarNearRatio:0,frustumCullingEnabled:!1});this._initBasemapTerrain(a);this._navigationCurrentViewChanged({camera:this.navigation.currentCamera})},_initCoordinateSystem:function(){if(this.spatialReference){var a=this.spatialReference;if(!this.mapCoordsHelper||!this.mapCoordsHelper.spatialReference.equals(a))this.mapCoordsHelper=
new ha(this.map,a);var b=this.renderCoordsHelper?this.renderCoordsHelper.unitInMeters:1,c="global"===this.viewingMode,a=c?K.SphericalRenderSpatialReference:a;a!==this.renderSpatialReference&&(this.renderSpatialReference=a,this.renderCoordsHelper=new (c?U.Spherical:U.Planar)(a),this._stage&&this._stage.setIntersectTolerance(V.DEFAULT_TOLERANCE/this.renderCoordsHelper.unitInMeters),this._constraints&&this._constraints.scale(b/this.renderCoordsHelper.unitInMeters))}else this.renderSpatialReference=this.renderCoordsHelper=
this.mapCoordsHelper=null},_paddingEqualsArray:function(a){var b=this.padding;return!b?!0:b.top===a[0]&&b.right===a[1]&&b.bottom===a[2]&&b.left===a[3]},_navigationCurrentViewChanged:function(a){this._frustum.dirty=!0;a=a.camera;var b=a.padding,c=this._get("basemapTerrain"),d=c.spatialReference;d&&(d=this.renderCoordsHelper.fromRenderCoords(a.eye,d),c=c.getElevation(d)||0,a.aboveGround=d.z>=c);this._paddingEqualsArray(b)||(c=this._padding,b={top:b[0],right:b[1],bottom:b[2],left:b[3]},this._internallyReady?
(this._padding=b,this.notifyChange("padding",c,b)):this.padding=b);this._stage.setCamera(a);this.notifyChange("center");this.notifyChange("extent");this.notifyChange("scale");b=this.camera;a=F.internalToExternal(this,a,da);(!b||!this._cameraAlmostEquals(b,a))&&this.notifyChange("camera")},_cameraAlmostEquals:function(a,b){return 1E-5>Math.abs(a.tilt-b.tilt)&&1E-5>Math.abs(a.heading-b.heading)&&1E-5>Math.abs(a.fov-b.fov)&&a.position.equals(b.position)},_navigationAnimationStarted:function(a){a=G.fromInternalCamera(this,
this.navigation.targetCamera);this.animation?this.animation.target=a:this.animation=new d({target:a})},_navigationTargetViewChanged:function(a){if(this.animation&&"waiting-for-target"!==this.animation.state){a=a.camera;var b=this.spatialReference||g.WGS84,c=F.internalToExternal(this,a);a=new s({camera:c,targetGeometry:K.vectorToPoint(a.center,b,this.renderSpatialReference),scale:F.computeScale(this,a),rotation:G.headingToRotation(c.heading)});this.animation.target=a}},_navigationCurrentViewReachedTarget:function(a){if(a.interruptedAnimation||
a.finishedAnimation)this._gotoTask=null;if(this.animation&&(a.interruptedAnimation||a.finishedAnimation)){this._animationStateWatcher&&(this._animationStateWatcher.remove(),this._animationStateWatcher=null);var b=this.animation;this.animation=null;a.finishedAnimation?b.finish():b.stop();this.notifyChange("animation")}},_setInternalCamera:function(a,b){a&&(this.navigation.setCamera(a,b),this._externallySet.camera=!0);return!!a},_setCamera:function(a,b){return this._setInternalCamera(F.externalToInternal(this,
a),b)},_evaluateUpdating:function(){var a=0,b=0,c=!1;this.allLayerViews.forEach(function(d){d.updating&&(c=!0,d=d.updatingPercentage,null!=d&&(++b,a+=d))});this._graphicsView&&this._graphicsView.updating&&(c=!0);c!==this.updating&&(this.updating=c);a=0!==b?a/b:c?100:0;this.updatingPercentage!==a&&(this.updatingPercentage=a)},_updateUpdatingMonitors:function(a){for(var b=0;b<a.removed.length;b++){var c=a.removed[b],d=this._layerViewsUpdatingHandles[c.id];d&&(delete this._layerViewsUpdatingHandles[c.id],
d.remove())}for(b=0;b<a.added.length;b++)c=a.added[b],c.destroyed||(d=c.watch(["updating","updatingPercentage"],this._evaluateUpdating),this._layerViewsUpdatingHandles[c.id]=d);this._evaluateUpdating()},_spatialReferenceSetter:function(a){this.inherited(arguments);this._initCoordinateSystem()},_setInitialView:function(a){if(a&&!this._externallySet.camera){var b=null;a instanceof s&&(!a.camera&&a.targetGeometry instanceof r)&&(b=G.rotationToHeading(a.rotation),a=a.targetGeometry);if(a instanceof s)this.viewpoint=
a;else if(a instanceof q)this.camera=a;else{var c=this._getDesiredHeadingTilt();null!=b&&(c.heading=b);G.create(this,{target:a,heading:c.heading,tilt:c.tilt}).then(function(a){this.navigation._dataExtentChanged();this.viewpoint=a}.bind(this))}}},_pickRay:function(a,b,c,d,e,f,g){return this._stage?this._stage.pickRay(a,b,c,d,e,f,g):null},_pickRayWithBeginPoint:function(a,b,c,d,e){return this._stage?this._stage.pickRayWithBeginPoint(a,b,c,d,e):null},_removeHandles:function(a){for(var b=0;b<a.length;b++){var c=
a[b];this[c]&&(this[c].remove(),this[c]=null)}},_setCanvas:function(a){a!==this._get("canvas")&&this._set("canvas",a)},_disposeSurface:function(){this._removeHandles(["_stageFrameTask","_updateDrawingOrderHandle","onViewExtentUpdateHandle","_mapLayersChangeHandle"]);this._disposeBasemapTerrain();this._setNavigation(null);this.environmentManager&&this.environmentManager.disposeRendering()},_disposeBasemapTerrain:function(){var a=this._get("basemapTerrain");a&&(a.destroy(),this._set("basemapTerrain",
null))},_disposeNavigation:function(){var a=this._get("navigation");a&&(a.destroy(),a.elevationProvider=null,this._set("navigation",null))},_setNavigation:function(a){this._get("navigation")!==a&&(this._disposeNavigation(),a&&(a.windowSize=[this.width,this.height],a.userConstraints=this.constraints),this._set("navigation",a))},_initNavigation:function(a){a=a||this.viewingMode;var b={view:this};"global"===a?this._setNavigation(new M(b)):this._setNavigation(new T(b))},_initSurface:function(){var a=
{};a.deactivatedWebGLExtensions=this.deactivatedWebGLExtensions;this.renderCanvas&&(a.canvas=this.renderCanvas);this._stage=new N(b.byId(this.surface),a);this._stage.selectionState=!1;this._forwardAASettingsHandle=w.init(this.qualitySettings,"antialiasingEnabled",function(){this._stage.setRenderParams({antialiasingEnabled:this.qualitySettings.antialiasingEnabled})}.bind(this));this.sharedSymbolResources=new ia(this._stage,this.resourceController);this.renderCoordsHelper&&this._stage.setIntersectTolerance(V.DEFAULT_TOLERANCE/
this.renderCoordsHelper.unitInMeters);this._setCanvas(this._stage.getCanvas());this._stageFrameTask=u.addFrameTask(this._stage.getFrameTask());this._trackCanvasSize();this._initGlobe(this.viewingMode)},_initGraphicsView:function(){this._surfaceReadyWatchHandle=w.whenTrueOnce(this,"basemapTerrain.ready",function(){this._graphicsView=new R({view:this,graphics:this.graphics});this._surfaceReadyWatchHandle=null;this._layerViewsUpdatingHandles[this._graphicsView.mockLayerId]=this._graphicsView.watch("updating",
this._evaluateUpdating)}.bind(this))},_disposeGraphicsView:function(){this._surfaceReadyWatchHandle&&(this._surfaceReadyWatchHandle.remove(),this._surfaceReadyWatchHandle=null);if(this._graphicsView){var a=this._graphicsView.mockLayerId;this._layerViewsUpdatingHandles[a].remove();delete this._layerViewsUpdatingHandles[a];this._graphicsView.destroy();this._graphicsView=null}},_normalizePointArgs:function(a,b,c,d,e){e=e||fa;var f=e.point;f.spatialReference=void 0;"object"===typeof a?(f.x=a.x,f.y=a.y,
f.z=a.z,a.spatialReference&&(f.spatialReference=a.spatialReference),e.retval=b):(f.x=a,f.y=b,"number"!==typeof c&&void 0!==c?(f.z=void 0,e.retval=c):(f.z=c,e.retval=d));f.spatialReference||(f.spatialReference=this.spatialReference||g.WGS84);return e},_separateInitialProperties:function(){var a={},b={},c={},d=function(a){if(a=ja[a])for(var b=0;b<a.length;b++)c[a[b]]=!0,d(a[b])},e;for(e in this._initialProps){var f=this._initialProps[e];ja[e]?(d(e),a[e]=f):b[e]=f}for(e in c)delete a[e];return{view:a,
other:b}},_viewReadyHandler:function(a,b){if(!b){"global"===this.viewingMode&&(this._clippingArea=null);this._internallyReady=!0;this._initSurface();this._initGraphicsView();var c=this._separateInitialProperties(),d;for(d in c.other)this.set(d,c.other[d]);for(d in c.view)this.set(d,c.view[d]);c=this.get("map.initialViewProperties.viewpoint");d=this.get("initialExtent");c?this._setInitialView(c):d&&d.spatialReference.equals(this.spatialReference)?this._setInitialView(d):"local"===this.viewingMode&&
w.whenOnce(this.basemapTerrain,"ready",function(){this._setInitialView(this.groundExtent)}.bind(this));if(!this._externallySet.environment&&(c=this.get("map.initialViewProperties.environment")))this.environment=c;this._initialProps={};this.notifyChange("initialExtentRequired");this._updateDrawingOrderHandle=this.allLayerViews.on("change",this._updateDrawingOrder.bind(this));this._updateDrawingOrder({added:this.allLayerViews.toArray(),removed:[],moved:[]});this.environmentManager.updateReadyChange(!0)}},
_viewUnreadyHandler:function(a,b){b&&(this._initialDefaultSpatialReference=null,this.environmentManager.updateReadyChange(!1),this._disposeGraphicsView(),this._internallyReady=!1,this._disposeSurface(),this.sharedSymbolResources&&(this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null),this._stage&&(this._stage.dispose(),this._stage=null,this._forwardAASettingsHandle.remove(),this._forwardAASettingsHandle=null),this._setCanvas(null))},_getDesiredHeadingTilt:function(){if(this._externallySet.camera){var a=
this.camera;ca.heading=a.heading;ca.tilt=a.tilt}else ca.heading=0,ca.tilt=0.5;return ca},_cameraSetter:W("camera",function(a){this._setCamera(a,{animate:!1})||O.error("#camera\x3d","Invalid camera",a)}),_cameraGetter:P("camera",function(a){return F.internalToExternal(this,this.navigation.currentCamera,a)}),_externalExtent:function(){this._cachedExtentDirty&&(F.toExtent(this,null,null,this._cachedExtent,da),this._cachedExtentDirty=!1);return this._cachedExtent},_extentGetter:P("extent",function(a){return F.toExtent(this,
null,null,a,da)}),_extentSetter:W("extent",function(a){var b=F.fromExtent(this,a,this._getDesiredHeadingTilt(),da);b?this.camera=b:this._isIncompatibleSpatialReference(a.spatialReference)?O.error("#extent\x3d","Extent has an incompatible spatial reference (extent: "+a.spatialReference.wkid+", view: "+this.spatialReference.wkid+")",a):O.error("#extent\x3d","Invalid extent",a)}),_isIncompatibleSpatialReference:function(a){return a&&!a.equals(this.spatialReference)&&!m.canProject(a,this.spatialReference)},
_scaleGetter:P("scale",function(){return null!=this.navigation?F.computeScale(this,this.navigation.currentCamera):0}),_scaleSetter:W("scale",function(a){var b=this._getDesiredHeadingTilt(),c=this.navigation.currentCamera.center,d=ea.create();K.vectorToVector(c,this.renderSpatialReference,d,g.WGS84);a=F.scaleToDistance(this,a,d[1]);b=F.eyeHeadingTiltForCenterPointAtDistance(this,b.heading,b.tilt,c,a);this._externallySet.camera=!0;this.navigation.setCameraFromEyeCenterAndUp(b.eye,b.center,b.up,{animate:!1})}),
_zoomGetter:P("zoom",function(){return F.scaleToZoom(this,this.scale)}),_zoomSetter:W("zoom",function(a){this.scale=F.zoomToScale(this,a)}),_centerGetter:P("center",function(a){var b=this.spatialReference||g.WGS84;return K.vectorToPoint(this.navigation.currentCamera.center,this.renderSpatialReference,a||b,b)}),_centerSetter:W("center",function(a){if(this._isIncompatibleSpatialReference(a&&a.spatialReference))O.error("#center\x3d","Center has an incompatible spatial reference (center: "+a.spatialReference.wkid+
", view: "+this.spatialReference.wkid+")",a);else{var b=this._getDesiredHeadingTilt();(b=F.eyeHeadingTiltForCenterPointAtDistance(this,b.heading,b.tilt,a,this.navigation.currentCamera.distance))||O.error("#center\x3d","Invalid center",a);this._externallySet.camera=!0;this.navigation.setCameraFromEyeCenterAndUp(b.eye,b.center,b.up,{animate:!1})}}),_viewpointGetter:P("viewpoint",function(){return G.fromCamera(this,this.camera)}),_viewpointSetter:W("viewpoint",function(a){var b=G.toCamera(this,a);b?
this._setCamera(b,{animate:!1}):O.error("#viewpoint\x3d","Invalid viewpoint",a)}),_screenCenterGetter:function(){var a=this.padding;return new t((this.size[0]-(a.left+a.right))/2+a.left,(this.size[1]-(a.top+a.bottom))/2+a.top)},_updateDrawingOrder:function(){var a=this.allLayerViews.length-1;this.allLayerViews.forEach(function(b,c){null!=b.drawingOrder&&(b.drawingOrder=a-c)},this)},_paddingSetter:W("padding",function(a){this._set("padding",{top:a&&a.top||0,right:a&&a.right||0,bottom:a&&a.bottom||
0,left:a&&a.left||0});this.navigation&&(this.navigation.padding=this._get("padding"))}),_constraintsSetter:W("constraints",function(a){this._set("constraints",a);a===this._defaults.constraints&&(this._defaults.constraints=null,a.scale(1/this.renderCoordsHelper.unitInMeters));this.navigation.userConstraints=a}),_animationSetter:function(a){a!==this._get("animation")&&(this._internallyReady?(this._animationStateWatcher&&(this._animationStateWatcher.remove(),this._animationStateWatcher=null),this._set("animation",
a),a&&(this._animationStateWatcher=a.watch("state",function(a){a!==d.State.FINISHED&&a!==d.State.STOPPED||(this.animation=null,a===d.State.FINISHED?this.navigation.setCurrentToTarget():this.navigation.setCamera(this.navigation.currentCamera,{animate:!1}))}.bind(this)))):O.error("#animation\x3d","Scene view cannot be used before it is ready"))},_mapSetter:function(a){a!==this._get("map")&&(this.navigation&&this.navigation._dataExtentChanged(),this._mapLayersChangeHandle&&this._mapLayersChangeHandle.remove(),
a&&(this._mapLayersChangeHandle=a.allLayers.on("change",this.notifyChange.bind(this,"dataExtent"))),delete this._externallySet.camera,this.inherited(arguments))}})});