// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/watchUtils ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r,v,p,u,w,y,t){return function(r){function m(a){var b=this;r.call(this,a);this._frameTask=new p(this);this._handles=new d;this.interacting=!1;this.resizeAlign="center";this.type="2d";this.constraints=new w;this.padding={top:0,right:0,bottom:0,left:0};this._frameTask=new p(this);g.init(this,"stationary",function(a){b._frameTask.stationary=a});this._handles.add([this.on("resize",function(a){return b._resizeHandler(a)})]);this.watch("ready",function(a){return b._readyWatcher(a)},
!0);a=this.notifyChange.bind(this,"tileInfo");g.on(this,"map.basemap.baseLayers","change",a,a,a);g.on(this,"map.layers","change",a,a,a);var f=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(this);this.allLayerViews.on("change",function(){f();b._handles.remove("layerViewsUpdating");b._handles.add(b.allLayerViews.map(function(a){return a.watch("updating",f)}).toArray(),"layerViewsUpdating")})}e(m,r);Object.defineProperty(m.prototype,
"animation",{set:function(a){var b=this,f=this._get("animation");f&&f.stop();!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),a.then(function(){return b.animation=null},function(){return b.animation=null},function(a){return b.state.viewpoint=a}))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var b=this.content.center;return new a({x:b[0],y:b[1],spatialReference:this.content.spatialReference})},
set:function(a){if(null!=a)if(this.ready){var b=this.viewpoint;t.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired")},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this._handles.remove("constraints"),f.view=null);this._set("constraints",a);a&&(this.ready&&(a.view=this,this.state.viewpoint=a.constrain(this.content.viewpoint,null)),this._handles.add(a.on("update",
function(){b.ready&&b.state&&(b.state.viewpoint=a.constrain(b.content.viewpoint,null))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"extent",{get:function(){return!this.ready?this._get("extent"):this.content.extent.clone()},set:function(a){if(null!=a)if(this.ready){var b=this.viewpoint;t.setExtent(b,b,a,this.size,{constraints:this.constraints});this.viewpoint=b}else this._set("extent",a),this._set("center",null),this._set("scale",0),this.notifyChange("initialExtentRequired")},
enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"initialExtentRequired",{get:function(){var a=this.get("map.initialViewProperties.viewpoint"),b=this._get("extent"),f=this._get("center"),c=this._get("scale"),l=this._get("viewpoint"),g=this._get("zoom"),d=this.initialExtent;return a?!(!f||!(0<c)||d):d?!1:!(b||l||f&&(0<c||-1!==g))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?
(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});m.prototype._readyGetter=function(){var a=this.get("map.basemap.baseLayers.0"),b=this.get("map.layers.0"),f=!0;a&&a.load();b&&b.load();a&&a.loaded?f=!1:!a&&b&&b.loaded?f=!1:!a&&!b&&(f=!1);return this.inherited(arguments)&&!f};Object.defineProperty(m.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=
this.viewpoint;t.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;t.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});
Object.defineProperty(m.prototype,"tileInfo",{get:function(){return this.get("map.basemap.baseLayers.0.tileInfo")||this.get("map.layers.0.tileInfo")},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"viewpoint",{get:function(){return!this.ready?this._get("viewpoint"):this.content.viewpoint.clone()},set:function(a){if(null!=a)if(this.ready){var b=t.create();t.copy(b,a);this.constraints.constrain(b,this.content.viewpoint);this.state.viewpoint=b;this._set("viewpoint",b)}else this._set("viewpoint",
a),this.notifyChange("initialExtentRequired")},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"zoom",{get:function(){return!this.ready?this._get("zoom"):this.constraints.scaleToZoom(this.scale)},set:function(a){if(null!=a&&(this.ready||(this.notifyChange("initialExtentRequired"),this._set("zoom",a)),this.constraints.effectiveLODs)){var b=this.viewpoint;t.scaleTo(b,b,this.constraints.zoomToScale(a));this.viewpoint=b;this._set("zoom",this.constraints.scaleToZoom(this.scale))}},enumerable:!0,
configurable:!0});m.prototype.goTo=function(a,b){var f=this,l=this.content;b=c.mixin({animate:!0},b,{spatialReference:this.spatialReference||null,size:l?l.size:this.size,currentViewpoint:l?l.viewpoint:this.viewpoint,constraints:this.constraints,snapToZoom:this.constraints.snapToZoom});return t.createAsync(a,b).then(function(a){if(b.animate){var c=null;if(!f.ready||!f.animationManager)return f.viewpoint=a,c=new v({target:a}),c.finish(),c;f.constraints.constrain(a,f.viewpoint);return c=f.animation=
f.animationManager.animateTo(a,f.viewpoint,b)}f.viewpoint=a})};m.prototype.hitTest=function(a,f){return b.reject("Should be implemented by subclasses")};m.prototype.toMap=function(b,f,c){if(!this.ready)return null;b&&null!=b.x&&(c=f,f=b.y,b=b.x);var l=[0,0];this.state.toMap(l,[b,f]);c=c||new a;c.x=l[0];c.y=l[1];c.spatialReference=this.spatialReference;return c};m.prototype.toScreen=function(a,b,c,l){if(!this.ready)return null;a&&null!=a.x&&(l=b,b=a.y,a=a.x);l=c||l||new f;a=[a,b];this.state.toScreen(a,
a);l.x=a[0];l.y=a[1];return l};m.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};m.prototype.requestLayerViewUpdate=function(a){this.ready&&this._frameTask.requestLayerViewUpdate(a)};m.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")};m.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.content.viewpoint,
c=this.content.size.concat();b.size=[a.width,a.height];t.resize(f,f,c,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};m.prototype._readyWatcher=function(a){a||this._frameTask.stop();this.constraints.view=this;a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),padding:this._get("padding"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint")};var b=this.get("map.initialViewProperties.viewpoint"),
b=t.create(b&&!a.center&&!a.extent?{viewpoint:b}:a,{spatialReference:this.spatialReference,size:this.size,constraints:this.constraints,extent:this.initialExtent});this.animationManager=new y;this.state=new u({padding:a.padding,size:this.size,viewpoint:b});this.content=this.state.content;this._frameTask.start()};h([k.property()],m.prototype,"animation",null);h([k.property({value:null,type:a,dependsOn:["content.center"]})],m.prototype,"center",null);h([k.property({type:w})],m.prototype,"constraints",
null);h([k.property()],m.prototype,"content",void 0);h([k.property({value:null,type:s,dependsOn:["content.extent"]})],m.prototype,"extent",null);h([k.property({readOnly:!0})],m.prototype,"interacting",void 0);h([k.property({type:s})],m.prototype,"initialExtent",void 0);h([k.property({dependsOn:["map.initialViewProperties.viewpoint"]})],m.prototype,"initialExtentRequired",null);h([k.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return c.mixin({top:0,right:0,bottom:0,left:0},a)}})],
m.prototype,"padding",null);h([k.property()],m.prototype,"resizeAlign",void 0);h([k.property({value:0,type:Number,dependsOn:["content.rotation"]})],m.prototype,"rotation",null);h([k.property({type:Number,dependsOn:["content.scale"]})],m.prototype,"scale",null);h([k.property({type:q,dependsOn:["map.initialViewProperties.spatialReference"]})],m.prototype,"spatialReference",void 0);h([k.property()],m.prototype,"state",void 0);h([k.property({readOnly:!0,dependsOn:["map.initialViewProperties.viewpoint",
"map.layers","map.basemap"]})],m.prototype,"tileInfo",null);h([k.property({readOnly:!0})],m.prototype,"type",void 0);h([k.property({value:null,type:l,dependsOn:["content.viewpoint"]})],m.prototype,"viewpoint",null);h([k.property({value:-1,dependsOn:["content.scale"]})],m.prototype,"zoom",null);return m=h([k.subclass("esri.views.MapViewBase")],m)}(k.declared(r))})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(n){return n.createSubclass({declaredClass:"esri.geometry.ScreenPoint",
verifySR:function(){}})})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/Scheduler","./FrameBudget"],function(n,m,e,h){return function(){function c(c){var d=this;this.view=c;this._frameTaskHandle=null;this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._budget=new h(this.budget);this._stationary=!0;this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this.budget=6;this.prepare=
function(){d._updateParameters.state=d.view.state;d._updateParameters.stationary=d.view.stationary;d._budget.reset(d.budget)};this.update=function(){for(var c=d._budget,b=d.view,l=b.allLayerViews.toArray().filter(function(a){return null==a.layerViews}),a=l.length,f=b.state,k=0;k<l.length;k++)if(b=l[k],b.attached){var e=d._layerViewsState[b.uid];if(null==e||!d.stationary&&!b.moving)b.moving=!0,b.moveStart();e!==f.id&&b.viewChange();d.stationary&&b.moving&&(b.moving=!1,b.moveEnd());d._layerViewsState[b.uid]=
f.id}f=d._layerViewsTrash;for(k=0;k<f.length;k++)b=f[k],b.attached&&(b.detach(),b.attached=!1);f.length=0;if(!c.done){k=0;a:for(;k<a;k++){if(c.done)break a;b=l[k];b.attached||d._attachLayerView(b)}}l=d._layerViewsToUpdate;a=l.slice();b=d._updateParameters;for(d._layerViewsToUpdate.length=0;!c.done&&0<a.length;)a.shift().processUpdate(b);0<a.length&&l.unshift.apply(l,a);0===l.length&&0===f.length&&d._frameTaskHandle.pause()}}c.prototype.destroy=function(){this._allLayerViewsChangeHandle.remove();this._frameTaskHandle.remove()};
Object.defineProperty(c.prototype,"stationary",{get:function(){return this._stationary},set:function(c){this._stationary!==c&&(this._stationary=c,this.requestFrame())},enumerable:!0,configurable:!0});c.prototype.start=function(){var c=this;this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(d){Array.prototype.push.apply(c._layerViewsTrash,d.removed);c.requestFrame()});this._frameTaskHandle=e.addFrameTask(this);this._frameTaskHandle.pause()};c.prototype.stop=function(){this._allLayerViewsChangeHandle.remove();
this._allLayerViewsChangeHandle=null;this._frameTaskHandle.pause()};c.prototype.requestLayerViewUpdate=function(c){this._layerViewsToUpdate.push(c);this.requestFrame()};c.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};c.prototype._attachLayerView=function(c){c.attached||(c.attached=!0,c.attach())};c.prototype._detachLayerView=function(c){c.attached&&(c.detach(),c.attached=!1)};return c}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports",
"../../core/now"],function(n,m,e){return function(){function h(c){void 0===c&&(c=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(c)}h.now=function(){return e()};Object.defineProperty(h.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"elapsed",{get:function(){return e()-this._begin},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"remaining",{get:function(){return Math.max(this._budget-
this.elapsed,0)},enumerable:!0,configurable:!0});h.prototype.reset=function(c){void 0===c&&(c=Number.MAX_VALUE);this._begin=e();this._budget=this.enabled?c:Number.MAX_VALUE};return h}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./math/vec2 ./math/mat2d ./math/common ../../core/Accessor".split(" "),function(n,m,e,h,c,k,d,g,b,l,
a){var f=function(a){function b(){a.apply(this,arguments);this.bottom=this.right=this.top=this.left=0}e(b,a);return b=h([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(a));return function(a){function q(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];a.apply(this,b);this.content=new d;this.padding=new f;this.size=g.fromValues(0,0)}e(q,a);Object.defineProperty(q.prototype,"clipRect",{get:function(){var a=this.worldScreenWidth;if(!a)return null;var c=l.toRadian(this.rotation),
f=Math.abs(Math.cos(c)),d=Math.abs(Math.sin(c)),f=this.width*f+this.height*d;if(a>f)return null;var d=g.clone(this.screenCenter),k=b.fromTranslation(b.create(),d);b.rotate(k,k,c);g.negate(d,d);b.translate(k,k,d);g.transformMat2d(d,this.paddedScreenCenter,k);return{top:-Math.round(f),left:Math.round(d[0]-0.5*a),right:Math.round(d[0]+0.5*a),bottom:+Math.round(f)}},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"padding",{set:function(a){this._set("padding",a||new f);this._updateContent()},
enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=g.scale(g.create(),a,0.5);a[0]+=b.left;a[1]+=b.top;return a},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"viewpoint",{set:function(a){var b=a.clone();this.content.viewpoint=a;k.addPadding(b,a,this._get("size"),
this._get("padding"));this._set("viewpoint",k.addPadding(b.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});q.prototype._updateContent=function(){var a=g.create(),b=this._get("size"),c=this._get("padding");if(b&&c){var f=this.content;g.set(a,c.left+c.right,c.top+c.bottom);g.subtract(a,b,a);f.size=a;if(a=f.viewpoint)this.viewpoint=a}};h([c.shared({transform:{dependsOn:["padding"]}})],q.prototype,"properties",void 0);h([c.property({dependsOn:["worldScreenWidth","rotation",
"paddedScreenCenter","screenCenter"],readOnly:!0})],q.prototype,"clipRect",null);h([c.property()],q.prototype,"content",void 0);h([c.property({type:f})],q.prototype,"padding",null);h([c.property()],q.prototype,"size",null);h([c.property({dependsOn:["size","padding"],readOnly:!0})],q.prototype,"paddedScreenCenter",null);h([c.property()],q.prototype,"viewpoint",null);return q=h([c.subclass("esri.views.2d.PaddedViewState")],q)}(c.declared(d))})},"esri/views/2d/viewpointUtils":function(){define("require exports ./math/common ./math/mat2d ./math/vec2 ../../Viewpoint ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q){function r(a,b,l,g){return g&&(l&&!g.equals(l)&&f.canProject(g,l))&&g.isWebMercator?(g.isWebMercator?(l=b[1],89.99999<l?l=89.99999:-89.99999>l&&(l=-89.99999),l=Math.sin(e.toRadian(l)),a=c.set(a,e.toRadian(b[0])*D,0.5*D*Math.log((1+l)/(1-l)))):(l=e.toDegree(b[0]/D),a=c.set(a,l-360*Math.floor((l+180)/360),e.toDegree(0.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/D))))),a):c.copy(a,b)}function v(a){return a.wkid?a:a.spatialReference||g.WGS84}function p(a,b){return b.type?
c.set(a,b.x,b.y):c.copy(a,b)}function u(a,b){return Math.max(a.width/b[0],a.height/b[1])*H(a.spatialReference)}function w(c,g,d){var k;if(!c)return null;if(Array.isArray(c)&&2===c.length&&"number"===typeof c[0]&&"number"===typeof c[1])return new l(c);if(c.reduce)return c.reduce(function(a,b){return w(b,g,a)},d);c instanceof b?k=c:c.geometry&&(k=c.geometry);if(!k)return null;c="point"===k.type?new a({xmin:k.x,ymin:k.y,xmax:k.x,ymax:k.y,spatialReference:k.spatialReference}):k.extent;if(!c)return null;
k=f.canProject(c,g);if(!c.spatialReference.equals(g)&&k)c=f.project(c,g);else if(!k)return null;return d=d?d.union(c):c.clone()}function y(a,f){if(!a)return new k({targetGeometry:new l,scale:0,rotation:0});var g=f.spatialReference,d=f.size,s=f.currentViewpoint,e=f.constraints,h=null;"esri.Viewpoint"===a.declaredClass?h=a:a.viewpoint?h=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(h=a.target);var q=null;if(h&&h.targetGeometry)q=h.targetGeometry;else if(a instanceof b)q=a;else if(a||
a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))q=w(a.center,g)||w(a.extent,g)||w(a.target,g)||w(a,g);!q&&s&&s.targetGeometry?q=s.targetGeometry:!q&&f.extent&&(q=f.extent);var m=v(q);g||(g=v(f.spatialReference||f.extent||q));var y=p(c.create(),q.center?q.center:q),g=new l(r(y,y,m,g),g),m=null,m=h&&h.targetGeometry&&"point"===h.targetGeometry.type?h.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&e&&e.effectiveLODs?e.zoomToScale(a.zoom):
Array.isArray(q)||"point"===q.type||"extent"===q.type&&0===q.width&&0===q.height?f.extent?u(f.extent,d):s.scale:u(q.extent,d),d=0;h?d=h.rotation:a.hasOwnProperty("rotation")?d=a.rotation:s&&(d=s.rotation);e&&(e.rotationEnabled||(d=0),e.snapToZoom&&(m=e.snapScale(m)),0!==e.effectiveMinScale&&(m=Math.min(e.effectiveMinScale,m)),0!==e.effectiveMaxScale&&(m=Math.max(e.effectiveMaxScale,m)));return new k({targetGeometry:g,scale:m,rotation:d})}function t(a,b){var c=a.targetGeometry,f=b.targetGeometry;c.x=
f.x;c.y=f.y;c.spatialReference=f.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function z(a,b,f){return!f?c.scale(a,b,0.5):c.set(a,0.5*(b[0]-f.right+f.left),0.5*(b[1]-f.bottom+f.top))}function E(a,b,c){m.getTransform(a,b,c);return h.invert(a,a)}function A(a,b,f){var l=e.toRadian(b.rotation)||0;b=Math.abs(Math.cos(l));l=Math.abs(Math.sin(l));return c.set(a,Math.round(f[1]*l+f[0]*b),Math.round(f[1]*b+f[0]*l))}function C(a){return a.scale*(1/(96*(s.getUnitValueForSR(a.targetGeometry.spatialReference)||
J)*B))}function H(a){return 96*(s.getUnitValueForSR(a)||J)*B}function F(a){return a.isWrappable?(a=q.getInfo(a),a.valid[1]-a.valid[0]):0}function x(a,b){return Math.round(F(a)/b)}var B=39.37,J=6370997*Math.PI/180,D=6378137,T=180/Math.PI;m.create=y;m.copy=t;m.getAnchor=z;m.getExtent=function(){var a=c.create();return function(b,c,f){var l=c.targetGeometry;p(a,l);c=0.5*C(c);b.xmin=a[0]-c*f[0];b.ymin=a[1]-c*f[1];b.xmax=a[0]+c*f[0];b.ymax=a[1]+c*f[1];b.spatialReference=l.spatialReference;return b}}();
m.setExtent=function(a,b,c,f,l){m.centerAt(a,b,c.center);a.scale=u(c,f);l&&l.constraints&&l.constraints.constrain(a);return a};m.getOuterExtent=function(){var a=c.create(),b=c.create();return function(c,f,l){p(a,f.targetGeometry);A(b,f,l);l=0.5*C(f);c.set({xmin:a[0]-l*b[0],ymin:a[1]-l*b[1],xmax:a[0]+l*b[0],ymax:a[1]+l*b[1],spatialReference:f.targetGeometry.spatialReference});return c}}();m.getClippedExtent=function(){var a=c.create(),b=c.create();return function(c,f,l){var g=C(f),d=f.targetGeometry.spatialReference,
k=x(d,g);p(a,f.targetGeometry);A(b,f,l);d.isWrappable&&b[0]>k&&(b[0]=k);f=0.5*g;c.set({xmin:a[0]-f*b[0],ymin:a[1]-f*b[1],xmax:a[0]+f*b[0],ymax:a[1]+f*b[1],spatialReference:d});return c}}();m.getOuterSize=A;m.getPaddingScreenTranslation=function(){var a=c.create();return function(b,f,l){return c.sub(b,c.scale(b,f,0.5),z(a,f,l))}}();var M=function(){var a=h.create(),b=c.create();return function(f,l,g,d){var k=C(l);l=e.toRadian(l.rotation)||0;c.set(b,k,k);h.fromScaling(a,b);h.rotate(a,a,l);h.translate(a,
a,m.getPaddingScreenTranslation(b,g,d));h.translate(a,a,[0,d.top-d.bottom]);return c.set(f,a[4],a[5])}}();m.getResolution=C;m.getResolutionToScaleFactor=H;m.getMatrix=function(){var a=c.create(),b=c.create(),f=c.create();return function(l,g,d,k,e){c.negate(a,g);c.scale(b,d,0.5);c.set(f,1/k,-1/k);h.identity(l);h.translate(l,l,b);e&&h.rotate(l,l,e);h.scale(l,l,f);h.translate(l,l,a);return l}}();m.getTransform=function(){var a=c.create();return function(b,f,c){var l=C(f),g=e.toRadian(f.rotation)||0;
p(a,f.targetGeometry);return m.getMatrix(b,a,c,l,g)}}();m.getTransformNoRotation=function(){var a=c.create();return function(b,f,c){var l=C(f);p(a,f.targetGeometry);return m.getMatrix(b,a,c,l,0)}}();m.getWorldWidth=F;m.getWorldScreenWidth=x;m.createAsync=function(a,b){return d.resolve(y(a,b))};m.angleBetween=function(){var a=c.create(),b=c.create(),f=c.create();return function(l,g,d){c.subtract(a,l,g);c.normalize(a,a);c.subtract(b,l,d);c.normalize(b,b);c.cross(f,a,b);l=Math.acos(c.dot(a,b)/(c.length(a)*
c.length(b)))*T;0>f[2]&&(l=-l);isNaN(l)&&(l=0);return l}}();m.addPadding=function(){var a=c.create();return function(b,f,c,l){var g=b.targetGeometry;t(b,f);M(a,f,c,l);g.x+=a[0];g.y+=a[1];return b}}();m.removePadding=function(){var a=c.create();return function(b,f,c,l){var g=b.targetGeometry;t(b,f);M(a,f,c,l);g.x-=a[0];g.y-=a[1];return b}}();m.centerAt=function(){var a=c.create();return function(b,f,c){t(b,f);f=b.targetGeometry;var l=v(c),g=v(f);p(a,c);r(a,a,l,g);f.x=a[0];f.y=a[1];return b}}();m.pixelSizeAt=
function(a,b,f){return C(b)};m.resize=function(){var a=c.create();return function(b,f,l,g,d){d||(d="center");c.sub(a,l,g);c.scale(a,a,0.5);l=a[0];g=a[1];switch(d){case "center":c.set(a,0,0);break;case "left":c.set(a,-l,0);break;case "top":c.set(a,0,g);break;case "right":c.set(a,l,0);break;case "bottom":c.set(a,0,-g);break;case "top-left":c.set(a,-l,g);break;case "bottom-left":c.set(a,-l,-g);break;case "top-right":c.set(a,l,g);break;case "bottom-right":c.set(a,l,-g)}m.translateBy(b,f,a);return b}}();
m.rotateBy=function(a,b,f){t(a,b);a.rotation+=f;return a};m.rotateTo=function(a,b,f){t(a,b);a.rotation=f;return a};m.scaleBy=function(){var a=c.create();return function(b,f,l,g,d){t(b,f);0!==l&&(m.toMap(a,g,f,d),b.scale=f.scale/l,m.toScreen(a,a,b,d),m.translateBy(b,b,c.set(a,a[0]-g[0],g[1]-a[1])));return b}}();m.scaleTo=function(a,b,f){t(a,b);a.scale=f;return a};m.scaleAndRotateBy=function(){var a=c.create();return function(b,f,l,g,d,k){t(b,f);0!==l&&(m.toMap(a,d,f,k),b.scale=f.scale/l,b.rotation+=
g,m.toScreen(a,a,b,k),m.translateBy(b,b,c.set(a,a[0]-d[0],d[1]-a[1])));return b}}();m.toMap=function(){var a=h.create();return function(b,f,l,g){return c.transformMat2d(b,f,E(a,l,g))}}();m.toScreen=function(){var a=h.create();return function(b,f,l,g){return c.transformMat2d(b,f,m.getTransform(a,l,g))}}();m.translateBy=function(){var a=c.create(),b=h.create();return function(f,l,g){t(f,l);var d=C(l),k=f.targetGeometry;h.fromRotation(b,e.toRadian(l.rotation)||0);h.scale(b,b,c.fromValues(d,d));c.transformMat2d(a,
g,b);k.x+=a[0];k.y+=a[1];return f}}()})},"esri/views/2d/math/common":function(){define([],function(){if(!n)var n=1E-6;if(!m)var m="undefined"!==typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var h={GLMAT_EPSILON:n,GLMAT_ARRAY_TYPE:m,GLMAT_RANDOM:e,setMatrixArrayType:function(c){h.GLMAT_ARRAY_TYPE=c}},c=Math.PI/180,k=180/Math.PI;h.toRadian=function(d){return d*c};h.toDegree=function(c){return c*k};h.setMatrixArrayType(Array);return h})},"esri/views/2d/math/mat2d":function(){define(["./common"],
function(n){var m=n.GLMAT_ARRAY_TYPE;n={create:function(){var e=new m(6);e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return e},clone:function(e){var h=new m(6);h[0]=e[0];h[1]=e[1];h[2]=e[2];h[3]=e[3];h[4]=e[4];h[5]=e[5];return h},copy:function(e,h){e[0]=h[0];e[1]=h[1];e[2]=h[2];e[3]=h[3];e[4]=h[4];e[5]=h[5];return e},identity:function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return e},invert:function(e,h){var c=h[0],k=h[1],d=h[2],g=h[3],b=h[4],l=h[5],a=c*g-k*d;if(!a)return null;a=1/a;e[0]=g*a;e[1]=
-k*a;e[2]=-d*a;e[3]=c*a;e[4]=(d*l-g*b)*a;e[5]=(k*b-c*l)*a;return e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,h,c){var k=h[0],d=h[1],g=h[2],b=h[3],l=h[4];h=h[5];var a=c[0],f=c[1],s=c[2],q=c[3],r=c[4];c=c[5];e[0]=k*a+g*f;e[1]=d*a+b*f;e[2]=k*s+g*q;e[3]=d*s+b*q;e[4]=k*r+g*c+l;e[5]=d*r+b*c+h;return e}};n.mul=n.multiply;n.rotate=function(e,h,c){var k=h[0],d=h[1],g=h[2],b=h[3],l=h[4];h=h[5];var a=Math.sin(c);c=Math.cos(c);e[0]=k*c+g*a;e[1]=d*c+b*a;e[2]=k*-a+g*c;e[3]=d*-a+b*
c;e[4]=l;e[5]=h;return e};n.scale=function(e,h,c){var k=h[1],d=h[2],g=h[3],b=h[4],l=h[5],a=c[0];c=c[1];e[0]=h[0]*a;e[1]=k*a;e[2]=d*c;e[3]=g*c;e[4]=b;e[5]=l;return e};n.translate=function(e,h,c){var k=h[0],d=h[1],g=h[2],b=h[3],l=h[4];h=h[5];var a=c[0];c=c[1];e[0]=k;e[1]=d;e[2]=g;e[3]=b;e[4]=k*a+g*c+l;e[5]=d*a+b*c+h;return e};n.fromRotation=function(e,h){var c=Math.sin(h),k=Math.cos(h);e[0]=k;e[1]=c;e[2]=-c;e[3]=k;e[4]=0;e[5]=0;return e};n.fromScaling=function(e,h){e[0]=h[0];e[1]=0;e[2]=0;e[3]=h[1];
e[4]=0;e[5]=0;return e};n.fromTranslation=function(e,h){e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=h[0];e[5]=h[1];return e};n.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"};n.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};return n})},"esri/views/2d/math/vec2":function(){define(["./common"],function(n){var m=n.GLMAT_ARRAY_TYPE,e=n.GLMAT_RANDOM,h={create:function(){var c=new m(2);
c[0]=0;c[1]=0;return c},clone:function(c){var k=new m(2);k[0]=c[0];k[1]=c[1];return k},fromValues:function(c,k){var d=new m(2);d[0]=c;d[1]=k;return d},copy:function(c,k){c[0]=k[0];c[1]=k[1];return c},set:function(c,k,d){c[0]=k;c[1]=d;return c},add:function(c,k,d){c[0]=k[0]+d[0];c[1]=k[1]+d[1];return c},subtract:function(c,k,d){c[0]=k[0]-d[0];c[1]=k[1]-d[1];return c}};h.sub=h.subtract;h.multiply=function(c,k,d){c[0]=k[0]*d[0];c[1]=k[1]*d[1];return c};h.mul=h.multiply;h.divide=function(c,k,d){c[0]=
k[0]/d[0];c[1]=k[1]/d[1];return c};h.div=h.divide;h.min=function(c,k,d){c[0]=Math.min(k[0],d[0]);c[1]=Math.min(k[1],d[1]);return c};h.max=function(c,k,d){c[0]=Math.max(k[0],d[0]);c[1]=Math.max(k[1],d[1]);return c};h.scale=function(c,k,d){c[0]=k[0]*d;c[1]=k[1]*d;return c};h.scaleAndAdd=function(c,k,d,g){c[0]=k[0]+d[0]*g;c[1]=k[1]+d[1]*g;return c};h.distance=function(c,k){var d=k[0]-c[0],g=k[1]-c[1];return Math.sqrt(d*d+g*g)};h.dist=h.distance;h.squaredDistance=function(c,k){var d=k[0]-c[0],g=k[1]-
c[1];return d*d+g*g};h.sqrDist=h.squaredDistance;h.length=function(c){var k=c[0];c=c[1];return Math.sqrt(k*k+c*c)};h.len=h.length;h.squaredLength=function(c){var k=c[0];c=c[1];return k*k+c*c};h.sqrLen=h.squaredLength;h.negate=function(c,k){c[0]=-k[0];c[1]=-k[1];return c};h.inverse=function(c,k){c[0]=1/k[0];c[1]=1/k[1];return c};h.normalize=function(c,k){var d=k[0],g=k[1],d=d*d+g*g;0<d&&(d=1/Math.sqrt(d),c[0]=k[0]*d,c[1]=k[1]*d);return c};h.dot=function(c,k){return c[0]*k[0]+c[1]*k[1]};h.cross=function(c,
k,d){k=k[0]*d[1]-k[1]*d[0];c[0]=c[1]=0;c[2]=k;return c};h.lerp=function(c,k,d,g){var b=k[0];k=k[1];c[0]=b+g*(d[0]-b);c[1]=k+g*(d[1]-k);return c};h.random=function(c,k){k=k||1;var d=2*e()*Math.PI;c[0]=Math.cos(d)*k;c[1]=Math.sin(d)*k;return c};h.transformMat2=function(c,k,d){var g=k[0];k=k[1];c[0]=d[0]*g+d[2]*k;c[1]=d[1]*g+d[3]*k;return c};h.transformMat2d=function(c,k,d){var g=k[0];k=k[1];c[0]=d[0]*g+d[2]*k+d[4];c[1]=d[1]*g+d[3]*k+d[5];return c};h.transformMat3=function(c,k,d){var g=k[0];k=k[1];c[0]=
d[0]*g+d[3]*k+d[6];c[1]=d[1]*g+d[4]*k+d[7];return c};h.transformMat4=function(c,k,d){var g=k[0];k=k[1];c[0]=d[0]*g+d[4]*k+d[12];c[1]=d[1]*g+d[5]*k+d[13];return c};h.forEach=function(){var c=h.create();return function(k,d,g,b,l,a){d||(d=2);g||(g=0);for(b=b?Math.min(b*d+g,k.length):k.length;g<b;g+=d)c[0]=k[g],c[1]=k[g+1],l(c,c,a),k[g]=c[0],k[g+1]=c[1];return k}}();h.str=function(c){return"vec2("+c[0]+", "+c[1]+")"};return h})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./math/vec2 ./math/mat2d".split(" "),
function(n,m,e,h,c,k,d,g,b,l){return function(a){function f(){a.apply(this,arguments);this.size=[0,0]}e(f,a);Object.defineProperty(f.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return b.set(b.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extent",{get:function(){return g.getExtent(new d,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this.size?this.size[1]:
0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"inverseTransform",{get:function(){return l.invert(l.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"resolution",{get:function(){return g.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"screenCenter",{get:function(){return b.scale(b.create(),
this.size,0.5)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"transform",{get:function(){return g.getTransform(l.create(),this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"transformNoRotation",{get:function(){return g.getTransformNoRotation(l.create(),this.viewpoint,this.size)},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"clippedExtent",{get:function(){return g.getClippedExtent(new d,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"worldScreenWidth",{get:function(){return g.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"worldWidth",{get:function(){return g.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,configurable:!0});f.prototype.copy=
function(a){!this.viewpoint||!this.size?(this.viewpoint=a.viewpoint.clone(),b.copy(this.size,a.size)):(this._set("viewpoint",g.copy(this.viewpoint,a.viewpoint)),this._set("size",b.copy(this.size,a.size)))};f.prototype.clone=function(){return new f({viewpoint:this.viewpoint.clone(),size:b.clone(this.size)})};f.prototype.toMap=function(a,f){return b.transformMat2d(a,f,this.inverseTransform)};f.prototype.toScreen=function(a,f){return b.transformMat2d(a,f,this.transform)};f.prototype.pixelSizeAt=function(a){return g.pixelSizeAt(a,
this.viewpoint,this.size)};h([c.property({dependsOn:["viewpoint"]})],f.prototype,"center",null);h([c.property({readOnly:!0,dependsOn:["viewpoint","size"]})],f.prototype,"extent",null);h([c.property({readOnly:!0,dependsOn:["size"]})],f.prototype,"height",null);h([c.property({value:0,readOnly:!0,dependsOn:["transform"]})],f.prototype,"id",null);h([c.property({readOnly:!0,dependsOn:["transform"]})],f.prototype,"inverseTransform",null);h([c.property({readOnly:!0,dependsOn:["viewpoint"]})],f.prototype,
"latitude",null);h([c.property({readOnly:!0,dependsOn:["viewpoint"]})],f.prototype,"longitude",null);h([c.property({readOnly:!0,dependsOn:["viewpoint"]})],f.prototype,"resolution",null);h([c.property({readOnly:!0,dependsOn:["viewpoint"]})],f.prototype,"rotation",null);h([c.property({readOnly:!0,dependsOn:["viewpoint"]})],f.prototype,"scale",null);h([c.property({readOnly:!0,dependsOn:["size"]})],f.prototype,"screenCenter",null);h([c.property()],f.prototype,"size",void 0);h([c.property({readOnly:!0,
dependsOn:["viewpoint"]})],f.prototype,"spatialReference",null);h([c.property({readOnly:!0,dependsOn:["viewpoint","size"]})],f.prototype,"transform",null);h([c.property({readOnly:!0,dependsOn:["viewpoint","size"]})],f.prototype,"transformNoRotation",null);h([c.property()],f.prototype,"viewpoint",void 0);h([c.property({readOnly:!0,dependsOn:["viewpoint","size"]})],f.prototype,"clippedExtent",null);h([c.property({readOnly:!0,dependsOn:["size"]})],f.prototype,"width",null);h([c.property({readOnly:!0,
dependsOn:["worldWidth","resolution"]})],f.prototype,"worldScreenWidth",null);h([c.property({readOnly:!0,dependsOn:["spatialReference"]})],f.prototype,"worldWidth",null);h([c.property({readOnly:!0,dependsOn:["spatialReference"]})],f.prototype,"wrappable",null);h([c.property({readOnly:!0,dependsOn:["center"]})],f.prototype,"x",null);h([c.property({readOnly:!0,dependsOn:["center"]})],f.prototype,"y",null);return f=h([c.subclass("esri.views.2d.ViewState")],f)}(c.declared(k))})},"esri/views/2d/MapViewConstraints":function(){define(["../../core/Accessor",
"../../core/Evented","../../layers/support/LOD","./constraints/ZoomConstraint","./constraints/RotationConstraint"],function(n,m,e,h,c){return n.createSubclass([m],{declaredClass:"esri.views.2d.MapViewConstraints",destroy:function(){this.view=null},initialize:function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)},properties:{effectiveLODs:{readOnly:!0,aliasOf:"_zoom.effectiveLODs"},effectiveMinScale:{readOnly:!0,aliasOf:"_zoom.effectiveMinScale"},effectiveMaxScale:{readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"},effectiveMinZoom:{readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"},effectiveMaxZoom:{readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"},enabled:!0,lods:{value:null,type:[e]},minScale:0,maxScale:0,minZoom:-1,maxZoom:-1,rotationEnabled:!0,snapToZoom:!0,view:{value:null},_zoom:{type:h,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom view.tileInfo".split(" "),get:function(){return new h({lods:this.lods||this.view&&this.view.tileInfo&&this.view.tileInfo.lods,minZoom:this.minZoom,
maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}},_rotation:{type:c,dependsOn:["rotationEnabled"],get:function(){return new c({rotationEnabled:this.rotationEnabled})}}},constrain:function(c,d){if(!this.enabled)return c;this._zoom.constrain(c,d);this._rotation.constrain(c,d);return c},zoomToScale:function(c){return this._zoom.zoomToScale(c)},scaleToZoom:function(c){return this._zoom.scaleToZoom(c)},snapScale:function(c,d){return this._zoom.snapScale(c,
d)}})})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(n,m,e,h,c,k,d){return function(g){function b(){g.apply(this,arguments);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=
0;this.enabled=!0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}e(b,g);b.prototype.initialize=function(){var b=this,a=this.lods,f=this.minScale,c=this.maxScale,g=this.minZoom,d=this.maxZoom,k=-1,e=-1,h=!1,w=!1;0!==f&&(0!==c&&f<c)&&(c=[c,f],f=c[0],c=c[1]);if(a&&a.length){a=a.map(function(a){return a.clone()});a.sort(function(a,b){return b.scale-a.scale});a.forEach(function(a,b){return a.level=b});for(var m,t=0,n=a;t<n.length;t++){var E=n[t];!h&&(0<f&&
f>=E.scale)&&(k=E.level,h=!0);!w&&(0<c&&c>=E.scale)&&(e=m?m.level:-1,w=!0);m=E}-1===g&&(g=0===f?0:k);-1===d&&(d=0===c?a.length-1:e);g=Math.max(g,0);g=Math.min(g,a.length-1);d=Math.max(d,0);d=Math.min(d,a.length-1);g>d&&(f=[d,g],g=f[0],d=f[1]);f=a[g].scale;c=a[d].scale;a.splice(0,g);a.splice(d-g+1,a.length);a.forEach(function(a,f){b._lodByScale[a.scale]=a;b._scales[f]=a.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",g);this._set("effectiveMaxZoom",d)}this._set("effectiveMinScale",
f);this._set("effectiveMaxScale",c)};b.prototype.constrain=function(b,a){if(!this.enabled||a&&b.scale===a.scale)return b;var f=this.effectiveMinScale,c=this.effectiveMaxScale,g=b.targetGeometry,d=a&&a.targetGeometry,k=0!==f&&b.scale>f;if(0!==c&&b.scale<c||k)f=k?f:c,d&&(c=(f-a.scale)/(b.scale-a.scale),g.x=d.x+(g.x-d.x)*c,g.y=d.y+(g.y-d.y)*c),b.scale=f;this.snapToZoom&&this.effectiveLODs&&(b.scale=this._getClosestScale(b.scale));return b};b.prototype.zoomToScale=function(b){if(!this.effectiveLODs)return 0;
b-=this.effectiveMinZoom;b=Math.max(0,b);var a=this._scales;if(0>=b)return a[0];if(b>=a.length)return a[a.length-1];var f=Math.round(b-0.5),c=Math.round(b);return a[c]+(c-b)*(a[f]-a[c])};b.prototype.scaleToZoom=function(b){if(!this.effectiveLODs)return-1;var a=this._scales,f=0,c=a.length-1,g,d;for(f;f<c;f++){g=a[f];d=a[f+1];if(g<=b)return f+this.effectiveMinZoom;if(d===b)return f+1+this.effectiveMinZoom;if(g>b&&d<b)return f+1-(b-d)/(g-d)+this.effectiveMinZoom}return f};b.prototype.snapScale=function(b,
a){void 0===a&&(a=0.95);if(!this.effectiveLODs)return b;var f=this.scaleToZoom(b);return(f+1)%Math.floor(f+1)>=a?this.zoomToScale(Math.ceil(f)):this.zoomToScale(Math.floor(f))};b.prototype.clone=function(){return new b({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};b.prototype._getClosestScale=function(b){if(this._lodByScale[b])return this._lodByScale[b].scale;b=this._scales.reduce(function(a,f,c,g){return Math.abs(f-
b)<=Math.abs(a-b)?f:a},this._scales[0]);return this._lodByScale[b].scale};h([c.property({readOnly:!0})],b.prototype,"effectiveLODs",void 0);h([c.property({readOnly:!0})],b.prototype,"effectiveMinZoom",void 0);h([c.property({readOnly:!0})],b.prototype,"effectiveMaxZoom",void 0);h([c.property({readOnly:!0})],b.prototype,"effectiveMinScale",void 0);h([c.property({readOnly:!0})],b.prototype,"effectiveMaxScale",void 0);h([c.property()],b.prototype,"enabled",void 0);h([c.property({type:[d]})],b.prototype,
"lods",void 0);h([c.property()],b.prototype,"minZoom",void 0);h([c.property()],b.prototype,"maxZoom",void 0);h([c.property()],b.prototype,"minScale",void 0);h([c.property()],b.prototype,"maxScale",void 0);h([c.property()],b.prototype,"snapToZoom",void 0);return b=h([c.subclass("esri.views.2d.constraints.ZoomConstraint")],b)}(c.declared(k))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(n,m,e,h,c,k){return function(d){function g(){d.apply(this,arguments);this.rotationEnabled=this.enabled=!0}e(g,d);g.prototype.constrain=function(b,c){if(!this.enabled)return b;this.rotationEnabled||(b.rotation=0);return b};g.prototype.clone=function(){return new g({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};h([c.property()],g.prototype,"enabled",void 0);h([c.property()],g.prototype,"rotationEnabled",void 0);return g=h([c.subclass("esri.views.2d.constraints.RotationConstraint")],
g)}(c.declared(k))})},"esri/views/2d/AnimationManager":function(){define("../../core/declare ../../core/Accessoire ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(n,m,e,h,c,k,d){var g=function(b,c,a,f){var g=b.targetGeometry,d=c.targetGeometry;f?"string"===typeof f&&(f=k.parse(f)||k.ease):f=k.ease;this.easing=f;this.duration=a;this.sCenterX=g.x;this.sCenterY=g.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=d.x;this.tCenterY=d.y;
this.tScale=c.scale;this.tRotation=c.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};g.prototype.applyRatio=function(b,c){var a=this.easing(c),f,g,d;1<=c?(f=this.tCenterX,g=this.tCenterY,d=this.tRotation,a=this.tScale):(f=this.sCenterX+a*this.dCenterX,g=this.sCenterY+a*this.dCenterY,d=this.sRotation+
a*this.dRotation,a=this.sScale+a*this.dScale);b.targetGeometry.x=f;b.targetGeometry.y=g;b.scale=a;b.rotation=d};return n(m,{constructor:function(){this._updateTask=e.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:d.create()}},duration:200,transition:null,easing:k.ease,animateTo:function(b,l,a){d.copy(this.viewpoint,l);this.transition=new g(this.viewpoint,b,a&&a.duration||this.duration,a&&a.easing||this.easing);this.animation&&
(this.animation.stop(),this.animation=null);b=this.animation=new c({target:b.clone()});b.always(function(){this._updateTask&&(this._updateTask.pause(),this.animation=null)}.bind(this));this._startTime=h();this._updateTask.resume();return b},_postRender:function(b){b=this.animation;if(!b||b.state===c.STOPPED)this._updateTask.pause();else{b=(h()-this._startTime)/this.transition.duration;var l=1<=b;this.transition.applyRatio(this.viewpoint,b);this.animation._dfd.progress(this.viewpoint);l&&this.animation.finish()}}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var n=function(e,h,c,k){function d(a,c){var f,d,k,e;c=null==c?1E-6:c;k=a;for(d=0;8>d;d++){e=((l*k+b)*k+g)*k-a;if(Math.abs(e)<c)return k;f=(3*l*k+2*b)*k+g;if(1E-6>Math.abs(f))break;k-=e/f}f=0;d=1;k=a;if(k<f)return f;if(k>d)return d;for(;f<d;){e=((l*k+b)*k+g)*k;if(Math.abs(e-a)<c)break;a>e?f=k:d=k;k=0.5*(d-f)+f}return k}var g=3*e,b=3*(c-e)-g,l=1-g-b,a=3*h,f=3*(k-h)-a,s=1-a-f;return function(b,c){var l=d(b,c);return((s*l+f)*l+a)*l}},m=/^cubic-bezier\((.*)\)/;
n.parse=function(e){var h=n[e]||null;if(!h&&(e=m.exec(e)))e=e[1].split(",").map(function(c){return parseFloat(c.trim())}),4===e.length&&!e.some(function(c){return isNaN(c)})&&(h=n.apply(n,e));return h};n.ease=n(0.25,0.1,0.25,1);n.linear=n(0,0,1,1);n.easeIn=n["ease-in"]=n(0.42,0,1,1);n.easeOut=n["ease-out"]=n(0,0,0.58,1);n.easeInOut=n["ease-in-out"]=n(0.42,0,0.58,1);return n})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r,v){var p=[0,0],u=16,w=750;return function(b){function m(){var a=this;b.call(this);this.height=0;this.position=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.width=0;Object.defineProperty(this,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:u,time:w}});this._domHandles=new l;this.watch("interacting",function(b){var f=a.surface;f&&f.setAttribute("data-interacting",b.toString())})}e(m,b);m.prototype.getDefaults=function(){return c.mixin(this.inherited(arguments),
{popup:{},ui:{}})};m.prototype.initialize=function(){var b=this,c=this._measureInfo,l=null;f.init(this,"container",function(f,g,d,e){null==f&&null==g||(l&&(l.remove(),l=null,c.freq=u,c.time=w),c.task&&(c.task.remove(),c.task=null),f?(l=k(window,"resize",function(){c.freq=u;c.time=w}),c.task=a.addFrameTask({prepare:function(a){var f=b._measureInfo;f.time+=a.deltaTime;f.time<f.freq||(f.time=0,b._measure()?(f.freq=u,b._set("resizing",!0)):(f.freq=Math.min(w,2*f.freq),512<=f.freq&&b._set("resizing",!1)))}})):
b._set("resizing",!1),b._measure(),f=b.root,g=b.surface,d=b.width,e=b.height,f&&(g&&d&&e)&&(f.style.width=g.style.width=d+"px",f.style.height=g.style.height=e+"px"))})};m.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null};Object.defineProperty(m.prototype,"container",{set:function(a){var b=this._get("container");if(b!==a){b&&(b.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,g.destroy(this.root),this._set("root",null));
if(a){a.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-root";a.insertBefore(b,a.firstChild);this._set("root",b);var f=document.createElement("div");f.className="esri-view-surface";d.setSelectable(f,!1);b.appendChild(f);this._set("surface",f);this._forceReadyCycle();this.popupManager=new q({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",a)}},
enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"popup",{set:function(a){var b=this._get("popup");a!==b&&(this._domHandles.remove("view-popup"),b&&b.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([f.init(this,"root",function(b,f){var c=a.domNode;d.isDescendant(c.parentNode,f)&&c.parentNode.removeChild(c);b&&!c.parentNode&&a.placeAt(b)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"size",
{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"ui",{set:function(a){var b=this._get("ui");a!==b&&(this._domHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._domHandles.add([f.init(this,"root",function(b){a.container=b?g.create("div",null,b):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0});m.prototype.pageToContainer=function(a,b,f){var c=this.position;a-=c[0];b-=c[1];f?(f[0]=a,f[1]=b):f=[a,b];return f};m.prototype.containerToPage=
function(a,b,f){var c=this.position;a+=c[0];b+=c[1];f?(f[0]=a,f[1]=b):f=[a,b];return f};m.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,f=a?a.clientHeight:0;if(0===b||0===f||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var c=this.root,l=this.surface,g=this.width,d=this.height,k=this.position;if(b===g&&f===d)return this._set("suspended",!1),!1;c&&l&&(c.style.width=l.style.width=b+"px",c.style.height=l.style.height=f+"px");this._set("width",
b);this._set("height",f);this._set("suspended",!1);c=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();p[0]=a.left+c.pageXOffset;p[1]=a.top+c.pageYOffset;(!k||p[0]!==k[0]||p[1]!==k[1])&&this._set("position",p.slice());this.emit("resize",{oldWidth:g,oldHeight:d,width:b,height:f});return!0};h([v.property({value:null,cast:function(a){return d.byId(a)}})],m.prototype,"container",null);h([v.property({readOnly:!0})],m.prototype,"height",void 0);h([v.property({type:s})],m.prototype,
"popup",null);h([v.property({readOnly:!0})],m.prototype,"position",void 0);h([v.property({readOnly:!0})],m.prototype,"resizing",void 0);h([v.property({readOnly:!0})],m.prototype,"root",void 0);h([v.property({value:null,dependsOn:["width","height"],readOnly:!0})],m.prototype,"size",null);h([v.property({readOnly:!0})],m.prototype,"surface",void 0);h([v.property({readOnly:!0})],m.prototype,"suspended",void 0);h([v.property({type:r})],m.prototype,"ui",null);h([v.property({readOnly:!0})],m.prototype,"width",
void 0);return m=h([v.subclass("esri.views.DOMContainer")],m)}(v.declared(b))})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner ./Message require".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r,v,p,u,w,y,t,z,E,A,C,H){var F=H.toUrl("./Popup/images/default-action.svg"),x={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},B={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},J={buttonEnabled:!0,position:B.auto,breakpoint:{width:544}},D={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return m.createSubclass([g],{declaredClass:"esri.widgets.Popup",
baseClass:x.base,templateString:q,constructor:function(){this._handleRegistry=new h;this._contentStorage=w.create("div")},postCreate:function(){var a=this;this.inherited(arguments);var b=this.viewModel;this.own(c.whenTrue(b,"view.ready",function(){this._wireUpView(this.viewModel.view)}.bind(this)),c.init(b,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),
c.init(b,"features",this._updateFeatures.bind(this)),c.init(b,"selectedFeatureIndex,selectedFeature",function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),c.init(b,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),c.init(b,"actions",
function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),c.init(b,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),c.init(b,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),l(this._dockNode,d,this._toggleDock.bind(this)),l(this._closeNode,d,this.close.bind(this)),l(this._previousNode,d,b.previous.bind(b)),l(this._previousDockedNode,
d,b.previous.bind(b)),l(this._nextNode,d,b.next.bind(b)),l(this._nextDockedNode,d,b.next.bind(b)),l(this._pageMenuNode,d,this._togglePageMenu.bind(this)),l(this._pageMenuDockedNode,d,this._togglePageMenu.bind(this)),l(this._pageMenuInfoNode,d,this._togglePageMenu.bind(this)),l(this._paginationNode,l.selector("li",d),function(){a._selectFeature(this)}),l(this._paginationNode,l.selector("li","keyup"),function(b){a._keyupFeature(b,this)}),l(this._actionsNode,l.selector("[data-action-index]",d),function(){a._actionEvent(this)}),
l(b,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));n.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroyMessage();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},
autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:J,set:function(a){var b=v.clone(J),f=this.viewModel.get("view.breakpoints"),c={};f&&(c.width=f.xsmall,c.height=f.xsmall);a=v.mixin({},b,a);b=v.mixin({},b.breakpoint,c);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=v.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},
dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},location:{aliasOf:"viewModel.location"},messageEnabled:{value:!0,set:function(a){this._set("messageEnabled",a);this._createMessage(a,this.viewModel.view)}},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",
a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},rendered:{dependsOn:["viewModel.content","_popupRenderer.rendered"],get:function(){var a=this._contentIsPopupRenderer()&&this.get("_popupRenderer.rendered");return this._popupRenderer?a:!0},readOnly:!0},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:e},visible:{value:!1,set:function(a){this._set("visible",a);p.remove(this._containerNode,x.hasPaginationMenuOpen);p.toggle(this.domNode,x.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}}},_css:x,_i18n:s,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,
_popupRendererVMs:[],clear:n.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:n.createMethodDelegate("next"),previous:n.createMethodDelegate("previous"),reposition:function(){this._positionPopup();return this._moveIntoView()},open:function(a){var b=v.mixin({updateLocationEnabled:!1},a);this.viewModel.set(b);a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:n.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(D.actionsChange);
a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],D.actionsChange)},_actionEvent:function(a){var b=this.viewModel;if(a=u.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,
b,f){this._updateActionButtons(a,f);this._updateFooterVisibility(b,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),b=this.get("_popupRenderer.domNode");return!(!a||!(b&&a===b))},_updateActionButtons:function(a,b){this._handleRegistry.remove(D.actions);if(this._actionsNode){var f=document.createDocumentFragment(),l=a.length;l&&a.forEach(function(a,g){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=x.iconZoom);var d=a.title,k=a.className,e=a.image;
!e&&!k&&(e=F);var h=b&&b.attributes;h&&(d=d?r.substitute(h,d):"",k=k?r.substitute(h,k):null,e=e?r.substitute(h,e):null);var s=w.create("div",{tabindex:"0",title:d},f);u.set(s,"data-action-index",g);p.add(s,[x.button,x.action]);var q=w.create("span",{"aria-hidden":!0},s);p.add(q,x.icon);k&&p.add(q,k);e&&(p.add(q,x.actionImage),t.set(q,"background-image","url("+e+")"));d={className:x.actionText,textContent:d};l>=this._hideActionsTextNum&&(d.className=x.iconText);var m=w.create("span",d,s);this._handleRegistry.add([c.init(a,
"visible",function(a){p.toggle(s,x.hidden,!a)}),c.init(a,"className",function(a,b){h&&(a=r.substitute(h,a),b=r.substitute(h,b));p.remove(q,b);p.add(q,a)}),c.init(a,"image",function(a){h&&(a=r.substitute(h,a));p.toggle(q,x.actionImage,!!a);t.set(q,"background-image",a?"url("+a+")":"")}),c.init(a,"title",function(a){h&&(a=r.substitute(h,a));a=a||"";u.set(s,"title",a);u.set(m,"textContent",a)})],D.actions)},this);w.place(f,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,
b;if(a.location&&this.visible){var f=a.location;f&&a.get("view.ready")&&(b=a.view.toScreen(f))}return b},_calculatePosition:function(a,b,f){var c=this.alignment,l,g=this._pointerOffset,d=null,k=null,e=null,h=null;if(a&&b&&f){l=b.h;if("top"===c||"bottom"===c)l+=g;b=b.w;if("left-top"===c||"left-bottom"===c||"right-top"===c||"right-bottom"===c)b+=g,l+=g;var s=b/2,q=a.y,r=a.x,p=f.height-q,u=f.width-r,w=b;switch(c){case "bottom":d=q+g;k=r-s;w=s;break;case "left-top":e=p+g;h=u+g;break;case "left-bottom":d=
q+g;h=u+g;break;case "right-top":e=p+g;k=r+g;break;case "right-bottom":d=q+g;k=r+g;break;default:e=p+g,k=r-s,w=s}f=f.padding;f=this.dockEnabled?{left:f.left?f.left+"px":"",top:f.top?f.top+"px":"",right:f.right?f.right+"px":"",bottom:f.bottom?f.bottom+"px":""}:{top:null!==d?d+"px":"auto",left:null!==k?k+"px":"auto",bottom:null!==e?e+"px":"auto",right:null!==h?h+"px":"auto"};return{height:l,width:b,box:{top:null!==d?d:a.y-l,left:null!==k?k:a.x-w,bottom:null!==e?e:a.y+l,right:null!==h?h:a.x+w},style:f}}},
_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){var f=new E({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(f)},this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(D.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,b){this._handleRegistry.remove(D.paginationTitles);if(a){var f=a.length;this._paginationNode&&u.set(this._paginationNode,
"innerHTML","");1<f&&(f=r.substitute({total:f},this._i18n.selectedFeatures),u.set(this._pageMenuInfoNode,"textContent",f),a.forEach(function(a,f){var l=this._i18n.untitled,g=w.create("li",{role:"menuitem",className:x.featureMenuItem},this._paginationNode);f===b?(u.set(g,"aria-label",s.selectedFeature),p.add(g,x.featureMenuSelected)):u.set(g,"data-feature-index",f);var d=w.create("span",{className:x.featureMenuTitle,innerHTML:l},g);if(l=this._popupRendererVMs[f])l=c.init(l,"title",function(a){u.set(d,
"innerHTML",a)}),this._handleRegistry.add(l,D.paginationTitles);f===b&&w.create("span",{className:x.iconCheckMark},d)},this))}},_createMessage:function(a,b){this._destroyMessage();a&&b&&(this._message=new C({visible:!1,text:this._i18n.noFeaturesFound,viewModel:{view:b}}),this._message.startup(),w.place(this._message.domNode,b.root))},_createSpinner:function(a,b){this._destroySpinner();a&&b&&(this._spinner=new A({visible:!1,viewModel:{view:b}}),this._spinner.startup(),w.place(this._spinner.domNode,
b.root))},_updateContent:function(a){a&&a.nodeName?(w.place(a,this._contentStorage),w.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),u.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;p.toggle(this._containerNode,x.hasPopupRenderer,this._contentIsPopupRenderer());p.toggle(this._containerNode,x.showContent,!!a);p.remove(this._containerNode,x.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&
!this._popupRenderer._destroyed&&(this._handleRegistry.remove(D.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroyMessage:function(){this._message&&(this._message.destroyRendering(),this._message.destroy(),this._message=null)},_destroySpinner:function(){this._spinner&&(this._spinner.destroyRendering(),this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},
_togglePopupDocking:function(a){p.remove(this._containerNode,x.hasPaginationMenuOpen);p.toggle(this._containerNode,x.isDocked,!!a);u.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,f){var c=a[0];a=a[1];var l=b[0];b=b[1];var g=f.width;f=f.height;return c<=g&&l>g||c>g&&l<=g||a<=f&&b>f||a>f&&b<=f},_determineDockPosition:function(a){var b=this.viewModel,f=b.view,c=f&&f.padding,c=f&&f.width-c.left-c.right;
return(b=f&&b.get("view.breakpoints"))&&c<=b.xsmall?a.bottomCenter:!this.isLeftToRight()?a.topLeft:a.topRight},_updateDockPosition:function(a){p.remove(this._containerNode,[x.isDockedTopLeft,x.isDockedTopCenter,x.isDockedTopRight,x.isDockedBottomLeft,x.isDockedBottomCenter,x.isDockedBottomRight,x.canDockToTop,x.canDockToBottom,x.canDockToLeft,x.canDockToRight]);var b,f,c;b=a.position;b=b===B.auto?this._determineDockPosition(B):"function"===typeof b?b.call(this):b;switch(b){case B.topLeft:f=x.isDockedTopLeft;
c=x.canDockToLeft;break;case B.topCenter:f=x.isDockedTopCenter;c=x.canDockToTop;break;case B.bottomLeft:f=x.isDockedBottomLeft;c=x.canDockToLeft;break;case B.bottomCenter:f=x.isDockedBottomCenter;c=x.canDockToBottom;break;case B.bottomRight:f=x.isDockedBottomRight;c=x.canDockToRight;break;default:f=x.isDockedTopRight,c=x.canDockToRight}p.toggle(this._containerNode,c,!!a.buttonEnabled);this.dockEnabled?(p.add(this._containerNode,f),this._set("currentDockPosition",b)):this._set("currentDockPosition",
null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},_toggleDockButton:function(a){var b=this._containerNode;p.toggle(b,x.showDock,!!a.buttonEnabled);p.toggle(b,x.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){var f=this._isPaginationEnabled(a)||b&&b.length;p.toggle(this._containerNode,x.showFooter,!!f)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,
b);this._createPaginationNodes(a,b);p.toggle(this._containerNode,x.showPagination,this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,f,c){var l=0<a&&0===b;f=f&&f.length;a&&(f&&a===f)&&this.set("visible",!1);p.toggle(this._containerNode,x.hasPendingPromises,!!a);p.toggle(this._containerNode,x.isPendingPromisesResult,!!l);p.toggle(this._containerNode,x.hasPromiseFeatures,!!b);this._message&&this._message.set({visible:!1});l?this._spinner&&(this._spinner.set({visible:!0}),this._spinner.viewModel.point=
c):(this._spinner&&(this._spinner.viewModel.point=null),f&&b&&!this.visible?this.set("visible",!0):f&&(!b&&this.visible)&&this.set("visible",!1),!b&&f&&this._message&&(this._message.set({visible:!0}),this._message.viewModel.point=c))},_moveIntoView:function(){var a=new f;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var f=this._getLocationScreenPoint();if(f){var c=this._sizePopup(),
c=this._calculatePosition(f,c,b),l=b.width,g=b.height,d=b.padding,e=b.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(f.y<d.top||f.y>g-d.bottom||f.x<d.left||f.x>l-d.right)return a.centerAtLocation();if(!this.dockEnabled&&c&&c.width<b.width&&c.height<b.height){var h=f=0;c.box.top<d.top?h=-c.box.top+e.top+d.top:c.box.bottom>g-d.bottom&&(h=-(c.box.bottom-g+d.bottom)-e.bottom);c.box.left<d.left?f=c.box.left-e.left-d.left:c.box.right>l-d.right&&(f=c.box.right-l+d.right+e.right);if(f||
h)return c=k.translateBy(k.create(),b.viewpoint,[f,h]),b.goTo(c,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,b){return b&&a&&-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=this.get("viewModel.view"),b=this._getLocationScreenPoint();if(this._isScreenPointWithinView(b,a)){var f=this._sizePopup(),c=this._pointerOffset,l=f.h+c,f=(f.w+c)/2,g,d,k,e,c=a.padding;b.x-f<0+c.left&&(d=!0);b.x+f>a.width-c.right&&
(g=!0);b.y-l<0+c.top&&(k=!0);b.y+l>a.height-c.bottom&&(e=!0);d?this._set("alignment",k?"right-bottom":"right-top"):g?this._set("alignment",k?"left-bottom":"left-top"):k?this._set("alignment",e?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=this.viewModel.view;if(a){p.remove(this._containerNode,[x.alignTop,x.alignBottom,x.alignLeftTop,x.alignLeftBottom,x.alignRightTop,x.alignRightBottom]);this._triggerOffset();var b;switch(this.alignment){case "bottom":b=x.alignBottom;
break;case "right-top":b=x.alignRightTop;break;case "right-bottom":b=x.alignRightBottom;break;case "left-top":b=x.alignLeftTop;break;case "left-bottom":b=x.alignLeftBottom;break;default:b=x.alignTop}p.add(this._containerNode,b);b=this._getLocationScreenPoint();var f=this._sizePopup();(a=(a=this._calculatePosition(b,f,a))&&a.style)&&t.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();u.set(this._bodyContentNode,"innerHTML","");u.set(this._titleNode,"innerHTML","");
u.set(this._pageTextNode,"innerHTML","");u.set(this._pageTextDockedNode,"innerHTML","");p.remove(this._containerNode,[x.showTitle,x.showContent])},_keyupFeature:function(f,c){var l=f.keyCode;if(l===b.UP_ARROW||l===b.DOWN_ARROW){f.stopPropagation();f.preventDefault();var g=a("li",this._paginationNode),d=g.length,k=g.indexOf(c),e;l===b.UP_ARROW?e=k-1:l===b.DOWN_ARROW&&(e=k+1);0>e?e=d-1:e>=d&&(e=0);g[e].focus()}},_selectFeature:function(a){var b=this.viewModel,f=-1;(a=u.get(a,"data-feature-index"))&&
(f=parseInt(a,10));-1!==f&&(b.selectedFeatureIndex=f);p.remove(this._containerNode,x.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(a){var b=this.viewModel,f,g="",d="";if(a){if(f=a.layer)g=f.id||"",d=f.title||"";if(!this._popupRenderer||this._popupRenderer&&this._popupRenderer._destroyed){this._handleRegistry.remove(D.popupRenderer);this._set("_popupRenderer",new z);f=c.init(this._popupRenderer.viewModel,"title",function(a){b.title=a});var k=c.init(this._popupRenderer.viewModel,
"content",function(a){b.content=a?this._popupRenderer.domNode:null}.bind(this)),e=l(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([f,k,e],D.popupRenderer);this._popupRenderer.startup()}this._popupRenderer.viewModel.graphic=a}this._toggleFeatureUpdatedClass();u.set(this._containerNode,"data-layer-title",d);u.set(this._containerNode,"data-layer-id",g);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,
b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},_sizePopup:function(){return y.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";u.set(this._titleNode,"innerHTML",a);p.toggle(this._containerNode,x.showTitle,!!a);p.remove(this._containerNode,x.hasPaginationMenuOpen)},
_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){p.toggle(this._containerNode,x.hasPaginationMenuOpen);var b=p.contains(this._containerNode,x.hasPaginationMenuOpen);u.set(this._pageMenuSectionNode,"aria-hidden",!b);var f=a("li",this._paginationNode),c=f[0];f.forEach(function(a){u.set(a,"tabIndex",b?"0":"")});b?c&&c.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var f="";this._isPaginationEnabled(a)&&(f=r.substitute({index:b+1,total:a.length},
this._i18n.pageText));this._pageTextNode&&u.set(this._pageTextNode,{textContent:f});this._pageTextDockedNode&&u.set(this._pageTextDockedNode,{textContent:f})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){p.remove(this._containerNode,x.hasFeatureUpdated);this._triggerOffset();p.add(this._containerNode,x.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},
_wireUpView:function(a){this._handleRegistry.remove(D.view);this._viewPointEvent=null;if(a){var b="viewpoint";"3d"===a.type&&(b="camera");this._viewPointEvent=c.pausable(a,b,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),a.watch("size",this._updateDockEnabledForViewSize.bind(this)),l(a,"resize",this.reposition.bind(this)),this._viewPointEvent],D.view);this._togglePopupLocationRepositioning(this.visible);this._createMessage(this.messageEnabled,
a);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var f=this.get("viewModel.view.padding"),c=f.left+f.right,l=f.top+f.bottom,f=[],g=[];f[0]=a[0]-c;f[1]=a[1]-l;g[0]=b[0]-c;g[1]=b[1]-l;c=this.dockOptions;this._dockingThresholdCrossed(f,g,c.breakpoint)&&this._setDockEnabledForViewSize(c);this._updateDockPosition(c)},_togglePopupLocationRepositioning:function(a){var b=
this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(n){function m(e,h){Array.isArray(h)||(h=[h]);return h.map(function(c){return e.viewModel.on(c,function(k){e.emit(c,k)})})}return{createGetterDelegate:function(e){var h="viewModel."+e;return function(){return this.get(h)}},
createSetterDelegate:function(e){return function(h){var c=this.get("viewModel");c&&c.set(e,h)}},createMethodDelegate:function(e){var h="viewModel."+e;return function(){var c=this.get(h);if(c)return c.apply(this.viewModel,arguments)}},setUpEventDelegates:function(e,h){var c=m(e,h),k=n.init(e,"viewModel",function(d,g){c.forEach(function(b){b.remove()});c.length=0;d&&(c=m(e,h));e.own.apply(e,c)});e.own(k)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s){function q(a){return function(b){this._set(a,b)}}function r(a,b){return function(f){v.call(this,a,b,f);this._set(a,f)}}function v(b,c,l){(Array.isArray(c)?c:[c]).forEach(function(c){var g=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":d.isFunction(l)&&(l=l.bind(this));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;g.tagName?a.set(g,c,l):g.set(c,l);break;case "innerText":g.innerHTML="";g.appendChild(this.ownerDocument.createTextNode(l));
break;case "innerHTML":g.innerHTML=l;break;case "class":c=this._get(b),f.replace(g,l,c)}},this)}m.before(function(a,b){if(b.declaredClass===p||m.hasMixin(a,p)){var f=e.getPropertiesMetadata(b);Object.keys(f).forEach(function(a){var b=f[a];var c=b.set;a="function"===typeof c?c:null===c?q(b.name):"string"===typeof c||"object"===typeof c?r(a,c):void 0;b.set=a})}});var p="esri.widgets._WidgetBase";return n.createSubclass([c],{declaredClass:p,postscript:function(f){var c=this.__accessor__;f=c.ctorArgs||
f;var l;(l=this.getDefaults?f?this.getDefaults(f):this.getDefaults({}):null)&&Object.getOwnPropertyNames(l).forEach(function(a){c.set(a,l[a])},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=g.body(this.ownerDocument);k.add(this);this.buildRendering();c.initialize();f&&(this.set(f),c.ctorArgs=null);c.initialize();this.initialize();this.postCreate();if(this.domNode){var d;if((f=this.srcNodeRef)&&
f.parentNode&&this.domNode!==f)f.parentNode.replaceChild(this.domNode,f),d=!0;a.set(this.domNode,{widgetId:this.id,id:this.id});d&&(this.srcNodeRef=null)}this._created=!0;this.notifyChange("container");b.around(this,"startup",function(a){return function(){this._started||a.apply(this)}});this.autoStart&&this.startup()},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||k.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,
delete a.srcNodeRef);return d.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};var f=a.container||a.srcNodeRef||b;f&&(a.srcNodeRef=l.byId(f));return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:h.prototype.postMixInProperties,buildRendering:h.prototype.buildRendering,postCreate:h.prototype.postCreate,startup:h.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},
domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:h.prototype._setStyleAttr},widgetId:{}},destroyDescendants:h.prototype.destroyDescendants,destroyRecursive:h.prototype.destroyRecursive,destroyRendering:h.prototype.destroyRendering,emit:h.prototype.emit,on:function(a,b){return this.own(s(this.domNode,a,b))[0]},toString:h.prototype.toString,getChildren:h.prototype.getChildren,getParent:h.prototype.getParent,isLeftToRight:h.prototype.isLeftToRight,placeAt:h.prototype.placeAt,
onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=!0;this.domNode&&k.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);k.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widget",getDefaults:function(){return d.mixin(this.inherited(arguments),
{viewModel:{}})},buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var b=this._get("container");!this._created&&(!b&&a)&&this._set("container",l.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);f.toggle(this.domNode,"esri-hidden",
!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),function(n,m,e,h,c,k,d,g,b,l,a,f,s){var q={id:"zoom-to"};return m.createSubclass([c],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:e.ofType(a)},
animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:l},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},view:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new k},getDefaults:function(a){return s.mixin(this.inherited(arguments),
{actions:[q],animationOptions:{duration:300,easing:f.quadInOut},promises:[]})},initialize:function(){this._handles.add(g.init(this,"view.scale",this._scaleWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[q],animationOptions:{duration:300,easing:f.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=
0))},location:null,_locationSetter:function(a){var f=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&f&&(a=b.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var b=this._get("promises");b&&b.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",
a);a&&a.length&&(this._set("pendingPromisesCount",a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var b=null,f=this.features;f&&f.length&&(a=(a+f.length)%f.length,b=f[a]);this._set("selectedFeature",b);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(b,
this.updateLocationEnabled)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,zoomFactor:4,_zoomFactorSetter:function(a){var b=this.view;b&&null!=b.scale&&this._setZoomScale(b.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return!this.location||!this.view?
d.reject(new h(this.declaredClass+"::Cannot center at location without a location and view.")):this.view.goTo({target:this.location,scale:this.view.scale},this.animationOptions)},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){this.selectedFeatureIndex-=1;return this},zoomToLocation:function(){var a=
this.view,b=this.location,f=this.zoomScale;if(!b||!a)return d.reject(new h(this.declaredClass+"::Cannot zoom to location without a location and view."));var c=this.selectedFeature,l=c&&c.geometry,g=c&&"3d"===a.type;l||g?(b={target:c},l&&("point"===l.type&&this._isScreenSize(c))&&(b.scale=f,this.location=l)):b={target:b,scale:f};return a.goTo(b,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var b=!0,f=this.view.getViewForGraphic(a);
f&&f.whenGraphicBounds&&f.whenGraphicBounds(a).then(function(a){b=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return b},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),b=a,f=this.selectedFeature.getEffectivePopupTemplate();if(f&&f.actions){for(var b=f.actions,c=0;c<b.length;c++)b.getItemAt(c).temporary=!0;f.overwriteActions?this._originalActions=a:b=a.concat(b)}this.actions=
b},_scaleWatcher:function(a){null!=a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_selectedFeatureChange:function(a,b){a&&(b&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var b=0;a&&a.length&&(b=
a.length);this._set("featureCount",b)},_setZoomScale:function(a,b){this._set("zoomScale",a/b)},_updateFeatures:function(a,b){if(a&&this.promises&&this._validatePromise(a)&&!(b instanceof h||b instanceof Error)&&b&&b.length){var f={};if(!this.features||!this.features.length)f.features=b,f.selectedFeatureIndex=0;else{var c=b.filter(function(a){return-1===this.features.indexOf(a)},this);f.features=this.features.concat(c)}this.set(f)}},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},
"dojo/fx/easing":function(){define(["../_base/lang"],function(n){var m={linear:function(e){return e},quadIn:function(e){return Math.pow(e,2)},quadOut:function(e){return-1*e*(e-2)},quadInOut:function(e){e*=2;return 1>e?Math.pow(e,2)/2:-1*(--e*(e-2)-1)/2},cubicIn:function(e){return Math.pow(e,3)},cubicOut:function(e){return Math.pow(e-1,3)+1},cubicInOut:function(e){e*=2;return 1>e?Math.pow(e,3)/2:(Math.pow(e-2,3)+2)/2},quartIn:function(e){return Math.pow(e,4)},quartOut:function(e){return-1*(Math.pow(e-
1,4)-1)},quartInOut:function(e){e*=2;return 1>e?Math.pow(e,4)/2:-0.5*(Math.pow(e-2,4)-2)},quintIn:function(e){return Math.pow(e,5)},quintOut:function(e){return Math.pow(e-1,5)+1},quintInOut:function(e){e*=2;return 1>e?Math.pow(e,5)/2:(Math.pow(e-2,5)+2)/2},sineIn:function(e){return-1*Math.cos(e*(Math.PI/2))+1},sineOut:function(e){return Math.sin(e*(Math.PI/2))},sineInOut:function(e){return-1*(Math.cos(Math.PI*e)-1)/2},expoIn:function(e){return 0==e?0:Math.pow(2,10*(e-1))},expoOut:function(e){return 1==
e?1:-1*Math.pow(2,-10*e)+1},expoInOut:function(e){if(0==e)return 0;if(1==e)return 1;e*=2;if(1>e)return Math.pow(2,10*(e-1))/2;--e;return(-1*Math.pow(2,-10*e)+2)/2},circIn:function(e){return-1*(Math.sqrt(1-Math.pow(e,2))-1)},circOut:function(e){return Math.sqrt(1-Math.pow(e-1,2))},circInOut:function(e){e*=2;return 1>e?-0.5*(Math.sqrt(1-Math.pow(e,2))-1):0.5*(Math.sqrt(1-Math.pow(e-2,2))+1)},backIn:function(e){return Math.pow(e,2)*(2.70158*e-1.70158)},backOut:function(e){e-=1;return Math.pow(e,2)*(2.70158*
e+1.70158)+1},backInOut:function(e){e*=2;if(1>e)return Math.pow(e,2)*(3.5949095*e-2.5949095)/2;e-=2;return(Math.pow(e,2)*(3.5949095*e+2.5949095)+2)/2},elasticIn:function(e){if(0==e||1==e)return e;e-=1;return-1*Math.pow(2,10*e)*Math.sin((e-0.075)*2*Math.PI/0.3)},elasticOut:function(e){return 0==e||1==e?e:Math.pow(2,-10*e)*Math.sin((e-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(e){if(0==e)return 0;e*=2;if(2==e)return 1;var h=0.3*1.5,c=h/4;if(1>e)return e-=1,-0.5*Math.pow(2,10*e)*Math.sin((e-c)*2*
Math.PI/h);e-=1;return 0.5*Math.pow(2,-10*e)*Math.sin((e-c)*2*Math.PI/h)+1},bounceIn:function(e){return 1-m.bounceOut(1-e)},bounceOut:function(e){e<1/2.75?e=7.5625*Math.pow(e,2):e<2/2.75?e=7.5625*Math.pow(e-1.5/2.75,2)+0.75:e<2.5/2.75?(e-=2.25/2.75,e=7.5625*Math.pow(e,2)+0.9375):(e-=2.625/2.75,e=7.5625*Math.pow(e,2)+0.984375);return e},bounceInOut:function(e){return 0.5>e?m.bounceIn(2*e)/2:m.bounceOut(2*e-1)/2+0.5}};n.setObject("dojo.fx.easing",m);return m})},"esri/widgets/Popup/PopupRenderer":function(){define("require ../Widgette ./PopupRendererViewModel ../../core/requireUtils ../../core/watchUtils dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/on dijit/_TemplatedMixin dijit/a11yclick dojo/i18n!./nls/PopupRenderer dojo/text!./templates/PopupRenderer.html".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q){var r={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",iconDownload:"esri-icon-download",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconMedia:"esri-icon-media",iconChart:"esri-icon-chart",base:"esri-popup-renderer",container:"esri-popup-renderer__size-container",main:"esri-popup-renderer__main-container",btn:"esri-popup-renderer__button",icon:"esri-popup-renderer__icon",
content:"esri-popup-renderer__content",contentElement:"esri-popup-renderer__content-element",text:"esri-popup-renderer__text",showMediaPagination:"esri-popup-renderer--media-pagination-visible",attachments:"esri-popup-renderer__attachments",attachmentsTitle:"esri-popup-renderer__attachments-title",attachmentsItem:"esri-popup-renderer__attachments-item",attachmentsItemIcon:"esri-popup-renderer__attachments-item-icon",fields:"esri-popup-renderer__fields",fieldHeader:"esri-popup-renderer__field-header",
fieldData:"esri-popup-renderer__field-data",fieldDataDate:"esri-popup-renderer__field-data--date",media:"esri-popup-renderer__media",mediaContainer:"esri-popup-renderer__media-container",mediaItemContainer:"esri-popup-renderer__media-item-container",mediaItem:"esri-popup-renderer__media-item",mediaItemTitle:"esri-popup-renderer__media-item-title",mediaItemCaption:"esri-popup-renderer__media-item-caption",mediaPrevious:"esri-popup-renderer__media-previous",mediaPreviousIconLTR:"esri-popup-renderer__media-previous-icon",
mediaPreviousIconRTL:"esri-popup-renderer__media-previous-icon--rtl",mediaNext:"esri-popup-renderer__media-next",mediaNextIconLTR:"esri-popup-renderer__media-next-icon",mediaNextIconRTL:"esri-popup-renderer__media-next-icon--rtl",mediaSummary:"esri-popup-renderer__media-summary",mediaCount:"esri-popup-renderer__media-count",mediaImageSummary:"esri-popup-renderer__media-image-summary",mediaImageIcon:"esri-popup-renderer__media-image-icon",mediaChart:"esri-popup-renderer__media-chart",mediaChartSummary:"esri-popup-renderer__media-chart-summary",
mediaChartIcon:"esri-popup-renderer__media-chart-icon",loading:"esri-popup-renderer__loading",loadingSpinnerContainer:"esri-popup-renderer__loading-container",spinner:"esri-popup-renderer__loading-spinner"},v=/^\s*(https?:\/\/[^\s]+)\s*$/i;return m.createSubclass([a],{declaredClass:"esri.widgets.Popup.PopupRenderer",templateString:q,baseClass:r.base,constructor:function(){this._charts=[];this._chartTooltips=[]},postCreate:function(){this.inherited(arguments);var a=this;this.own(c.init(this,"viewModel.waitingForContent",
this._loadingSpinner.bind(this)),c.init(this,"viewModel.graphic",this._graphicChanged.bind(this)),c.init(this,"viewModel.content",this._render.bind(this)),l(this._contentNode,l.selector("."+r.mediaNext,f),function(){a._nextMedia(this)}),l(this._contentNode,l.selector("."+r.mediaPrevious,f),function(){a._previousMedia(this)}))},destroy:function(){this._destroyCharts();this._clearResizeTimer()},properties:{viewModel:{type:e},rendered:{readOnly:!0,value:!1}},_i18n:s,_css:r,resize:function(){this._resizeCharts();
this.emit("resize")},_clearResizeTimer:function(){this._mediaResizeTimer&&(clearTimeout(this._mediaResizeTimer),this._mediaResizeTimer=0)},_countMediaInfos:function(a){var b=0,f=0;a.forEach(function(a){"image"===a.type?b++:-1!==a.type.indexOf("chart")&&f++});return{total:f+b,images:b,charts:f}},_createMediaNodes:function(a){this._destroyCharts();var f=a.mediaIndex,c=a.mediaInfos[f];a=a.node;b.empty(a);var l=b.create("div",{className:r.mediaItem},a),f=this._createMediaType(c,f);b.place(f,l,"only");
c.title&&b.create("div",{className:r.mediaItemTitle,innerHTML:c.title},a);c.caption&&b.create("div",{className:r.mediaItemCaption,innerHTML:c.caption},a);this._clearResizeTimer();this._mediaResizeTimer=setTimeout(function(){this.resize();this._clearResizeTimer()}.bind(this),0)},_createMediaType:function(a,f){var c=a.value,l;if("image"===a.type){var g=b.create("img",{alt:a.title||"",src:c.sourceURL});c.linkURL?(l=b.create("a",{title:a.title||"",href:c.linkURL,target:this._preventNewTab(c.linkURL)?
"":"_blank"}),b.place(g,l)):l=g}else-1!==a.type.indexOf("chart")&&(l=b.create("div",{className:r.mediaChart},l),c=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],g=a.value.theme||this.chartTheme,"string"===typeof g&&(g=g.replace(/\./gi,"/"),-1===g.indexOf("/")&&(g="dojox/charting/themes/"+g)),g||(g="dojox/charting/themes/Claro"),c.push(g),this._cancelChartModules(),this._chartsPromise=h.when(n,c).then(function(b){this._showChart(l,a.type,a.value,b[0],b[1],b[2]);this._chartsPromise=null}.bind(this)));
return l},_cancelChartModules:function(){this._chartsPromise&&this._chartsPromise.cancel()},_destroyCharts:function(){this._cancelChartModules();var a;if(this._chartTooltips&&this._chartTooltips.length)for(a=0;a<this._chartTooltips.length;a++)this._chartTooltips[a].destroy();this._chartTooltips.length=0;if(this._charts&&this._charts.length)for(a=0;a<this._charts.length;a++)this._charts[a].destroy();this._charts.length=0},_graphicChanged:function(){this._set("rendered",!1)},_loadingSpinner:function(a){g.toggle(this.domNode,
r.loading,!!a)},_nextMedia:function(a){this._pageMedia(a,"next")},_pageMedia:function(a,b){var f,c=d.get(a,"data-element-index");c&&(f=parseInt(c,10),f=this._elementInfo[f]);if(f){var c=f.mediaInfos,l=f.mediaIndex;"previous"===b?l--:l++;c&&c.length&&(l=(l+c.length)%c.length);f.mediaIndex=l;this._createMediaNodes(f)}},_preventNewTab:function(a){return(a=a&&k.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_previousMedia:function(a){this._pageMedia(a,"previous")},_render:function(a){this._elementInfo=
[];this._destroyCharts();b.empty(this._contentNode);var f=this.viewModel;a&&("string"===typeof a?(a=this._renderText({type:"text",text:a}))&&b.place(a,this._contentNode,"only"):a.nodeName?b.place(a,this._contentNode,"only"):Array.isArray(a)&&a.forEach(function(a,c){var l;switch(a.type){case f.contentTypes.attachments:l=this._renderAttachments(a,c);break;case f.contentTypes.fields:l=this._renderFields(a,c);break;case f.contentTypes.media:l=this._renderMedia(a,c);break;case f.contentTypes.text:l=this._renderText(a,
c)}l&&b.place(l,this._contentNode,0===c?"only":"last")},this));this.resize();setTimeout(function(){this._set("rendered",!0)}.bind(this),0)},_renderAttachments:function(a,f){var c,l=a.attachmentInfos;if(l&&l.length){c=b.create("div");g.add(c,[r.attachments,r.contentElement]);b.create("div",{className:r.attachmentsTitle,textContent:s.attach},c);var d=b.create("ul",{},c);l.forEach(function(a){var f=b.create("li",{},d),f=b.create("a",{href:a.url,target:"_blank"},f);b.create("span",{className:r.iconDownload+
" "+r.attachmentsItemIcon},f);b.create("span",{className:r.attachmentsItem,textContent:a.name||s.noTitle},f)},this)}return c},_renderFields:function(a,f){var c=this.viewModel,l,d=c.graphic.getEffectivePopupTemplate();if(d=a.fieldInfos||d&&d.fieldInfos){var k=c.formattedAttributes.content[f]||c.formattedAttributes.global;l=b.create("div");g.add(l,[r.fields,r.contentElement]);var c=b.create("table",{summary:s.fieldsSummary},l),e=b.create("tbody",{},c);d.forEach(function(a){if(a.hasOwnProperty("visible")?
a.visible:1){var f=a.fieldName,c=a.label||f,f=k[f]||"",l;a=a.format&&a.format.dateFormat;f&&"string"===typeof f&&(l=f.replace(v,'\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+c+'"\x3e'+s.view+"\x3c/a\x3e"));var d=b.create("tr",{},e),h=c,q=f;l&&l!==f&&(h=c,q=l);b.create("th",{className:r.fieldHeader,innerHTML:h},d);c=b.create("td",{className:r.fieldData,innerHTML:q},d);a&&g.add(c,r.fieldDataDate)}},this)}return l},_renderMedia:function(a,f){var c,l=a.mediaInfos;if(l&&l.length){var d=this._countMediaInfos(l),
e={tabIndex:"0",role:"button"};e["data-element-index"]=f;c=b.create("div");g.add(c,[r.media,r.contentElement]);g.toggle(c,r.showMediaPagination,1<d.total);var h=b.create("ul",{className:r.mediaSummary},c),q=b.create("li",{className:r.mediaImageSummary},h);b.create("span",{className:r.mediaCount,"aria-label":s.numImages,textContent:"("+d.images+")"},q);b.create("span",{"aria-hidden":!0,className:r.mediaImageIcon+" "+r.iconMedia},q);h=b.create("li",{className:r.mediaImageSummary},h);b.create("span",
{className:r.mediaCount,"aria-label":s.numCharts,textContent:"("+d.charts+")"},h);b.create("span",{"aria-hidden":!0,className:r.mediaChartIcon+" "+r.iconChart},h);d=b.create("div",{className:r.mediaContainer},c);h=b.create("div",k.mixin({title:s.previous},e),d);g.add(h,[r.btn,r.mediaPrevious]);q=b.create("span",{"aria-hidden":!0},h);g.add(q,[r.icon,r.mediaPreviousIconLTR,r.iconLeftTriangleArrow]);q=b.create("span",{"aria-hidden":!0},h);g.add(q,[r.icon,r.mediaPreviousIconRTL,r.iconRightTriangleArrow]);
b.create("span",{className:r.iconText,textContent:s.previous},h);l={mediaIndex:0,node:b.create("div",{className:r.mediaItemContainer},d),mediaInfos:l};this._elementInfo[f]=l;this._createMediaNodes(l);e=b.create("div",k.mixin({title:s.next},e),d);g.add(e,[r.btn,r.mediaNext]);l=b.create("span",{"aria-hidden":!0},e);g.add(l,[r.icon,r.mediaNextIconLTR,r.iconRightTriangleArrow]);l=b.create("span",{"aria-hidden":!0},e);g.add(l,[r.icon,r.mediaNextIconRTL,r.iconLeftTriangleArrow]);b.create("span",{className:r.iconText,
textContent:s.next},e)}return c},_renderText:function(a,f){var c;a&&a.text&&(c=b.create("div",{innerHTML:a.text}),g.add(c,[r.text,r.contentElement]));return c},_resizeCharts:function(){if(this._charts&&this._charts.length)for(var a=0;a<this._charts.length;a++){var b=this._charts[a],f=b.node;f&&(f.offsetWidth&&f.offsetHeight)&&b.resize()}},_showChart:function(a,b,f,c,l,g){a=new c(a,{margins:{l:4,t:4,r:4,b:4}});g&&a.setTheme(g);switch(b){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});
a.addSeries("Series A",f.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",f.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",f.fields);break;case "bar-chart":a.addPlot("default",
{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",f.fields)}b=new l(a);a.render();this._charts.push(a);this._chartTooltips.push(b)}})})},"esri/widgets/Spinner":function(){define("./Widgette ./support/AnchorElementViewModel dojo/i18n!./Spinner/nls/Spinner dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(n,m,e,h,c,k){var d={base:"esri-spinner",
visible:"esri-spinner--visible",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};return n.createSubclass({properties:{viewModel:{type:m}},declaredClass:"esri.widgets.Spinner",baseClass:d.base,postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("point",function(c){this._setDomClasses(c)}.bind(this)),this.viewModel.watch("screenPoint",function(c){this._positionDomNode(c)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:d,_i18n:e,animationDelay:500,
visible:!0,_setVisibleAttr:function(c){this._set("visible",c);this._visibleChange()},_clearTimeout:function(){this._resetTimeout&&clearTimeout(this._resetTimeout)},_setDomClasses:function(c){this.visible&&c?(h.remove(this.domNode,d.spinnerStart),h.remove(this.domNode,d.spinnerFinish),this.domNode.offsetWidth=this.domNode.offsetWidth,h.add(this.domNode,d.spinnerStart)):this.visible&&!c?h.add(this.domNode,d.spinnerFinish):(h.remove(this.domNode,d.spinnerStart),h.remove(this.domNode,d.spinnerFinish))},
_positionDomNode:function(c){c?k.set(this.domNode,{left:c.x+"px",top:c.y+"px"}):(this._clearTimeout(),this._resetTimeout=setTimeout(function(){k.set(this.domNode,{left:"",top:""});this._resetTimeout=0}.bind(this),this.animationDelay))},_visibleChange:function(){h.toggle(this.domNode,d.visible,this.visible)}})})},"esri/widgets/support/AnchorElementViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(n,m,e){return n.createSubclass({properties:{point:{},
screenPoint:{},state:{},view:{}},declaredClass:"esri.widgets.support.AnchorElementViewModel",constructor:function(){this._handles=new m},destroy:function(){this._viewReady&&this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null},point:null,_pointSetter:function(e){this._viewControl(e);this._createScreenPoint(e,this.view);this._set("point",e)},screenPoint:null,state:"disabled",view:null,_viewSetter:function(h){this._handles&&(this._handles.remove("viewHandles"),
this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this.state="disabled";h&&(this._viewReady=h.then(function(){this.state="ready";var c="viewpoint";"3d"===h.type&&(c="camera");this._viewWatch=e.pausable(h,c,function(){this._createScreenPoint(this.point,this.view)}.bind(this));this._handles.add(this._viewWatch,"viewHandles");this._viewControl(this.point)}.bind(this)));this._set("view",h)},_viewControl:function(e){this._viewWatch&&(e?this._viewWatch.resume():this._viewWatch.pause())},_createScreenPoint:function(e,
c){this.screenPoint=e&&c?c.toScreen(e.x,e.y,e.z):null}})})},"esri/widgets/Message":function(){define(["./Widgette","./support/AnchorElementViewModel","dojo/dom-class","dojo/dom-construct","dojo/dom-style"],function(n,m,e,h,c){var k={base:"esri-message",visible:"esri-message--visible",text:"esri-message__text",messageFadeIn:"esri-message--fade-in"};return n.createSubclass({properties:{viewModel:{type:m}},declaredClass:"esri.widgets.Message",baseClass:k.base,constructor:function(){this._text=h.create("span",
{className:k.text})},postCreate:function(){this.inherited(arguments);h.place(this._text,this.domNode);this.own(this.viewModel.watch("point",function(c){this._setDomClasses(c)}.bind(this)),this.viewModel.watch("screenPoint",function(c){this._positionDomNode(c)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:k,animationDelay:3E3,visible:!0,_setVisibleAttr:function(c){this._set("visible",c);this._visibleChange()},text:"",_setTextAttr:{node:"_text",type:"innerText"},_clearTimeout:function(){this._resetTimeout&&
(clearTimeout(this._resetTimeout),this._resetTimeout=0)},_setDomClasses:function(c){this._clearTimeout();e.remove(this.domNode,k.messageFadeIn);this.domNode.offsetWidth=this.domNode.offsetWidth;c&&(e.add(this.domNode,k.messageFadeIn),this._resetTimeout=setTimeout(function(){this.viewModel.point=null;this._resetTimeout=0}.bind(this),this.animationDelay))},_positionDomNode:function(d){d?c.set(this.domNode,{left:d.x+"px",top:d.y+"px"}):c.set(this.domNode,{left:"",top:""})},_visibleChange:function(){e.toggle(this.domNode,
k.visible,this.visible)}})})},"esri/views/ui/DefaultUI":function(){define("../../core/watchUtils ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom ./Component ./UI dojo/_base/lang dojo/dom-geometry".split(" "),function(n,m,e,h,c,k,d,g,b){return d.createSubclass({declaredClass:"esri.views.ui.DefaultUI",constructor:function(){this._addComponents=this._addComponents.bind(this);this._componentsWatcher=this._componentsWatcher.bind(this);this._updateViewAwareWidgets=
this._updateViewAwareWidgets.bind(this)},getDefaults:function(){return g.mixin(this.inherited(arguments),{components:[]})},initialize:function(){this._handles.add([n.init(this,"components",this._componentsWatcher),n.init(this,"view",this._updateViewAwareWidgets)])},_defaultPositionLookup:null,_componentsSetter:function(b){this._set("components",b||[])},_findComponentPosition:function(c){if(!this._defaultPositionLookup){var a=b.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:a?
"top-left":"top-right","navigation-toggle":a?"top-left":"top-right",zoom:a?"top-left":"top-right"}}return this._defaultPositionLookup[c]},_removeComponents:function(b){b.forEach(function(a){if(a=this.find(a))this.remove(a),a.destroy()},this)},_updateViewAwareWidgets:function(b){this.components.forEach(function(a){if(a=(a=this.find(a))&&a.widget)a.viewModel&&a.viewModel.hasOwnProperty("view")?a.viewModel.view=b:a.hasOwnProperty("view")&&a.set("view",b)},this)},_componentsWatcher:function(b,a){this._removeComponents(a);
this._addComponents(b)},_addComponents:function(b){this.initialized&&b.forEach(function(a){this.add(this._createComponent(a),this._findComponentPosition(a))},this)},_createComponent:function(b){var a=this._createWidget(b);if(a)return new k({id:b,node:a})},_createWidget:function(b){if("attribution"===b)return this._createAttribution();if("compass"===b)return this._createCompass();if("navigation-toggle"===b)return this._createNavigationToggle();if("zoom"===b)return this._createZoom()},_createAttribution:function(){var b=
new m({viewModel:{view:this.view}});b.startup();return b},_createCompass:function(){var b=new e({viewModel:{view:this.view}});b.startup();return b},_createNavigationToggle:function(){var b=new h({viewModel:{view:this.view}});b.startup();return b},_createZoom:function(){var b=new c({viewModel:{view:this.view}});b.startup();return b}})})},"esri/widgets/Attribution":function(){define("../core/watchUtils ./Attribution/AttributionViewModel ./support/viewModelWiring ./Widgette dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/on dojo/text!./Attribution/templates/Attribution.html".split(" "),
function(n,m,e,h,c,k,d,g,b,l){var a={base:"esri-attribution",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",clearFix:"esri-clearfix",interactive:"esri-interactive",hidden:"esri-hidden"};return h.createSubclass([c],{declaredClass:"esri.widgets.Attribution",baseClass:a.base,templateString:l,constructor:function(){this._attributionTextWatcher=this._attributionTextWatcher.bind(this);
this._updateStatus=this._updateStatus.bind(this)},postCreate:function(){this.inherited(arguments);this.own(b(this._sourcesNode,k,this._toggleOpenState.bind(this)),n.init(this.viewModel,"view.size",this._updateStatus),n.init(this.viewModel,"attributionText",this._attributionTextWatcher))},_css:a,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:m}},_attributionTextWatcher:function(a){this._sourcesNode.innerHTML=a;this._updateStatus()},_updateStatus:function(){var b=this.domNode,c=this._sourcesNode,
l=g.contains(b,a.open);g.remove(b,a.open);g.remove(c,a.sourcesOpen);g.remove(c,a.interactive);d.remove(c,"role");d.remove(c,"tabIndex");this._hasOverflowingText()&&(g.add(c,a.interactive),l&&(g.add(b,a.open),g.add(c,a.sourcesOpen)),d.set(c,{tabIndex:0,role:"button"}))},_hasOverflowingText:function(){var a=this._sourcesNode;return a.scrollWidth>a.clientWidth},_toggleOpenState:function(){g.contains(this._sourcesNode,a.interactive)&&g.toggle(this.domNode,a.open);this._updateStatus()}})})},"esri/widgets/Attribution/AttributionViewModel":function(){define("dojo/_base/lang ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/lang ../../core/watchUtils ../../geometry/Extent ../../geometry/support/webMercatorUtils".split(" "),
function(n,m,e,h,c,k,d,g){return m.createSubclass([e],{properties:{attributionText:{dependsOn:["items","itemDelimiter"],readOnly:!0},itemDelimiter:{},items:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Attribution.AttributionViewModel",constructor:function(){this._handles=new h;this._pendingAttributionItemsByLayerId={};this._attributionDataByLayerId={};this._updateAttributionItems=this._updateAttributionItems.bind(this)},getDefaults:function(){return n.mixin(this.inherited(arguments),
{items:[]})},initialize:function(){this._handles.add(k.init(this,"view",this._viewWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},_handles:null,_pendingAttributionItemsByLayerId:null,_attributionDataByLayerId:null,attributionText:null,_attributionTextGetter:function(){return this.items.join(this.itemDelimiter)},itemDelimiter:" | ",items:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_viewWatcher:function(b){var c=
this._handles;c&&c.remove();b&&(c.add([b.allLayerViews.on("change",function(a){this._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.uid)}),this._updateAttributionItems())}.bind(this)),k.init(b,"stationary",this._updateAttributionItems)]),this._addLayerViews(b.allLayerViews))},_addLayerViews:function(b){b.forEach(function(b){this._handles.has(b.uid)||this._handles.add(k.init(b,"suspended",this._updateAttributionItems),b.uid)},this)},_updateAttributionItems:function(){var b=
[];this._getActiveLayerViews().forEach(function(c){var a=c.layer,f,g;a.hasAttributionData?(f=this._attributionDataByLayerId,f[a.uid]?(c=this._getDynamicAttribution(f[a.uid],this.view,a),this._isUnique(b,c)&&b.push(c)):(g=this._pendingAttributionItemsByLayerId,this._inProgress(g[a.uid])||(g[a.uid]=a.fetchAttributionData().then(function(b){b=this._createContributionIndex(b,this._isBingLayer(a));delete g[a.uid];f[a.uid]=b;this._updateAttributionItems()}.bind(this))))):(c=a.copyright,this._isUnique(b,
c)&&b.push(c))},this);this._itemsChanged(this.items,b)&&(this.items=b)},_itemsChanged:function(b,c){return b.length!==c.length||b.some(function(a,b){return a!==c[b]})},_inProgress:function(b){return b&&!b.isFulfilled()},_getActiveLayerViews:function(){return(this.get("view.allLayerViews")||[]).filter(function(b){return!b.suspended&&b.get("layer.attributionVisible")})},_isUnique:function(b,c){return c&&-1===b.indexOf(c)},_isBingLayer:function(b){return-1!==b.declaredClass.toLowerCase().indexOf("vetiledlayer")},
_createContributionIndex:function(b,l){var a=b.contributors,f={},k,e,h,m,p,u,w,n;if(!a)return f;for(m=0;m<a.length;m++)if(k=a[m],e=k.coverageAreas)for(p=0;p<e.length;p++){h=e[p];u=h.bbox;n=h.zoomMin-(l&&h.zoomMin?1:0);w=h.zoomMax-(l&&h.zoomMax?1:0);k={extent:g.geographicToWebMercator(new d({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2]})),attribution:k.attribution||"",score:c.isDefined(h.score)?h.score:100,id:m};for(h=n;h<=w;h++)f[h]=f[h]||[],f[h].push(k)}f.maxKey=Math.max.apply(null,Object.keys(f));return f},
_getDynamicAttribution:function(b,l,a){var f=l.extent;l=a.tileInfo.scaleToZoom(l.scale);var g,d;l=Math.min(b.maxKey,Math.round(l));if(!f||!c.isDefined(l)||-1>=l)return"";b=b[l];g=f.center.clone().normalize();d={};return b.filter(function(a){var b=!d[a.id]&&a.extent.contains(g);b&&(d[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")}})})},"esri/widgets/Compass":function(){define("../core/watchUtils ./Compass/CompassViewModel ./support/viewModelWiring ./Widgette dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!./Compass/nls/Compass dojo/text!./Compass/templates/Compass.html".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a){var f={base:"esri-compass esri-widget-button",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",interactive:"esri-interactive",disabled:"esri-disabled"};return h.createSubclass([c],{declaredClass:"esri.widgets.Compass",baseClass:f.base,templateString:a,constructor:function(){this._applyRotation=this._applyRotation.bind(this);this._handleClick=this._handleClick.bind(this);this._handleState=this._handleState.bind(this)},
postCreate:function(){this.inherited(arguments);this.own(n.init(this.viewModel,"state",this._handleState),n.when(this.viewModel,"orientation",this._applyRotation),this.on(k,this._handleClick))},_css:f,_i18n:l,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:m}},reset:e.createMethodDelegate("reset"),_applyRotation:function(a){a="rotateZ("+a.z+"deg)";b.set(this._iconNode,{transform:a,mozTransform:a,webkitTransform:a,oTransform:a,msTransform:a})},_handleClick:function(){this.viewModel.reset()},
_handleState:function(a){var b="disabled"===a;a="compass"===("rotation"===a?"rotation":"compass");g.toggle(this.domNode,f.disabled,b);g.toggle(this.domNode,f.interactive,!b);d.set(this.domNode,"tabindex",b?"":0);g.toggle(this._iconNode,f.northIcon,a);g.toggle(this._iconNode,f.rotationIcon,!a)}})})},"esri/widgets/Compass/CompassViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils","dojo/_base/lang"],function(n,m,e,h){return n.createSubclass({declaredClass:"esri.widgets.CompassViewModel",
properties:{canShowNorth:{dependsOn:["spatialReference"]},orientation:{},spatialReference:{dependsOn:["view.spatialReference"]},state:{dependsOn:["view.ready","canShowNorth"]},view:{}},constructor:function(){this._handles=new m;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)},getDefaults:function(){return h.mixin(this.inherited(arguments),{orientation:{x:0,y:0,z:0}})},
initialize:function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))},destroy:function(){this._handles.destroy()},_handles:null,canShowNorth:!1,_canShowNorthGetter:function(){var c=this.spatialReference;return c&&(c.isWebMercator||4326===c.wkid)},orientation:null,spatialReference:null,_spatialReferenceGetter:function(){return this.get("view.spatialReference")||null},state:"disabled",_stateGetter:function(){return!this.get("view.ready")?"disabled":this.canShowNorth?"compass":"rotation"},
view:null,reset:function(){var c=this.view;c&&c.ready&&("2d"===c.type?c.goTo({rotation:0}):c.goTo({heading:0}))},_updateForRotation:function(c){void 0===c||null===c||(this.orientation={z:c})},_updateForCamera:function(c){c&&(this.orientation={x:0,y:0,z:-c.heading})},_updateRotationWatcher:function(c){this._handles.removeAll();c&&("2d"===c.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))}})})},"esri/widgets/NavigationToggle":function(){define("dojo/dom-class dojo/dom-attr dojo/on dijit/_TemplatedMixin dijit/a11yclick ../core/watchUtils ./support/viewModelWiring ./Widgette ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle dojo/text!./NavigationToggle/templates/NavigationToggle.html".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a){var f={base:"esri-navigation-toggle",button:"esri-navigation-toggle__button esri-widget-button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",disabled:"esri-disabled"};return g.createSubclass([h],{declaredClass:"esri.widgets.NavigationToggle",baseClass:f.base,
templateString:a,postCreate:function(){this.inherited(arguments);this.own(k.init(this,"viewModel.state",this._handleState),k.init(this,"viewModel.navigationMode",this._applyPrimaryButton),e(this.domNode,c,this.viewModel.toggle))},_css:f,_i18n:l,properties:{layout:{value:"vertical",set:function(a){"horizontal"!==a&&(a="vertical");n.toggle(this.domNode,f.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)}},view:{aliasOf:"viewModel.view"},viewModel:{type:b}},toggle:d.createMethodDelegate("toggle"),
_handleState:function(a){a="disabled"===a;n.toggle(this.domNode,f.disabled,a);m.set(this.domNode,"tabindex",a?"":0)},_applyPrimaryButton:function(a){a="pan"===a;n.toggle(this._panButtonNode,f.activeButton,a);n.toggle(this._rotateButtonNode,f.activeButton,!a)}})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(n,m,e){return n.createSubclass({declaredClass:"esri.widgets.NavigationToggleViewModel",
properties:{navigationMode:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},constructor:function(){this._handles=new m;this.toggle=this.toggle.bind(this)},initialize:function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))},destroy:function(){this._handles.destroy()},_handles:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},navigationMode:"pan",view:null,toggle:function(){"disabled"!==
this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())},_setNavigationMode:function(){this.view.inputManager.primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}})})},"esri/widgets/Zoom":function(){define("../core/sniff ../core/watchUtils ./support/viewModelWiring ./Widgette ./Zoom/ZoomViewModel dijit/_TemplatedMixin dijit/a11yclick dojo/dom dojo/dom-class dojo/dom-attr dojo/on dojo/i18n!./Zoom/nls/Zoom dojo/text!./Zoom/templates/Zoom.html".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s){var q={base:"esri-zoom",button:"esri-button esri-widget-button",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon",isLayoutHorizontal:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus"};return h.createSubclass([k],{declaredClass:"esri.widgets.Zoom",baseClass:q.base,templateString:s,constructor:function(){this._handleZoomOutClick=this._handleZoomOutClick.bind(this);this._handleZoomInClick=
this._handleZoomInClick.bind(this);this._handleStateChange=this._handleStateChange.bind(this);this._handleZoomInChange=this._handleZoomInChange.bind(this);this._handleZoomOutChange=this._handleZoomOutChange.bind(this)},postCreate:function(){this.inherited(arguments);n("css-user-select")||g.setSelectable(this.domNode,!1);this.own(a(this._zoomInNode,d,this._handleZoomInClick),a(this._zoomOutNode,d,this._handleZoomOutClick),m.init(this.viewModel,"state",this._handleStateChange),m.init(this.viewModel,
"canZoomIn",this._handleZoomInChange),m.init(this.viewModel,"canZoomOut",this._handleZoomOutChange))},_css:q,_i18n:f,properties:{layout:{value:"vertical",set:function(a){"horizontal"!==a&&(a="vertical");b.toggle(this.domNode,q.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)}},view:{aliasOf:"viewModel.view"},viewModel:{type:c}},zoomIn:e.createMethodDelegate("zoomIn"),zoomOut:e.createMethodDelegate("zoomOut"),_handleStateChange:function(a){(a="ready"===a)?(l.set(this._zoomInNode,"tabindex",
0),l.set(this._zoomOutNode,"tabindex",0),b.add(this._zoomInNode,q.interactive),b.add(this._zoomOutNode,q.interactive)):(l.remove(this._zoomInNode,"tabindex"),l.remove(this._zoomOutNode,"tabindex"),b.remove(this._zoomInNode,q.interactive),b.remove(this._zoomOutNode,q.interactive));b.toggle(this.domNode,q.disabled,!a)},_handleZoomInChange:function(a){b.toggle(this._zoomInNode,q.disabled,!a);b.toggle(this._zoomInNode,q.interactive,a)},_handleZoomOutChange:function(a){b.toggle(this._zoomOutNode,q.disabled,
!a);b.toggle(this._zoomOutNode,q.interactive,a)},_handleZoomInClick:function(){this.viewModel.zoomIn()},_handleZoomOutClick:function(){this.viewModel.zoomOut()}})})},"esri/widgets/Zoom/ZoomViewModel":function(){define(["../../core/Accessor"],function(n){return n.createSubclass({properties:{state:{dependsOn:["view.ready"],readOnly:!0},canZoomIn:{dependsOn:["view.ready","view.scale"],readOnly:!0},canZoomOut:{dependsOn:["view.ready","view.scale"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Zoom.ZoomViewModel",
constructor:function(){this.zoomIn=this.zoomIn.bind(this);this.zoomOut=this.zoomOut.bind(this)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_canZoomInGetter:function(){if("2d"!==this.get("view.type"))return!0;var m=this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return 0===e||m>e},_canZoomOutGetter:function(){if("2d"!==this.get("view.type"))return!0;var m=this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");
return 0===e||m<e},zoomIn:function(){this.canZoomIn&&this._zoomToFactor(0.5)},zoomOut:function(){this.canZoomOut&&this._zoomToFactor(2)},_zoomToFactor:function(m){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*m})}})})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(n,m,e,h,c,k,d,g){return function(b){function l(){b.apply(this,
arguments);this.widget=null}e(l,b);l.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(l.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"node",{set:function(a){var b=this._get("node");if(a!==b){var c;a&&a.domNode?(c=a.domNode,this._set("widget",a)):(c=d.byId(a),this._set("widget",null));c&&g.add(c,"esri-component");b&&
g.remove(b,"esri-component");this._set("node",c)}},enumerable:!0,configurable:!0});h([c.property()],l.prototype,"id",null);h([c.property()],l.prototype,"node",null);h([c.property({readOnly:!0})],l.prototype,"widget",void 0);return l=h([c.subclass("esri.views.ui.Component")],l)}(c.declared(k))})},"esri/views/ui/UI":function(){define("../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils ./Component dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(n,
m,e,h,c,k,d,g){function b(a){return a&&!a._started&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup}var l={left:0,top:0,bottom:0,right:0},a={bottom:30,top:15,right:15,left:15};return n.createSubclass({properties:{container:{},height:{readOnly:!0,dependsOn:["view.height"]},padding:{},view:{},width:{readOnly:!0,dependsOn:["view.width"]}},declaredClass:"esri.views.ui.UI",constructor:function(){this._components=
[];this._handles=new m;this._initContainers()},getDefaults:function(){return c.mixin(this.inherited(arguments),{padding:a})},initialize:function(){this._handles.add(e.init(this,"view.padding, container",this._applyViewPadding.bind(this)),e.init(this,"padding",this._applyUIPadding.bind(this)))},destroy:function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},_cornerNameToContainerLookup:null,_positionNameToContainerLookup:null,
_components:null,_handles:null,container:null,_containerSetter:function(a){var b=this._get("container");a!==b&&(a&&(k.add(a,"esri-ui"),this._attachContainers(a)),b&&(k.remove(b,"esri-ui"),g.set(b,{top:"",bottom:"",left:"",right:""}),d.empty(b)),this._set("container",a))},_heightGetter:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},_paddingSetter:function(b){"number"===typeof b?this._set("padding",{bottom:b,top:b,right:b,
left:b}):this._set("padding",c.mixin({},a,b))},view:null,_widthGetter:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},add:function(a,c){var l;if(Array.isArray(a))a.forEach(function(a){this.add(a,c)},this);else if(c&&"object"===typeof c&&(l=c.index,c=c.position),a&&(!c||this._isValidPosition(c))){if(!a.isInstanceOf||!a.isInstanceOf(h))"object"===typeof a&&("domNode"in a&&!a.domNode&&!b(a.widget))&&(a.domNode=d.create("div")),
a=new h({node:a});this._place({component:a,position:c,index:l});this._components.push(a)}},remove:function(a){if(a){if(Array.isArray(a))return a.map(this.remove,this);if(a=this.find(a)){var b=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(b,1)[0]}}},empty:function(a){if(Array.isArray(a))return a.map(function(a){return this.empty(a).reduce(function(a,b){return a.concat(b)})},this);a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!k.contains(a,
"esri-ui-corner")},this).map(this.remove,this);if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)},move:function(a,b){if(!b||this._isValidPosition(b)){var c=this.remove(a);c&&this.add(c,b)}},find:function(a){return!a?null:a.isInstanceOf&&a.isInstanceOf(h)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a)},_getViewPadding:function(){return this.get("view.padding")||l},_attachContainers:function(a){d.place(this._manualContainer,
a);d.place(this._innerContainer,a)},_initContainers:function(){var a=d.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=d.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),l,g,k,e;l=d.create("div",{className:"esri-ui-top-left esri-ui-corner"},a);g=d.create("div",{className:"esri-ui-top-right esri-ui-corner"},a);k=d.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a);e=d.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},
a);this._innerContainer=a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":l,"top-right":g,"bottom-left":k,"bottom-right":e};this._positionNameToContainerLookup=c.mixin({manual:b},this._cornerNameToContainerLookup)},_isValidPosition:function(a){return!!this._positionNameToContainerLookup[a]},_place:function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var l,g;-1<c?(l=a.children,0===c?this._placeComponent(b,a,"first"):(g=c>=l.length)?
this._placeComponent(b,a,"last"):this._placeComponent(b,l[c],"before")):this._placeComponent(b,a,"last")},_placeComponent:function(a,c,l){b(a.widget)&&a.widget.startup();d.place(a.node,c,l)},_applyViewPadding:function(){var a=this.container;a&&g.set(a,this._toPxPosition(this._getViewPadding()))},_applyUIPadding:function(){this._innerContainer&&g.set(this._innerContainer,this._toPxPosition(this.padding))},_toPxPosition:function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),
bottom:this._toPxUnit(a.bottom)}},_toPxUnit:function(a){return 0===a?0:a+"px"},_findByComponent:function(a){var b=null,c;this._components.some(function(l){(c=l===a)&&(b=l);return c});return b},_findById:function(a){var b=null,c;this._components.some(function(l){(c=l.id===a)&&(b=l);return c});return b},_findByNode:function(a){var b=null,c;this._components.some(function(l){(c=l.node===a)&&(b=l);return c});return b}})})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),
function(n,m,e,h,c,k,d){return function(g){function b(){g.call(this)}e(b,g);b.prototype.getDefaults=function(){return d.mixin(this.inherited(arguments),{components:["attribution","zoom"]})};return b=h([c.subclass("esri.views.ui.2d.DefaultUI2D")],b)}(c.declared(k))})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(n,m,e,h,
c,k,d,g,b){function l(a){if(a instanceof g)return a;if(a instanceof b){var c=0;for(a=a.children;c<a.length;c++){var d=l(a[c]);if(d)return d}}return null}return function(a){function b(f){var l=this;a.call(this);this.element=f;this._budget=new k;this._renderParameters={budget:this._budget,state:this.state,devicePixelRatio:window.devicePixelRatio,stationary:!1};this._renderRequested=!1;this._taskHandle=c.addFrameTask({render:function(){return l.renderFrame()}});this.attached=this._stationary=!0;this._taskHandle.pause()}
e(b,a);b.prototype.destroy=function(){this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(b.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});b.prototype.start=function(){this._taskHandle.resume()};
b.prototype.stop=function(){this._taskHandle.isPaused()||this._taskHandle.pause()};b.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle.isPaused()&&this._taskHandle.resume()};b.prototype.takeScreenshot=function(a){var b=l(this);b||h.reject("Could not find an object capable of capturing screenshot!");return b.takeScreenshot(a)};b.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=
this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.render(this._renderParameters));this._renderRequested||this._taskHandle.pause()};return b}(d)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(n,m,e,h){return function(c){function k(){c.apply(this,arguments)}e(k,c);k.prototype.createElement=function(){var c=document.createElement("div");c.setAttribute("class","esri-display-object");
return c};k.prototype.setElement=function(c){this.element=c};k.prototype.render=function(d){var g=this.element.style;this.visible?(g.display="block",g.opacity=""+this.opacity,c.prototype.render.call(this,d)):g.display="none"};k.prototype.prepareChildrenRenderParameters=function(c){return c};k.prototype.attachChild=function(c,g){var b=c.element;b||(b=c.createElement(),c.setElement(b));return c.attach(g)};k.prototype.detachChild=function(c,g){c.detach(g);this.element.removeChild(c.element);c.setElement(null)};
k.prototype.renderChildren=function(d){for(var g=this.children,b=this.element.childNodes,l=0,a=0,f=g.length;a<f;a++)if(g[a].attached){var k=g[a].element;b[l]!==k&&(null!=b[l+1]?this.element.insertBefore(k,b[l]):this.element.appendChild(k));l+=1}c.prototype.renderChildren.call(this,d)};k.prototype.renderChild=function(c,g){return c.render(g)};return k}(h)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(n,
m,e,h){var c;(function(c){c[c.BEFORE=0]="BEFORE";c[c.ATTACHING=1]="ATTACHING";c[c.DETACHING=2]="DETACHING";c[c.RENDERING=3]="RENDERING";c[c.AFTER=4]="AFTER";c[c.DONE=5]="DONE"})(c||(c={}));return function(k){function d(){k.apply(this,arguments);this._childrenSet=new Set;this._childrenToAttach=[];this._childrenToDetach=[];this._renderPhase=c.DONE;this.children=[]}e(d,k);Object.defineProperty(d.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});d.prototype.attach=
function(c){return!0};d.prototype.detach=function(c){var b=this.children;c=this.prepareChildrenRenderParameters(c);for(var l=0,a=b.length;l<a;l++){var f=b[l];f.attached&&(this.detachChild(f,c),f.attached=!1,f.parent=null)}};d.prototype.render=function(g){var b=this.prepareChildrenRenderParameters(g);this._renderPhase=c.BEFORE;this.beforeRenderChildren(g,b);this._renderPhase=c.ATTACHING;this.attachChildren(b)||this.requestRender();this._renderPhase=c.DETACHING;for(var l=this._childrenToDetach;0<l.length;){var a=
l.shift();this.detachChild(a,b);a.attached=!1;a.parent=null}this._renderPhase=c.RENDERING;this.renderChildren(b);this._renderPhase=c.AFTER;this.afterRenderChildren(g,b);this._renderPhase=c.DONE};d.prototype.addChild=function(c){return this.addChildAt(c,this.children.length)};d.prototype.addChildAt=function(g,b){void 0===b&&(b=this.numChildren);if(!g||this.contains(g))return g;var l=g.parent;l&&l!==this&&l.removeChild(g);b>=this.numChildren?this.children.push(g):this.children.splice(b,0,g);this._childrenSet.add(g);
l=this._childrenToDetach.indexOf(g);-1<l&&this._childrenToDetach.splice(l,1);this._childrenToAttach.push(g);this._renderPhase>=c.RENDERING&&this.requestRender();return g};d.prototype.contains=function(c){return this._childrenSet.has(c)};d.prototype.getChildIndex=function(c){return this.children.indexOf(c)};d.prototype.getChildAt=function(c){return 0>c||c>this.children.length?null:this.children[c]};d.prototype.removeAllChildren=function(){for(var c=this.numChildren;c--;)this.removeChildAt(0)};d.prototype.removeChild=
function(c){return this.contains(c)?this.removeChildAt(this.getChildIndex(c)):c};d.prototype.removeChildAt=function(g){if(0>g||g>=this.children.length)return null;g=this.children.splice(g,1)[0];this._childrenSet["delete"](g);if(g.attached)this._childrenToDetach.push(g),this._renderPhase>=c.RENDERING&&this.requestRender();else{var b=this._childrenToAttach.indexOf(g);-1<b&&this._childrenToAttach.splice(b,1)}return g};d.prototype.requestChildRender=function(g){g&&(g.parent===this&&this._renderPhase>=
c.RENDERING)&&this.requestRender()};d.prototype.setChildIndex=function(g,b){var l=this.getChildIndex(g);-1<l&&(this.children.splice(l,1),this.children.splice(b,0,g),this._renderPhase>=c.RENDERING&&this.requestRender())};d.prototype.sortChildren=function(g){this._renderPhase>c.RENDERING&&this.requestRender();return this.children.sort(g)};d.prototype.attachChildren=function(c){var b=this._childrenToAttach;if(0===b.length)return!0;for(var l=0===b.length;!l;)l=b.shift(),this.attachChild(l,c)&&(l.attached=
!0,l.parent=this),l=0===b.length;return 0===b.length};d.prototype.renderChildren=function(c){for(var b=this.children,l=0,a=b.length;l<a;l++){var f=b[l];f.attached&&this.renderChild(f,c)}};d.prototype.beforeRenderChildren=function(c,b){};d.prototype.afterRenderChildren=function(c,b){};return d}(h)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],function(n,m,e){var h=0;return function(){function c(){this.attached=!1;this._opacity=
1;this._visible=!0;Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-do-"+h++})}Object.defineProperty(c.prototype,"opacity",{get:function(){return this._opacity},set:function(c){this._opacity!==c&&(this._opacity=c,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._visible},set:function(c){this._visible!==c&&(this._visible=c,this.requestRender())},enumerable:!0,configurable:!0});
c.prototype.requestRender=function(){this.parent&&this.parent.requestChildRender(this)};c.prototype.dispose=function(){};return c}()})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ./../math/vec2 ./../math/mat2d dojo/text!./webgl/stencil.vs.glsl dojo/text!./webgl/stencil.fs.glsl ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../math/common ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r,v,p,u){function w(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var y={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(f){function m(){f.apply(this,arguments);this._clipData=new Float32Array(8);this._upperLeft=h.create();this._upperRight=h.create();this._lowerLeft=h.create();this._lowerRight=h.create();this._mat2=c.create();this._clipRendererInitialized=!1}e(m,f);m.prototype.createElement=
function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};m.prototype.setElement=function(a){this.element=a};m.prototype.attach=function(a){this._resizeCanvas(a);var b=r.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new s(b[0]);this.attached=!0;this._cachedRenderParams=w(a);return f.prototype.attach.call(this,a)};m.prototype.detach=function(a){f.prototype.detach.call(this,a);this._cachedRenderParams=this._renderingContext=
null};m.prototype.beforeRenderChildren=function(b,f){var l=b.state;if(!l.spatialReference||!(l.spatialReference._isWrappable?l.spatialReference._isWrappable():l.spatialReference.isWrappable))this._clipFrame=!1;else{var g=l.width,d=l.height,k=l.rotation,e=this._renderingContext,g=g*b.devicePixelRatio,d=d*b.devicePixelRatio,s=a.toRadian(k),p=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),m=Math.round(g*p+d*r),u=Math.round(l.worldScreenWidth);if(m<=u)this._clipFrame=!1;else{if(!this._clipFBO||this._clipFBO.width!==
g||this._clipFBO.height!==d)this._clipFBO=new q(e,{colorTarget:0,depthStencilTarget:3,width:g,height:d});var v=0.5*g,w=0.5*d,m=1/g,l=1/d,u=0.5*u*b.devicePixelRatio,n=0.5*(g*r+d*p),g=this._upperLeft,p=this._upperRight,r=this._lowerLeft,y=this._lowerRight;h.set(g,-u,-n);h.set(p,u,-n);h.set(r,-u,n);h.set(y,u,n);c.identity(this._mat2);c.translate(this._mat2,this._mat2,[v,w]);0!==k&&c.rotate(this._mat2,this._mat2,s);h.transformMat2d(g,g,this._mat2);h.transformMat2d(p,p,this._mat2);h.transformMat2d(r,r,
this._mat2);h.transformMat2d(y,y,this._mat2);k=this._clipData;k.set([2*r[0]*m-1,2*(d-r[1])*l-1,2*y[0]*m-1,2*(d-y[1])*l-1,2*g[0]*m-1,2*(d-g[1])*l-1,2*p[0]*m-1,2*(d-p[1])*l-1]);this._clipRendererInitialized||this._initializeClipRenderer(e);this._clipVBO.setData(k);e.bindFramebuffer(this._clipFBO);e.setDepthWriteEnabled(!0);e.setStencilWriteMask(255);e.setClearColor(0,0,0,0);e.setClearDepth(1);e.setClearStencil(0);e.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT|e.gl.STENCIL_BUFFER_BIT);this._clipFrame=
!0}}};m.prototype.afterRenderChildren=function(a,b){if(this._clipFrame&&this._clipRendererInitialized){var c=this._renderingContext;c.bindFramebuffer();c.bindVAO(this._clipVAO);c.bindProgram(this._clipStencilProgram);c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setStencilWriteMask(255);c.setStencilFunction(519,1,255);c.drawElements(4,6,5123,0);c.bindVAO();c.setColorMask(!0,!0,
!0,!0);c.setBlendingEnabled(!0);c.setStencilWriteMask(255);c.setStencilFunction(514,1,255);this._blitRenderer.render(c,this._clipFBO.colorTexture,9728,1);c.setStencilTestEnabled(!1)}};m.prototype.render=function(a){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),f.prototype.render.call(this,a),this._cachedRenderParams=w(a)):b.display="none"};m.prototype.takeScreenshot=function(a){var c=this._cachedRenderParams.devicePixelRatio,f=c*this._cachedRenderParams.state.width,
g=c*this._cachedRenderParams.state.height,d=0,k=0,e=f,h=g,s=f,p=g;if(s=a.area)d=c*s.x,k=c*s.y,e=c*s.width,h=c*s.height;void 0!==a.width&&void 0!==a.height?(s=a.width/a.height,h*s<e?(s*=h,d+=Math.floor((e-s)/2),e=Math.floor(s)):(s=e/s,k+=Math.floor((h-s)/2),h=Math.floor(s)),s=a.width,p=a.height):(s=e,p=h);c=document.createElement("canvas");c.width=s;c.height=p;var r=c.getContext("2d"),m=new Uint8Array(4*e*h),u=this._renderingContext,v=q.create(u,{colorTarget:1,depthStencilTarget:3,width:f,height:g});
u.bindFramebuffer(v);u.setViewport(0,0,f,g);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var w=this._cachedRenderParams,n=this._renderingContext.gl;this._renderingContext.setClearColor(1,1,1,1);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT);w.context=this._renderingContext;this.renderChildren(w);v.readPixels(d,g-(k+h),e,h,6408,5121,
m);u.bindFramebuffer();u=r.getImageData(0,0,s,p);if(0!==d||0!==k||e!==f||h!==g||s!==f||p!==g)b.resampleHermite(m,e,h,u.data,s,p,!0);else{for(var f=h-1,g=0,e=4*e,t=n=w=v=h=k=d=void 0;g<f;){n=g*e;t=f*e;for(d=0;d<e;d+=4)k=m[n+d],h=m[n+d+1],v=m[n+d+2],w=m[n+d+3],m[n+d]=m[t+d],m[n+d+1]=m[t+d+1],m[n+d+2]=m[t+d+2],m[n+d+3]=m[t+d+3],m[t+d]=k,m[t+d+1]=h,m[t+d+2]=v,m[t+d+3]=w;g++;f--}e=u.data;f=0;for(g=m.length;f<g;f++)e[f]=m[f]}r.putImageData(u,0,0);r=y[a.format?a.format.toLowerCase():"png"];m=1;void 0!==
a.quality&&(m=a.quality/100);a=c.toDataURL(r,m);return l.resolve({dataURL:a,x:0,y:0,width:s,height:p})};m.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);
a.context=b;return a};m.prototype.attachChild=function(a,b){return a.attach(b)};m.prototype.detachChild=function(a,b){return a.detach(b)};m.prototype.renderChild=function(a,b){return a.render(b)};m.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,f=a.state,l=a.devicePixelRatio;a=f.width*l;l*=f.height;if(b.width!==a||b.height!==l)b.width=a,b.height=l,c.width=f.width+"px",c.height=f.height+"px"};m.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;
this._blitRenderer=new g;var b={a_pos:0},c=new v(a,k,d,b);if(!c)return!1;var f=u.createVertex(a,35040,32),l=new Uint16Array([0,1,2,2,1,3]),l=u.createIndex(a,35044,l);a=new p(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:f},l);this._clipStencilProgram=c;this._clipVBO=f;this._clipVAO=a;return this._clipRendererInitialized=!0};return m}(f)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject".split(" "),
function(n,m,e,h,c,k,d){return function(){function g(){this._initialized=!1}g.prototype.render=function(b,c,a,f){b&&c&&(this._initialized||this._initialize(b),b.setBlendFunctionSeparate(1,771,1,771),b.bindVAO(this._vertexArrayObject),b.bindProgram(this._program),c.setSamplingMode(a),b.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",f),b.drawArrays(5,0,4),b.bindVAO())};g.prototype._initialize=function(b){if(this._initialized)return!0;var l={a_pos:0,a_tex:1},
a=new c(b,e,h,l);if(!a)return!1;var f=new Int8Array(16);f[0]=-1;f[1]=-1;f[2]=0;f[3]=0;f[4]=1;f[5]=-1;f[6]=1;f[7]=0;f[8]=-1;f[9]=1;f[10]=0;f[11]=1;f[12]=1;f[13]=1;f[14]=1;f[15]=1;b=new k(b,l,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(b,35044,f)});this._program=a;this._vertexArrayObject=b;return this._initialized=!0};return g}()})},"esri/views/webgl/webgl-utils":function(){define([],
function(){var n=function(e,c){for(var k=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,g=0;g<k.length;++g){try{d=e.getContext(k[g],c)}catch(b){}if(d)break}return d},m=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,c){return window.setTimeout(e,1E3/60)}).bind(window),e=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||
window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout).bind(window);return{create3DContext:n,setupWebGL:function(e,c){function k(c){var b=e.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+c+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return k('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),
[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var d=n(e,c);return!d?(k('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e']):
[d]},detectWebGL:function(){var e;try{e=window.WebGLRenderingContext}catch(c){e=[!1,0]}var k;try{k=n(document.createElement("canvas"))}catch(d){k=[!1,1]}return!e?[!1,0]:!k?[!1,1]:[!0,{VERSION:k.getParameter(k.VERSION),SHADING_LANGUAGE_VERSION:k.getParameter(k.SHADING_LANGUAGE_VERSION),VENDOR:k.getParameter(k.VENDOR),RENDERER:k.getParameter(k.RENDERER),EXTENSIONS:k.getSupportedExtensions(),MAX_TEXTURE_SIZE:k.getParameter(k.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:k.getParameter(k.MAX_RENDERBUFFER_SIZE),
MAX_VERTEX_TEXTURE_IMAGE_UNITS:k.getParameter(k.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]},requestAnimFrame:m,cancelAnimFrame:e}})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s){return function(l){function m(){for(var b=this,c=[],g=0;g<arguments.length;g++)c[g-0]=arguments[g];l.apply(this,c);this._frontGroup=new f;this._handles=new d;this._objects=new Map;this.container=new a;this.container.addChild(this._frontGroup);this.watch("graphics",function(){return b._reset()},!0)}e(m,l);m.prototype.hitTest=function(a,b){var c=this.container.hitTest(a,b);return c?g.resolve(c.graphic):null};m.prototype._reset=function(){var a=this;this._handles.remove("graphics");
this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};m.prototype._add=function(a){if(!this._objects.has(a)){var b=new s;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};m.prototype._remove=function(a){var b=this._objects.get(a);b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};m.prototype._graphicsChangeHandler=function(a){for(var b=
a.removed,c=0,f=a.added;c<f.length;c++)a=f[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};h([c.cast(k.ofType(b))],m.prototype,"graphics",void 0);h([c.property()],m.prototype,"view",void 0);return m=h([c.subclass("esri.views.2d.layers.support.GraphicsView2D")],m)}(c.declared(l))})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(n,m,e,h,c,k,d,g){return function(b){function l(){b.apply(this,arguments);this.view=this.renderer=this.graphics=null}e(l,b);h([c.property({type:d.ofType(g)})],l.prototype,"graphics",void 0);h([c.property()],l.prototype,"renderer",void 0);h([c.property()],l.prototype,"view",void 0);return l=h([c.subclass("esri.views.layers.GraphicsView")],l)}(c.declared(k))})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang ../../math/mat2d ../../math/common ../../viewpointUtils ../Container ./Projector ./gfx ../cssUtils".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a){function f(a){return{xx:a[0],yx:a[1],xy:a[2],yy:a[3],dx:a[4],dy:a[5]}}function s(a,b,c){if(r){if(!a.attached)return null;b=r(b,c);a=a.surface.rawNode;for(c=0;c<b.length;c++){var f=b[c];if(f.ownerSVGElement===a)return f}return null}v||(b+=window.pageXOffset,c+=window.pageYOffset);return document.elementFromPoint(b,c)}var q=f([1,0,0,1,0,0]),r=function(){if(document.elementsFromPoint)return function(a,b){return document.elementsFromPoint(a,b)};document.msElementsFromPoint&&
function(a,b){return document.msElementsFromPoint(a,b)};return null}(),v=function(){var a=window.pageXOffset?window.pageXOffset+window.innerWidth-1:0,b=window.pageYOffset?window.pageYOffset+window.innerHeight-1:0;return 0===a&&0===b?!0:!document.elementFromPoint(a,b)}();return function(g){function m(){g.apply(this,arguments);this._transform=c.create();this._projector=new b}e(m,g);m.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");
return a};m.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=l.createSurface(this.element,400,400)};m.prototype.render=function(b){var l=this.element.style;if(this.visible){l.display="block";l.opacity=""+this.opacity;var e=this._transform,h=b.state;if(b.stationary)d.getMatrix(e,h.center,h.size,h.resolution,k.toRadian(h.rotation)),this.surface.setDimensions(h.size[0],h.size[1]),this._projector.update(e,h.resolution),this.children.forEach(function(a){a.g&&
a.g.setTransform(q)}),g.prototype.render.call(this,b);else{var s=c.invert(c.create(),e);c.multiply(s,h.transform,s);this.children.forEach(function(a){a.g&&a.g.setTransform(f(s))})}a.clip(l,h.clipRect);l.transform=a.cssMatrix3d(c.fromRotation(c.create(),k.toRadian(h.rotation)));this.surface.rawNode.style.transform=a.cssMatrix(c.fromRotation(c.create(),k.toRadian(-h.rotation)))}else l.display="none"};m.prototype.hitTest=function(a,b){var c=s(this,a,b);return c&&c.gfxObject||null};m.prototype.prepareChildrenRenderParameters=
function(a){return h.mixin({},a,{projector:this._projector,surface:this.surface})};m.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()};m.prototype.attachChild=function(a,b){return a.attach(b)};m.prototype.detachChild=function(a,b){return a.detach()};m.prototype.renderChild=function(a,b){return a.render(b)};m.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()};return m}(g)})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(n,
m){function e(d,g,b,l,a){void 0===l&&(l=0);void 0===a&&(a=d.length);for(var f=d[l],h=d[a-1],q=0,m=0,v,p=l+1;p<a-1;p++){var u=d[p];v=u[0];var u=u[1],n=f[0],y=f[1],t=h[0],z=h[1];n===t?v=c(v-n):(t=(z-y)/(t-n),v=c(t*v-u+(y-t*n))/k(t*t+1));v>q&&(m=p,q=v)}q>g?(e(d,g,b,l,m+1),e(d,g,b,m,a)):(b(f[0],f[1]),b(h[0],h[1]))}var h=Math.round,c=Math.abs,k=Math.sqrt;return function(){function c(){this._transform=null}c.prototype.update=function(c,b){this._transform=c;this._resolution=b};c.prototype.toScreenPoint=
function(c,b,l){this.transformPoint(b.x+l*this._resolution,b.y,function(a,b){c.x=a;c.y=b});return c};c.prototype.toScreenPath=function(c,b){var l=this,a=null!=c.paths,f=a?c.paths:c.rings,d="",k=function(a,c){a+=b*l._resolution;l.transformPoint(a,c,function(a,b){!isNaN(a)&&!isNaN(b)&&(d+=a,d+=",",d+=b,d+=" ")})};if(f)for(var h=0,m=f.length;h<m;h++)d+="M ",e(f[h],this._resolution,k),a||(d+="Z ");return d};c.prototype.transformPoint=function(c,b,l){var a=this._transform,f=a[1],d=a[3],e=a[5];l(h(a[0]*
c+a[2]*b+a[4]),h(f*c+d*b+e))};return c}()})},"esri/views/2d/engine/graphics/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),function(n,m,e,h,c,k,d,g,b,l,a){m.createSurface=e.createSurface;m.Circle=h.default;m.Group=c.default;m.Path=k.default;m.Image=d.default;m.Rect=g.default;m.Shape=b.default;m.Surface=l.default;m.Text=a.default})},"esri/views/2d/engine/graphics/gfx/svg":function(){define(["require",
"exports","dojo/dom","./Surface"],function(n,m,e,h){function c(c,d){return document.createElementNS?document.createElementNS(c,d):document.createElement(d)}m.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};m.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};m._createElementNS=c;m._setAttributeNS=function(c,
d,g,b){return c.setAttributeNS?c.setAttributeNS(d,g,b):c.setAttribute(g,b)};m._createTextNode=function(c){return document.createTextNode(c)};m._createFragment=function(){return document.createDocumentFragment()};m.getRef=function(c){return!c||"none"===c?null:c.match(/^url\(#.+\)$/)?e.byId(c.slice(5,-1)):c.match(/^#dojoUnique\d+$/)?e.byId(c.slice(1)):null};m.createSurface=function(k,d,g){var b=new h.default;b.rawNode=c(m.xmlns.svg,"svg");b.rawNode.setAttribute("overflow","hidden");d&&b.rawNode.setAttribute("width",
0>d?0:d);g&&b.rawNode.setAttribute("height",0>g?0:g);d=c(m.xmlns.svg,"defs");b.rawNode.appendChild(d);b.defNode=d;b._parent=e.byId(k);b._parent.appendChild(b.rawNode);return b}})},"esri/views/2d/engine/graphics/gfx/Surface":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r){var v=navigator.userAgent,
p=534<function(){var a=/WebKit\/(\d*)/.exec(v);return a?parseInt(a[1],10):0}();n=function(b){function m(){b.apply(this,arguments);this._parent=this.rawNode=null;this._nodes=[];this._events=[]}e(m,b);m.prototype.destroy=function(){c.forEach(this._nodes,k.destroy);this._nodes=[];c.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(h("ie"))for(;this._parent.lastChild;)k.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null};m.prototype.setDimensions=
function(a,b){if(!this.rawNode)return this;var c=0>a?0:a,f=0>b?0:b;this.rawNode.setAttribute("width",c);this.rawNode.setAttribute("height",f);p&&(this.rawNode.style.width=c,this.rawNode.style.height=f);return this};m.prototype.getDimensions=function(){return this.rawNode?{width:d.normalizedLength(this.rawNode.getAttribute("width")),height:d.normalizedLength(this.rawNode.getAttribute("height"))}:null};m.prototype.getEventSource=function(){return this.rawNode};m.prototype._getRealMatrix=function(){return null};
m.prototype.createShape=function(a){switch(a.type){case d.defaultPath.type:return this.createPath(a);case d.defaultRect.type:return this.createRect(a);case d.defaultCircle.type:return this.createCircle(a);case d.defaultImage.type:return this.createImage(a);case d.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};m.prototype.createGroup=function(){return this.createObject(a.default)};m.prototype.createRect=function(a){return this.createObject(q.default,
a)};m.prototype.createCircle=function(a){return this.createObject(l.default,a)};m.prototype.createImage=function(a){return this.createObject(s.default,a)};m.prototype.createText=function(a){return this.createObject(r.default,a)};m.prototype.createPath=function(a){return this.createObject(f.default,a)};m.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a,f=g._createElementNS(g.xmlns.svg,a.nodeType);c.setRawNode(f);c.setShape(b);this.add(c);return c};return m}(b.default);
Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(n,m,e,h,c,k,d,g,b){var l=m.getObject("dojox.gfx",!0),a=l._base={};l._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};l._addClass=function(a,b){var c=a.getAttribute("className")||
"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};l._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,f;h("ie")&&(f=c.doc.documentElement.style.fontSize||"",f||(c.doc.documentElement.style.fontSize="100%"));var l=
g.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},c.body());for(b in a)l.style.fontSize=b,a[b]=16*Math.round(12*l.offsetHeight/16)/12/1E3;h("ie")&&(c.doc.documentElement.style.fontSize=f);c.body().removeChild(l);return a};var f=null;a._getCachedFontMeasurements=function(b){if(b||!f)f=a._getFontMeasurements();return f};var s=null,q={};a._getTextBox=function(a,f,l){var d,
e,k=arguments.length,h;s||(s=g.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},c.body()));d=s;d.className="";e=d.style;e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";if(1<k&&f)for(h in f)h in q||(e[h]=f[h]);2<k&&l&&(d.className=l);d.innerHTML=a;d.getBoundingClientRect?(e=d.getBoundingClientRect(),e={l:e.left,t:e.top,w:e.width||e.right-e.left,h:e.height||e.bottom-e.top}):e=b.getMarginBox(d);d.innerHTML="";return e};a._computeTextLocation=function(a,
b,c,f){var l={};switch(a.align){case "end":l.x=a.x-b;break;case "middle":l.x=a.x-b/2;break;default:l.x=a.x}l.y=a.y-c*(f?0.75:1);return l};a._computeTextBoundingBox=function(b){if(!l._base._isRendered(b))return{x:0,y:0,width:0,height:0};var c;c=b.getShape();var f=b.getFont()||l.defaultFont;b=b.getTextWidth();f=l.normalizedLength(f.size);c=a._computeTextLocation(c,b,f,!0);return{x:c.x,y:c.y,width:b,height:f}};a._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var r=
0;a._getUniqueId=function(){var a;do a=n._scopeName+"xUnique"+ ++r;while(d.byId(a));return a};var v=h("pointer-events")?"touchAction":h("MSPointer")?"msTouchAction":null;a._fixMsTouchAction=v?function(a){a.rawNode.style[v]="none"}:function(){};m.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",
x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",
cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=l["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof e?a:new e(a)},normalizeParameters:function(a,b){var c;if(b){var f={};for(c in a)c in
b&&!(c in f)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return m.delegate(a);var f={};for(c in a)c in f||(f[c]=m.clone(c in b?b[c]:a[c]));return f},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var f=c.indexOf(".");0<=f&&5<c.length-f&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=l.getDefault("Font");a=a.split(/\s+/);
if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var f=4;0>c&&("/"==a[4]?f=6:"/"==a[4].charAt(0)&&(f=5));f<a.length&&(b.family=a.slice(f).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*l.px_in_pt()},px2pt:function(a){return a/l.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=l.px_in_pt(),
c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*l.mm_in_pt*b;case "cm":return c*l.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?l[a]:a;b&&(k.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){l[a]=b[a]}),"string"==typeof a?l.renderer=a:k.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return l.renderer=l[a]&&l[a].Surface===l.Surface?a:null}))}});return l})},"esri/views/2d/engine/graphics/gfx/Container":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(n,m,e,h,c,k){n=function(c){function g(){c.apply(this,arguments);this.children=[];this._batch=0}e(g,c);g.prototype.openBatch=
function(){this._batch||(this.fragment=k._createFragment());++this._batch;return this};g.prototype.closeBatch=function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};g.prototype.add=function(b){if(this===b.getParent())return this;this.fragment?this.fragment.appendChild(b.rawNode):this.rawNode.appendChild(b.rawNode);var c=b.getParent();c&&c.remove(b,!0);this.children.push(b);b._setParent(this,this._getRealMatrix());
b.setClip(b.clip);return this};g.prototype.remove=function(b,c){void 0===c&&(c=!1);if(this!==b.getParent())return this;this.rawNode===b.rawNode.parentNode&&this.rawNode.removeChild(b.rawNode);this.fragment&&this.fragment===b.rawNode.parentNode&&this.fragment.removeChild(b.rawNode);for(var a=0;a<this.children.length;++a)if(this.children[a]===b){c||(b.parent=null,b.parentMatrix=null);this.children.splice(a,1);break}return this};g.prototype.clear=function(b){void 0===b&&(b=!1);for(var c=this.rawNode;c.lastChild;)c.removeChild(c.lastChild);
var a=this.defNode;if(a){for(;a.lastChild;)a.removeChild(a.lastChild);c.appendChild(a)}for(a=0;a<this.children.length;++a)c=this.children[a],c.parent=null,c.parentMatrix=null,b&&c.destroy();this.children=[];return this};g.prototype.getBoundingBox=function(){if(!this.children)return null;var b=null;this.children.forEach(function(c){var a=c.getBoundingBox();a&&((c=c.getTransform())&&(a=h.multiplyRectangle(c,a)),b?(b.x=Math.min(b.x,a.x),b.y=Math.min(b.y,a.y),b.endX=Math.max(b.endX,a.x+a.width),b.endY=
Math.max(b.endY,a.y+a.height)):b={x:a.x,y:a.y,endX:a.x+a.width,endY:a.y+a.height,width:0,height:0})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b};g.prototype._moveChildToFront=function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]===b){this.children.splice(c,1);this.children.push(b);break}return this};g.prototype._moveChildToBack=function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]===b){this.children.splice(c,1);this.children.unshift(b);break}return this};
return g}(c.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(n,m){var e=n.matrix={},h={};e._degToRad=function(c){return h[c]||(h[c]=Math.PI*c/180)};e._radToDeg=function(c){return 180*(c/Math.PI)};e.Matrix2D=function(c){if(c)if("number"==typeof c)this.xx=this.yy=c;else if(c instanceof Array){if(0<c.length){for(var k=e.normalize(c[0]),d=1;d<c.length;++d){var g=k,b=e.normalize(c[d]),k=new e.Matrix2D;k.xx=
g.xx*b.xx+g.xy*b.yx;k.xy=g.xx*b.xy+g.xy*b.yy;k.yx=g.yx*b.xx+g.yy*b.yx;k.yy=g.yx*b.xy+g.yy*b.yy;k.dx=g.xx*b.dx+g.xy*b.dy+g.dx;k.dy=g.yx*b.dx+g.yy*b.dy+g.dy}m.mixin(this,k)}}else m.mixin(this,c)};m.extend(e.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});m.mixin(e,{identity:new e.Matrix2D,flipX:new e.Matrix2D({xx:-1}),flipY:new e.Matrix2D({yy:-1}),flipXY:new e.Matrix2D({xx:-1,yy:-1}),translate:function(c,k){return 1<arguments.length?new e.Matrix2D({dx:c,dy:k}):new e.Matrix2D({dx:c.x,dy:c.y})},scale:function(c,
k){return 1<arguments.length?new e.Matrix2D({xx:c,yy:k}):"number"==typeof c?new e.Matrix2D({xx:c,yy:c}):new e.Matrix2D({xx:c.x,yy:c.y})},rotate:function(c){var k=Math.cos(c);c=Math.sin(c);return new e.Matrix2D({xx:k,xy:-c,yx:c,yy:k})},rotateg:function(c){return e.rotate(e._degToRad(c))},skewX:function(c){return new e.Matrix2D({xy:Math.tan(c)})},skewXg:function(c){return e.skewX(e._degToRad(c))},skewY:function(c){return new e.Matrix2D({yx:Math.tan(c)})},skewYg:function(c){return e.skewY(e._degToRad(c))},
reflect:function(c,k){1==arguments.length&&(k=c.y,c=c.x);var d=c*c,g=k*k,b=d+g,l=2*c*k/b;return new e.Matrix2D({xx:2*d/b-1,xy:l,yx:l,yy:2*g/b-1})},project:function(c,k){1==arguments.length&&(k=c.y,c=c.x);var d=c*c,g=k*k,b=d+g,l=c*k/b;return new e.Matrix2D({xx:d/b,xy:l,yx:l,yy:g/b})},normalize:function(c){return c instanceof e.Matrix2D?c:new e.Matrix2D(c)},isIdentity:function(c){return 1==c.xx&&0==c.xy&&0==c.yx&&1==c.yy&&0==c.dx&&0==c.dy},clone:function(c){var k=new e.Matrix2D,d;for(d in c)"number"==
typeof c[d]&&("number"==typeof k[d]&&k[d]!=c[d])&&(k[d]=c[d]);return k},invert:function(c){c=e.normalize(c);var k=c.xx*c.yy-c.xy*c.yx;return c=new e.Matrix2D({xx:c.yy/k,xy:-c.xy/k,yx:-c.yx/k,yy:c.xx/k,dx:(c.xy*c.dy-c.yy*c.dx)/k,dy:(c.yx*c.dx-c.xx*c.dy)/k})},_multiplyPoint:function(c,e,d){return{x:c.xx*e+c.xy*d+c.dx,y:c.yx*e+c.yy*d+c.dy}},multiplyPoint:function(c,k,d){c=e.normalize(c);return"number"==typeof k&&"number"==typeof d?e._multiplyPoint(c,k,d):e._multiplyPoint(c,k.x,k.y)},multiplyRectangle:function(c,
k){var d=e.normalize(c);k=k||{x:0,y:0,width:0,height:0};if(e.isIdentity(d))return{x:k.x,y:k.y,width:k.width,height:k.height};var g=e.multiplyPoint(d,k.x,k.y),b=e.multiplyPoint(d,k.x,k.y+k.height),l=e.multiplyPoint(d,k.x+k.width,k.y),a=e.multiplyPoint(d,k.x+k.width,k.y+k.height),d=Math.min(g.x,b.x,l.x,a.x),f=Math.min(g.y,b.y,l.y,a.y),h=Math.max(g.x,b.x,l.x,a.x),g=Math.max(g.y,b.y,l.y,a.y);return{x:d,y:f,width:h-d,height:g-f}},multiply:function(c){for(var k=e.normalize(c),d=1;d<arguments.length;++d){var g=
k,b=e.normalize(arguments[d]),k=new e.Matrix2D;k.xx=g.xx*b.xx+g.xy*b.yx;k.xy=g.xx*b.xy+g.xy*b.yy;k.yx=g.yx*b.xx+g.yy*b.yx;k.yy=g.yx*b.xy+g.yy*b.yy;k.dx=g.xx*b.dx+g.xy*b.dy+g.dx;k.dy=g.yx*b.dx+g.yy*b.dy+g.dy}return k},_sandwich:function(c,k,d){return e.multiply(e.translate(k,d),c,e.translate(-k,-d))},scaleAt:function(c,k,d,g){switch(arguments.length){case 4:return e._sandwich(e.scale(c,k),d,g);case 3:return"number"==typeof d?e._sandwich(e.scale(c),k,d):e._sandwich(e.scale(c,k),d.x,d.y)}return e._sandwich(e.scale(c),
k.x,k.y)},rotateAt:function(c,k,d){return 2<arguments.length?e._sandwich(e.rotate(c),k,d):e._sandwich(e.rotate(c),k.x,k.y)},rotategAt:function(c,k,d){return 2<arguments.length?e._sandwich(e.rotateg(c),k,d):e._sandwich(e.rotateg(c),k.x,k.y)},skewXAt:function(c,k,d){return 2<arguments.length?e._sandwich(e.skewX(c),k,d):e._sandwich(e.skewX(c),k.x,k.y)},skewXgAt:function(c,k,d){return 2<arguments.length?e._sandwich(e.skewXg(c),k,d):e._sandwich(e.skewXg(c),k.x,k.y)},skewYAt:function(c,k,d){return 2<arguments.length?
e._sandwich(e.skewY(c),k,d):e._sandwich(e.skewY(c),k.x,k.y)},skewYgAt:function(c,k,d){return 2<arguments.length?e._sandwich(e.skewYg(c),k,d):e._sandwich(e.skewYg(c),k.x,k.y)}});n.Matrix2D=e.Matrix2D;return e})},"esri/views/2d/engine/graphics/gfx/Shape":function(){define("require exports dojox/gfx/matrix dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg".split(" "),function(n,m,e,h,c,k,d,g,b){n=function(){function l(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=this.clip=null}l.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=b.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&(a=this.rawNode.getAttribute("clip-path")))(a=d.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};l.prototype.getNode=function(){return this.rawNode};
l.prototype.getShape=function(){return this.shape};l.prototype.getTransform=function(){return this.matrix};l.prototype.getFill=function(){return this.fillStyle};l.prototype.getStroke=function(){return this.strokeStyle};l.prototype.getParent=function(){return this.parent};l.prototype.getBoundingBox=function(){return this.bbox};l.prototype.getTransformedBoundingBox=function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[e.multiplyPoint(b,a.x,a.y),e.multiplyPoint(b,
a.x+a.width,a.y),e.multiplyPoint(b,a.x+a.width,a.y+a.height),e.multiplyPoint(b,a.x,a.y+a.height)]};l.prototype.getEventSource=function(){return this.rawNode};l.prototype.getClip=function(){return this.clip};l.prototype.setTransform=function(a){this.matrix=e.clone(a?e.normalize(a):e.identity);return this._applyTransform()};l.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var b;if("object"===typeof a&&
"type"in a){switch(a.type){case "linear":b=h.makeParameters(h.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=h.makeParameters(h.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",b.r.toFixed(8));break;case "pattern":b=
h.makeParameters(h.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}this.fillStyle=b;return this}this.fillStyle=b=h.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};l.prototype.setStroke=function(a){var f=this.rawNode;
if(!a)return this.strokeStyle=null,f.setAttribute("stroke","none"),f.setAttribute("stroke-opacity",0),this;if("string"===typeof a||c.isArray(a)||a instanceof k)a={color:a};a=this.strokeStyle=h.makeParameters(h.defaultStroke,a);a.color=h.normalizeColor(a.color);if(a){var l=0>a.width?0:a.width;f.setAttribute("stroke",a.color.toCss());f.setAttribute("stroke-opacity",a.color.a);f.setAttribute("stroke-width",l);f.setAttribute("stroke-linecap",a.cap);"number"===typeof a.join?(f.setAttribute("stroke-linejoin",
"miter"),f.setAttribute("stroke-miterlimit",a.join)):f.setAttribute("stroke-linejoin",a.join);var g=a.style.toLowerCase();g in b.dasharray&&(g=b.dasharray[g]);if(g instanceof Array){for(var g=c._toArray(g),d=0;d<g.length;++d)g[d]*=l;if("butt"!==a.cap){for(d=0;d<g.length;d+=2)g[d]-=l,1>g[d]&&(g[d]=1);for(d=1;d<g.length;d+=2)g[d]+=l}g=g.join(",")}f.setAttribute("stroke-dasharray",g);f.setAttribute("dojoGfxStrokeStyle",a.style)}return this};l.prototype._getParentSurface=function(){for(var a=this.parent;a&&
!(a instanceof h.Surface);a=a.parent);return a};l.prototype._setFillObject=function(a,c){var l=b.xmlns.svg;this.fillStyle=a;var g=this._getParentSurface().defNode,d=this.rawNode.getAttribute("fill");if(d=b.getRef(d))if(d.tagName.toLowerCase()!==c.toLowerCase()){var e=d.id;d.parentNode.removeChild(d);d=b._createElementNS(l,c);d.setAttribute("id",e);g.appendChild(d)}else for(;d.childNodes.length;)d.removeChild(d.lastChild);else d=b._createElementNS(l,c),d.setAttribute("id",h._base._getUniqueId()),g.appendChild(d);
if("pattern"===c)d.setAttribute("patternUnits","userSpaceOnUse"),l=b._createElementNS(l,"image"),l.setAttribute("x",0),l.setAttribute("y",0),l.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),l.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),b._setAttributeNS(l,b.xmlns.xlink,"xlink:href",a.src),d.appendChild(l);else{d.setAttribute("gradientUnits","userSpaceOnUse");for(g=0;g<a.colors.length;++g){var e=a.colors[g],k=b._createElementNS(l,"stop"),m=e.color=h.normalizeColor(e.color);k.setAttribute("offset",
e.offset.toFixed(8));k.setAttribute("stop-color",m.toCss());k.setAttribute("stop-opacity",m.a);d.appendChild(k)}}this.rawNode.setAttribute("fill","url(#"+d.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return d};l.prototype._applyTransform=function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+
","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this};l.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this};l.prototype.setShape=function(a){this.shape=
h.makeParameters(this.shape,a);for(var b in this.shape)if("type"!==b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this};l.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};l.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};l.prototype.setClip=function(a){};l.prototype._removeClipNode=function(){var a,b=g.get(this.rawNode,
"clip-path");b&&(a=d.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a};l.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this};l.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};l.prototype.applyRightTransform=function(a){return a?this.setTransform([this.matrix,a]):this};l.prototype.applyLeftTransform=function(a){return a?this.setTransform([a,
this.matrix]):this};l.prototype.applyTransform=function(a){return a?this.setTransform([this.matrix,a]):this};l.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};l.prototype._setParent=function(a,b){this.parent=a;return this._updateParentMatrix(b)};l.prototype._updateParentMatrix=function(a){this.parentMatrix=a?e.clone(a):null;return this._applyTransform()};l.prototype._getRealMatrix=function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=e.multiply(b.matrix,
a)),b=b.parent;return a};return l}();Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Circle":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(n,m,e,h,c){n=function(k){function d(g){k.call(this);this.shape=c.getDefault("Circle");this.rawNode=g}e(d,k);d.prototype.getBoundingBox=function(){if(!this.bbox){var c=this.shape;this.bbox={x:c.cx-c.r,y:c.cy-c.r,width:2*c.r,height:2*c.r}}return this.bbox};
d.nodeType="circle";return d}(h.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Group":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),function(n,m,e,h,c,k,d,g,b,l,a){n=function(f){function h(){f.apply(this,arguments)}e(h,f);h.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this};h.prototype.destroy=
function(){f.prototype.clear.call(this,!0);f.prototype.destroy.call(this)};h.prototype.createShape=function(a){switch(a.type){case c.defaultPath.type:return this.createPath(a);case c.defaultRect.type:return this.createRect(a);case c.defaultCircle.type:return this.createCircle(a);case c.defaultImage.type:return this.createImage(a);case c.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};h.prototype.createGroup=function(){return this.createObject(h)};h.prototype.createRect=
function(a){return this.createObject(l.default,a)};h.prototype.createCircle=function(a){return this.createObject(d.default,a)};h.prototype.createImage=function(a){return this.createObject(b.default,a)};h.prototype.createText=function(b){return this.createObject(a.default,b)};h.prototype.createPath=function(a){return this.createObject(g.default,a)};h.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a,f=k._createElementNS(k.xmlns.svg,a.nodeType);c.setRawNode(f);c.setShape(b);
this.add(c);return c};h.nodeType="g";return h}(h.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Path":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(n,m,e,h,c,k,d){n=function(g){function b(b){g.call(this);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.segmented=!1;this._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,
q:4,t:2,a:7,z:0};this._2PI=2*Math.PI;this.rawNode=b;this.shape=h.clone(c.defaultPath)}e(b,g);b.prototype.setAbsoluteMode=function(b){this._confirmSegmented();this.absolute="string"===typeof b?"absolute"===b:b;return this};b.prototype.getAbsoluteMode=function(){this._confirmSegmented();return this.absolute};b.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null};
b.prototype._getRealBBox=function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,a=this._getRealMatrix();this.bbox=null;for(var c=0,g=this.segments.length;c<g;++c)this._updateWithSegment(this.segments[c],a);a=this.bbox;this.bbox=b;return this.tbbox=a?[{x:a.l,y:a.t},{x:a.r,y:a.t},{x:a.r,y:a.b},{x:a.l,y:a.b}]:null};b.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?this.last:null};b.prototype._applyTransform=function(){this.tbbox=null;g.prototype._applyTransform.call(this);
return this};b.prototype._updateBBox=function(b,a,c){c&&(a=k.multiplyPoint(c,b,a),b=a.x,a=a.y);this.bbox&&"l"in this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>a&&(this.bbox.t=a),this.bbox.b<a&&(this.bbox.b=a)):this.bbox={l:b,b:a,r:b,t:a}};b.prototype._updateWithSegment=function(b,a){var f=b.args,g=f.length,d;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(d=0;d<g;d+=2)this._updateBBox(f[d],f[d+1],a);this.last.x=f[g-2];this.last.y=f[g-
1];this.absolute=!0;break;case "H":for(d=0;d<g;++d)this._updateBBox(f[d],this.last.y,a);this.last.x=f[g-1];this.absolute=!0;break;case "V":for(d=0;d<g;++d)this._updateBBox(this.last.x,f[d],a);this.last.y=f[g-1];this.absolute=!0;break;case "m":d=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],a),d=2);for(;d<g;d+=2)this._updateBBox(this.last.x+=f[d],this.last.y+=f[d+1],a);this.absolute=!1;break;case "l":case "t":for(d=0;d<g;d+=2)this._updateBBox(this.last.x+=f[d],this.last.y+=
f[d+1],a);this.absolute=!1;break;case "h":for(d=0;d<g;++d)this._updateBBox(this.last.x+=f[d],this.last.y,a);this.absolute=!1;break;case "v":for(d=0;d<g;++d)this._updateBBox(this.last.x,this.last.y+=f[d],a);this.absolute=!1;break;case "c":for(d=0;d<g;d+=6)this._updateBBox(this.last.x+f[d],this.last.y+f[d+1],a),this._updateBBox(this.last.x+f[d+2],this.last.y+f[d+3],a),this._updateBBox(this.last.x+=f[d+4],this.last.y+=f[d+5],a);this.absolute=!1;break;case "s":case "q":for(d=0;d<g;d+=4)this._updateBBox(this.last.x+
f[d],this.last.y+f[d+1],a),this._updateBBox(this.last.x+=f[d+2],this.last.y+=f[d+3],a);this.absolute=!1;break;case "A":for(d=0;d<g;d+=7)this._updateBBox(f[d+5],f[d+6],a);this.last.x=f[g-2];this.last.y=f[g-1];this.absolute=!0;break;case "a":for(d=0;d<g;d+=7)this._updateBBox(this.last.x+=f[d+5],this.last.y+=f[d+6],a);this.absolute=!1}var e=[b.action];for(d=0;d<g;++d)e.push(c.formatNumber(f[d],!0));if("string"===typeof this.shape.path)this.shape.path+=e.join("");else{d=0;for(g=e.length;d<g;++d)this.shape.path.push(e[d])}"string"===
typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};b.prototype._pushSegment=function(b,a){this.tbbox=null;var c=this._validSegments[b.toLowerCase()];"number"===typeof c&&(c?a.length>=c&&(c={action:b,args:a.slice(0,a.length-a.length%c)},this.segments.push(c),this._updateWithSegment(c)):(c={action:b,args:[]},this.segments.push(c),this._updateWithSegment(c)))};b.prototype._collectArgs=function(b,a){for(var c=0;c<a.length;++c){var d=a[c];"boolean"===typeof d?b.push(d?1:0):"number"===
typeof d?b.push(d):d instanceof Array?this._collectArgs(b,d):"x"in d&&"y"in d&&b.push(d.x,d.y)}};b.prototype._confirmSegmented=function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}};b.prototype._setPath=function(b){b=h.isArray(b)?b:b.match(c.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var a="",f=[],d=b.length,g=0;g<d;++g){var e=b[g],k=parseFloat(e);isNaN(k)?(a&&this._pushSegment(a,
f),f=[],a=e):f.push(k)}this._pushSegment(a,f)}};b.prototype.setShape=function(b){g.prototype.setShape.call(this,"string"===typeof b?{path:b}:b);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this};b.nodeType="path";return b}(d.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Image":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),
function(n,m,e,h,c,k){n=function(c){function g(b){c.call(this);this.shape=h.getDefault("Image");this.rawNode=b}e(g,c);g.prototype.setShape=function(b){this.shape=h.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var c in this.shape)if("type"!==c&&"src"!==c){var a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;b.setAttribute(c,a)}b.setAttribute("preserveAspectRatio","none");k._setAttributeNS(b,k.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this;return this};g.prototype.getBoundingBox=
function(){return this.shape};g.prototype.setStroke=function(){return this};g.prototype.setFill=function(){return this};g.nodeType="image";return g}(c.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Rect":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(n,m,e,h,c){n=function(c){function d(d){c.call(this);this.shape=h.getDefault("Rect");this.rawNode=d}e(d,c);d.prototype.getBoundingBox=
function(){return this.shape};d.prototype.setShape=function(c){this.shape=h.makeParameters(this.shape,c);this.bbox=null;for(var b in this.shape)if("type"!==b&&"r"!==b){c=this.shape[b];if("width"===b||"height"===b)c=0>c?0:c;this.rawNode.setAttribute(b,c)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};d.nodeType="rect";return d}(c.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/engine/graphics/gfx/Text":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),
function(n,m,e,h,c,k,d){n=h("android");var g=h("chrome")||n&&4<=n?"auto":"optimizeLegibility";h=function(b){function l(a){b.call(this);this.fontStyle=null;this.shape=c.getDefault("Text");this.rawNode=a}e(l,b);l.prototype.getFont=function(){return this.fontStyle};l.prototype.setFont=function(a){this.fontStyle="string"===typeof a?c.splitFontString(a):c.makeParameters(c.defaultFont,a);this._setFont();return this};l.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",
a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};l.prototype.setShape=function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);
a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",g);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(d._createTextNode(b.text));return this};l.prototype.getTextWidth=function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!==d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width,10):68;b.removeChild(a);return c};l.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=
this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a};l.nodeType="text";return l}(k.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=h})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(n,m,e){function h(b){return"matrix3d(\n                    "+b[0].toFixed(10)+", "+b[1].toFixed(10)+", 0, 0,\n                    "+b[2].toFixed(10)+", "+b[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+
Math.round(b[4]).toFixed(10)+", "+Math.round(b[5]).toFixed(10)+", 0, 1\n                  )"}function c(b){return"translate("+Math.round(b[0])+"px, "+Math.round(b[1])+"px)"}function k(b){return"rotateZ( "+b+" deg)"}n=e("ff");var d=e("ie"),g=e("webkit");e=e("opera");var b=g&&"-webkit-transform"||n&&"-moz-transform"||e&&"-o-transform"||d&&"-ms-transform"||"transform";m.clip=function(b,a){b.clip=a?"rect( "+a.top+"px, "+a.right+"px, "+a.bottom+"px, "+a.left+"px)":""};m.setTransform=function(d,a){var f=
null;2===a.length&&(f=c(a));6===a.length&&(f=h(a));d.transform=d[b]=f};m.setOrigin=function(b,a){b.transformOrigin=a[0]+"px "+a[1]+"px 0"};m.cssMatrix=function(b){return"matrix(\n                  "+b[0].toFixed(10)+", "+b[1].toFixed(10)+",\n                  "+b[2].toFixed(10)+", "+b[3].toFixed(10)+",\n                  "+b[4]+", "+b[5]+"\n                )"};m.cssMatrix3d=h;m.translate=c;m.rotate=function(b){return k(b.toFixed(3))};m.rotateZ=k})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(n,m,e,h,c){return function(c){function d(){c.call(this)}e(d,c);d.prototype.attach=function(d){this.g=d.surface.createGroup();return c.prototype.attach.call(this,d)};d.prototype.detach=function(d){c.prototype.detach.call(this,d);this.g.destroy();this.g=null};d.prototype.prepareChildrenRenderParameters=function(c){return h.mixin({},c,{surface:this.g})};d.prototype.detachChild=function(c,b){return c.detach(b)};
d.prototype.attachChild=function(c,b){return c.attach(b)};d.prototype.renderChild=function(c,b){return c.render(b)};return d}(c)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),function(n,m,e,h,c,k,d,g){var b=new Set,l=[];return function(a){function f(){a.call(this);
this.visible=!0}e(f,a);Object.defineProperty(f.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===
b.type&&("simple-marker-symbol"===a||"picture-marker-symbol"===a||"text-symbol"===a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});f.prototype.attach=function(a){return!0};f.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=null};f.prototype.render=function(a){var b=a.surface,c=a.state,f=a.projector,
d=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference);a=this._getScreenOffsets([],a.state);g.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape();if(a.length){var l=this._shape,e=d.type;if(!l||this._showRedraw(a,c))"point"===e?(l=g.drawPoint(f,b,d,l,this.renderingInfo,c.rotation,a),g.stylePoint(l,this.renderingInfo)):"multipoint"===e?(l=g.drawMarkers(f,b,d,l,this.renderingInfo,c.rotation,a),g.styleMarkers(l,this.renderingInfo)):(l=g.drawShape(f,b,d,l,
a),g.styleShape(l,this.renderingInfo)),this._shape=l,l.getNode().gfxObject=this}else this._removeShape()};f.prototype._getScreenOffsets=function(a,c){var f=c.clippedExtent,d=this._projected.outExtent,g=c.spatialReference;a.length=0;if(!d)return a;if(g.isWrappable){var g=k.getInfo(g),e=d.cache._partwise,f=f._getParts(g);l.length=0;if(e&&e.length)for(d=0;d<e.length;d++)l.push.apply(l,e[d]._getParts(g));else l.push.apply(l,d._getParts(g));d=c.worldScreenWidth;a.length=0;b.clear();g=0;for(e=l.length;g<
e;g++)for(var h=l[g],m=h.extent,h=h.frameIds,n=h.length,z=0,E=f.length;z<E;z++){var A=f[z];if(A.extent.intersects(m))for(var C=0,H=n;C<H;C++){var F=(A.frameIds[0]-h[C])*d;b.has(F)||(a.push(F),b.add(F))}}a.sort()}else f.intersects(d)&&a.push(0);return a};f.prototype._projectGeometry=function(a,b){var f=this._projected,d=this.isPolygonMarkerSymbol?a.centroid:a;if(f&&f.inGeometry===d&&f.outSpatialReference===b)return f.outGeometry;d&&d.spatialReference.equals(b)?this._projected={inGeometry:d,outGeometry:d,
outSpatialReference:b,outExtent:this._getExtent(d)}:c.canProject(d,b)?this._projected={inGeometry:d,outGeometry:c.project(d,b),outSpatialReference:b,outExtent:this._getExtent(d)}:this._projected={inGeometry:d,outGeometry:null,outSpatialReference:b,outExtent:null};return this._projected.outGeometry};f.prototype._getExtent=function(a){var b=a.extent;if(!b){var c=b=void 0;"esri.geometry.Point"===a.declaredClass?(b=a.x,c=a.y):"esri.geometry.Multipoint"===a.declaredClass&&(b=a.points[0][0],c=a.points[0][1]);
b=new h(b,c,b,c,a.spatialReference)}return b};f.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};f.prototype._showRedraw=function(a,b){return!0};return f}(d)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/matrix ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils".split(" "),
function(n,m,e,h,c,k,d,g){function b(a,b){b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]);return a}function l(a,b,c){null!=c&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=c);return a}function a(a,b){var c=a.width/a.height,f=1,d=1;isNaN(b)||(1<c?(f=b/a.width,d=b/c/a.height):(d=b/a.height,f=b*c/a.width));return{xx:f,yy:d}}function f(b,f,l,e,k,m,n){var p=k.symbol,w=b.toScreenPoint(y,l,n[0]);l=w.x;n=w.y;var t;b=[];var z=k.rotationAngle;k=k.size&&k.size[0];var G;"number"===
typeof k&&(G=isFinite(k)&&k);var I=G&&isFinite(G)&&!isNaN(G);G=I?c.pt2px(G):NaN;m&&b.push(h.rotategAt(m,w));z&&b.push(h.rotategAt(z,w));m=c.pt2px(p.xoffset);z=c.pt2px(p.yoffset);(0!==m||0!==z)&&b.push(h.translate(m,-z));0!==p.angle&&b.push(h.rotategAt(p.angle,w));if("simple-marker-symbol"===p.type)switch(t=p.style,m=Math.round,G=I?G:c.pt2px(p.size),I=void 0,t){case d.STYLE_SQUARE:case d.STYLE_CROSS:case d.STYLE_X:case d.STYLE_DIAMOND:I=isNaN(G)?16:0.5*G;t=r(f,e,u(t,l,n,m(l-I),m(l+I),m(n-I),m(n+I)));
break;case d.STYLE_PATH:t=r(f,e,p.path);p=t.getBoundingBox();f=a(p,k);(1!==f.xx||1!==f.yy)&&b.push(h.scaleAt(f.xx,f.yy,w.x,w.y));b.push(h.translate(-(p.x+0.5*p.width)+l,-(p.y+0.5*p.height)+n));break;default:I=isNaN(G)?16:0.5*G,t=q(f,e,{cx:l,cy:n,r:I})}else if("picture-marker-symbol"===p.type)t=I?G:c.pt2px(p.width),G=I?G:c.pt2px(p.height),t=s(f,e,{x:l-0.5*t,y:n-0.5*G,width:t,height:G,src:p.url});else if("text-symbol"===p.type){if(w=p.font&&p.font.clone())w.size=I?G:c.pt2px(w.size);t=v(f,e,{type:"text",
text:p.text,x:l,y:n,align:g.getSVGAlign(p),decoration:p.decoration||w&&w.decoration,rotated:p.rotated,kerning:p.kerning});w&&t.setFont(w);f=t.getNode();e=g.getSVGBaseline(p);p=g.getSVGBaselineShift(p);f&&(f.setAttribute("dominant-baseline",e),p&&f.setAttribute("baseline-shift",p))}t.setTransform(h.multiply(b));return t}function s(a,b,c){return b?b.setShape(c):a.createImage(c)}function q(a,b,c){return b?b.setShape(c):a.createCircle(c)}function r(a,b,c){c=Array.isArray(c)?c.join(" "):c;return b?b.setShape(c):
a.createPath(c)}function v(a,b,c){return b?b.setShape(c):a.createText(c)}function p(a,b){var c=b&&b.shape&&b.shape.type,f=a&&a.type,d=a&&a.style;f&&(d=t[f]||d);z[d]&&(d="path");return!(!c||!(d&&c!==d))}function u(a,b,c,f,g,l,e,k){switch(a){case d.STYLE_SQUARE:return["M",f+","+l,g+","+l,g+","+e,f+","+e,"Z"];case d.STYLE_CROSS:return["M",b+","+l,b+","+e,"M",f+","+c,g+","+c];case d.STYLE_X:return["M",f+","+l,g+","+e,"M",f+","+e,g+","+l];case d.STYLE_DIAMOND:return["M",b+","+l,g+","+c,b+","+e,f+","+c,
"Z"];case d.STYLE_TARGET:return["M",f+","+l,g+","+l,g+","+e,f+","+e,f+","+l,"M",f-k+","+c,f+","+c,"M",b+","+(l-k),b+","+l,"M",g+k+","+c,g+","+c,"M",b+","+(e+k),b+","+e]}}function w(a,c){var f=c.symbol;if("picture-marker-symbol"!==f.type){var k=g.getFill(f);if("simple-marker-symbol"===f.type){var h=f.style,m=(f=g.getStroke(f))&&f.color,h=h===d.STYLE_X||h===d.STYLE_CROSS,s=c.opacity,q=c.color||b([0,0,0,0],h?m:k);q&&null!=s&&(q=l([0,0,0,0],q,s));q&&(h?q!==m&&(f=f?e.mixin({},f):{},f.color=q):q!==k&&(k=
q));a.setFill(k).setStroke(f)}else"text-symbol"===f.type&&(s=c.opacity,(q=c.color||b([0,0,0,0],k))&&null!=s&&(q=l([0,0,0,0],q,s)),q&&q!==k&&(k=q),a.setFill(k))}}m.getScaleMatrix=a;var y={x:0,y:0};m.drawPoint=f;m.drawMarkers=function(a,b,c,d,g,l,e){var k=g.symbol;c=c.points;b=d||b.createGroup();d=[0];b.children[0]&&p(k,b.children[0])&&b.clear();for(var h=k=0,m=c.length;h<m;h++)for(var s=c[h],q=0,r=e.length;q<r;q++)d[0]=e[q],b.add(f(a,b,{x:s[0],y:s[1]},b.children[k++],g,l,d));a=b.children.length;if(c.length*
e.length<a){h=a-1;for(m=c.length*e.length;h>=m;h--)b.children[h].removeShape()}return b};m.drawShape=function(a,b,c,f,d){var g=[];"extent"===c.type&&(c=k.fromExtent(c));if("polyline"===c.type||"polygon"===c.type){for(var l=0,e=d.length;l<e;l++)g=g.concat(a.toScreenPath(c,d[l]));f=r(b,f,g)}return f};m.drawRect=function(a,b,c){return b?b.setShape(c):a.createRect(c)};m.drawImage=s;m.drawCircle=q;m.drawPath=r;m.drawText=v;var t={"picture-marker-symbol":"image","picture-fill-symbol":"path","simple-fill-symbol":"path",
"simple-line-symbol":"path","text-symbol":"text"},z={square:1,cross:1,x:1,diamond:1,target:1};m.isShapeInvalid=p;m.smsToPath=u;m.stylePoint=w;m.styleMarkers=function(a,b){for(var c=0,f=a.children.length;c<f;c++)w(a.children[c],b)};m.styleShape=function(a,f){var d=f.symbol,k=f.size,h=f.color,m=f.opacity,s=g.getStroke(d),q=g.getFill(d),r=!1,p;"simple-line-symbol"===d.type?(r=!0,p="none"!==d.style):p=d.outline&&"none"!==d.outline.style;var n,u,v;k&&(v=isFinite(k[0])&&k[0]);null!=k&&(v=c.pt2px(v));if((h||
null!=m)&&"picture-fill-symbol"!==d.type)r?(n=h||s&&s.color&&b([0,0,0,0],s.color))&&null!=m&&(n=l(n,n,m)):q&&(u=h||b([0,0,0,0],q))&&null!=m&&(u=l(u,u,m));!p||null==k&&!n?a.setStroke(s):a.setStroke(e.mixin({},s,null!=v?{width:v}:null,n&&{color:n}));a.setFill(u||q);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils".split(" "),function(n,m,e,h,c,k){function d(a){var c=
a.style,d=null;if(a){var g=a.constructor;switch(a.type){case f:c!==g.STYLE_CROSS&&c!==g.STYLE_X&&(d=a.color);break;case l:c===g.STYLE_SOLID?d=a.color:c!==g.STYLE_NULL&&(d=e.mixin({},h.defaultPattern,{src:q+c+".png",width:10,height:10}));break;case b:d=e.mixin({},h.defaultPattern,{src:a.url,width:k.pt2px(a.width)*a.xscale,height:k.pt2px(a.height)*a.yscale,x:k.pt2px(a.xoffset),y:k.pt2px(a.yoffset)});break;case s:d=a.color}}return d}function g(c){if(!c)return null;var d,e=c.constructor,h=k.pt2px(c.width);
switch(c.type){case l:case b:case f:d=g(c.outline);break;case a:c.style!==e.STYLE_NULL&&0!==h&&(d={color:c.color,style:p(c.style),width:h,cap:c.cap,join:c.join===e.JOIN_MITER?k.pt2px(c.miterLimit):c.join});break;default:d=null}return d}var b="picture-fill-symbol",l="simple-fill-symbol",a="simple-line-symbol",f="simple-marker-symbol",s="text-symbol",q=n.toUrl("../../symbols/patterns/"),r={left:"start",center:"middle",right:"end",justify:"start"},v={top:"text-before-edge",middle:"central",baseline:"alphabetic",
bottom:"text-after-edge"};m.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&r[a.toLowerCase()]||"middle"};m.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&v[a.toLowerCase()]||"alphabetic"};m.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};m.getFill=d;m.getStroke=g;var p=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();m.getShapeDescriptors=function(c){if(!c)return{defaultShape:null,fill:null,
font:null,stroke:null};var e={defaultShape:null,fill:d(c),font:null,stroke:g(c)},h=c.constructor,m=h.defaultProps,q=null;switch(c.type){case f:var r=c.style,m=0.5*k.pt2px(c.size||m.size),n=-m,p=+m,v=-m,F=+m;switch(r){case h.STYLE_CIRCLE:q={type:"circle",cx:0,cy:0,r:m};break;case h.STYLE_CROSS:q={type:"path",path:"M "+n+",0 L "+p+",0 M 0,"+v+" L 0,"+F+" E"};break;case h.STYLE_DIAMOND:q={type:"path",path:"M "+n+",0 L 0,"+v+" L "+p+",0 L 0,"+F+" L "+n+",0 Z"};break;case h.STYLE_SQUARE:q={type:"path",
path:"M "+n+","+F+" L "+n+","+v+" L "+p+","+v+" L "+p+","+F+" L "+n+","+F+" Z"};break;case h.STYLE_X:q={type:"path",path:"M "+n+","+F+" L "+p+","+v+" M "+n+","+v+" L "+p+","+F+" E"};break;case h.STYLE_PATH:q={type:"path",path:c.path||""}}break;case a:q={type:"path",path:"M -15,0 L 15,0 E"};break;case b:case l:q={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picture-marker-symbol":q={type:"image",x:-Math.round(k.pt2px(c.width)/2),y:-Math.round(k.pt2px(c.height)/2),width:k.pt2px(c.width),
height:k.pt2px(c.height),src:c.source&&c.source.imageData?"data:"+c.source.contentType+";base64,"+c.source.imageData:c.url||""};break;case s:h=c.font,r=k.pt2px(h.size),q={type:"text",text:c.text,x:0,y:0.25*r,align:"middle",decoration:c.decoration||h&&h.decoration,rotated:c.rotated,kerning:c.kerning},e.font=h&&{size:r+"px",style:h.style,variant:h.variant,weight:h.weight,family:h.family}}e.defaultShape=q;return e};m.defaultThematicColor=new c([128,128,128])})},"esri/views/input/ViewEvents":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(n,m,e,h,c){function k(a){return!!g[a]}function d(a){for(var b=0;b<a.length;b++)if(!k(a[b]))return!1;return!0}var g={click:!0,"double-click":!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0},b;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(b||(b={}));n=function(){function a(a){this.handlers=new Map;this.counter=
0;this.view=a;this.inputManager=null}a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,b,c){var g=
this;a=Array.isArray(a)?a:a.split(",");if(!d(a))return a.some(k)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var e=Array.isArray(b)?b:[];c=Array.isArray(b)?c:b;var h=this.createUniqueGroupName();b=new l(this.view,a,e,c);this.handlers.set(h,b);this.inputManager&&this.inputManager.installHandlers(h,[b]);return{remove:function(){return g.removeHandler(h)}}};a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers.delete(a);
this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();m.ViewEvents=n;var l=function(a){function b(c,f,d,g){var l=this;a.call(this,"esri.views.input.ViewEventHandler",!0);this.view=c;for(c=0;c<f.length;c++)switch(f[c]){case "click":this.registerIncoming("click",d,function(a){return g(l.wrapClick(a))});break;case "double-click":this.registerIncoming("double-click",d,function(a){return g(l.wrapDoubleClick(a))});
break;case "drag":this.registerIncoming("drag",d,function(a){return g(l.wrapDrag(a))});break;case "key-down":this.registerIncoming("key-down",d,function(a){return g(l.wrapKeyDown(a))});break;case "key-up":this.registerIncoming("key-up",d,function(a){return g(l.wrapKeyUp(a))});break;case "pointer-down":this.registerIncoming("pointer-down",d,function(a){return g(l.wrapPointer(a,"pointer-down"))});break;case "pointer-move":this.registerIncoming("pointer-move",d,function(a){return g(l.wrapPointer(a,"pointer-move"))});
break;case "pointer-up":this.registerIncoming("pointer-up",d,function(a){return g(l.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":this.registerIncoming("mouse-wheel",d,function(a){return g(l.wrapMouseWheel(a))})}}e(b,a);b.prototype.wrapClick=function(a){var b=a.data.x,f=a.data.y;return{type:"click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:f,"native":a.data.native,timestamp:a.timestamp,screenPoint:new c(b,f),mapPoint:this.view.toMap(b,f),stopPropagation:function(){return a.stopPropagation()}}};
b.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,"native":a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},
"native":a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapKeyUp=function(a){return{type:"key-up",key:a.data.key,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapPointer=
function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,"native":a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};return b}(h.InputHandler)})},"esri/views/input/InputHandler":function(){define(["require",
"exports","./EventMatch","../../core/Logger"],function(n,m,e,h){var c=h.getLogger("esri.views.input");n=function(){function g(b,c){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=b;this._hasSideEffects=c}Object.defineProperty(g.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var b in this._incoming)for(var c=0,a=this._incoming[b];c<
a.length;c++)this._incomingEventMatches.push(a[c].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(b){return b.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing));
return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});g.prototype.onInstall=function(b){var d=this;this._manager?c.error("This InputHandler has already been registered with an InputManager"):(b.setEventCallback(function(a,b){return d._handleEvent(a,b)}),b.setUninstallCallback(function(){return d._onUninstall()}),this._manager=b)};g.prototype.registerIncoming=function(b,
c,a){var f=this;"function"===typeof c?(a=c,c=[]):c=c||[];b="string"===typeof b?new e.EventMatch(b,c):b;var d=function(){f._incomingEventTypes=null;f._incomingEventMatches=null};c=function(a){var b=f._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),d(),f._manager&&f._manager.updateDependencies())};a=new k(b,a,{onPause:c,onRemove:c,onResume:function(a){var b=f._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),d(),f._manager&&f._manager.updateDependencies())}});c=this._incoming[b.eventType];
c||(c=[],this._incoming[b.eventType]=c);c.push(a);d();this._manager&&this._manager.updateDependencies();return a};g.prototype.registerOutgoing=function(b){var c=this;if(this._outgoing[b])throw Error("There is already a callback registered for this outgoing InputEvent: "+b);var a=new d(b,{onEmit:function(a,b){c._manager.emit(a.eventType,b)},onRemove:function(a){delete c._outgoing[a.eventType];c._manager.updateDependencies()}});this._outgoing[b]=a;this._outgoingEventTypes=null;this._manager&&this._manager.updateDependencies();
return a};g.prototype.startCapturingPointer=function(b){this._manager.setPointerCapture(b,!0)};g.prototype.stopCapturingPointer=function(b){this._manager.setPointerCapture(b,!1)};g.prototype._onUninstall=function(){this._manager?this._manager=null:c.error("This InputHandler is not registered with an InputManager")};g.prototype._handleEvent=function(b,c){var a=this._incoming[b.type];if(a)for(var f=0;f<a.length;f++){var d=a[f];if(d.match.matches(b,c)&&(d.callback(b),b.shouldStopPropagation()))break}};
return g}();m.InputHandler=n;var k=function(){function c(b,d,a){this.match=b;this._callback=d;this._handler=a}c.prototype.pause=function(){this._handler.onPause(this)};c.prototype.resume=function(){this._handler.onResume(this)};c.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(c.prototype,"callback",{get:function(){return this._callback},enumerable:!0,configurable:!0});return c}(),d=function(){function c(b,d){this.eventType=b;this._removed=!1;this._handler=d}c.prototype.emit=
function(b){if(!this._removed)this._handler.onEmit(this,b)};c.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return c}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(n,m){var e=function(){function e(c,k){void 0===k&&(k=[]);this.eventType=c;this.keyModifiers=k}e.prototype.matches=function(c,e){if(c.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;for(var d=0,g=this.keyModifiers;d<g.length;d++)if(!e.has(g[d]))return!1;
return!0};return e}();m.EventMatch=e})},"esri/views/input/InputManager":function(){define(["require","exports","./keys","./recognizers","../../core/Logger"],function(n,m,e,h,c){var k=c.getLogger("esri.views.input");n=function(){function c(b,d){this._pointerCaptures=new Map;this._nameToGroup={};this._handlers=[];this._currentPropagation=null;this._sourceEvents=new Set;this._keyModifiers=new Set;this._activeKeyModifiers=new Set;this.primaryKey=e.primaryKey;this._browserEvents=b;this._browserEvents.onEventReceived=
this._onEventReceived.bind(this);this._installRecognizers(d)}c.prototype.installHandlers=function(b,c){var a=this;if(this._nameToGroup[b])k.error("There is already an InputHandler group registered under the name `"+b+"`");else if(0===c.length)k.error("Can't register a group of zero handlers");else{var f={name:b,handlers:c.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[b]=f;for(var d=function(b){var c=f.handlers[b];
g._handlers.push(c);c.handler.onInstall({updateDependencies:function(){a.updateDependencies()},emit:function(b,f){a._emitInputEvent(c.priorityIndex,b,f)},setPointerCapture:function(b,d){a._setPointerCapture(f,c,b,d)},setEventCallback:function(a){c.eventCallback=a},setUninstallCallback:function(a){c.uninstallCallback=a}})},g=this,e=f.handlers.length-1;0<=e;e--)d(e);this.updateDependencies()}};c.prototype.uninstallHandlers=function(b){var c=this._nameToGroup[b];c?(c.handlers.forEach(function(a){a.removed=
!0;a.uninstallCallback()}),delete this._nameToGroup[b],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):k.error("There is no InputHandler group registered under the name `"+b+"`")};c.prototype.hasHandlers=function(b){return void 0!==this._nameToGroup[b]};c.prototype.updateDependencies=function(){var b=new Set,c=new Set;this._handlersPriority=[];for(var a=this._handlers.length-1;0<=a;a--){var f=this._handlers[a];f.priorityIndex=
a;this._handlersPriority.push(f)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(a=this._handlersPriority.length-1;0<=a;a--){f=this._handlersPriority[a];f.priorityIndex=a;var d=f.handler.hasSideEffects;if(!d)for(var g=0,k=f.handler.outgoingEventTypes;g<k.length;g++)if(b.has(k[g])){d=!0;break}if(d){g=0;for(k=f.handler.incomingEventMatches;g<k.length;g++){var h=k[g];b.add(h.eventType);for(var m=0,h=h.keyModifiers;m<h.length;m++){var n=h[m];e.isSystemModifier(n)||c.add(n)}}}f.active=
d}this._sourceEvents=b;this._keyModifiers=c;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};c.prototype._onEventReceived=function(b,c){"pointer-capture-lost"===b&&this._pointerCaptures.delete(c.native.pointerId);this._updateKeyModifiers(b,c);this._emitInputEventFromSource(b,c)};c.prototype._updateKeyModifiers=
function(b,c){var a=this;if(c){if("key-down"===b||"key-up"===b){var f=c.key;this._keyModifiers.has(f)&&("key-down"===b?this._activeKeyModifiers.add(f):this._activeKeyModifiers.delete(f))}var f=c.native,d=function(b,c){c?a._activeKeyModifiers.add(b):a._activeKeyModifiers.delete(b)};d("Alt",!(!f||!f.altKey));d("Ctrl",!(!f||!f.ctrlKey));d("Shift",!(!f||!f.shiftKey));d("Meta",!(!f||!f.metaKey));d("Primary",this._activeKeyModifiers.has(this.primaryKey))}};c.prototype._installRecognizers=function(b){b||
(b=h.defaults.map(function(b){return new b}));0<b.length&&this.installHandlers("default",b)};c.prototype._setPointerCapture=function(b,c,a,f){b=b.name+"-"+c.priorityIndex;c=this._pointerCaptures[a.pointerId]||new Set;this._pointerCaptures[a.pointerId]=c;f?(c.add(b),1===c.size&&this._browserEvents&&this._browserEvents.setPointerCapture(a,!0)):(c.delete(b),0===c.size&&(this._pointerCaptures.delete(a.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(a,!1)))};c.prototype._garbageCollectRemovedHandlers=
function(){this._handlers=this._handlers.filter(function(b){return!b.removed});this.updateDependencies()};c.prototype._emitInputEventFromSource=function(b,c){this._emitInputEvent(0,b,c)};c.prototype._emitInputEvent=function(b,c,a){c=new d(c,a);this._currentPropagation?this._currentPropagation.addedEvents.push(c):this._doNewPropagation(b,c)};c.prototype._doNewPropagation=function(b,c){for(var a=this._currentPropagation={events:[c],addedEvents:[],currentHandler:this._handlersPriority[b],needsHandlerGarbageCollect:!1};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=
!0;else{var f=a.events,d=[];a.addedEvents=[];for(var g=0;g<f.length;g++){var e=f[g];a.currentHandler.active&&a.currentHandler.eventCallback(e,this._activeKeyModifiers);e.shouldStopPropagation()||d.push(e)}a.events=d.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};c.prototype._compareHandlerPriority=function(b,c){if(b.handler.hasSideEffects!==c.handler.hasSideEffects)return b.handler.hasSideEffects?
1:-1;for(var a=0,f=b.handler.incomingEventMatches;a<f.length;a++)for(var d=f[a],g=function(a){if(d.eventType!==a.eventType)return"continue";var b=d.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===d.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:d.keyModifiers.length>a.keyModifiers.length?-1:1}},e=0,k=c.handler.incomingEventMatches;e<k.length;e++){var h=g(k[e]);if("object"===typeof h)return h.value}return b.priorityIndex>c.priorityIndex?-1:
1};c.prototype._sortHandlersPriority=function(b){for(var c=[],a=0;a<b.length;a++){for(var f=b[a],d=0;d<c.length&&0<=this._compareHandlerPriority(f,c[d]);)d++;c.splice(d,0,f)}return c};return c}();m.InputManager=n;var d=function(){function c(b,d){this.type=b;this.data=d;this._stopPropagation=!1;this.timestamp=Date.now()}c.prototype.stopPropagation=function(){this._stopPropagation=!0};c.prototype.shouldStopPropagation=function(){return this._stopPropagation};return c}()})},"esri/views/input/keys":function(){define(["require",
"exports","../../core/sniff"],function(n,m,e){m.primaryKey=e("mac")?"Meta":"Ctrl";var h={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(n=48;58>n;n++)h[n]=String.fromCharCode(n);for(n=1;25>n;n++)h[111+n]="F"+n;for(n=65;91>n;n++)h[n]=[String.fromCharCode(n+32),String.fromCharCode(n)];var c={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};m.eventKey=function(e){if(void 0!==
e.key)return c[e.key]||e.key;var d=h[e.keyCode];return Array.isArray(d)?e.shiftKey?d[1]:d[0]:d};m.isSystemModifier=function(c){switch(c){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define(["require","exports","./recognizers/Drag","./recognizers/PointerClickAndDrag","./recognizers/SingleAndDoubleClick"],function(n,m,e,h,c){m.defaults=[h.PointerClickAndDrag,c.SingleAndDoubleClick,e.Drag]})},"esri/views/input/recognizers/Drag":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,m,e,h,c){n=function(h){function d(){h.call(this,"recognizers.Drag",!1);this._activePointers=[];this._activePointerMap=new Map;this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}e(d,h);
d.prototype._createPayload=function(c,b){return{action:c,pointers:this._activePointers.map(function(b){return b.data}),startState:this._startState,previousState:this._previousState,currentState:b}};d.prototype._fitCircleLSQ=function(){var d=this._activePointers.map(function(b){return b.data.currentEvent});return c.fitCircleLSQ(d)};d.prototype._createDragState=function(){for(var c=this._fitCircleLSQ(),b=0,d=0,a=this._activePointers;d<a.length;d++){var f=a[d],f=this._pointerAngle(f,c)-f.initialAngle;
0>f&&(f+=2*Math.PI);b+=f}b/=this._activePointers.length;return{angle:b,radius:c.radius,center:c.center}};d.prototype._updateMultiPointer=function(c){var b=c.startEvent.native.pointerId,d=this._activePointerMap.get(b),a=!d;a&&(d={data:null,initialAngle:0},this._activePointers.push(d),this._activePointerMap.set(b,d));d.data={startEvent:c.startEvent,previousEvent:c.previousEvent,currentEvent:c.currentEvent};a&&this._isDragging&&this._updateInitialAngles();return d};d.prototype._pointerAngle=function(c,
b){var d=c.data.currentEvent;return Math.atan2(d.y-b.center.y,d.x-b.center.x)};d.prototype._updateInitialAngle=function(c,b){c.initialAngle=this._pointerAngle(c,b);this._previousState&&(c.initialAngle-=this._previousState.angle)};d.prototype._updateInitialAngles=function(){for(var c=this._createDragState(),b=0,d=this._activePointers;b<d.length;b++)this._updateInitialAngle(d[b],c)};d.prototype._emitStart=function(){this._updateInitialAngles();var c=this._createDragState();this._previousState=this._startState=
c;this._isDragging=!0;this._drag.emit(this._createPayload("start",c))};d.prototype._emitUpdate=function(){var c=this._createDragState();this._drag.emit(this._createPayload("update",c));this._previousState=c};d.prototype._emitEnd=function(){var c=this._createDragState();this._drag.emit(this._createPayload("end",c));this._startState=this._previousState=null;this._isDragging=!1};d.prototype._handlePointerDown=function(c){c=c.data;this._isDragging&&1===this._activePointers.length&&this._emitEnd();this._updateMultiPointer({startEvent:c,
previousEvent:c,currentEvent:c});this._isDragging&&this._emitUpdate()};d.prototype._removeMultiPointer=function(c){var b=this,d=c.pointerId,a=this._activePointerMap.get(d);c=function(){b._activePointerMap.delete(d);var c=b._activePointers.indexOf(a);b._activePointers.splice(c,1);b._isDragging&&b._updateInitialAngles()};this._isDragging?1===this._activePointers.length||2===this._activePointers.length?(this._emitEnd(),c()):(c(),this._emitUpdate()):c()};d.prototype._handlePointerUp=function(c){this._removeMultiPointer(c.data.native)};
d.prototype._handlePointerDrag=function(c){c=c.data;switch(c.action){case "start":this._isDragging||this._emitStart();break;case "update":this._isDragging||this._emitStart(),this._updateMultiPointer(c),this._emitUpdate()}};return d}(h.InputHandler);m.Drag=n})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(n,m){m.manhattanDistance=function(e,h){return Math.abs(h.x-e.x)+Math.abs(h.y-e.y)};m.fitCircleLSQ=function(e,h){h?(h.radius=0,h.center.x=0,h.center.y=0):
h={radius:0,center:{x:0,y:0}};if(0===e.length)return h;if(1===e.length)return h.center.x=e[0].x,h.center.y=e[0].y,h;if(2===e.length){var c=e[0],k=e[1],d=[k.x-c.x,k.y-c.y],g=d[0],d=d[1];h.radius=Math.sqrt(g*g+d*d)/2;h.center.x=(c.x+k.x)/2;h.center.y=(c.y+k.y)/2;return h}for(var b=0,l=0,a=0;a<e.length;a++)b+=e[a].x,l+=e[a].y;for(var b=b/e.length,l=l/e.length,f=e.map(function(a){return a.x-b}),m=e.map(function(a){return a.y-l}),q=k=c=0,n=0,v=g=0,a=d=0;a<f.length;a++)var p=f[a],u=m[a],w=p*p,y=u*u,c=c+
w,k=k+y,q=q+p*u,n=n+w*p,g=g+y*u,v=v+p*y,d=d+u*w;a=c;f=q;m=k;n=0.5*(n+v);g=0.5*(g+d);d=a*m-q*f;v=(n*m-g*f)/d;g=(a*g-q*n)/d;d={x:v+b,y:g+l};return{radius:Math.sqrt(v*v+g*g+(c+k)/e.length),center:d}}})},"esri/views/input/recognizers/PointerClickAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,m,e,h,c){n=function(h){function d(c,b){void 0===c&&(c=300);void 0===b&&(b=1.5);h.call(this,"recognizers.PointerClickAndDrag",!1);
this.maximumClickDelay=c;this.movementUntilDrag=b;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");this._pointerClick=this.registerOutgoing("pointer-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this));this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this));this._moveHandle.pause()}e(d,h);d.prototype._handlePointerDown=function(c){var b=
c.data;this._pointerState.set(b.native.pointerId,{startEvent:b,previousEvent:b,startTimestamp:c.timestamp,totalMovement:0,isDragging:!1,downButton:b.native.button});this.startCapturingPointer(b.native);this._moveHandle.resume()};d.prototype._createPointerDragData=function(c,b,d){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:d}};d.prototype._handlePointerMove=function(d){d=d.data;var b=this._pointerState.get(d.native.pointerId);b&&(b.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",
b,d)):(b.totalMovement+=c.manhattanDistance(d,b.previousEvent),b.totalMovement>this.movementUntilDrag&&(b.isDragging=!0,b.previousEvent=b.startEvent,this._pointerDrag.emit(this._createPointerDragData("start",b,b.startEvent)),this._pointerDrag.emit(this._createPointerDragData("update",b,d)))),b.previousEvent=d)};d.prototype._handlePointerUp=function(c){var b=c.data,d=b.native.pointerId,a=this._pointerState.get(d);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",a,b)):a.downButton===
b.native.button&&c.timestamp-a.startTimestamp<=this.maximumClickDelay&&this._pointerClick.emit(b),this._pointerState.delete(d),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return d}(h.InputHandler);m.PointerClickAndDrag=n})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(n,m,e,h,c){n=function(h){function d(c,b,d){void 0===c&&(c=
250);void 0===b&&(b=10);void 0===d&&(d=35);h.call(this,"recognizers.SingleAndDoubleClick",!1);this.maximumDoubleClickDelay=c;this.maximumDoubleClickDistance=b;this.maximumDoubleTouchDistance=d;this._pointerState=new Map;this._click=this.registerOutgoing("click");this._doubleClick=this.registerOutgoing("double-click");this.registerIncoming("pointer-click",this._handlePointerClick.bind(this))}e(d,h);d.prototype._pointerId=function(c){c=c.native;return"mouse"===c.pointerType?c.pointerId+":"+c.button:
""+c.pointerType};d.prototype._handlePointerClick=function(d){d=d.data;var b=this._pointerId(d),e=this._pointerState.get(b);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var a="touch"===d.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;c.manhattanDistance(e.event,d)>a?(this._doubleClickTimeoutExceeded(b),this._startClick(d)):(this._doubleClick.emit(d),this._pointerState.delete(b))}else this._startClick(d)};d.prototype._startClick=function(c){var b=
this,d=this._pointerId(c);this._pointerState.set(d,{event:c,doubleClickTimeout:setTimeout(function(){return b._doubleClickTimeoutExceeded(d)},this.maximumDoubleClickDelay)})};d.prototype._doubleClickTimeoutExceeded=function(c){var b=this._pointerState.get(c);this._click.emit(b.event);b.doubleClickTimeout=0;this._pointerState.delete(c)};return d}(h.InputHandler);m.SingleAndDoubleClick=n})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep",
"dojo/sniff"],function(n,m,e,h,c){var k=c("trident"),d=c("edge"),g=c("chrome"),b=c("ff"),l=c("safari");n=function(){function c(a){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=a;h.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none"}c.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction};Object.defineProperty(c.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"activeEvents",{set:function(b){var c=this,d;for(d in this._active)if(!b||!b.has(d))this._element.removeEventListener(a[d],this._active[d]),delete this._active[d];b&&b.forEach(function(b){if(!c._active[b]&&a[b]){var d=(c._eventHandlers[b]||c._handleDefault).bind(c,b);c._element.addEventListener(a[b],d);c._active[b]=d}})},enumerable:!0,configurable:!0});c.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):
(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};c.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();b.x=a.clientX-Math.round(c.left);b.y=a.clientY-Math.round(c.top);return b};c.prototype._handleKey=function(a,b){var c=e.eventKey(b);c&&"key-up"===a&&this._keyDownState.delete(c);var d={"native":b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(d.key);this._callback(a,
d)};c.prototype._handlePointerDown=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});this._callback(a,c)};c.prototype._handlePointer=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});b.preventDefault();this._callback(a,c)};c.prototype._handleMouseWheel=function(a,c){c.preventDefault();var f=c.deltaY;switch(c.deltaMode){case 0:if(k||d)f=600*(f/document.documentElement.clientHeight);break;case 1:f*=30;break;case 2:f*=900}k||d?f*=0.7:
g||l?f*=0.6:b&&(f*=1.375);var e=Math.abs(f);100<e&&(f=200*(f/e)/(1+Math.exp(-0.02*(e-100))));f=this._updateNormalizedPointerLikeEvent(c,{"native":c,x:0,y:0,deltaY:f});this._callback(a,f)};c.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};c.prototype._handleDefault=function(a,b){var c={"native":b};b.preventDefault();this._callback(a,c)};return c}();m.BrowserEventSource=n;var a={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define(function(){function n(b,c){c=c||Object.create(null);var d=document.createEvent("Event");d.initEvent(b,c.bubbles||!1,c.cancelable||!1);for(var f=2,g;f<l.length;f++)g=l[f],d[g]=c[g]||a[f];d.buttons=c.buttons||0;f=0;f=c.pressure?c.pressure:d.buttons?0.5:0;d.x=d.clientX;
d.y=d.clientY;d.pointerId=c.pointerId||0;d.width=c.width||0;d.height=c.height||0;d.pressure=f;d.tiltX=c.tiltX||0;d.tiltY=c.tiltY||0;d.pointerType=c.pointerType||"";d.hwTimestamp=c.hwTimestamp||0;d.isPrimary=c.isPrimary||!1;return d}function m(){this.array=[];this.size=0}function e(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);E&&(this.observer=new E(this.mutationWatcher.bind(this)))}function h(a){return"body /shadow-deep/ "+c(a)}function c(a){return'[touch-action\x3d"'+
a+'"]'}function k(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function d(){if(F){C.forEach(function(a){String(a)===a?(H+=c(a)+k(a)+"\n",x&&(H+=h(a)+k(a)+"\n")):(H+=a.selectors.map(c)+k(a.rule)+"\n",x&&(H+=a.selectors.map(h)+k(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=H;document.head.appendChild(a)}}function g(a){if(!p.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function b(a){if(!a.ownerDocument.contains(a))throw a=
Error("InvalidStateError"),a.name="InvalidStateError",a;}var l="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach?Map:m;m.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],
this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var s="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),q=[!1,!1,null,null,0,0,0,0,!1,!1,!1,
!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},v="undefined"!==typeof SVGElementInstance,p={pointermap:new f,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(c){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);var c=new n(a,b);b.preventDefault&&(c.preventDefault=b.preventDefault);c._target=c._target||b.target;return c},fireEvent:function(a,b){var c=
this.makeEvent(a,b);return this.dispatchEvent(c)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<s.length;d++)if(c=s[d],b[c]=a[c]||q[d],v&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance)b[c]=b[c].correspondingUseElement;a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in r))return b},propagate:function(a,b,c){for(var d=a.target,
f=[];!d.contains(a.relatedTarget)&&d!==document;)f.push(d),d=d.parentNode;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new n("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},
releaseCapture:function(a){var b=this.captureInfo[a];if(b){var c=new n("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};p.boundHandler=p.eventHandler.bind(p);
var u={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&Boolean(a.elementFromPoint)},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;if(!b&&(a=a.querySelector("shadow")))b=a.olderShadowRoot;return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),f;for(f=this.targetingShadow(d);f;){if(a=
f.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;f=this.olderShadow(f)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),y=Array.prototype.map.call.bind(Array.prototype.map),
t=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),E=window.MutationObserver||window.WebKitMutationObserver,A={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};e.prototype={watchSubtree:function(a){this.observer&&u.canTarget(a)&&this.observer.observe(a,A)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(t(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=y(a,this.findElements,this);b.push(z(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],H="",F=window.PointerEvent||window.MSPointerEvent,x=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,B=p.pointermap,J=[1,4,2,8,16],D=!1;try{D=1===(new MouseEvent("test",{buttons:1})).buttons}catch(T){}var M={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,f=b.length,g;d<f&&(g=b[d]);d++){var e=Math.abs(c-g.x),l=Math.abs(a-g.y);if(25>=e&&25>=l)return!0}},prepareEvent:function(a){var b=p.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=B.get(this.POINTER_ID);a.buttons=
0===b.which||!c?0:c.buttons;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=B.get(this.POINTER_ID),c=this.prepareEvent(a);D||(c.buttons=J[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);B.set(this.POINTER_ID,a);!b||0===b.buttons?p.down(c):p.move(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);D||this.prepareButtonsForMove(b,a);b.button=-1;B.set(this.POINTER_ID,a);p.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
B.get(this.POINTER_ID),c=this.prepareEvent(a);if(!D){var d=J[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}B.set(this.POINTER_ID,a);c.buttons&=~J[c.button];0===c.buttons?p.up(c):p.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);D||this.prepareButtonsForMove(b,a);b.button=-1;B.set(this.POINTER_ID,a);p.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);D||this.prepareButtonsForMove(b,a);b.button=
-1;p.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);p.cancel(a);this.deactivateMouse()},deactivateMouse:function(){B.delete(this.POINTER_ID)}},G=p.captureInfo,I=u.findTarget.bind(u),P=u.allShadows.bind(u),K=p.pointermap,Q,L={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){Q.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,p.listen(a,this.events),
P(a).forEach(function(a){a._scrollType=c;p.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;p.unlisten(a,this.events);P(a).forEach(function(a){a._scrollType=void 0;p.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c),c=this.touchActionToScrollType(b);d&&c?(a._scrollType=d,P(a).forEach(function(a){a._scrollType=d},this)):c?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",
XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===K.size||1===K.size&&K.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=
!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,
c=p.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=G[d]||I(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||0.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;
b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;for(var d=0,f;d<c.length;d++)f=c[d],b.call(this,this.touchToPointer(f))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b]);a=Math.abs(a["client"+c]-this.firstXY[c]);b=b>=a}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=
0,d=a.length,f;c<d&&(f=a[c]);c++)if(f.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(K.size>=b.length){var c=[];K.forEach(function(a,d){1!==d&&!this.findTouch(b,d-2)&&c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){K.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});
p.enterOver(a);p.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=K.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;p.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(p.leaveOut(c),p.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);
this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(p.up(a),p.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){p.cancel(a);p.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){K.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=M.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){var c=a.indexOf(b);-1<
c&&a.splice(c,1)}.bind(null,b,a),setTimeout(b,2500))}};Q=new e(L.elementAdded,L.elementRemoved,L.elementChanged,L);var R=p.pointermap,U=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,S={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch",
"pen","mouse"],prepareEvent:function(a){var b=a;U&&(b=p.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){R.delete(a)},MSPointerDown:function(a){R.set(a.pointerId,a);a=this.prepareEvent(a);p.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);p.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);p.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);p.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);
p.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);p.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=p.makeEvent("lostpointercapture",a);p.dispatchEvent(a)},MSGotPointerCapture:function(a){a=p.makeEvent("gotpointercapture",a);p.dispatchEvent(a)}},N,O;window.navigator.msPointerEnabled?(N=function(a){g(a);b(this);0!==p.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},O=function(a){g(a);this.msReleasePointerCapture(a)}):(N=function(a){g(a);b(this);0!==
p.pointermap.get(a).buttons&&p.setCapture(a,this)},O=function(a){g(a);p.releaseCapture(a,this)});var V=window.PointerEvent||window.MSPointerEvent;return{dispatcher:p,Installer:e,PointerEvent:n,PointerMap:f,targetFinding:u,applyGlobal:function(){d();window.PointerEvent||(window.PointerEvent=n,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),p.registerSource("ms",S)):(p.registerSource("mouse",M),void 0!==
window.ontouchstart&&p.registerSource("touch",L)),p.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:N},releasePointerCapture:{value:O}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?p.registerSource("ms",S):(p.registerSource("mouse",M),void 0!==window.ontouchstart&&p.registerSource("touch",L)),p.register(document)),window.Element&&!Element.prototype.setPointerCapture&&
(a.setPointerCapture=N.bind(a),a.releasePointerCapture=O.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,m,e,h){n=function(c){function h(){c.call(this,"PreventContextMenu",!0);this.registerIncoming("context-menu",function(c){c.data.native.preventDefault()})}e(h,c);return h}(h.InputHandler);m.PreventContextMenu=
n;Object.defineProperty(m,"__esModule",{value:!0});m.default=n})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ./actions/Pan ./actions/Zoom ./actions/Rotate ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q){return function(k){function m(a){k.call(this)}e(m,k);m.prototype.initialize=function(){this.pan=new d({navigation:this});this.zoom=new g({navigation:this});this.rotate=new b({navigation:this});this.inputManager.installHandlers("navigation",[new q.PinchRotateAndZoom(this.view),new s.MouseWheelZoom(this.view),new l.DoubleClickZoom(this.view),new a.DragPan(this.view,"primary"),new f.DragRotate(this.view,"secondary"),new l.DoubleClickZoom(this.view,["Ctrl"]),new f.DragRotate(this.view,
"primary",["Alt"])])};m.prototype.begin=function(){this._set("interacting",!0)};m.prototype.update=function(){};m.prototype.end=function(){this._set("interacting",!1)};h([c.property()],m.prototype,"inputManager",void 0);h([c.property({type:Boolean,readOnly:!0})],m.prototype,"interacting",void 0);h([c.property()],m.prototype,"pan",void 0);h([c.property()],m.prototype,"rotate",void 0);h([c.property()],m.prototype,"view",void 0);h([c.property()],m.prototype,"zoom",void 0);return m=h([c.subclass("esri.views.2d.navigation.MapViewNavigation")],
m)}(c.declared(k))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils".split(" "),function(n,m,e,h,c,k,d){return function(g){function b(b){g.call(this);this.viewpoint=d.create()}e(b,g);b.prototype.begin=function(b,a){this.navigation.begin()};b.prototype.update=function(b,a){var c=a.currentEvent.x,
g=a.currentEvent.y,e=a.previousEvent,c=e?e.x-c:-c,g=e?g-e.y:g;b.viewpoint=d.translateBy(this.viewpoint,b.viewpoint,[c||0,g||0])};b.prototype.end=function(b,a){this.navigation.end()};h([c.property()],b.prototype,"viewpoint",void 0);h([c.property()],b.prototype,"navigation",void 0);return b=h([c.subclass("esri.views.2d.navigation.actions.Pan")],b)}(c.declared(k))})},"esri/views/2d/navigation/actions/Zoom":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../math/vec2".split(" "),
function(n,m,e,h,c,k,d,g){return function(b){function l(a){b.call(this);this.viewpoint=d.create()}e(l,b);l.prototype.pinchRotateZoom=function(a,b,c,d){var g=this;if(!(0===c||0===d)&&!this.navigation.interacting){this.navigation.begin();var e=0>c?0.5:2,l=180*d/Math.PI,h=void 0,h=Math.abs(c)>Math.abs(d)?a.goTo(this._scaleAndRotateViewpoint(a,b.x,b.y,e),{}):a.goTo(this._scaleAndRotateViewpoint(a,b.x,b.y,e,l),{});h.then(function(){g.navigation.end()})}};l.prototype.scroll=function(a,b){var c=this;if(!this.navigation.interacting){this.navigation.begin();
var d=b.data.x,g=b.data.y,e=b.data.deltaY;0===e||-0===e?this.navigation.end():a.goTo(this._scaleAndRotateViewpoint(a,d,g,0>e?2:0.5),{}).then(function(){c.navigation.end()})}};l.prototype.stepScreen=function(a,b,c){this.navigation.begin();b=b.data;a.goTo(this._scaleAndRotateViewpoint(a,b.x,b.y,c),{});this.navigation.end()};l.prototype._scaleAndRotateViewpoint=function(a,b,c,e,l){var h=g.create(),k=g.create();g.set(h,b,c);d.getPaddingScreenTranslation(k,a.size,a.padding);g.add(h,h,k);b=a.animation?
a.animation.target:a.viewpoint;return l?d.scaleAndRotateBy(this.viewpoint,b,e,l,h,a.size):d.scaleBy(this.viewpoint,b,e,h,a.size)};h([c.property()],l.prototype,"viewpoint",void 0);h([c.property()],l.prototype,"navigation",void 0);return l=h([c.subclass("esri.views.2d.navigation.actions.Zoom")],l)}(c.declared(k))})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../math/vec2".split(" "),
function(n,m,e,h,c,k,d,g){return function(b){function l(a){b.call(this);this.viewpoint=d.create()}e(l,b);l.prototype.begin=function(a,b){this.navigation.begin()};l.prototype.update=function(a,b){var c=g.create(),c=g.set(c,b.currentEvent.x,a.height-b.currentEvent.y),e=b.previousEvent,l=g.create();g.set(l,e.x,a.height-e.y);c=d.angleBetween(a.state.paddedScreenCenter,c,l);a.viewpoint=d.rotateBy(this.viewpoint,a.content.viewpoint,c)};l.prototype.end=function(a,b){this.navigation.end()};h([c.property()],
l.prototype,"viewpoint",void 0);h([c.property()],l.prototype,"navigation",void 0);return l=h([c.subclass("esri.views.2d.actions.Rotate")],l)}(c.declared(k))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,m,e,h,c){n=function(h){function d(c,b){var d=this;h.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0);this.view=c;this.registerIncoming("double-click",
b,function(a){return d._handleDoubleClick(a,b)})}e(d,h);d.prototype._handleDoubleClick=function(d,b){c.eventMatchesPointerType(d.data.native,"primary")&&(this.view.navigation.zoom.stepScreen(this.view,d,b?0.5:2),d.stopPropagation())};return d}(h.InputHandler);m.DoubleClickZoom=n})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(n,m){m.eventMatchesPointerType=function(e,h){switch(h){case "primary":return"touch"===e.pointerType||0===e.button;case "secondary":return"touch"!==
e.pointerType&&2===e.button;case "tertiary":return"touch"!==e.pointerType&&1===e.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,m,e,h,c){n=function(h){function d(c,b,d){var a=this;h.call(this,"esri.views.2d.input.handlers.DragPan - "+b,!0);this.view=c;this.pointerType=b;this.registerIncoming("drag",d,function(b){return a._handleDrag(b)})}
e(d,h);d.prototype._handleDrag=function(d){var b=d.data;if(!(1<b.pointers.length)){var e=b.pointers[0];if(c.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var a=this.view.navigation.pan;switch(b.action){case "start":a.begin(this.view,e);break;case "update":a.update(this.view,e);break;case "end":a.end(this.view,e)}d.stopPropagation()}}};return d}(h.InputHandler);m.DragPan=n})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler","../../../input/handlers/support"],function(n,m,e,h,c){n=function(h){function d(c,b,d){var a=this;h.call(this,"esri.views.2d.input.handlers.DragRotate - "+b,!0);this.view=c;this.pointerType=b;this.registerIncoming("drag",d,function(b){return a._handleDrag(b)})}e(d,h);d.prototype._handleDrag=function(d){var b=d.data;if(!(1<b.pointers.length)){var e=b.pointers[0];if(c.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var a=this.view.navigation.rotate;switch(b.action){case "start":a.begin(this.view,
e);break;case "update":a.update(this.view,e);break;case "end":a.end(this.view,e)}d.stopPropagation()}}};return d}(h.InputHandler);m.DragRotate=n})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,m,e,h){n=function(c){function h(d,e){var b=this;c.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0);this.view=d;this.registerIncoming("mouse-wheel",e,function(c){return b._handleMouseWheel(c)})}
e(h,c);h.prototype._handleMouseWheel=function(c){this.view.navigation.zoom.scroll(this.view,c);c.stopPropagation()};return h}(h.InputHandler);m.MouseWheelZoom=n})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,m,e,h){n=function(c){function h(d){var e=this;c.call(this,"esri.views.2d.input.handlers.PinchZoom",!0);this.view=d;this.registerIncoming("drag",function(b){return e._handleDrag(b)})}
e(h,c);h.prototype._handleDrag=function(c){var e=c.data;if(!(2>e.pointers.length)){var b=e.currentState;this.view.navigation.zoom.pinchRotateZoom(this.view,b.center,b.radius-e.previousState.radius,b.angle);c.stopPropagation()}};return h}(h.InputHandler);m.PinchRotateAndZoom=n})},"esri/views/ui/ZoomBox":function(){define("dojo/_base/lang dojo/dom-construct ../../core/Accessor ../../core/HandleRegistry ../../core/requestAnimationFrame ../../views/2d/input/handlers/DragZoom".split(" "),function(n,m,
e,h,c,k){var d={container:"esri-zoom-box__container",overlay:"esri-zoom-box__overlay",background:"esri-zoom-box__overlay-background",box:"esri-zoom-box__outline"};return e.createSubclass({declaredClass:"esri.views.ui.ZoomBox",constructor:function(){this._event={x:0,y:0,width:0,height:0};this._handles=new h;this._redraw=this._redraw.bind(this)},initialize:function(){this.inputManager.installHandlers("zoombox",[new k(this.view,"primary",["Shift"]),new k(this.view,"primary",["Shift","Ctrl"])])},destroy:function(){this.view=
null},_container:null,_overlay:null,_backgroundShape:null,_boxShape:null,_handles:null,_event:null,properties:{view:{set:function(c){var b=this._get("view");this._handles.removeAll();this._destroyOverlay(b);this._set("view",c)}},inputManager:null,css:d,interacting:{readOnly:!0,value:!1}},start:function(c){this._createContainer();this._createOverlay();this._set("interacting",!0)},update:function(d){n.mixin(this._event,d);this._rafId||(this._rafId=c(this._redraw))},end:function(c){var b=this.view,d=
b.toMap(c.x+0.5*c.width,c.y+0.5*c.height),a=Math.min(c.width/b.width,c.height/b.height);-1===c.direction&&(a=1/a);this._destroyOverlay();this._set("interacting",!1);b.goTo({center:d,scale:b.scale*a})},_updateBox:function(c,b,e,a){var f=this._boxShape;f.setAttributeNS(null,"x",c);f.setAttributeNS(null,"y",b);f.setAttributeNS(null,"width",e);f.setAttributeNS(null,"height",a);f.setAttributeNS(null,"class",d.box)},_updateBackground:function(c,b,d,a){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(c,
b,d,a,this.view.width,this.view.height))},_createContainer:function(){var c=m.create("div",{className:d.container});this.view.root.appendChild(c);this._container=c},_createOverlay:function(){var c=this.view.width,b=this.view.height,e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 0 0 L "+c+" 0 L "+c+" "+b+" L 0 "+b+" Z");e.setAttributeNS(null,"class",d.background);c=document.createElementNS("http://www.w3.org/2000/svg","rect");b=document.createElementNS("http://www.w3.org/2000/svg",
"svg");b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttributeNS(null,"class",d.overlay);b.appendChild(e);b.appendChild(c);this._container.appendChild(b);this._backgroundShape=e;this._boxShape=c;this._overlay=b},_destroyOverlay:function(c){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null},_toSVGPath:function(c,b,d,a,f,e){d=
c+d;a=b+a;return"M 0 0 L "+f+" 0 L "+f+" "+e+" L 0 "+e+" ZM "+c+" "+b+" L "+c+" "+a+" L "+d+" "+a+" L "+d+" "+b+" Z"},_redraw:function(){this._rafId=null;if(this._overlay){var d=this._event;this._updateBox(d.x,d.y,d.width,d.height);this._updateBackground(d.x,d.y,d.width,d.height);this._rafId=c(this._redraw)}}})})},"esri/views/2d/input/handlers/DragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],
function(n,m,e,h,c){return function(h){function d(c,b,d){var a=this;h.call(this,"esri.views.2d.input.handlers.DragZoom - "+b,!0);this.view=c;this.pointerType=b;this.event={x:0,y:0,width:0,height:0,direction:1};this.registerIncoming("drag",d,function(b){return a._handleDrag(b,d)});this.registerIncoming("key-up",function(b){return a._handleKeyUp(b)})}e(d,h);d.prototype._handleKeyUp=function(c){JSON.stringify(this.event)===JSON.stringify(this.view.zoomBox._event)&&this.view.zoomBox.interacting&&(this.view.zoomBox.end(this.event),
c.stopPropagation())};d.prototype._handleDrag=function(d,b){var e=d.data;if(!(1<e.pointers.length)){var a=e.pointers[0];if(c.eventMatchesPointerType(a.startEvent.native,this.pointerType)){var f=a.currentEvent.x,h=a.currentEvent.y,k=a.startEvent.x,a=a.startEvent.y;f>k?(this.event.x=k,this.event.width=f-k):(this.event.x=f,this.event.width=k-f);h>a?(this.event.y=a,this.event.height=h-a):(this.event.y=h,this.event.height=a-h);this.event.direction=1<b.length?-1:1;f=this.view.zoomBox;switch(e.action){case "start":f.start(this.event);
break;case "update":f.update(this.event);break;case "end":f.end(this.event)}d.stopPropagation()}}};return d}(h.InputHandler)})},"esri/views/2d/layers/GraphicsLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/GraphicsView2D".split(" "),function(n,m,e,h,c,k,d){return function(g){function b(){g.apply(this,arguments);this.graphicsView=new d;this.container=this.graphicsView.container}
e(b,g);b.prototype.hitTest=function(b,a){return this.graphicsView.hitTest(b,a)};b.prototype.attach=function(){var b=this;this.layer.createGraphicsController({layerView:this}).then(function(a){b.graphicsView.graphics=a.graphics})};b.prototype.detach=function(){this.graphicsView.graphics=null};b.prototype.update=function(b){};b.prototype.moveStart=function(){};b.prototype.viewChange=function(){};b.prototype.moveEnd=function(){};return b=h([c.subclass("esri.views.2d.layers.GraphicsLayerView2D")],b)}(c.declared(k))})},
"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../layers/LayerView".split(" "),function(n,m,e,h,c,k,d){return function(d){function b(){d.apply(this,arguments);this.updating=this.updateRequested=this.moving=this.attached=!1}e(b,d);b.prototype.initialize=function(){var b=this;this.requestUpdate();k.init(this,"suspended",function(a){b.container.visible=
!a;!a&&b.updateRequested&&b.view.requestLayerViewUpdate(b)},!0);k.init(this,"fullOpacity",function(a){b.container.opacity=a},!0)};b.prototype.destroy=function(){this.updateRequested=!1;this.layer=null};b.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};b.prototype.processUpdate=function(b){this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(b))};b.prototype.canResume=function(){var b=
this.inherited(arguments),a=this.layer;if(b&&null!=a.minScale&&null!=a.minScale){var b=this.view.scale,c=a.minScale,a=a.maxScale,d=!c,e=!a;!d&&b<=c&&(d=!0);!e&&b>=a&&(e=!0);b=d&&e}return b};h([c.property()],b.prototype,"attached",void 0);h([c.property()],b.prototype,"container",void 0);h([c.property()],b.prototype,"moving",void 0);h([c.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],b.prototype,"suspended",void 0);h([c.property()],b.prototype,"updateRequested",void 0);h([c.property({dependsOn:["updateRequested"]})],
b.prototype,"updating",void 0);h([c.property()],b.prototype,"view",void 0);return b=h([c.subclass("esri.views.2d.layers.LayerView2D")],b)}(c.declared(d))})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/HandleRegistry ./LayerView2D ./support/FeaturesView2D".split(" "),function(n,m,e,h,c,k,d,g){return function(b){function d(){b.apply(this,
arguments);this._handles=new k;this.featuresView=new g;this.container=this.featuresView.container}e(d,b);d.prototype.queryGraphics=function(){return this.featuresView.queryGraphics()};d.prototype.queryFeatures=function(a){return this.featuresView.queryFeatures(a)};d.prototype.queryObjectIds=function(a){return this.featuresView.queryObjectIds(a)};d.prototype.queryFeatureCount=function(a){return this.featuresView.queryFeatureCount(a)};d.prototype.queryExtent=function(a){return this.featuresView.queryExtent(a)};
d.prototype.hitTest=function(a,b){return this.featuresView.hitTest(a,b)};d.prototype.update=function(a){};d.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a.attached&&(a._set("controller",b),a.featuresView.mapView=a.view,a.featuresView.graphics=b.graphics,a.featuresView.renderer=a.layer.renderer,a._handles.add(a.layer.watch("renderer",function(){a.featuresView.renderer=a.layer.renderer})))})};d.prototype.detach=function(){this.featuresView.graphics=
null;this.featuresView.renderer=null;this._handles.removeAll();this.controller&&(this.controller.destroy(),this._set("controller",null))};d.prototype.moveStart=function(){};d.prototype.viewChange=function(){};d.prototype.moveEnd=function(){};d.prototype.isUpdating=function(){return null==this.controller||!0===this.get("controller.isQueryInProgress")||0===this.get("controller._socketConnector.status")};h([c.property({readOnly:!0})],d.prototype,"controller",void 0);h([c.property({dependsOn:["controller.isQueryInProgress",
"controller._socketConnector.status"]})],d.prototype,"updating",void 0);return d=h([c.subclass("esri.views.2d.layers.FeatureLayerView2D")],d)}(c.declared(d))})},"esri/views/2d/layers/support/FeaturesView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../core/Error ../../../../renderers/support/renderingInfoUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../../../layers/graphics/QueryEngine".split(" "),
function(n,m,e,h,c,k,d,g,b,l,a,f,s,q,r,v){return function(f){function m(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];f.apply(this,b);this._handles=new d;this._backgroundGroup=new q;this._frontGroup=new q;this._frontObjects=new Map;this._backgroundObjects=new Map;this._queryEngine=new v;this._scale=0;this.container=new s;this.layer=null;this.container.addChild(this._backgroundGroup);this.container.addChild(this._frontGroup);this.watch("graphics",function(){return a._reset()});
this.watch("renderer",function(){return a._resymbolize()});this.watch("layer",function(){return a._setObjectId()});this.watch("mapView.scale, mapView.stationary",function(){return a._applyScale()})}e(m,f);m.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};m.prototype.queryFeatures=function(a){return this._queryEngine?this._queryEngine.queryFeatures(a):this._rejectQuery()};m.prototype.queryObjectIds=function(a){return this._queryEngine?
this._queryEngine.queryObjectIds(a):this._rejectQuery()};m.prototype.queryFeatureCount=function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};m.prototype.queryExtent=function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};m.prototype.hitTest=function(a,b){var c=this.container.hitTest(a,b);return c?g.resolve(c.graphic):null};m.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,
this),this._queryEngine.features=this.graphics,this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};m.prototype._applyScale=function(){var a=this.get("mapView.scale"),b=this.get("mapView.stationary");a!==this._scale&&b&&(this._scale=a,this._resymbolize())};m.prototype._resymbolize=function(){var a=this;this.graphics&&this.graphics.forEach(function(b){return a._resymbolizeGraphic(b)})};m.prototype._add=function(a){if(!this._frontObjects.has(a)){var b=
l.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution});if(b){var c=new r;c.graphic=a;c.renderingInfo=b;this._frontObjects.set(a,c);this._frontGroup.addChild(c);var d=b.renderer&&b.renderer.backgroundFillSymbol;d&&c.isPolygonMarkerSymbol&&(c=new r,c.graphic=a,c.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d},this._backgroundObjects.set(a,c),this._backgroundGroup.addChild(c))}}};
m.prototype._remove=function(a){var b=this._frontObjects.get(a);b&&(this._frontObjects.delete(a),this._frontGroup.removeChild(b),this._backgroundObjects.has(a)&&(b=this._backgroundObjects.get(a),this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(b)))};m.prototype._resymbolizeGraphic=function(a){if(this._frontObjects.has(a)){var b=l.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution}),c=this._frontObjects.get(a);
c.renderingInfo=b;var d=b.renderer&&b.renderer.backgroundFillSymbol,f=this._backgroundObjects.get(a);d&&c.isPolygonMarkerSymbol?(f||(f=new r,f.graphic=a,this._backgroundObjects.set(a,f),this._backgroundGroup.addChild(f)),f.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d}):!d&&f&&(this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(f))}};m.prototype._setObjectId=function(){this._queryEngine.objectIdField=this.layer.objectIdField};
m.prototype._rejectQuery=function(){return g.reject(new b("GraphicsLayerView2D","Not ready to execute query"))};m.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};h([c.property()],m.prototype,"container",void 0);h([c.property(),c.cast(k.ofType(a))],m.prototype,"graphics",void 0);h([c.property()],m.prototype,"layer",void 0);h([c.property()],m.prototype,"mapView",void 0);return m=h([c.subclass("esri.views.2d.layers.support.FeaturesView2D")],
m)}(c.declared(f))})},"esri/renderers/support/renderingInfoUtils":function(){define(["require","exports"],function(n,m){function e(c,e){if(!c||c.symbol)return null;var d=e.renderer;return c&&d&&d.getObservationRenderer?d.getObservationRenderer(c):d}function h(c,h){if(c.symbol)return c.symbol;var d=e(c,h);return d&&d.getSymbol(c,h)}m.getRenderer=e;m.getSymbol=h;m.getRenderingInfo=function(c,k){var d=e(c,k),g=h(c,k);if(!g)return null;g={renderer:d,symbol:g};if(d){d.colorInfo&&(g.color=d.getColor(c).toRgba());
if(d.sizeInfo){var b=d.getSize(c);g.size=[b,b,b]}if(d.visualVariables){for(var d=d.getVisualVariableValues(c,k),b=["proportional","proportional","proportional"],l=0;l<d.length;l++){var a=d[l],f=a.variable,m=f.type;"color"===m?g.color=a.value.toRgba():"size"===m?"outline"===f.target?g.outlineSize=a.value:(f=a.variable.axis,a=a.variable.useSymbolValue?"symbolValue":a.value,"width"===f?b[0]=a:"depth"===f?b[1]=a:"height"===f?b[2]=a:b[0]="width-and-depth"===f?b[1]=a:b[1]=b[2]=a):"opacity"===m?g.opacity=
a.value:"rotation"===m&&(g.rotationAngle=a.value)}if(isFinite(b[0])||isFinite(b[1])||isFinite(b[2]))g.size=b}}return g}})},"esri/views/2d/layers/TiledLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/TileStrategy ../engine/GeoBitmap ../engine/GeoBitmapContainer ../engine/Canvas2DContainer ./support/loader ./support/TileKey ./support/TileInfoView".split(" "),function(n,
m,e,h,c,k,d,g,b,l,a,f,s){return function(k){function m(){k.apply(this,arguments);this._numTileMapCacheRequests=0;this.container=new l}e(m,k);m.prototype.hitTest=function(a,b){return null};m.prototype.update=function(a){this.strategy.update(a);this.notifyChange("updating")};m.prototype.attach=function(){var a=this;this._tileContainer=new b;this.container.addChild(this._tileContainer);this.strategy=new d(this._tileContainer,new s(this.layer.tileInfo,this.layer.fullExtent),function(){return a.requestUpdate()},
function(b){return a._fetchTile(b)},function(b,c){return a._tileFilter(b,c)})};m.prototype.detach=function(){this.strategy.destroy();this.strategy=null;this.container.removeChild(this._tileContainer);this._tileContainer=null};m.prototype.moveStart=function(){this.requestUpdate()};m.prototype.viewChange=function(){this.requestUpdate()};m.prototype.moveEnd=function(){this.requestUpdate()};m.prototype.isUpdating=function(){return this.attached&&(0!==this._numTileMapCacheRequests||this.strategy.updating||
this.updateRequested)};m.prototype._tileFilter=function(a,b){var c=this,d=this.layer.tilemapCache;a.length=0;if(!d)return a.push.apply(a,b),a;for(var e=0;e<b.length;e++){var g=f.fromId(b[e]);switch(d.getAvailabilityUpsample(g.level,g.row,g.col,g)){case "unknown":this._numTileMapCacheRequests++;a.push(g.id);d.fetchAvailabilityUpsample(g.level,g.row,g.col,g).always(function(){c.requestUpdate();c._numTileMapCacheRequests--});break;case "available":-1===a.indexOf(g.id)&&a.push(g.id)}}return a};m.prototype._fetchTile=
function(b){b=f.fromId(b);b=this.layer.getTileUrl(b.level,b.row,b.col);return a.loadImage(b).then(function(a){return new g(a)})};h([c.property({dependsOn:["updateRequested"]})],m.prototype,"updating",void 0);return m=h([c.subclass("esri.views.2d.layers.TiledLayerView2D")],m)}(c.declared(k))})},"esri/views/2d/layers/support/TileStrategy":function(){define(["require","exports","../../../../core/LRUCache","./TileKey"],function(n,m,e,h){function c(a,b){a["delete"](b)}var k=[],d=[],g=[null,null],b=[],
l=new e(30);return function(){function a(a,b,c,d,e){void 0===e&&(e=null);this.container=a;this.tileInfoView=b;this.requestUpdate=c;this.fetchTile=d;this.tileFilter=e;this._tiles=new Map;this._tilesToRender=new Map;this._requests=new Map;this._updates=new Map;this._prevResolution=Number.POSITIVE_INFINITY;this._isStationary=!1}a.prototype.destroy=function(){this._requests&&(this._requests.forEach(function(a){a.isFulfilled()||a.cancel()}),this._tilesToRender=this._requests=null)};Object.defineProperty(a.prototype,
"updating",{get:function(){return 0!==this._requests.size||0!==this._updates.size},enumerable:!0,configurable:!0});a.prototype.update=function(a){var d=this,e=this._tiles,g=this._tilesToRender,m=this._requests,n=this._updates,u=this.tileInfoView.getTileCoverage(a.state);if(u){var w=u.lodInfo.level,y=a.state.resolution>this._prevResolution;this._createCoverageList(k,u);var t=this.tileFilter?this.tileFilter([],k):k;g.clear();for(var z=0,E=0;E<t.length;E++){var A=t[E];if(e.has(A)){var C=e.get(A);g.set(A,
C);z++;C.attached||y||this._addParentTile(A,g)}else l.has(A)?z++:m.has(A)||this._getTile(A,a),y||this._addParentTile(A,g)}var H=z===t.length;!this._isStationary&&a.stationary&&this.requestUpdate();this._isStationary=a.stationary;var F=[],x=[],B;e.forEach(function(a,b){B=h.from(b);g.has(b)||((y||!H)&&d.tileInfoView.intersects(u,B)?x.push(b):(B.level>w||!d.tileInfoView.intersects(u,B))&&F.push(b))});for(C=0;C<x.length;C++)A=x[C],g.set(A,e.get(A));for(a=0;a<F.length;a++)A=F[a],n.has(A)&&(n.get(A).cancel(A),
c(n,A)),C=e.get(A),C.dispose(),c(e,A);this.container.removeAllChildren();g.forEach(function(a){return d.container.addChild(a)});m.forEach(function(a,c){B=h.from(c);if(B.level>w||!d.tileInfoView.intersects(u,B))a.cancel(),b.push(c)});for(e=0;e<b.length;e++)A=b[e],c(m,A);b.length=0}};a.prototype.updateTiles=function(a,b){var d=this;this._tilesToRender.forEach(function(e,g){if(e.attached){var h=a(e,b);h&&(d._updates.has(g)&&(d._updates.get(g).cancel(),c(d._updates,g)),h.then(function(a){c(d._updates,
g);d._tilesToRender.has(g)&&d._tilesToRender.set(g,a)}).otherwise(function(a){c(d._updates,g);if(a&&"cancel"!==a.dojoType)throw a;}),d._updates.set(g,h))}})};a.prototype._addParentTile=function(a,b){this._getAvailableParentTile(g,a);g[0]&&!b.has(g[0])&&b.set(g[0],g[1])};a.prototype._getTile=function(a,b){var d=this,e=this.fetchTile(a,b).then(function(b){var e=h.fromId(a);d.tileInfoView.getTileTopLeft(b.topLeft,e);d.tileInfoView.getTileBottomRight(b.bottomRight,e);b.resolution=d.tileInfoView.getTileResolution(e);
d._tiles.set(a,b);c(d._requests,a);d.requestUpdate()}).otherwise(function(b){b&&"no data"===b.message&&l.insert(a,a);c(d._requests,a)});this._requests.set(a,e)};a.prototype._getAvailableParentTile=function(a,b){a[0]=null;a[1]=null;for(var c=b;c=this.tileInfoView.getTileParentId(c);)if(this._tiles.has(c)){a[0]=c;a[1]=this._tiles.get(c);break}return a};a.prototype._createCoverageList=function(a,b){a.length=0;d.length=0;var c=b.spans;if(0!==c.length){for(var e=0,g=0,l=Infinity,k=-Infinity,e=c[0].row,
g=c[c.length-1].row,m=0;m<c.length;m++)for(var n=c[m],t=n.colFrom,n=n.colTo;t<=n;t++)l=Math.min(l,t),k=Math.max(k,t);var m=b.lodInfo,t=m.level,g=e+Math.floor((g-e)/2),l=l+Math.floor((k-l)/2),z,n=g-e;0<=n&&n<c.length&&(z=h.from(t,g,m.normalizeCol(l),m.getWorldForColumn(l)),d.push({dist:0,id:z.id}));for(var E,k=0;k<c.length;k++){n=c[k];e=n.row;t=n.colFrom;for(n=n.colTo;t<=n;t++)E=Math.abs(t-l)+Math.abs(e-g),0!==E&&(z.row=e,z.col=m.normalizeCol(t),z.world=m.getWorldForColumn(t),d.push({dist:E,id:z.id}))}d.sort(function(a,
b){return a.dist-b.dist});for(c=0;c<d.length;c++)a.push(d[c].id)}};return a}()})},"esri/core/LRUCache":function(){define(["require","exports"],function(n,m){return function(){function e(e){this._cache={};this._lruQueue=[];if(0>=e)throw Error("LRU cache size must be bigger than zero!");this._maxSize=e}e.prototype.has=function(e){return void 0!==this._cache[e]};e.prototype.insert=function(e,c){null!==this.use(e)?this._cache[e]=c:(this._collect(),this._cache[e]=c,this._lruQueue.unshift(e))};e.prototype.use=
function(e){var c=this._cache[e];if(!c)return null;this._lruQueue.splice(this._lruQueue.indexOf(e),1);this._lruQueue.unshift(e);return c};e.prototype.print=function(){for(var e=0,c=this._lruQueue;e<c.length;e++){var k=c[e];console.log("key: "+k+", value: "+this._cache[k])}};e.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var e=this._lruQueue.pop(),c=this._cache[e];c&&c.dispose&&c.dispose();delete this._cache[e]}};return e}()})},"esri/views/2d/layers/support/TileKey":function(){define(["require",
"exports"],function(n,m){return function(){function e(e,c,k,d){this.level=e;this.row=c;this.col=k;this.world=d}e.from=function(h,c,k,d){var g=typeof h;return"object"===g?h:"string"===g?e.fromId(h):new e(h,c,k,d)};e.fromId=function(h){h=h.split("/");var c=h[1],k=h[2],d=h[3];return new e(parseFloat(h[0]),parseFloat(c),parseFloat(k),parseFloat(d))};e.getId=function(e,c,k,d){return"object"===typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+c+"/"+k+"/"+d};Object.defineProperty(e.prototype,"id",{get:function(){return e.getId(this)},
enumerable:!0,configurable:!0});return e}()})},"esri/views/2d/engine/GeoBitmap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Bitmap"],function(n,m,e,h){var c=[0,0],k=[0,0];return function(d){function g(b,c,a,f){void 0===c&&(c=[0,0]);void 0===a&&(a=[0,0]);void 0===f&&(f=0);d.call(this,b);this.source=b;this.topLeft=c;this.bottomRight=a;this.resolution=f}e(g,d);g.prototype.dispose=function(){};g.prototype.renderCanvas2D=function(b){var d=this.source,a=b.context;b=
b.state;var f=b.toScreen(c,this.topLeft),e=f[0],g=f[1],h=b.toScreen(k,this.bottomRight),f=h[0]-e,h=h[1]-g,m=this.width,n=this.height;b.resolution===this.resolution&&(e=Math.round(e),g=Math.round(g),f=Math.round(f),h=Math.round(h));a.clearRect(e,g,f,h);null!=d.drawImage?d.drawImage(a,0,0,m,n,e,g,f,h):a.drawImage(d,0,0,m,n,e,g,f,h)};return g}(h)})},"esri/views/2d/engine/Bitmap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(n,m,e,h){return function(c){function h(d){var e=
this;c.call(this);this.source=d;if(d instanceof HTMLImageElement)this.ready||(d.onload=function(){e.requestRender();d.onload=d.onabort=d.onerror=null},d.onerror=d.onabort=function(){d.onload=d.onabort=d.onerror=null});else if(0===d.width||0===d.height)throw Error("source cannot have size 0");}e(h,c);Object.defineProperty(h.prototype,"height",{get:function(){var c=this.source;return c instanceof HTMLImageElement?c.naturalHeight:c.height},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"ready",{get:function(){return 0<this.width},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"width",{get:function(){var c=this.source;return c instanceof HTMLImageElement?c.naturalWidth:c.width},enumerable:!0,configurable:!0});h.prototype.createElement=function(){var c=this.source;return null!=c.drawImage?document.createElement("canvas"):c};h.prototype.setElement=function(c){this.element=c};h.prototype.attach=function(c){return!0};h.prototype.detach=function(){};h.prototype.render=
function(c){this.ready&&null!=c.context&&this.renderCanvas2D(c)};h.prototype.renderCanvas2D=function(c){c=c.context;var e=this.source;null!=e.drawImage?e.drawImage(c,0,0):c.drawImage(e,0,0)};return h}(h)})},"esri/views/2d/engine/GeoBitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils ../viewpointUtils".split(" "),function(n,m,e,h,c,k,d,g){var b=[0,0];return function(c){function a(){c.apply(this,
arguments);this._offScreenCanvas=null;this._offScreenRenderParameters={budget:null,clip:[],context:null,devicePixelRatio:1,state:new k({viewpoint:g.create()}),stationary:!0}}e(a,c);a.prototype.attach=function(a){this._offScreenCanvas||(this._offScreenCanvas=document.createElement("canvas"),this._offScreenRenderParameters.context=this._offScreenCanvas.getContext("2d"));return c.prototype.attach.call(this,a)};a.prototype.detach=function(a){c.prototype.detach.call(this,a);this._offScreenCanvas=null;
this._offScreenRenderParameters.context=null};a.prototype.render=function(a){this.visible&&c.prototype.render.call(this,a)};a.prototype.prepareChildrenRenderParameters=function(a){var c=a.state,e=this._offScreenRenderParameters,g=this._offScreenCanvas,h=e.state,l=e.context,k=d.getOuterSize(b,c),m=k[0],k=k[1];h.viewpoint=c.viewpoint.clone();h.viewpoint.rotation=0;h.size=b;g.width!==m||g.height!==k?(g.width=m,g.height=k):l.clearRect(0,0,m,k);e.budget=a.budget;e.devicePixelRatio=a.devicePixelRatio;e.clip.length=
0;return e};a.prototype.detachChild=function(a,b){a.detach()};a.prototype.attachChild=function(a,b){return a.attach(b)};a.prototype.renderChild=function(a,b){a.render(b)};a.prototype.beforeRenderChildren=function(a,b){this.sortChildren(function(a,b){return b.resolution-a.resolution})};a.prototype.afterRenderChildren=function(a,b){var c=a.context,d=a.state,e=b.state,g=b.context;0===d.rotation?c.drawImage(g.canvas,0,0):(c.save(),c.translate(0.5*d.width,0.5*d.height),c.rotate(d.rotation*Math.PI/180),
c.translate(0.5*-d.width,0.5*-d.height),c.drawImage(g.canvas,0.5*(d.width-e.width),0.5*(d.height-e.height)),c.restore())};return a}(c)})},"esri/views/2d/viewStateUtils":function(){define(["require","exports"],function(n,m){var e=Math.PI/180;m.snapToPixel=function(e,c,k){var d=k.resolution;k=k.size;e[0]=d*(Math.round(c[0]/d)+0.5*(k[0]%2));e[1]=d*(Math.round(c[1]/d)+0.5*(k[1]%2));return e};m.getOuterSize=function(h,c){var k=c.rotation*e,d=Math.abs(Math.cos(k)),k=Math.abs(Math.sin(k)),g=c.size,b=g[0],
g=g[1];h[0]=Math.round(g*k+b*d);h[1]=Math.round(g*d+b*k);return h};m.getBBox=function(e,c,k){void 0===k&&(k=c.size);var d=c.center,g=d[0],d=d[1],b=k[0];k=k[1];c=0.5*c.resolution;e[0]=g-c*b;e[1]=d-c*k;e[2]=g+c*b;e[3]=d+c*k;return e};m.bboxIntersects=function(e,c){var k=e[1],d=e[2],g=e[3],b=c[0],l=c[1],a=c[3];return!(e[0]>c[2]||d<b||k>a||g<l)}})},"esri/views/2d/engine/Canvas2DContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../math/common","./Container"],function(n,
m,e,h,c){return function(c){function d(){c.apply(this,arguments)}e(d,c);d.prototype.createElement=function(){var c=document.createElement("canvas");c.setAttribute("class","esri-display-object");return c};d.prototype.setElement=function(c){this.element=c};d.prototype.render=function(d){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this.element.width=d.state.width,this.element.height=d.state.height,c.prototype.render.call(this,d)):b.display="none"};d.prototype.prepareChildrenRenderParameters=
function(c){c.context=this.element.getContext("2d");return c};d.prototype.beforeRenderChildren=function(c,b){var d=b.context,a=b.state;if(a.spatialReference.isWrappable){var f=a.width,e=a.height,k=h.toRadian(a.rotation),m=Math.abs(Math.cos(k)),n=Math.abs(Math.sin(k)),m=Math.round(f*m+e*n),a=Math.round(a.worldScreenWidth);a<m&&(f*=0.5,e*=0.5,d.translate(f,e),d.rotate(k),d.translate(-f,-e),d.rect(f-0.5*a,e-0.5*m,a,m),d.translate(f,e),d.rotate(-k),d.translate(-f,-e),d.clip())}};d.prototype.afterRenderChildren=
function(c,b){};d.prototype.attachChild=function(c,b){return c.attach(b)};d.prototype.detachChild=function(c,b){c.detach(b)};d.prototype.renderChild=function(c,b){b.context.save();c.render(b);b.context.restore()};return d}(c)})},"esri/views/2d/layers/support/loader":function(){define(["require","exports","../../../../core/promiseUtils"],function(n,m,e){m.loadImage=function(h){return e.create(function(c,e){var d=document.createElement("img");d.onload=function(){d.onload=d.onerror=null;c(d)};d.onerror=
function(){d.onload=d.onerror=null;e()};d.src=h})}})},"esri/views/2d/layers/support/TileInfoView":function(){define("require exports ./LODInfo ./TileKey ./TileSpan ./TileCoverage".split(" "),function(n,m,e,h,c,k){var d=function(){function b(b,a,c,d,e,g,h,k){this.x=b;this.ymin=a;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=g;this.leftBound=h;this.rightBound=k}b.create=function(c,a){c[1]>a[1]&&(d=[a,c],c=d[0],a=d[1]);var d=c[0],e=c[1],g=a[0],h=a[1],k=g-d,m=h-e,m=0!==m?k/m:0,n=(Math.ceil(e)-
e)*m,w=(Math.floor(e)-e)*m;return new b(d,Math.floor(e),Math.ceil(h),m,0>k?n:w,0>k?w:n,0>k?g:d,0>k?d:g);var d};b.prototype.incrRow=function(){this.x+=this.invM};b.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};b.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return b}(),g=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(b,a){var c=this;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel=
{};var d=b.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=d.map(function(c){return e.create(b,c,a)});d.forEach(function(a,b){c._infoByLevel[a.level]=g[b];c._infoByScale[a.scale]=g[b];c.scales[b]=a.scale},this);this._wrap=b.spatialReference.isWrappable}b.prototype.getTileTopLeft=function(b,a){var c=this._infoByLevel[a.level];return!c?b:c.getTileTopLeft(b,a)};b.prototype.getTileBottomRight=function(b,a){var c=this._infoByLevel[a.level];return!c?b:c.getTileBottomRight(b,
a)};b.prototype.getTileResolution=function(b){b=this._infoByLevel[b.level];return!b?-1:b.resolution};b.prototype.getTileParentId=function(b){b=h.from(b);var a=this._lodInfos.indexOf(this._infoByLevel[b.level])-1;return 0>a?null:this.getTileIdAtParent(this._lodInfos[a],b)};b.prototype.getTileIdAtParent=function(b,a){var c=h.from(a),d=this._infoByLevel[c.level];if(b.resolution<d.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+b.resolution+" is not a parent resolution of "+
d.resolution);return b.resolution===d.resolution?c.id:h.getId(b.level,Math.floor(c.row*d.resolution/b.resolution+0.01),Math.floor(c.col*d.resolution/b.resolution+0.01),c.world)};b.prototype.getTileCoverage=function(b){var a=this.getClosestInfoForScale(b.scale),f=this._wrap,e;e=Infinity;var h=-Infinity,m,n,p=[];g[0][0]=g[0][1]=g[1][1]=g[3][0]=0;g[1][0]=g[2][0]=b.size[0];g[2][1]=g[3][1]=b.size[1];for(var u=g.map(function(c){b.toMap(c,c);c[0]=a.getColumnForX(c[0]);c[1]=a.getRowForY(c[1]);return c}),
w=[],y=3,t=0;4>t;t++)u[t][1]!==u[y][1]&&(y=d.create(u[t],u[y]),e=Math.min(y.ymin,e),h=Math.max(y.ymax,h),void 0===w[y.ymin]&&(w[y.ymin]=[]),w[y.ymin].push(y)),y=t;if(null==e||null==h||100<h-e)return null;for(u=[];e<h;){null!=w[e]&&(u=u.concat(w[e]));m=Infinity;n=-Infinity;for(t=u.length-1;0<=t;t--)y=u[t],m=Math.min(m,y.getLeftCol()),n=Math.max(n,y.getRightCol());m=Math.floor(m);n=Math.floor(n);if(e>=a.first[1]&&e<=a.last[1])if(f)if(a.size[0]<a.worldSize[0]){t=Math.floor(m/a.worldSize[0]);for(y=Math.floor(n/
a.worldSize[0]);t<=y;t++)p.push(new c(e,Math.max(a.getFirstColumnForWorld(t),m),Math.min(a.getLastColumnForWorld(t),n)))}else p.push(new c(e,m,n));else m>a.last[0]||n<a.first[0]||(m=Math.max(m,a.first[0]),n=Math.min(n,a.last[0]),p.push(new c(e,m,n)));e+=1;for(t=u.length-1;0<=t;t--)y=u[t],y.ymax>=e?y.incrRow():u.splice(t,1)}return new k(a,p)};b.prototype.intersects=function(b,a){var c=h.from(a),d=this._infoByLevel[c.level],e=b.lodInfo;if(e.resolution>d.resolution){var g=h.fromId(this.getTileIdAtParent(e,
c)),k=e.denormalizeCol(g.col,g.world);return b.spans.some(function(a){return a.row===g.row&&a.colFrom<=k&&a.colTo>=k})}if(e.resolution<d.resolution){var m=b.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]),n=m[0],w=m[1],y=m[2],m=m[3],t=d.denormalizeCol(c.col,c.world),z=e.getColumnForX(d.getXForColumn(t)),E=e.getRowForY(d.getYForRow(c.row)),t=e.getColumnForX(d.getXForColumn(t+
1))-1,d=e.getRowForY(d.getYForRow(c.row+1))-1;return!(z>m||t<y||E>w||d<n)}var A=e.denormalizeCol(c.col,c.world);return b.spans.some(function(a){return a.row===c.row&&a.colFrom<=A&&a.colTo>=A})};b.prototype.getClosestInfoForScale=function(b){var a=this.scales;this._infoByScale[b]||(b=a.reduce(function(a,c,d,e){return Math.abs(c-b)<Math.abs(a-b)?c:a},a[0]));return this._infoByScale[b]};return b}()})},"esri/views/2d/layers/support/LODInfo":function(){define(["require","exports","./TileKey","../../../../geometry/support/spatialReferenceUtils"],
function(n,m,e,h){function c(c,d,e){c[0]=d;c[1]=e;return c}return function(){function k(c,e,b,h,a,f,k,m,n,v,p){this.level=c;this.resolution=e;this.origin=b;this.first=h;this.last=a;this.size=f;this.norm=k;this.worldStart=m;this.worldEnd=n;this.worldSize=v;this.wrap=p}k.create=function(d,e,b){var l=h.getInfo(d.spatialReference),a=[d.origin.x,d.origin.y],f=[d.size[0]*e.resolution,d.size[1]*e.resolution],m=[-Infinity,-Infinity],n=[Infinity,Infinity],r=[Infinity,Infinity];b&&(c(m,Math.max(0,Math.floor((b.xmin-
a[0])/f[0])),Math.max(0,Math.floor((a[1]-b.ymax)/f[1]))),c(n,Math.max(0,Math.floor((b.xmax-a[0])/f[0])),Math.max(0,Math.floor((a[1]-b.ymin)/f[1]))),c(r,n[0]-m[0]+1,n[1]-m[1]+1));var v;l?(d=[Math.ceil(Math.round(2*l.origin[1]/e.resolution)/d.size[0]),r[1]],l=[Math.floor((l.origin[0]-a[0])/f[0]),m[1]],b=[d[0]-l[0]-1,n[1]],v=!0):(l=m,b=n,d=r,v=!1);return new k(e.level,e.resolution,a,m,n,r,f,l,b,d,v)};k.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+
1)%e):c%e};k.prototype.denormalizeCol=function(c,e){return!this.wrap?c:this.worldSize[0]*e+c};k.prototype.getWorldForColumn=function(c){return!this.wrap?0:Math.floor(c/this.worldSize[0])};k.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};k.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};k.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};k.prototype.getXForColumn=function(c){return this.origin[0]+
c*this.norm[0]};k.prototype.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};k.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};k.prototype.getTileTopLeft=function(d,g){var b=e.from(g);return c(d,this.getXForColumn(this.denormalizeCol(b.col,b.world)),this.getYForRow(b.row))};k.prototype.getTileBottomRight=function(d,g){var b=e.from(g);return c(d,this.getXForColumn(this.denormalizeCol(b.col,b.world)+1),this.getYForRow(b.row+1))};return k}()})},"esri/views/2d/layers/support/TileSpan":function(){define(["require",
"exports"],function(n,m){return function(){return function(e,h,c){this.row=e;this.colFrom=h;this.colTo=c}}()})},"esri/views/2d/layers/support/TileCoverage":function(){define(["require","exports"],function(n,m){return function(){return function(e,h){this.lodInfo=e;this.spans=h}}()})},"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Popup/templates/PopupRenderer.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.container}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3cdiv class\x3d"${_css.loadingSpinnerContainer}"\x3e\x3cspan class\x3d"${_css.iconLoading} ${_css.spinner}"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_contentNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/Attribution/templates/Attribution.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.sources}" data-dojo-attach-point\x3d"_sourcesNode"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.poweredBy}"\x3ePowered by \x3ca target\x3d"_blank" href\x3d"http://www.esri.com/" class\x3d"${_css.link}"\x3eEsri\x3c/a\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Compass/templates/Compass.html":'\x3cdiv role\x3d"button" tabindex\x3d"0"\x3e\r\n  \x3cspan data-dojo-attach-point\x3d"_iconNode" aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.rotationIcon}" title\x3d"${_i18n.reset}"\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"${_css.text}"\x3e${_i18n.reset}\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/NavigationToggle/templates/NavigationToggle.html":'\x3cdiv data-dojo-attach-point\x3d"_navigationToggleNode" title\x3d"${_i18n.toggle}"\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.panButton}"\r\n       data-dojo-attach-point\x3d"_panButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.panIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.rotateButton}"\r\n       data-dojo-attach-point\x3d"_rotateButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.rotationIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Zoom/templates/Zoom.html":'\x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.disabled}"\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomInNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomIn}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomInIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomIn}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomOutNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomOut}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomOutIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomOut}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n",
"url:esri/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n","*now":function(n){n(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/watchUtils ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./input/ViewEvents ./input/InputManager ./input/BrowserEventSource ./input/handlers/PreventContextMenu ./2d/navigation/MapViewNavigation ./ui/ZoomBox ./support/screenshotUtils".split(" "),function(n,
m,e,h,c,k,d,g,b,l,a,f,s,q,r,v,p,u,w,y,t,z){return function(a){function l(b){var c=this;a.call(this,b);this._graphicsView=null;this._mapViewHandles=new d;this.inputManager=this._viewEvents=null;this.watch("stationary",function(a){c.stage&&(c.stage.stationary=a)},!0);this.watch("state.viewpoint",function(a){c.stage&&(c.stage.state=c.state)},!0);this.watch("ready",function(a){a?c._setupStage():c._destroyStage()});g.whenFalse(this,"ready",function(){c.stage&&c.stage.removeAllChildren()});this.allLayerViews.on("change",
function(a){})}e(l,a);Object.defineProperty(l.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||this.zoomBox&&this.zoomBox.interacting||!1},enumerable:!0,configurable:!0});l.prototype.hitTest=function(a,b){if(!this.ready)return null;var d;d=null!=a&&a.x?a:new f({x:a,y:b});var e=this.toMap(d),g=[this._graphicsView];g.push.apply(g,this.allLayerViews.toArray().reverse());return c(g.map(function(a){return!a||!a.hitTest?null:a.hitTest(d.x,d.y)})).then(function(a){return{screenPoint:d,
results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:e,graphic:a}})}})};l.prototype.takeScreenshot=function(a){if(!this.ready)return b.reject("Map view cannot be used before it is ready");a=z.adjustScreenshotSettings(a,this);return this.stage.takeScreenshot(a)};l.prototype.on=function(a,b,c){this._viewEvents||(this._viewEvents=new v.ViewEvents(this));var d=this._viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};l.prototype._disconnect=function(){this.zoomBox.destroy();
this._set("zoomBox",null);this.inputManager=this.navigation=null;this._source&&(this._source.destroy(),this._source=null);this._viewEvents&&(this._viewEvents.disconnect(),this._viewEvents=null)};l.prototype._connect=function(){this._viewEvents||(this._viewEvents=new v.ViewEvents(this));this._source||(this._source=new u.BrowserEventSource(this.surface));this.inputManager||(this.inputManager=new p.InputManager(this._source),this.inputManager.installHandlers("prevent-context-menu",[new w.PreventContextMenu]));
this.navigation||(this.navigation=new y({view:this,inputManager:this.inputManager}));this._get("zoomBox")||this._set("zoomBox",new t({view:this,inputManager:this.inputManager}));this._viewEvents.inputManager||this._viewEvents.connect(this.inputManager)};l.prototype._setupStage=function(){var a=this;this.stage||(this.stage=new q(this._get("surface")),this.stage.state=this.state,this._graphicsView=new r({view:this,graphics:this.graphics}),this.stage.addChild(this._graphicsView.container),this._updateStageChildren(),
this._mapViewHandles.add(this.allLayerViews.on("change",function(){return a._updateStageChildren()}),"allLayerViews"),this._mapViewHandles.add([g.whenNot(this,"ready",function(){return a._disconnect()}),g.when(this,"ready",function(){return a._connect()})],"inputHandlers"))};l.prototype._destroyStage=function(){this.stage||(this._graphicsView.destroy(),this._graphicsView=null,this._mapViewHandles.remove("allLayerViews"),this._mapViewHandles.remove("inputHandlers"),this._disconnect(),this.stage.removeAllChildren(),
this.stage.destroy(),this.stage=null)};l.prototype._updateStageChildren=function(){var a=this;this.stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,c){a.stage.addChildAt(b.container,c)});this.stage.addChild(this._graphicsView.container)};h([k.property()],l.prototype,"inputManager",void 0);h([k.property()],l.prototype,"navigation",void 0);h([k.property({dependsOn:["navigation.interacting","zoomBox.interacting"],type:Boolean})],l.prototype,
"interacting",null);h([k.property({type:s})],l.prototype,"ui",void 0);h([k.property({type:t,readOnly:!0})],l.prototype,"zoomBox",void 0);return l=h([k.subclass("esri.views.MapView")],l)}(k.declared(l,a))});