//>>built
define("dgrid1/extensions/CompoundColumns",["dojo/_base/lang","dojo/_base/declare","dojo/sniff","dojo/query","../util/misc"],function(r,s,t,p,u){return s(null,{configStructure:function(){function a(c,n,l,k){var g=0,m=function(){},q,h;u.each(c,function(d,p){"string"===typeof d&&(d={label:d});!(c instanceof Array)&&!d.field&&(d.field=p);h=(q=d.children)&&!1!==d.showChildHeaders;d.parentColumn=k;q?null==d.id?d.id=(k&&k.id||n-1)+"-"+f.length:k&&k.id&&(d.id=k.id+"-"+d.id):(e.push(d),f.push(r.delegate(d,
{renderHeaderCell:m})),g++);h||(d=r.delegate(d,{rowSpan:-n}));q&&(g+=d.colSpan=a(q,n+1,h,d));l&&(b[n]||(b[n]=[])).push(d)},this);return g}var c=this.subRows&&this.subRows[0]||this.columns,b=[[]],f=b[0],e=[];b[0].className="dgrid-spacer-row";a(c,1,!0);var c=b.length,l,g,h,m;for(l=0;l<c;l++){h=b[l];for(g=0;g<h.length;g++)m=h[g],1>m.rowSpan&&(m.rowSpan+=c)}e=[e];e.headerRows=b;this.subRows=e;this.inherited(arguments)},renderHeader:function(){var a,c=this.subRows[0],b=this.subRows.headerRows[0];this.inherited(arguments);
for(a=c.length;a--;)c[a].headerNode=b[a].headerNode},_findSortArrowParent:function(){var a=this.inherited(arguments),c=p(".dgrid-spacer-row",this.headerNode)[0];if(a&&c.contains(a))return a=a.columnId,a=p(".dgrid-column-"+a,this.headerNode),a[a.length-1]},_configColumn:function(a,c,b){var f=a.parentColumn,e=a.id;f&&(e=0===e.indexOf(b)?e.substring(b.length):e,b=f.id+"-",a.id=b+e);this.inherited(arguments,[a,c,b])},cell:function(a,c){if("object"!==typeof c){var b=this.column(c);b&&(c=b.id)}return this.inherited(arguments,
[a,c])},column:function(a){var c=this.inherited(arguments);if(null==c&&"object"!==typeof a){var b="-"+a,f=b.length,e;for(e in this.columns)if(-1!==e.indexOf(b,e.length-f))return this.columns[e]}return c},_updateCompoundHiddenStates:function(a,c){var b=this.columns[a],f;if(!(b&&b.hidden===c))for(;b&&b.parentColumn;){b=b.parentColumn;if(f=b.colSpan+=c?-1:1)b.headerNode.colSpan=f;1===f&&!c?this._showColumn(b.id):!f&&c&&this._hideColumn(b.id)}},_hideColumn:function(a){var c=this;this._updateCompoundHiddenStates(a,
!0);this.inherited(arguments);t("ff")&&(this.headerNode.style.display="none",setTimeout(function(){c.headerNode.style.display="";c.resize()},0))},_showColumn:function(a){this._updateCompoundHiddenStates(a,!1);this.inherited(arguments)},_getResizedColumnWidths:function(){var a=0,c=this.columns,b;for(b in c)a+=c[b].headerNode.offsetWidth;return{totalWidth:a,lastColId:this.subRows[0][this.subRows[0].length-1].id}}})});